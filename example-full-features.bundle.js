!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["bgis-core"]=e():t["bgis-core"]=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),n="propertychange",o=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){var o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;var i=void 0;if(n>0){for(i=1;i<o;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<o;++i)if(t[i]<=e)return i}else for(i=1;i<o;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return o-1}function s(t,e){for(var n=Array.isArray(e)?e:[e],o=n.length,i=0;i<o;i++)t[t.length]=n[i]}function a(t,e){var n=t.length;if(n!==e.length)return!1;for(var o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function l(){return!0}function u(){return!1}function c(){}var h="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,i=arguments.length;o<i;++o){var r=arguments[o];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n};function p(t){for(var e in t)delete t[e]}var d,f="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e},g=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const v=function(t){function n(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return g(n,t),n.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),o=n[t]||(n[t]=[]);-1===o.indexOf(e)&&o.push(e)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new e(t):t,o=n.type;n.target||(n.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[o];if(r){var s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});o in s||(s[o]=0,a[o]=0),++s[o];for(var l=0,u=r.length;l<u;++l)if(!1===(i="handleEvent"in r[l]?r[l].handleEvent(n):r[l].call(this,n))||n.propagationStopped){i=!1;break}if(--s[o],0===s[o]){var h=a[o];for(delete a[o];h--;)this.removeEventListener(o,c);delete s[o]}return i}},n.prototype.disposeInternal=function(){this.listeners_&&p(this.listeners_)},n.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},n.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},n.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var o=n.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[o]=c,++this.pendingRemovals_[t]):(n.splice(o,1),0===n.length&&delete this.listeners_[t]))}},n}(o),_="change",y="error",m="contextmenu",w="click",C="keydown",b="keypress",x="resize",E="touchmove",T="wheel";function P(t,e,n,o,i){if(o&&o!==t&&(n=n.bind(o)),i){var r=n;n=function(){t.removeEventListener(e,n),r.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function O(t,e,n,o){return P(t,e,n,o,!0)}function S(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),p(t))}var R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return R(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(_)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=P(this,t[i],e);return o}return P(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var o=t.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=O(this,t[i],e)}else n=O(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)S(t[e]);else S(t)}(n);else if(Array.isArray(t))for(var o=0,i=t.length;o<i;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},e}(v);M.prototype.on,M.prototype.once,M.prototype.un;const A=M;function j(){return function(){throw new Error("Unimplemented abstract method.")}()}var I=0;function L(t){return t.ol_uid||(t.ol_uid=String(++I))}var F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.key=n,i.oldValue=o,i}return F(e,t),e}(e);const z=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,L(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return F(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&h({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var o;o="change:"+t,this.dispatchEvent(new k(o,t,e)),o=n,this.dispatchEvent(new k(o,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var o=this.values_||(this.values_={});if(n)o[t]=e;else{var i=o[t];o[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&h(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(A),D="opacity",G="visible",N="extent",K="zIndex",Z="maxResolution",V="minResolution",H="maxZoom",X="minZoom",U="source";var W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(t){function e(e){var n=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.6.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,o)||this).code=e,n.name="AssertionError",n.message=o,n}return W(e,t),e}(Error);function q(t,e){if(!t)throw new B(e)}function Y(t,e,n){return Math.min(Math.max(t,e),n)}var Q="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},$="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function J(t,e,n,o,i,r){var s=i-n,a=r-o;if(0!==s||0!==a){var l=((t-n)*s+(e-o)*a)/(s*s+a*a);l>1?(n=i,o=r):l>0&&(n+=s*l,o+=a*l)}return tt(t,e,n,o)}function tt(t,e,n,o){var i=n-t,r=o-e;return i*i+r*r}function et(t){return 180*t/Math.PI}function nt(t){return t*Math.PI/180}function ot(t,e){var n=t%e;return n*e<0?n+e:n}function it(t,e,n){return t+n*(e-t)}var rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const st=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=h({},e);return"object"==typeof e.properties&&(delete o.properties,h(o,e.properties)),o.opacity=void 0!==e.opacity?e.opacity:1,q("number"==typeof o.opacity,64),o.visible=void 0===e.visible||e.visible,o.zIndex=e.zIndex,o.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,o.minResolution=void 0!==e.minResolution?e.minResolution:0,o.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,o.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return rt(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Y(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return j()},e.prototype.getLayerStatesArray=function(t){return j()},e.prototype.getExtent=function(){return this.get(N)},e.prototype.getMaxResolution=function(){return this.get(Z)},e.prototype.getMinResolution=function(){return this.get(V)},e.prototype.getMinZoom=function(){return this.get(X)},e.prototype.getMaxZoom=function(){return this.get(H)},e.prototype.getOpacity=function(){return this.get(D)},e.prototype.getSourceState=function(){return j()},e.prototype.getVisible=function(){return this.get(G)},e.prototype.getZIndex=function(){return this.get(K)},e.prototype.setExtent=function(t){this.set(N,t)},e.prototype.setMaxResolution=function(t){this.set(Z,t)},e.prototype.setMinResolution=function(t){this.set(V,t)},e.prototype.setMaxZoom=function(t){this.set(H,t)},e.prototype.setMinZoom=function(t){this.set(X,t)},e.prototype.setOpacity=function(t){q("number"==typeof t,64),this.set(D,t)},e.prototype.setVisible=function(t){this.set(G,t)},e.prototype.setZIndex=function(t){this.set(K,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(z),at="precompose",lt="rendercomplete",ut="undefined",ct="ready";var ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function pt(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var o=e.zoom;return o>t.minZoom&&o<=t.maxZoom}const dt=function(t){function e(e){var n=this,o=h({},e);delete o.source,(n=t.call(this,o)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(U,n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return ht(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(U)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ut},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(S(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=P(t,_,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(S(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(S(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=P(t,at,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);q(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=P(this,_,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(U,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(st),ft="preload",gt="useInterimTilesOnError";var vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _t=function(t){function e(e){var n=this,o=e||{},i=h({},o);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==o.preload?o.preload:0),n.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),n}return vt(e,t),e.prototype.getPreload=function(){return this.get(ft)},e.prototype.setPreload=function(t){this.set(ft,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(gt)},e.prototype.setUseInterimTilesOnError=function(t){this.set(gt,t)},e}(dt);var yt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mt=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return yt(e,t),e.prototype.getFeatures=function(t){return j()},e.prototype.prepareFrame=function(t){return j()},e.prototype.renderFrame=function(t,e){return j()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(o,i){var r=this.loadedTileCallback.bind(this,n,o);return t.forEachLoadedTile(e,o,i,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i){},e.prototype.getDataAtPixel=function(t,e,n){return j()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(_,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ct&&t.changed()},e}(A);var wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ct=function(t){function e(e,n,o,i){var r=t.call(this,e)||this;return r.inversePixelTransform=n,r.frameState=o,r.context=i,r}return wt(e,t),e}(e);var bt,xt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Et=-1!==xt.indexOf("firefox"),Tt=(-1!==xt.indexOf("safari")&&xt.indexOf("chrom"),-1!==xt.indexOf("webkit")&&-1==xt.indexOf("edge")),Pt=-1!==xt.indexOf("macintosh"),Ot="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,St="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Rt="undefined"!=typeof Image&&Image.prototype.decode,Mt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function At(t,e){var n=e[0],o=e[1];return e[0]=t[0]*n+t[2]*o+t[4],e[1]=t[1]*n+t[3]*o+t[5],e}function jt(t,e,n,o,i,r,s,a){var l=Math.sin(r),u=Math.cos(r);return t[0]=o*u,t[1]=i*l,t[2]=-o*l,t[3]=i*u,t[4]=s*o*u-a*o*l+e,t[5]=s*i*l+a*i*u+n,t}function It(t,e){var n,o=(n=e)[0]*n[3]-n[1]*n[2];q(0!==o,32);var i=e[0],r=e[1],s=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/o,t[1]=-r/o,t[2]=-s/o,t[3]=i/o,t[4]=(s*u-a*l)/o,t[5]=-(i*u-r*l)/o,t}new Array(6);const Lt="top-left";function Ft(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,o=t.length;n<o;++n)Vt(e,t[n]);return e}function kt(t,e,n){var o,i;return(o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*o+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function zt(t,e){return Dt(t,e[0],e[1])}function Dt(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Gt(t,e){var n=t[0],o=t[1],i=t[2],r=t[3],s=e[0],a=e[1],l=0;return s<n?l|=16:s>i&&(l|=4),a<o?l|=8:a>r&&(l|=2),0===l&&(l=1),l}function Nt(t,e,n,o,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=o,i):[t,e,n,o]}function Kt(t){return Nt(1/0,1/0,-1/0,-1/0,t)}function Zt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Vt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Ht(t,e,n,o,i){for(;n<o;n+=i)Xt(t,e[n],e[n+1]);return t}function Xt(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Ut(t,e){var n;return(n=e(Bt(t)))||(n=e(qt(t)))||(n=e(ne(t)))?n:(n=e(ee(t)))||!1}function Wt(t){var e=0;return re(t)||(e=oe(t)*Jt(t)),e}function Bt(t){return[t[0],t[1]]}function qt(t){return[t[2],t[1]]}function Yt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Qt(t,e){var n;return"bottom-left"===e?n=Bt(t):"bottom-right"===e?n=qt(t):e===Lt?n=ee(t):"top-right"===e?n=ne(t):q(!1,13),n}function $t(t,e,n,o,i){var r=e*o[0]/2,s=e*o[1]/2,a=Math.cos(n),l=Math.sin(n),u=r*a,c=r*l,h=s*a,p=s*l,d=t[0],f=t[1],g=d-u+p,v=d-u-p,_=d+u-p,y=d+u+p,m=f-c-h,w=f-c+h,C=f+c+h,b=f+c-h;return Nt(Math.min(g,v,_,y),Math.min(m,w,C,b),Math.max(g,v,_,y),Math.max(m,w,C,b),i)}function Jt(t){return t[3]-t[1]}function te(t,e,n){var o=n||[1/0,1/0,-1/0,-1/0];return ie(t,e)?(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]):Kt(o),o}function ee(t){return[t[0],t[3]]}function ne(t){return[t[2],t[3]]}function oe(t){return t[2]-t[0]}function ie(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function re(t){return t[2]<t[0]||t[3]<t[1]}function se(t,e,n,o){var i=n&&n.length?n.shift():St?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d",o)}function ae(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function le(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var ue=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ce=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return ue(e,t),e.prototype.useContainer=function(t,e,n){var o,i,r=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===r&&(a=t.firstElementChild)instanceof HTMLCanvasElement&&(i=a.getContext("2d")),!i||0!==i.canvas.width&&i.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=i,this.containerReused=!0),!this.container){(o=document.createElement("div")).className=r;var s=o.style;s.position="absolute",s.width="100%",s.height="100%";var a=(i=se()).canvas;o.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=o,this.context=i}},e.prototype.clipUnrotated=function(t,e,n){var o=ee(n),i=ne(n),r=qt(n),s=Bt(n);At(e.coordinateToPixelTransform,o),At(e.coordinateToPixelTransform,i),At(e.coordinateToPixelTransform,r),At(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;At(a,o),At(a,i),At(a,r),At(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var o=this.getLayer();if(o.hasListener(t)){var i=new Ct(t,this.inversePixelTransform,n,e);o.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,n,o,i,r,s){var a=i/2,l=r/2,u=o/e,c=-u,h=-t[0]+s,p=-t[1];return jt(this.tempTransform,a,l,u,c,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var o,i=At(this.inversePixelTransform,t.slice()),r=this.context,s=this.getLayer().getExtent();if(s&&!zt(s,At(e.pixelToCoordinateTransform,t.slice())))return null;try{var a=Math.round(i[0]),l=Math.round(i[1]),u=document.createElement("canvas"),c=u.getContext("2d");u.width=1,u.height=1,c.clearRect(0,0,1,1),c.drawImage(r.canvas,a,l,1,1,0,0,1,1),o=c.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:o}return 0===o[3]?null:o},e}(mt);var he=function(){function t(t,e,n,o){this.minX=t,this.maxX=e,this.minY=n,this.maxY=o}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function pe(t,e,n,o,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=o,i):new he(t,e,n,o)}const de=he;var fe={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ge={};ge[fe.DEGREES]=2*Math.PI*6370997/360,ge[fe.FEET]=.3048,ge[fe.METERS]=1,ge[fe.USFEET]=1200/3937;const ve=fe,_e=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ge[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var ye=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=6378137,we=Math.PI*me,Ce=[-we,-we,we,we],be=[-180,-85,180,85],xe=me*Math.log(Math.tan(Math.PI/2)),Ee=function(t){function e(e){return t.call(this,{code:e,units:ve.METERS,extent:Ce,global:!0,worldExtent:be,getPointResolution:function(t,e){return t/Q(e[1]/me)}})||this}return ye(e,t),e}(_e),Te=[new Ee("EPSG:3857"),new Ee("EPSG:102100"),new Ee("EPSG:102113"),new Ee("EPSG:900913"),new Ee("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oe=[-180,-90,180,90],Se=6378137*Math.PI/180,Re=function(t){function e(e,n){return t.call(this,{code:e,units:ve.DEGREES,extent:Oe,axisOrientation:n,global:!0,metersPerUnit:Se,worldExtent:Oe})||this}return Pe(e,t),e}(_e),Me=[new Re("CRS:84"),new Re("EPSG:4326","neu"),new Re("urn:ogc:def:crs:OGC:1.3:CRS84"),new Re("urn:ogc:def:crs:OGC:2:84"),new Re("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],Ae={},je={};function Ie(t,e,n){var o=t.getCode(),i=e.getCode();o in je||(je[o]={}),je[o][i]=n}var Le=6371008.8;function Fe(t,e,n){var o=n||Le,i=nt(t[1]),r=nt(e[1]),s=(r-i)/2,a=nt(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*o*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function ke(t,e,n,o){var i=o||Le,r=nt(t[1]),s=nt(t[0]),a=e/i,l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(n));return[et(s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l))),et(l)]}function ze(t,e,n){var o;if(void 0!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];o=e}else o=t.slice();return o}function De(t,e,n){if(void 0!==e&&t!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}return t}function Ge(t){!function(t,e){Ae[t]=e}(t.getCode(),t),Ie(t,t,ze)}function Ne(t){return"string"==typeof t?Ae[e=t]||Ae[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Ke(t,e,n,o){var i,r=(t=Ne(t)).getPointResolutionFunc();if(r)i=r(e,n),o&&o!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/ge[o]);else{var s=t.getUnits();if(s==ve.DEGREES&&!o||o==ve.DEGREES)i=e;else{var a,l=Xe(t,Ne("EPSG:4326"));if(l===De&&s!==ve.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(Fe((u=l(u,u,2)).slice(0,2),u.slice(2,4))+Fe(u.slice(4,6),u.slice(6,8)))/2}void 0!==(a=o?ge[o]:t.getMetersPerUnit())&&(i/=a)}}return i}function Ze(t){!function(t){t.forEach(Ge)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Ie(e,t,ze)}))}))}function Ve(t,e){return t?"string"==typeof t?Ne(t):t:Ne(e)}function He(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Xe(t,e)===ze)&&n}function Xe(t,e){var n=function(t,e){var n;return t in je&&e in je[t]&&(n=je[t][e]),n}(t.getCode(),e.getCode());return n||(n=De),n}function Ue(t,e){return Xe(Ne(t),Ne(e))}function We(t,e,n){return Ue(e,n)(t,void 0,t.length)}var Be,qe,Ye,Qe=null;function $e(){return Qe}function Je(t,e){return t}function tn(t,e){return t}function en(t,e){return t}Ze(Te),Ze(Me),Be=Te,qe=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i){r[s]=we*t[s]/180;var a=me*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>xe?a=xe:a<-xe&&(a=-xe),r[s+1]=a}return r},Ye=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i)r[s]=180*t[s]/we,r[s+1]=360*Math.atan(Math.exp(t[s+1]/me))/Math.PI-90;return r},Me.forEach((function(t){Be.forEach((function(e){Ie(t,e,qe),Ie(e,t,Ye)}))}));var nn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),on=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new de(0,0,0,0),n}return nn(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),o=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!o},e.prototype.getTile=function(t,e,n,o){var i=o.pixelRatio,r=o.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,n,i,r);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,n,o){return!!this.isDrawableTile(o)&&t.prototype.loadedTileCallback.call(this,e,n,o)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],o=t.viewState,r=o.projection,s=o.resolution,a=o.center,l=o.rotation,u=t.pixelRatio,c=this.getLayer(),p=c.getSource(),d=p.getRevision(),f=p.getTileGridForProjection(r),g=f.getZForResolution(s,p.zDirection),v=f.getResolution(g),_=t.extent,y=n.extent&&en(n.extent);y&&(_=te(_,en(n.extent)));var m=p.getTilePixelRatio(u),w=Math.round(t.size[0]*m),C=Math.round(t.size[1]*m);if(l){var b=Math.round(Math.sqrt(w*w+C*C));w=b,C=b}var x=v*w/2/m,E=v*C/2/m,T=[a[0]-x,a[1]-E,a[0]+x,a[1]+E],P=f.getTileRangeForExtentAndZ(_,g),O={};O[g]={};var S=this.createLoadedTileFinder(p,r,O),R=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var A=P.minX;A<=P.maxX;++A)for(var j=P.minY;j<=P.maxY;++j){var I=this.getTile(g,A,j,t);if(this.isDrawableTile(I)){var F=L(this);if(2==I.getState()){O[g][I.tileCoord.toString()]=I;var k=I.inTransition(F);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(F,t.time))continue}var z=f.getTileCoordChildTileRange(I.tileCoord,M,R),D=!1;z&&(D=S(g+1,z)),D||f.forEachTileCoordParentTileRange(I.tileCoord,S,M,R)}var G=v/s;jt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,l,-w/2,-C/2);var N=function(t){var e="matrix("+t.join(", ")+")";if(St)return e;var n=bt||(bt=document.createElement("div"));return n.style.transform=e,n.style.transform}(this.pixelTransform);this.useContainer(e,N,n.opacity);var K=this.context,Z=K.canvas;It(this.inversePixelTransform,this.pixelTransform),jt(this.tempTransform,w/2,C/2,G,G,0,-w/2,-C/2),Z.width!=w||Z.height!=C?(Z.width=w,Z.height=C):this.containerReused||K.clearRect(0,0,w,C),y&&this.clipUnrotated(K,t,y),h(K,p.getContextOptions()),this.preRender(K,t),this.renderedTiles.length=0;var V,H,X,U=Object.keys(O).map(Number);U.sort(i),1!==n.opacity||this.containerReused&&!p.getOpaque(t.viewState.projection)?(V=[],H=[]):U=U.reverse();for(var W=U.length-1;W>=0;--W){var B=U[W],q=p.getTilePixelSize(B,u,r),Y=f.getResolution(B)/v,Q=q[0]*Y*G,$=q[1]*Y*G,J=f.getTileCoordForCoordAndZ(ee(T),B),tt=f.getTileCoordExtent(J),et=At(this.tempTransform,[m*(tt[0]-T[0])/v,m*(T[3]-tt[3])/v]),nt=m*p.getGutterForProjection(r),ot=O[B];for(var it in ot){var rt=(I=ot[it]).tileCoord,st=J[1]-rt[1],at=Math.round(et[0]-(st-1)*Q),lt=J[2]-rt[2],ut=Math.round(et[1]-(lt-1)*$),ct=at-(A=Math.round(et[0]-st*Q)),ht=ut-(j=Math.round(et[1]-lt*$)),pt=g===B;if(!(k=pt&&1!==I.getAlpha(L(this),t.time)))if(V){K.save(),X=[A,j,A+ct,j,A+ct,j+ht,A,j+ht];for(var dt=0,ft=V.length;dt<ft;++dt)if(g!==B&&B<H[dt]){var gt=V[dt];K.beginPath(),K.moveTo(X[0],X[1]),K.lineTo(X[2],X[3]),K.lineTo(X[4],X[5]),K.lineTo(X[6],X[7]),K.moveTo(gt[6],gt[7]),K.lineTo(gt[4],gt[5]),K.lineTo(gt[2],gt[3]),K.lineTo(gt[0],gt[1]),K.clip()}V.push(X),H.push(B)}else K.clearRect(A,j,ct,ht);this.drawTileImage(I,t,A,j,ct,ht,nt,pt,n.opacity),V&&!k?(K.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,p,I)}}return this.renderedRevision=d,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Zt(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,p,f,u,r,_,g,c.getPreload()),this.scheduleExpireCache(t,p),this.postRender(K,t),n.extent&&K.restore(),N!==Z.style.transform&&(Z.style.transform=N),this.container},e.prototype.drawTileImage=function(t,e,n,o,i,r,s,a,l){var u=this.getTileImage(t);if(u){var c=L(this),h=a?t.getAlpha(c,e.time):1,p=l*h,d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,n,o,i,r),d&&this.context.restore(),1!==h?e.animate=!0:a&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var o=L(t);o in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var o=L(e);o in t||(t[o]={}),t[o][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,o,i,r,s,a,l){var u=L(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,p,d,f,g,v=t.wantedTiles[u],_=t.tileQueue,y=0;for(g=n.getMinZoom();g<=s;++g)for(h=n.getTileRangeForExtentAndZ(r,g,h),p=n.getResolution(g),d=h.minX;d<=h.maxX;++d)for(f=h.minY;f<=h.maxY;++f)s-g<=a?(++y,0==(c=e.getTile(g,d,f,o,i)).getState()&&(v[c.getKey()]=!0,_.isKeyQueued(c.getKey())||_.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),p])),void 0!==l&&l(c)):e.useTile(g,d,f,i);e.updateCacheSize(y,i)},e}(ce);on.prototype.getLayer;const rn=on;var sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const an=function(t){function e(e){return t.call(this,e)||this}return sn(e,t),e.prototype.createRenderer=function(){return new rn(this)},e}(_t),ln="center",un="resolution",cn="rotation";function hn(t,e){for(var n=!0,o=t.length-1;o>=0;--o)if(t[o]!=e[o]){n=!1;break}return n}function pn(t,e){var n=Math.cos(e),o=Math.sin(e),i=t[0]*n-t[1]*o,r=t[1]*n+t[0]*o;return t[0]=i,t[1]=r,t}function dn(t,e,n){return function(o,i,r,s,a){if(o){var l=e?0:r[0]*i,u=e?0:r[1]*i,c=a?a[0]:0,h=a?a[1]:0,p=t[0]+l/2+c,d=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;p>d&&(d=p=(d+p)/2),f>g&&(g=f=(g+f)/2);var v=Y(o[0],p,d),_=Y(o[1],f,g),y=30*i;return s&&n&&(v+=-y*Math.log(1+Math.max(0,p-o[0])/y)+y*Math.log(1+Math.max(0,o[0]-d)/y),_+=-y*Math.log(1+Math.max(0,f-o[1])/y)+y*Math.log(1+Math.max(0,o[1]-g)/y)),[v,_]}}}function fn(t){return t}function gn(t,e,n,o){var i=oe(e)/n[0],r=Jt(e)/n[1];return o?Math.min(t,Math.max(i,r)):Math.min(t,Math.min(i,r))}function vn(t,e,n){var o=Math.min(t,e);return o*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(o=Math.max(o,n),o/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Y(o,n/2,2*e)}function _n(t,e,n,o,i){return function(r,s,a,l){if(void 0!==r){var u=o?gn(t,o,a,i):t;return(void 0===n||n)&&l?vn(r,u,e):Y(r,e,u)}}}function yn(t){return void 0!==t?0:void 0}function mn(t){return void 0!==t?t:void 0}function wn(t){return Math.pow(t,3)}function Cn(t){return 1-wn(1-t)}function bn(t){return 3*t*t-2*t*t*t}function xn(t){return t}const En="XY",Tn="XYZM";var Pn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),On=[1,0,0,1,0,0];const Sn=function(t){function e(){var e,n,o,i,r,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(e)},r=!1,function(){var t=Array.prototype.slice.call(arguments);return r&&this===i&&a(t,o)||(r=!0,i=this,o=t,n=e.apply(this,arguments)),n}),s}return Pn(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return j()},e.prototype.closestPointXY=function(t,e,n,o){return j()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return j()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Kt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){j()},e.prototype.scale=function(t,e,n){j()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return j()},e.prototype.getType=function(){return j()},e.prototype.applyTransform=function(t){j()},e.prototype.intersectsExtent=function(t){return j()},e.prototype.translate=function(t,e){j()},e.prototype.transform=function(t,e){var n=Ne(t),o=n.getUnits()==ve.TILE_PIXELS?function(t,o,i){var r=n.getExtent(),s=n.getWorldExtent(),a=Jt(s)/Jt(r);return jt(On,s[0],s[3],a,-a,0,0,0),function(t,e,n,o,i,r){for(var s=r||[],a=0,l=0;l<n;l+=o){var u=t[l],c=t[l+1];s[a++]=i[0]*u+i[2]*c+i[4],s[a++]=i[1]*u+i[3]*c+i[5]}r&&s.length!=a&&(s.length=a)}(t,0,t.length,i,On,o),Ue(n,e)(t,o,i)}:Ue(n,e);return this.applyTransform(o),this},e}(z);var Rn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Mn(t){var e;return t==En?e=2:"XYZ"==t||"XYM"==t?e=3:t==Tn&&(e=4),e}const An=function(t){function e(){var e=t.call(this)||this;return e.layout=En,e.stride=2,e.flatCoordinates=null,e}return Rn(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=this.flatCoordinates.length,o=this.stride,Ht(Kt(t),e,0,n,o);var e,n,o},e.prototype.getCoordinates=function(){return j()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Mn(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){j()},e.prototype.setLayout=function(t,e,n){var o;if(t)o=Mn(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=En,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=En:3==t?e="XYZ":4==t&&(e=Tn),e}(o=e.length)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=Math.cos(i),u=Math.sin(i),c=r[0],h=r[1],p=0,d=0;d<n;d+=o){var f=t[d]-c,g=t[d+1]-h;a[p++]=c+f*l-g*u,a[p++]=h+f*u+g*l;for(var v=d+2;v<d+o;++v)a[p++]=t[v]}s&&a.length!=p&&(a.length=p)}(n,0,n.length,o,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var o=e;void 0===o&&(o=t);var i=n;i||(i=Yt(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,e,n,o,i,r,s,a){for(var l=a||[],u=s[0],c=s[1],h=0,p=0;p<n;p+=o){var d=t[p]-u,f=t[p+1]-c;l[h++]=u+i*d,l[h++]=c+r*f;for(var g=p+2;g<p+o;++g)l[h++]=t[g]}a&&l.length!=h&&(l.length=h)}(r,0,r.length,s,t,o,i,r),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=0,u=0;u<n;u+=o){a[l++]=t[u]+i,a[l++]=t[u+1]+r;for(var c=u+2;c<u+o;++c)a[l++]=t[c]}s&&a.length!=l&&(a.length=l)}(n,0,n.length,o,t,e,n),this.changed()}},e}(Sn);function jn(t,e,n,o,i,r,s){var a,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)a=e;else{var p=((i-l)*c+(r-u)*h)/(c*c+h*h);if(p>1)a=n;else{if(p>0){for(var d=0;d<o;++d)s[d]=it(t[e+d],t[n+d],p);return void(s.length=o)}a=e}}for(d=0;d<o;++d)s[d]=t[a+d];s.length=o}function In(t,e,n,o,i){var r=t[e],s=t[e+1];for(e+=o;e<n;e+=o){var a=t[e],l=t[e+1],u=tt(r,s,a,l);u>i&&(i=u),r=a,s=l}return i}function Ln(t,e,n,o,i,r,s,a,l,u,c){if(e==n)return u;var h,p;if(0===i){if((p=tt(s,a,t[e],t[e+1]))<u){for(h=0;h<o;++h)l[h]=t[e+h];return l.length=o,p}return u}for(var d=c||[NaN,NaN],f=e+o;f<n;)if(jn(t,f-o,f,o,s,a,d),(p=tt(s,a,d[0],d[1]))<u){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o,f+=o}else f+=o*Math.max((Math.sqrt(p)-Math.sqrt(u))/i|0,1);if(r&&(jn(t,n-o,e,o,s,a,d),(p=tt(s,a,d[0],d[1]))<u)){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o}return u}function Fn(t,e,n,o){for(var i=0,r=n.length;i<r;++i)for(var s=n[i],a=0;a<o;++a)t[e++]=s[a];return e}function kn(t,e){return e*Math.round(t/e)}function zn(t,e,n,o,i,r,s){if(e==n)return s;var a,l,u=kn(t[e],i),c=kn(t[e+1],i);e+=o,r[s++]=u,r[s++]=c;do{if(a=kn(t[e],i),l=kn(t[e+1],i),(e+=o)==n)return r[s++]=a,r[s++]=l,s}while(a==u&&l==c);for(;e<n;){var h=kn(t[e],i),p=kn(t[e+1],i);if(e+=o,h!=a||p!=l){var d=a-u,f=l-c,g=h-u,v=p-c;d*v==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&v<f||f==v||f>0&&v>f)?(a=h,l=p):(r[s++]=a,r[s++]=l,u=a,c=l,a=h,l=p)}}return r[s++]=a,r[s++]=l,s}function Dn(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=e;a<n;a+=o)r[s++]=t.slice(a,a+o);return r.length=s,r}function Gn(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=s*a-r*l,r=a,s=l}return i/2}var Nn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Kn=function(t){function e(e,n){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?o.setCoordinates(e,n):o.setFlatCoordinates(n,e),o}return Nn(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,o){return o<kt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(In(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ln(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.getArea=function(){return Gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Dn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=function(t,e,n,o,i,r,s){var a=(n-e)/o;if(a<3){for(;e<n;e+=o)r[s++]=t[e],r[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,n-o],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),d=0,f=t[p],g=t[p+1],v=t[h],_=t[h+1],y=p+o;y<h;y+=o){var m=J(t[y],t[y+1],f,g,v,_);m>d&&(c=y,d=m)}d>i&&(l[(c-e)/o]=1,p+o<c&&u.push(p,c),c+o<h&&u.push(c,h))}for(y=0;y<a;++y)l[y]&&(r[s++]=t[e+y*o],r[s++]=t[e+y*o+1]);return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,En)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(An);var Zn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vn=function(t){function e(e,n){var o=t.call(this)||this;return o.setCoordinates(e,n),o}return Zn(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){var i=this.flatCoordinates,r=tt(t,e,i[0],i[1]);if(r<o){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,r}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return n=t,Nt(o=(e=this.flatCoordinates)[0],i=e[1],o,i,n);var e,n,o,i},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return Dt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,o){for(var i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(An);function Hn(t,e,n,o,i){return!Ut(i,(function(i){return!Xn(t,e,n,o,i[0],i[1])}))}function Xn(t,e,n,o,i,r){for(var s=0,a=t[n-o],l=t[n-o+1];e<n;e+=o){var u=t[e],c=t[e+1];l<=r?c>r&&(u-a)*(r-l)-(i-a)*(c-l)>0&&s++:c<=r&&(u-a)*(r-l)-(i-a)*(c-l)<0&&s--,a=u,l=c}return 0!==s}function Un(t,e,n,o,i,r){if(0===n.length)return!1;if(!Xn(t,e,n[0],o,i,r))return!1;for(var s=1,a=n.length;s<a;++s)if(Xn(t,n[s-1],n[s],o,i,r))return!1;return!0}function Wn(t,e,n,o,i){var r,s,a=Ht([1/0,1/0,-1/0,-1/0],t,e,n,o);return!!ie(i,a)&&(s=a,(r=i)[0]<=s[0]&&s[2]<=r[2]&&r[1]<=s[1]&&s[3]<=r[3]||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]||function(t,e,n,o,i){for(var r,s=[t[e],t[e+1]],a=[];e+o<n;e+=o){if(a[0]=t[e+o],a[1]=t[e+o+1],r=i(s,a))return r;s[0]=a[0],s[1]=a[1]}return!1}(t,e,n,o,(function(t,e){return function(t,e,n){var o=!1,i=Gt(t,e),r=Gt(t,n);if(1===i||1===r)o=!0;else{var s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],p=n[0],d=n[1],f=(d-h)/(p-c),g=void 0,v=void 0;2&r&&!(2&i)&&(o=(g=p-(d-u)/f)>=s&&g<=l),o||!(4&r)||4&i||(o=(v=d-(p-l)*f)>=a&&v<=u),o||!(8&r)||8&i||(o=(g=p-(d-a)/f)>=s&&g<=l),o||!(16&r)||16&i||(o=(v=d-(p-s)*f)>=a&&v<=u)}return o}(i,t,e)})))}function Bn(t,e,n,o){for(;e<n-o;){for(var i=0;i<o;++i){var r=t[e+i];t[e+i]=t[n-o+i],t[n-o+i]=r}e+=o,n-=o}}function qn(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=(a-r)*(l+s),r=a,s=l}return 0===i?void 0:i>0}function Yn(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=qn(t,e,l,o);(0===s?r&&u||!r&&!u:r&&!u||!r&&u)&&Bn(t,e,l,o),e=l}return e}var Qn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$n=function(t){function e(e,n,o){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&o?(i.setFlatCoordinates(n,e),i.ends_=o):i.setCoordinates(e,n),i}return Qn(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?s(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){return o<kt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,o,i){for(var r=0,s=n.length;r<s;++r){var a=n[r];i=In(t,e,a,o,i),e=a}return i}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,o,i,r,s,a,l,u,c){for(var h=c||[NaN,NaN],p=0,d=n.length;p<d;++p){var f=n[p];u=Ln(t,e,f,o,i,r,s,a,l,u,h),e=f}return u}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.containsXY=function(t,e){return Un(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,o){for(var i=0,r=0,s=n.length;r<s;++r){var a=n[r];i+=Gn(t,e,a,o),e=a}return i}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Yn(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];r[s++]=Dn(t,e,u,o,r[s]),e=u}return r.length=s,r}(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Yt(this.getExtent());this.flatInteriorPoint_=function(t,e,n,o,r,s,a){for(var l,u,c,h,p,d,f,g=r[s+1],v=[],_=0,y=n.length;_<y;++_){var m=n[_];for(h=t[m-o],d=t[m-o+1],l=e;l<m;l+=o)p=t[l],f=t[l+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(p-h)+h,v.push(c)),h=p,d=f}var w=NaN,C=-1/0;for(v.sort(i),h=v[0],l=1,u=v.length;l<u;++l){p=v[l];var b=Math.abs(p-h);b>C&&Un(t,e,n,o,c=(h+p)/2,g)&&(w=c,C=b),h=p}return isNaN(w)&&(w=r[s]),a?(a.push(w,g,C),a):[w,g,C]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Vn(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Kn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,o=[],i=0,r=0,s=n.length;r<s;++r){var a=n[r],l=new Kn(e.slice(i,a),t);o.push(l),i=a}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=qn(t,e,l,o);if(0===s){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;e=l}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Yn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],o=[];return n.length=function(t,e,n,o,i,r,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=zn(t,e,c,o,i,r,s),a.push(s),e=c}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,o),new e(n,En,o)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,o,i){if(!function(t,e,n,o,i){return!!(Wn(t,e,n,o,i)||Xn(t,e,n,o,i[0],i[1])||Xn(t,e,n,o,i[0],i[3])||Xn(t,e,n,o,i[2],i[1])||Xn(t,e,n,o,i[2],i[3]))}(t,e,n[0],o,i))return!1;if(1===n.length)return!0;for(var r=1,s=n.length;r<s;++r)if(Hn(t,n[r-1],n[r],o,i)&&!Wn(t,n[r-1],n[r],o,i))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,o,i){for(var r=i||[],s=0,a=0,l=n.length;a<l;++a){var u=Fn(t,e,n[a],o);r[s++]=u,e=u}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(An);const Jn=$n;function to(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=[e,n,e,i,o,i,o,n,e,n];return new $n(r,En,[r.length])}var eo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function no(t,e){setTimeout((function(){t(e)}),0)}function oo(t){return!(t.sourceCenter&&t.targetCenter&&!hn(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function io(t,e,n,o,i){var r=Math.cos(-i),s=Math.sin(-i),a=t[0]*r-t[1]*s,l=t[1]*r+t[0]*s;return[(a+=(e[0]/2-n[0])*o)*r-(l+=(n[1]-e[1]/2)*o)*(s=-s),l*r+a*s]}const ro=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=h({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=Ve(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.cancelAnchor_=void 0,o.center&&(o.center=tn(o.center,n.projection_)),o.extent&&(o.extent=en(o.extent,n.projection_)),n.applyOptions_(o),n}return eo(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,o,i=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,h=Ve(t.projection,"EPSG:3857"),p=h.getExtent(),d=t.constrainOnlyCenter,f=t.extent;if(l||f||!h.isGlobal()||(d=!1,f=p),void 0!==t.resolutions){var g=t.resolutions;n=g[i],o=void 0!==g[s]?g[s]:g[g.length-1],e=t.constrainResolution?function(t,e,n,o){return function(i,s,a,l){if(void 0!==i){var u=t[0],c=t[t.length-1],h=n?gn(u,n,a,o):u;if(l)return void 0===e||e?vn(i,h,c):Y(i,c,h);var p=Math.min(h,i),d=Math.floor(r(t,p,s));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}(g,u,!d&&f,c):_n(n,o,u,!d&&f,c)}else{var v=(p?Math.max(oe(p),Jt(p)):360*ge[ve.DEGREES]/h.getMetersPerUnit())/256/Math.pow(2,0),_=v/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=v/Math.pow(a,i),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,s):v/Math.pow(a,s):_),s=i+Math.floor(Math.log(n/o)/Math.log(a)),o=n/Math.pow(a,s-i),e=t.constrainResolution?function(t,e,n,o,i,r){return function(s,a,l,u){if(void 0!==s){var c=i?gn(e,i,l,r):e,h=void 0!==n?n:0;if(u)return void 0===o||o?vn(s,c,h):Y(s,h,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),d=-a*(.5-1e-9)+.5,f=Math.min(c,s),g=Math.floor(Math.log(e/f)/Math.log(t)+d),v=Math.max(p,g);return Y(e/Math.pow(t,v),h,c)}}}(a,n,o,u,!d&&f,c):_n(n,o,u,!d&&f,c)}return{constraint:e,maxResolution:n,minResolution:o,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return dn(t.extent,t.constrainOnlyCenter,e)}var n=Ve(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,dn(o,!1,!1)}return fn}(t),o=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=nt(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?mn:"number"==typeof e?(n=e,o=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/o+.5)*o:void 0}):mn}return yn;var n,o,i}(t);this.constraints_={center:n,resolution:o,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),s=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-s])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=h({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),h({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=h({},o)).center=tn(o.center,this.getProjection())),o.anchor&&((o=h({},o)).anchor=tn(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var o=arguments[n-1];return o.center&&this.setCenterInternal(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&no(e,!0))}for(var i=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_,l=[],u=0;u<n;++u){var c=arguments[u],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||bn,callback:e};if(c.center&&(h.sourceCenter=r,h.targetCenter=c.center.slice(),r=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=s,h.targetResolution=this.getResolutionForZoom(c.zoom),s=h.targetResolution):c.resolution&&(h.sourceResolution=s,h.targetResolution=c.resolution,s=h.targetResolution),void 0!==c.rotation){h.sourceRotation=a;var p=ot(c.rotation-a+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=a+p,a=h.targetRotation}oo(h)?h.complete=!0:i+=h.duration,l.push(h)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var o=this.animations_[e];if(o[0].callback&&no(o[0].callback,!1),!t)for(var i=0,r=o.length;i<r;++i){var s=o[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var o=this.animations_[n],i=!0,r=0,s=o.length;r<s;++r){var a=o[r];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):i=!1;var c=a.easing(u);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],d=h+c*(a.targetCenter[0]-h),f=p+c*(a.targetCenter[1]-p);this.targetCenter_=[d,f]}if(a.sourceResolution&&a.targetResolution){var g=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){var v=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(g,0,v,!0);this.targetCenter_=this.calculateCenterZoom(_,a.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var y=1===c?ot(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){var m=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(m,a.anchor)}this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(i){this.animations_[n]=null,this.setHint(0,-1);var w=o[0].callback;w&&no(w,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,o,i,r=this.getCenterInternal();return void 0!==r&&(pn(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),i=e,(o=n)[0]+=+i[0],o[1]+=+i[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();return void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Je(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(ln)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();q(n,1);var o=this.getResolution();q(void 0!==o,2);var i=this.getRotation();return q(void 0!==i,3),$t(n,o,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(un)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(en(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),o=oe(t)/n[0],i=Jt(t)/n[1];return Math.max(o,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(cn)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=io(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=r(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Y(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Y(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(q(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))q(!re(t),25),n=to(o=en(t,this.getProjection()));else if("Circle"===t.getType()){var o;(n=to(o=en(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Yt(o))}else{var i=$e();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),s=1/0,a=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=r){var p=i[c]*n-i[c+1]*o,d=i[c]*o+i[c+1]*n;s=Math.min(s,p),a=Math.min(a,d),l=Math.max(l,p),u=Math.max(u,d)}return[s,a,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},o=n.size;o||(o=this.getViewportSizeMinusPadding_());var i,r=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,s?0:1);var u=this.getRotation(),h=Math.sin(u),p=Math.cos(u),d=Yt(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;var f=d[0]*p-d[1]*h,g=d[1]*p+d[0]*h,v=this.getConstrainedCenter([f,g],l),_=n.callback?n.callback:c;void 0!==n.duration?this.animateInternal({resolution:l,center:v,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),no(_,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(tn(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(io(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,o){var i,r=this.padding_;if(r&&t){var s=this.getViewportSizeMinusPadding_(-n),a=io(t,o,[s[0]/2+r[3],s[1]/2+r[0]],e,n);i=[t[0]-a[0],t[1]-a[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Je(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&tn(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=tn(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(tn(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,0,i,n),s=this.constraints_.center(this.targetCenter_,r,i,n,this.calculateCenterShift(this.targetCenter_,r,o,i));this.get(cn)!==o&&this.set(cn,o),this.get(un)!==r&&this.set(un,r),this.get(ln)&&hn(this.get(ln),s)||this.set(ln,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var o=void 0!==t?t:200,i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,r,s));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var u=n||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&hn(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:o,easing:Cn,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var o=n&&tn(n,this.getProjection());this.endInteractionInternal(t,e,o)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,o)},e}(z);function so(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+e+","+n+","+o+","+(void 0===t[3]?1:t[3])+")"}(t)}(n):"null")}var ao=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var o=so(t,e,n);return o in this.cache_?this.cache_[o]:null},t.prototype.set=function(t,e,n,o){var i=so(t,e,n);this.cache_[i]=o,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),lo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function uo(t,e){ao.expire()}const co=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return lo(e,t),e.prototype.dispatchRenderEvent=function(t,e){j()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;jt(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),It(o,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i,r,s,a){var l,u=e.viewState;function c(t,e,n,o){return i.call(r,e,t?n:null,o)}var h=u.projection,p=function(t,e){if(e.canWrapX()){var n=oe(e.getExtent()),o=function(t,e,n){var o=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<o[0]||t[0]>o[2])){var r=n||oe(o);i=Math.floor((t[0]-o[0])/r)}return i}(t,e,n);o&&(t[0]-=o*n)}return t}(t.slice(),h),d=[[0,0]];if(h.canWrapX()&&o){var f=oe(h.getExtent());d.push([-f,0],[f,0])}for(var g=e.layerStatesArray,v=g.length,_=[],y=[],m=0;m<d.length;m++)for(var w=v-1;w>=0;--w){var C=g[w],b=C.layer;if(b.hasRenderer()&&pt(C,u)&&s.call(a,b)){var x=b.getRenderer(),E=b.getSource();if(x&&E){var T=E.getWrapX()?p:t,P=c.bind(null,C.managed);y[0]=T[0]+d[m][0],y[1]=T[1]+d[m][1],l=x.forEachFeatureAtCoordinate(y,e,n,P,_)}if(l)return l}}if(0!==_.length){var O=1/_.length;return _.forEach((function(t,e){return t.distanceSq+=e*O})),_.sort((function(t,e){return t.distanceSq-e.distanceSq})),_.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){return j()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,o,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,o,l,this,i,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){j()},e.prototype.scheduleExpireIconCache=function(t){ao.canExpireCache()&&t.postRenderFunctions.push(uo)},e}(o);var ho="ol-hidden",po="ol-control",fo=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),new z);(new v).setSize=function(){console.warn("labelCache is deprecated.")};var go=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const vo=function(t){function e(e){var o=t.call(this,e)||this;o.fontChangeListenerKey_=P(fo,n,e.redrawText.bind(e)),o.element_=document.createElement("div");var i=o.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",o.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(o.element_,r.firstChild||null),o.children_=[],o.renderedVisible_=!0,o}return go(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var o=new Ct(t,void 0,e);n.dispatchEvent(o)}},e.prototype.disposeInternal=function(){S(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(at,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var o=[],i=null,r=0,s=e.length;r<s;++r){var a=e[r];if(t.layerIndex=r,pt(a,n)&&(a.sourceState==ct||a.sourceState==ut)){var l=a.layer,u=l.render(t,i);u&&(u!==i&&(this.children_.push(u),i=u),"getDeclutter"in l&&o.push(l))}}for(r=o.length-1;r>=0;--r)o[r].renderDeclutter(t);!function(t,e){for(var n=t.childNodes,o=0;;++o){var i=n[o],r=e[o];if(!i&&!r)break;i!==r&&(i?r?t.insertBefore(r,i):(t.removeChild(i),--o):t.appendChild(r))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){for(var r=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],u=l.layer;if(u.hasRenderer()&&pt(l,r)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=o(u,c);if(h)return h}}}},e}(co),_o="add",yo="remove";var mo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wo="length",Co=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.element=n,i.index=o,i}return mo(e,t),e}(e);const bo=function(t){function e(e,n){var o=t.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=e||[],o.unique_)for(var r=0,s=o.array_.length;r<s;++r)o.assertUnique_(o.array_[r],r);return o.updateLength_(),o}return mo(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(wo)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Co(_o,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Co(yo,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Co(yo,o,t)),this.dispatchEvent(new Co(_o,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(wo,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===t&&n!==e)throw new B(58)},e}(z);var xo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Eo="layers";const To=function(t){function e(e){var n=this,o=e||{},i=h({},o);delete i.layers;var r=o.layers;return(n=t.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(Eo,n.handleLayersChanged_),r?Array.isArray(r)?r=new bo(r.slice(),{unique:!0}):q("function"==typeof r.getArray,43):r=new bo(void 0,{unique:!0}),n.setLayers(r),n}return xo(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(S),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(P(t,_o,this.handleLayersAdd_,this),P(t,yo,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(S);p(this.listenerKeys_);for(var o=t.getArray(),i=0,r=o.length;i<r;i++){var s=o[i];this.listenerKeys_[L(s)]=[P(s,n,this.handleLayerChange_,this),P(s,_,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[L(e)]=[P(e,n,this.handleLayerChange_,this),P(e,_,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=L(t.element);this.listenerKeys_[e].forEach(S),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(Eo)},e.prototype.setLayers=function(t){this.set(Eo,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var o=this.getLayerState(),i=o.zIndex;t||void 0!==o.zIndex||(i=0);for(var r=n,s=e.length;r<s;r++){var a=e[r];a.opacity*=o.opacity,a.visible=a.visible&&o.visible,a.maxResolution=Math.min(a.maxResolution,o.maxResolution),a.minResolution=Math.max(a.minResolution,o.minResolution),a.minZoom=Math.max(a.minZoom,o.minZoom),a.maxZoom=Math.min(a.maxZoom,o.maxZoom),void 0!==o.extent&&(void 0!==a.extent?a.extent=te(a.extent,o.extent):a.extent=o.extent),void 0===a.zIndex&&(a.zIndex=i)}return e},e.prototype.getSourceState=function(){return ct},e}(st);var Po=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Oo=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==o?o:null,i}return Po(e,t),e}(e);var So=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ro=function(t){function e(e,n,o,i,r){var s=t.call(this,e,n,r)||this;return s.originalEvent=o,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s}return So(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Oo),Mo={SINGLECLICK:"singleclick",CLICK:w,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ao="pointermove",jo="pointerdown";var Io=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Lo=function(t){function e(e,n){var o=t.call(this,e)||this;o.map_=e,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=void 0===n?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=0,o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=P(i,jo,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=P(i,Ao,o.relayEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(E,o.boundHandleTouchMove_,!!Mt&&{passive:!1}),o}return Io(e,t),e.prototype.emulateClick_=function(t){var e=new Ro(Mo.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ro(Mo.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Ro(Mo.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Mo.POINTERUP||e.type==Mo.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Mo.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Ro(Mo.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(S),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new Ro(Mo.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var o=t[n];this.down_[n]="function"==typeof o?c:o}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(P(i,Mo.POINTERMOVE,this.handlePointerMove_,this),P(i,Mo.POINTERUP,this.handlePointerUp_,this),P(this.element_,Mo.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(P(this.element_.getRootNode(),Mo.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Ro(Mo.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Ro(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(S(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(E,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(S(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(S),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(v),Fo="postrender",ko="layergroup",zo="size",Do="target",Go="view";var No=1/0;const Ko=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,p(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},t.prototype.enqueue=function(t){q(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=No&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,o=e.length,i=e[t],r=n[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<o&&n[l]<n[a]?l:a;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=r,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,o=this.priorities_,i=n[e],r=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>r))break;n[e]=n[s],o[e]=o[s],e=s}n[e]=i,o[e]=r},t.prototype.reprioritize=function(){var t,e,n,o=this.priorityFunction_,i=this.elements_,r=this.priorities_,s=0,a=i.length;for(e=0;e<a;++e)(n=o(t=i[e]))==No?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=n,i[s++]=t);i.length=s,r.length=s,this.heapify_()},t}();var Zo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vo=function(t){function e(e,n){var o=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return Zo(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(_,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(_,this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,o,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),0!==n.getState()||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())},e}(Ko);function Ho(t){return t[0]>0&&t[1]>0}function Xo(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var Uo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Wo=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,o,i,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new To({layers:t.layers});return r.layergroup=s,r.target=t.target,r.view=void 0!==t.view?t.view:new ro,void 0!==t.controls&&(Array.isArray(t.controls)?n=new bo(t.controls.slice()):(q("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new bo(t.interactions.slice()):(q("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new bo(t.overlays.slice()):(q("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new bo,{controls:n,interactions:o,keyboardEventTarget:e,overlays:i,values:r}}(e);return n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Ot,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.keyHandlerKeys_=null,n.controls=o.controls||new bo,n.interactions=o.interactions||new bo,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new Vo(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(ko,n.handleLayerGroupChanged_),n.addChangeListener(Go,n.handleViewChanged_),n.addChangeListener(zo,n.handleSizeChanged_),n.addChangeListener(Do,n.handleTargetChanged_),n.setProperties(o.values),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.controls.addEventListener(_o,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(yo,function(t){t.element.setMap(null)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.addEventListener(_o,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(yo,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(_o,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(yo,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n}return Uo(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,r=void 0!==n.layerFilter?n.layerFilter:l,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,i,s,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var o=n||{},i=void 0!==o.hitTolerance?o.hitTolerance:0,r=o.layerFilter||l;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,i=void 0!==e.hitTolerance?e.hitTolerance:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,r,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Do)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Je(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?At(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(ko)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=tn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?At(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(zo)},e.prototype.getView=function(){return this.get(Go)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,o){return function(t,e,n,o,i){if(!t||!(n in t.wantedTiles))return No;if(!t.wantedTiles[n][e.getKey()])return No;var r=t.viewState.center,s=o[0]-r[0],a=o[1]-r[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}(this.frameState_,t,e,n,o)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,o=new Ro(n,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===jo||n===T||n===C){var o=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():o,r=e.target;if(this.overlayContainerStopEvent_.contains(r)||!(i===o?o.documentElement:i).contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),a=s.length-1;a>=0;a--){var l=s[a];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,o=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var r=Date.now()-t.time>8;n=r?0:8,o=r?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}!t||!this.hasListener(lt)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(lt,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)S(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(m,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(T,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(x,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,le(this.viewport_)}if(t){for(var o in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Lo(this,this.moveTolerance_),Mo)this.mapBrowserEventHandler_.addEventListener(Mo[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(m,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(T,this.boundHandleBrowserEvent_,!!Mt&&{passive:!1});var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[P(i,C,this.handleBrowserEvent,this),P(i,b,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(x,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(S(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(S(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=P(t,n,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=P(t,_,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(S),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[P(t,n,this.render,this),P(t,_,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n,o=this,i=this.getSize(),r=this.getView(),s=this.frameState_,a=null;if(void 0!==i&&Ho(i)&&r&&r.isDef()){var l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=r.getState();a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:$t(u.center,u.resolution,u.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{}}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!re(this.previousExtent_)&&!Zt(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Oo("movestart",this,s)),this.previousExtent_=Kt(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!Zt(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Oo("moveend",this,a)),e=a.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice())),this.dispatchEvent(new Oo(Fo,this,a)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){o.postRenderTimeoutHandle_=void 0,o.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){this.set(ko,t)},e.prototype.setSize=function(t){this.set(zo,t)},e.prototype.setTarget=function(t){this.set(Do,t)},e.prototype.setView=function(t){this.set(Go,t)},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),o=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(o)||isNaN(i)||Ho(e=[o,i])||console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(z);var Bo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const qo=function(t){function e(e){var n=t.call(this)||this,o=e.element;return!o||e.target||o.style.pointerEvents||(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return Bo(e,t),e.prototype.disposeInternal=function(){le(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&le(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)S(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==c&&this.listenerKeys.push(P(t,Fo,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(z);var Yo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Qo=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===o.collapsed||o.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==o.collapsible,n.collapsible_=void 0===o.collapsible||o.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==o.className?o.className:"ol-attribution",r=void 0!==o.tipLabel?o.tipLabel:"Attributions",s=void 0!==o.expandClassName?o.expandClassName:i+"-expand",a=void 0!==o.collapseLabel?o.collapseLabel:"",l=void 0!==o.collapseClassName?o.collapseClassName:i+"-collpase";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a,n.collapseLabel_.className=l):n.collapseLabel_=a;var u=void 0!==o.label?o.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=s):n.label_=u;var c=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=r,n.toggleButton_.appendChild(c),n.toggleButton_.addEventListener(w,n.handleClick_.bind(n),!1);var h=i+" ol-unselectable "+po+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),p=n.element;return p.className=h,p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return Yo(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],o=!0,i=t.layerStatesArray,r=0,s=i.length;r<s;++r){var a=i[r];if(pt(a,t.viewState)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(o=o&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!a(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var o=0,i=e.length;o<i;++o){var r=document.createElement("li");r.innerHTML=e[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ae(this.collapseLabel_,this.label_):ae(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(qo);var $o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Jo=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=void 0!==o.className?o.className:"ol-rotate",r=void 0!==o.label?o.label:"",s=void 0!==o.compassClassName?o.compassClassName:"ol-compass";n.label_=null,"string"==typeof r?(n.label_=document.createElement("span"),n.label_.className=s,n.label_.textContent=r):(n.label_=r,n.label_.classList.add(s));var a=o.tipLabel?o.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(n.label_),l.addEventListener(w,n.handleClick_.bind(n),!1);var u=i+" ol-unselectable "+po,c=n.element;return c.className=u,c.appendChild(l),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=void 0!==o.duration?o.duration:250,n.autoHide_=void 0===o.autoHide||o.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(ho),n}return $o(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Cn}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var o="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(ho);i||0!==n?i&&0!==n&&this.element.classList.remove(ho):this.element.classList.add(ho)}this.label_.style.transform=o}this.rotation_=n}},e}(qo);var ti=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ei=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),target:o.target})||this;var i=void 0!==o.className?o.className:"ol-zoom",r=void 0!==o.delta?o.delta:1,s=void 0!==o.zoomInClassName?o.zoomInClassName:i+"-in",a=void 0!==o.zoomOutClassName?o.zoomOutClassName:i+"-out",l=void 0!==o.zoomInLabel?o.zoomInLabel:"+",u=void 0!==o.zoomOutLabel?o.zoomOutLabel:"",c=void 0!==o.zoomInTipLabel?o.zoomInTipLabel:"Zoom in",h=void 0!==o.zoomOutTipLabel?o.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(w,n.handleClick_.bind(n,r),!1);var d=document.createElement("button");d.className=a,d.setAttribute("type","button"),d.title=h,d.appendChild("string"==typeof u?document.createTextNode(u):u),d.addEventListener(w,n.handleClick_.bind(n,-r),!1);var f=i+" ol-unselectable "+po,g=n.element;return g.className=f,g.appendChild(p),g.appendChild(d),n.duration_=void 0!==o.duration?o.duration:250,n}return ti(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var o=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:o,duration:this.duration_,easing:Cn})):e.setZoom(o)}}},e}(qo),ni="active";var oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ii(t,e,n,o){var i=t.getZoom();if(void 0!==i){var r=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==o?o:250,easing:Cn})}}const ri=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return oi(e,t),e.prototype.getActive=function(){return this.get(ni)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(ni,t)},e.prototype.setMap=function(t){this.map_=t},e}(z);var si=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ai=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:250,n}return si(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Mo.DBLCLICK){var n=t.originalEvent,o=t.map,i=t.coordinate,r=n.shiftKey?-this.delta_:this.delta_;ii(o.getView(),r,i,this.duration_),n.preventDefault(),e=!0}return!e},e}(ri);var li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ui(t){for(var e=t.length,n=0,o=0,i=0;i<e;i++)n+=t[i].clientX,o+=t[i].clientY;return[n/e,o/e]}const ci=function(t){function e(e){var n=this,o=e||{};return n=t.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return li(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Mo.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Mo.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Mo.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==Mo.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Mo.POINTERDOWN||e===Mo.POINTERDRAG||e===Mo.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==Mo.POINTERUP?delete this.trackedPointers_[n]:(t.type==Mo.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=f(this.trackedPointers_)}},e}(ri);function hi(t){var e=arguments;return function(t){for(var n=!0,o=0,i=e.length;o<i&&(n=n&&e[o](t));++o);return n}}var pi=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},di=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},fi=l,gi=function(t){var e=t.originalEvent;return 0==e.button&&!(Tt&&Pt&&e.ctrlKey)},vi=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},_i=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yi=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},mi=function(t){var e=t.originalEvent;return q(void 0!==e,56),"mouse"==e.pointerType},wi=function(t){var e=t.originalEvent;return q(void 0!==e,56),e.isPrimary&&0===e.button},Ci=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const bi=function(t){function e(e){var n=t.call(this,{stopDown:u})||this,o=e||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:hi(vi,wi);return n.condition_=o.onFocusOnly?hi(di,i):i,n.noKinetic_=!1,n}return Ci(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,o=this.targetPointers,i=ui(o);if(o.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();e=r,n=s.getResolution(),e[0]*=n,e[1]*=n,pn(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=o.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-o*Math.cos(i),s[1]-o*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:Cn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(ci);var xi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ei=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,{stopDown:u})||this).condition_=o.condition?o.condition:pi,n.lastAngle_=void 0,n.duration_=void 0!==o.duration?o.duration:250,n}return xi(e,t),e.prototype.handleDragEvent=function(t){if(mi(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==yn){var o=e.getSize(),i=t.pixel,r=Math.atan2(o[1]/2-i[1],i[0]-o[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!mi(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!mi(t)||!gi(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(ci);var Ti=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Pi=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Ti(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+n,o.top=Math.min(t[1],e[1])+n,o.width=Math.abs(e[0]-t[0])+n,o.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Jn([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(o);var Oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Si=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return Oi(e,t),e}(e);const Ri=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.box_=new Pi(o.className||"ol-dragbox"),n.minArea_=void 0!==o.minArea?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:gi,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return Oi(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var o=n[0]-e[0],i=n[1]-e[1];return o*o+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Si("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Si(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Si("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(ci);var Mi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ai=function(t){function e(e){var n=this,o=e||{},i=o.condition?o.condition:_i;return(n=t.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this).duration_=void 0!==o.duration?o.duration:200,n.out_=void 0!==o.out&&o.out,n}return Mi(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var o=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(o),r=e.getResolution()/i;(n=n.clone()).scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:Cn})},e}(Ri);var ji=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ii=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.defaultCondition_=function(t){return vi(t)&&yi(t)},n.condition_=void 0!==o.condition?o.condition:n.defaultCondition_,n.duration_=void 0!==o.duration?o.duration:100,n.pixelDelta_=void 0!==o.pixelDelta?o.pixelDelta:128,n}return ji(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C){var n=t.originalEvent,o=n.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,s=0,a=0;40==o?a=-r:37==o?s=-r:39==o?s=r:a=r;var l=[s,a];pn(l,i.getRotation()),function(t,e,n){var o=t.getCenterInternal();if(o){var i=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:xn,center:t.getConstrainedCenter(i)})}}(i,l,this.duration_),n.preventDefault(),e=!0}}return!e},e}(ri);var Li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Fi=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.condition_=o.condition?o.condition:yi,n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:100,n}return Li(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C||t.type==b){var n=t.originalEvent,o=n.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=t.map,r=o=="+".charCodeAt(0)?this.delta_:-this.delta_;ii(i.getView(),r,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(ri),ki=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;var i=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,i),this.initialVelocity_=Math.sqrt(i*i+r*r)/o,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var zi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Di="trackpad";const Gi=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,o)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,n.duration_=void 0!==o.duration?o.duration:250,n.timeout_=void 0!==o.timeout?o.timeout:80,n.useAnchor_=void 0===o.useAnchor||o.useAnchor,n.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var i=o.condition?o.condition:fi;return n.condition_=o.onFocusOnly?hi(di,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return zi(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==T)return!0;var e,n=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==T&&(e=o.deltaY,Et&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Ot),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Di:"wheel");var r=n.getView();if(this.mode_===Di&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Y(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),ii(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(ri);var Ni=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ki=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return Ni(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],o=this.targetPointers[1],i=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=i-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=i;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==yn){var l=s.getViewport().getBoundingClientRect(),u=ui(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ci);var Zi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vi=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==o.duration?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return Zi(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],o=this.targetPointers[1],i=n.clientX-o.clientX,r=n.clientY-o.clientY,s=Math.sqrt(i*i+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var u=a.getViewport().getBoundingClientRect(),c=ui(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),a.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ci);function Hi(t){var e=t||{},n=new bo,o=new ki(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Ei),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new ai({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new bi({onFocusOnly:e.onFocusOnly,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new Ki),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new Vi({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Ii),n.push(new Fi({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new Gi({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Ai({duration:e.zoomDuration})),n}var Xi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ui=function(t){function e(e){return(e=h({},e)).controls||(e.controls=function(t){var e={},n=new bo;return(void 0===e.zoom||e.zoom)&&n.push(new ei(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Jo(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Qo(e.attributionOptions)),n}()),e.interactions||(e.interactions=Hi({onFocusOnly:!0})),t.call(this,e)||this}return Xi(e,t),e.prototype.createRenderer=function(){return new vo(this)},e}(Wo);class Wi extends qo{constructor(t,e){const n=e||{};if(!n.element){const t=document.createElement("div");t.className="bgis-composite",n.element=t}let o;o=t instanceof qo?[t]:t,o.forEach((t=>{t.setTarget(n.element)})),super(n),this.childControls=o}setMap(t){super.setMap(t),t&&this.childControls.forEach((e=>{e.setMap(t)}))}getChildControls(){return this.childControls}}class Bi extends Wi{constructor(t){const e=t.element?t.element:document.createElement("div");e.classList.add(t.styleClass),t.element=e,super(t.childControls,t),this.styleClass=t.styleClass}getStyleClass(){return this.styleClass}}const qi=t=>Array.isArray(t)?t:[t],Yi=(t,e,n=document)=>{qi(t).forEach((t=>{const o=n.querySelector(t);o&&qi(e).forEach((t=>null==o?void 0:o.classList.toggle(t)))}))},Qi=(t,e,n)=>{qi(t).forEach((t=>{var o;null===(o=document.querySelector(t))||void 0===o||o.addEventListener("click",(t=>{Yi(e,n),t.stopPropagation()}))}))};class $i extends Wi{constructor(t,e){t.tooltipAsTextElement=!!t.tooltipAsTextElement&&t.tooltipAsTextElement,t.unicode=t.unicode||null,t.iconClassName=t.iconClassName||null,null===t.unicode&&null===t.iconClassName&&(t.unicode=59651),t.tooltip=t.tooltip||"";const n=t.element?t.element:document.createElement("div");n.className=t.containerClassName?t.containerClassName:"ol-control bgis-control",n.title=t.tooltip;const o=document.createElement("button");if(o.className="bgis-icon-button",null!==t.unicode?o.textContent=String.fromCodePoint(t.unicode):null!==t.iconClassName&&o.appendChild($i.getIconElementForIconClassName(t.iconClassName)),o.title=t.tooltip,t.tooltip.length>0&&o.setAttribute("aria-label",t.tooltip),n.append(o),t.tooltipAsTextElement){const e=document.createElement("div");e.className="bgis-control-button-text-container";const o=document.createElement("span");o.textContent=t.tooltip,o.className="bgis-control-button-text",e.appendChild(o),n.appendChild(e)}super(e||[],Object.assign(Object.assign({},t),{element:n})),this.unicode=t.unicode,this.iconClassName=t.iconClassName,this.button=o,this.element.addEventListener("click",(()=>this.dispatchEvent("click")),!1),t.preventDefault||this.on("click",this.handleEvent)}handleEvent(t){return!0}getButton(){return this.button}setButtonUnicode(t){this.getButton().innerHTML="",this.getButton().textContent=String.fromCodePoint(t)}setButtonIconClassName(t){this.getButton().textContent="",this.getButton().innerHTML="",this.getButton().appendChild($i.getIconElementForIconClassName(t))}static getIconElementForIconClassName(t){const e=document.createElement("i");return e.className="bgis-icon "+t,e}}class Ji extends e{constructor(t,e){super(t),this.isToggled=e}}class tr extends $i{constructor(t){super(t||{},t.containerToToggle),this._isToggled=!1,this.containerToToggle=t.containerToToggle,this.unicodeToggled=t.unicodeToggled||null,this.iconClassNameToggled=t.iconClassNameToggled||null,null===this.unicodeToggled&&null===this.iconClassNameToggled&&(this.unicodeToggled=59651)}handleEvent(t){if(t.type===w){this.isToggled=!this.isToggled,this.dispatchEvent(new Ji("toggle",this.isToggled));const t=this.getParentElement();t&&this.handleOverlayForElement(t.querySelector(".ol-overlaycontainer-stopevent")),this.handleOverlayOuter(),this.isToggled?null!==this.unicodeToggled?this.setButtonUnicode(this.unicodeToggled):null!==this.iconClassNameToggled&&this.setButtonIconClassName(this.iconClassNameToggled):null!==this.unicode?this.setButtonUnicode(this.unicode):null!==this.iconClassName&&this.setButtonIconClassName(this.iconClassName),Yi("."+this.containerToToggle.getStyleClass(),"show",t||document)}return!0}set isToggled(t){this._isToggled=t}get isToggled(){return this._isToggled}handleOverlayForElement(t,e="bgis-overlay-bg"){null!=this.element&&(this.isToggled?(null==t||t.classList.add("bgis-overlay-toggled-true"),((t,e,n)=>{null!=t?t.querySelector(`.${n}`)||t.appendChild(((t,e)=>{const n=document.createElement(t);return n.className=e,n})("div",n)):console.log("Enclosing element is null")})(t,0,e)):(null==t||t.classList.remove("bgis-overlay-toggled-true"),((t,e)=>{if(null!=t){const n=t.querySelectorAll(`.${e}`);null!=n&&n.length>0&&n.forEach((t=>t.parentElement.removeChild(t)))}})(t,e)))}handleOverlayOuter(){const t=this.getParentElement();if(t){const e=t.querySelectorAll(".bgis-toggled-overlayable");e&&e.length>0&&e.forEach((t=>{this.handleOverlayForElement(t)}))}}getParentElement(){let t=this.element.closest(".bgis");return t||(t=this.element.closest(".bgis-map")),t}}var er=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nr="accuracy",or="accuracyGeometry",ir="altitude",rr="altitudeAccuracy",sr="heading",ar="position",lr="projection",ur="speed",cr="tracking",hr="trackingOptions",pr=function(t){function e(e){var n=t.call(this,y)||this;return n.code=e.code,n.message=e.message,n}return er(e,t),e}(e);const dr=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.position_=null,n.transform_=De,n.watchId_=void 0,n.addChangeListener(lr,n.handleProjectionChanged_),n.addChangeListener(cr,n.handleTrackingChanged_),void 0!==o.projection&&n.setProjection(o.projection),void 0!==o.trackingOptions&&n.setTrackingOptions(o.trackingOptions),n.setTracking(void 0!==o.tracking&&o.tracking),n}return er(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Xe(Ne("EPSG:4326"),t),this.position_&&this.set(ar,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(nr,e.accuracy),this.set(ir,null===e.altitude?void 0:e.altitude),this.set(rr,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(sr,null===e.heading?void 0:nt(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var n=this.transform_(this.position_);this.set(ar,n),this.set(ur,null===e.speed?void 0:e.speed);var o=function(t,e,n,o){for(var i=[],r=0;r<32;++r)s(i,ke(t,e,2*Math.PI*r/32,undefined));return i.push(i[0],i[1]),new $n(i,En,[i.length])}(this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(or,o),this.changed()},e.prototype.positionError_=function(t){this.dispatchEvent(new pr(t))},e.prototype.getAccuracy=function(){return this.get(nr)},e.prototype.getAccuracyGeometry=function(){return this.get(or)||null},e.prototype.getAltitude=function(){return this.get(ir)},e.prototype.getAltitudeAccuracy=function(){return this.get(rr)},e.prototype.getHeading=function(){return this.get(sr)},e.prototype.getPosition=function(){return this.get(ar)},e.prototype.getProjection=function(){return this.get(lr)},e.prototype.getSpeed=function(){return this.get(ur)},e.prototype.getTracking=function(){return this.get(cr)},e.prototype.getTrackingOptions=function(){return this.get(hr)},e.prototype.setProjection=function(t){this.set(lr,Ne(t))},e.prototype.setTracking=function(t){this.set(cr,t)},e.prototype.setTrackingOptions=function(t){this.set(hr,t)},e}(z);class fr extends e{constructor(t,e){super(t),this.position=e}}var gr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vr="projection",_r="coordinateFormat";const yr=function(t){function e(e){var n=this,o=e||{},i=document.createElement("div");i.className=void 0!==o.className?o.className:"ol-mouse-position",(n=t.call(this,{element:i,render:o.render,target:o.target})||this).on,n.once,n.un,n.addChangeListener(vr,n.handleProjectionChanged_),o.coordinateFormat&&n.setCoordinateFormat(o.coordinateFormat),o.projection&&n.setProjection(o.projection);var r=!0,s="&#160;";return"undefinedHTML"in o?(void 0!==o.undefinedHTML&&(s=o.undefinedHTML),r=!!s):"placeholder"in o&&(!1===o.placeholder?r=!1:s=String(o.placeholder)),n.placeholder_=s,n.renderOnMouseOut_=r,n.renderedHTML_=i.innerHTML,n.mapProjection_=null,n.transform_=null,n}return gr(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(_r)},e.prototype.getProjection=function(){return this.get(vr)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(P(n,Ao,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(P(n,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(_r,t)},e.prototype.setProjection=function(t){this.set(vr,Ne(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();this.transform_=n?Xe(this.mapProjection_,n):De}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var i=$e();i&&(this.transform_=Xe(this.mapProjection_,i)),this.transform_(o,o);var r=this.getCoordinateFormat();e=r?r(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(qo),mr=25.4/.28,wr=[1,2,5];class Cr extends e{constructor(t,e){super(t),this.originalEvent=e}}class br extends qo{constructor(t){const e=t||{},n=document.createElement("div");n.className="bgis-overview-image";const o=document.createElement("figure");o.innerHTML=br.SVG_CODE,n.appendChild(o),e.element=n,super(e),this.preventDefault=e.preventDefault||!1,this.overviewContainerElement=n,this.extent=Ft([[101e4,579e4],[196e4,633e4]]),this.overviewContainerElement.addEventListener("click",(t=>this.dispatchEvent(new Cr("click",t))),!1),this.preventDefault||this.on("click",this.onOverviewImageClick),this.svgElement=o.firstChild,this.backgroundSVGRectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.backgroundSVGRectElement.setAttribute("class","bgis-overviewmap-svg-background"),this.backgroundSVGRectElement.setAttribute("x",String(0)),this.backgroundSVGRectElement.setAttribute("y",String(0)),this.backgroundSVGRectElement.setAttribute("rx",String(8)),this.backgroundSVGRectElement.setAttribute("ry",String(8)),this.backgroundSVGRectElement.setAttribute("width",String(br.SVG_WIDTH)),this.backgroundSVGRectElement.setAttribute("height",String(br.SVG_HEIGHT)),this.backgroundSVGRectElement.setAttribute("style","stroke-width:0"),this.backgroundSVGRectElement.setAttribute("fill",br.BACKGROUND_COLOR),this.svgElement.prepend(this.backgroundSVGRectElement)}setMap(t){super.setMap(t),t&&(this.preventDefault||t.on("moveend",(t=>this.updateCrosshair(t))))}updateCrosshair(t){var e;const n=[br.SVG_WIDTH,br.SVG_HEIGHT],o=this.getOverviewPxFromLonLat(null===(e=t.map.getView())||void 0===e?void 0:e.getCenter());if(o[0]>n[0]?o[0]=n[0]:o[0]<0&&(o[0]=0),o[1]>n[1]?o[1]=n[1]:o[1]<0&&(o[1]=0),this.svgElement){const t=this.svgElement.getElementsByClassName("bgis-overviewmap-svg-crosshair");if(t)for(const e of Array.from(t))this.svgElement.removeChild(e);this.svgElement.appendChild(br.getCrosshair(o[0],0,o[0],br.SVG_HEIGHT,"bgis-overviewmap-svg-crosshair-x")),this.svgElement.appendChild(br.getCrosshair(0,o[1],br.SVG_WIDTH,o[1],"bgis-overviewmap-svg-crosshair-y"))}}static getCrosshair(t,e,n,o,i){const r=document.createElementNS("http://www.w3.org/2000/svg","line");return r.setAttribute("x1",String(t)),r.setAttribute("y1",String(e)),r.setAttribute("x2",String(n)),r.setAttribute("y2",String(o)),r.setAttribute("style","fill: none; stroke: black; stroke-width: 1px;"),r.setAttribute("class","bgis-overviewmap-svg-crosshair "+i),r}static calculateResolutionFromWidth(t,e,n){return Math.abs(t-e)/n}getOverviewPxFromLonLat(t){if(t){const e=[br.SVG_WIDTH,br.SVG_HEIGHT],n=[br.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),br.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[Math.round(1/n[0]*(t[0]-this.extent[0])),Math.round(1/n[1]*(this.extent[3]-t[1]))]}return[0,0]}onOverviewImageClick(t){var e,n;const o=this.overviewContainerElement.getBoundingClientRect(),i=t.originalEvent.clientX-o.left,r=t.originalEvent.clientY-o.top,s=this.getLonLatFromOverviewPx([i,r]);null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n||n.animate({center:s,duration:300})}getLonLatFromOverviewPx(t){const e=[this.overviewContainerElement.clientWidth,this.overviewContainerElement.clientHeight],n=[br.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),br.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[t[0]*n[0]+this.extent[0],this.extent[3]-t[1]*n[1]]}getOverviewContainerElement(){return this.overviewContainerElement}getSVGElement(){return this.svgElement}getBackgroundRectElement(){return this.backgroundSVGRectElement}}br.BACKGROUND_COLOR="#e5ecf0",br.SVG_HEIGHT=216,br.SVG_WIDTH=380,br.SVG_CODE="<svg xmlns='http://www.w3.org/2000/svg' class='bgis-overviewmap-svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 "+br.SVG_WIDTH+" "+br.SVG_HEIGHT+"' preserveAspectRatio='xMidYMid meet' height='100%' width='100%' color-interpolation='auto' fill='black' fill-opacity='1'  stroke='black' stroke-dasharray='none' stroke-dashoffset='0' stroke-linecap='square' stroke-linejoin='miter' stroke-miterlimit='10' stroke-opacity='1' stroke-width='1' xmlns:v='https://vecta.io/nano'><style><![CDATA[.B{clip-path:url(#A)}.C{fill-rule:evenodd}.D{stroke:none}.E{fill:#999}.F{fill:none}.G{stroke-miterlimit:1}.H{stroke-width:2.5}]]></style><defs><clipPath id='A'><path d='M0 0h380v216H0V0z'/></clipPath><path id='B' d='M356 82l-.4 5.2 4.4 1.6-3.2 2.4v6.4l-3.6.8 2.8 3.6.8 6.8-9.6 1.2-.4-2-1.6 2.4h-3.6l-1.6-3.6-4.8-1.6-8 6.4 6.4 3.2 3.2-.8 1.2 4.8 2 .8-2.8 2.8.4 3.2-3.6 3.2-2.8-.4-.8 1.6-2.4-1.6-.4 4 2.4 4.8-2.4 1.6-.8 4 2 .8-.4 2.4 2.8-.4.8 1.6-3.2 1.6 2.8 2.8-4 2 3.6 1.6-10-.8-.4 3.2-4 1.6-2.4 4.4-6.4 2.8.8-3.6 6.4-6.8-3.2-5.2 1.6-4.8-4.8-14.8 13.2-6.8v-6l2.8-4-.8-3.6-2.4-1.2-1.2-7.6 3.2.8 2-2.8-2-1.6 2.8-.8 2-4 3.2-.4 2.4 4 5.6-5.6v-2.8l5.6-1.2 2.4-3.2L352 88l1.6-3.6-2-2 2.8 1.6 1.6-2z'/><path id='C' d='M162.4 146.8l.4 2 8.4 1.2 1.6 2.8 4.4 1.6 8-2 .4-2.8 4.8-.8 2 2 10.8.8 8.4 9.6 5.6-2 2.4-4 8.4-4.8 1.6 3.2h6l.8 3.2 4.8-3.2 5.6 2 10-3.6 8 8.8-2 8.8 2.4.8-.4 6.4 2 1.2-3.6 3.2-1.2-2-1.6 2-2.4-.4-2.4 6.4-4.8.8-.4 2.4-4.8 1.6-.8 4-2.4-3.6-2 1.2-2-2.4-12.4.8-1.2-2.8h-5.2l-4-2.8-5.6 1.2-18-4.8-6.8 1.6-6.4-3.2H168l-2.4-2.8-4.8-.4v-3.2h1.6V172l9.2-1.2 1.6-2.4-5.6-4v-3.2l-4.4-3.2-.8-2.4 2-3.2h-2.8l-2.4-3.6 3.2-2z'/><path id='D' d='M264.8 20.8l5.6 1.6.4 4 4.4-.8 1.6-2.8 8.8 3.2.8 2 8 4 6.8-1.6V32l5.2 2 .4 2.4 5.6 3.2 12.8 1.2 3.6-5.6 3.6-.4 2.4 2.4 2.8-.4 1.2 4 10.4 1.6 1.6 10.8-4.8 6-.8 4.8 5.6 7.6.8 6.4 4.4 3.2-1.6 2.8-2.8-1.6 2 2L352 88l-4.4-3.6-2.4 3.2-5.6 1.2v2.8l-5.6 5.6-2.4-4-3.2.4-1.6 3.6-3.2 1.2 2 1.2-2 3.2-3.2-.8 1.2 7.6 2.4 1.2.8 3.6-2.8 4 1.2 4-5.2 5.2h-2.8l-2-6.8-2.4 2.8-1.2-2-4.8-.8-1.2-2.8-2 .4.4-4-5.2-.4-1.2-5.6-1.6 1.2-3.2-3.6-4.4.4v-1.6H284l-4.4-4-2.4.4-.4 2-3.2-.4-.8 3.2-10.4.4-2 2.4-4-2.4-3.2 1.2-2.4-4v-4.4l2.8-1.6-.4-1.6-1.6-2.4-1.6.8-8.4-4.4-2-3.2v-3.6l1.6-.8-.8-6.4 2-2.4 6.8 5.2 7.2-2L258 74h3.2l1.2 2.4.8-8.4h-2l.8-4.8-2 .4 1.6-1.6-4-4.8 2.8-1.6-10.4-5.2 1.6-7.2 3.6-2.8.4-3.6 7.2 1.2V23.2l2-2.4zm62 47.2l-7.2 5.6-2.4-1.6-.8 6 1.6 3.2 9.6.4 2-2.8 4.4 1.6-2-2.4.8-6-2-2-1.6 1.2-2.4-3.2z'/><path id='E' d='M212.4 38l9.6 6.4-2.4 2 2.4 3.2h6l6.4 2.8 2-2.8h2.4L240 46l4 3.2 2.4-2 5.6 5.2 7.2 2 1.2 1.2-2.8 1.6.4 2 3.6 2.8-1.6 1.6 2-.4-.8 4.8h2v4.4l-.8 4-1.2-2.4H258l-1.6 2.8-6 2-6.8-5.2-3.2 2.4.8 6.4-1.6.8v3.6l6.4 6 5.6.8 2 3.2-2.8 2.4 1.6 6.8-2.4-.8-2 2.4-5.2.8-.8 2.4-8.4 4.8-3.2-.4-2-2.8-6.8 2.4v-3.6l-2-2-10.4-1.2-3.6 5.6 2.8 8.4-1.6 3.2h-2.4l-8.4-4 2-6.4-1.6-2 2.8-4.4-5.2-2 1.2-2.8 3.2.8v-1.6l-6.4.4-4.4-2-.4-8.8 3.6 1.2.4-2.8-4-2-6 2.8v-2l-3.2-.4-1.2-2.4h-4.4l-3.2 3.2-5.2-5.2-.4-3.2 12-9.6 14-4 4.8-7.2-.4-8.8 2 .4 1.2-2.4 10 5.2 4.4-7.2.4-5.6-2-.8 2.4-3.6z'/><path id='F' d='M176.4 86.8l1.6 2.4 3.2.4v2l6-2.8 4 2-.4 2.8-3.6-1.2.4 8.8 11.2 2.4h-3.6l-1.2 3.2 5.2 1.6-2.8 4.4 1.6 2-2 6.4 5.2 3.2-1.6 3.2 1.6 8.8 5.2 2 5.2-2.4.8 4.4 6.8 6.4-5.2 1.2 1.2 2.8-4.4 8-5.2-3.6v-2.4l-10.4-2.8-2.8.8-1.6-2-5.2.8-.4 2.8-7.2 2-5.2-1.6-1.6-2.8-8.4-1.2v-2l-4 2-6-3.6H148l-6.4 5.6-6-1.2-2-12.8 1.6-1.6 6.8.4 1.2-2 8.4.4v-3.6l4.4-.8 2.4-4.8 2.8-.8-3.2-4.8 2-2-4.4-1.6 1.2-4.4h8.4l-1.2 1.6 2.8 2.4-2 2 .8 2 7.6 5.2 3.6-1.2-.4-5.6 2.8-3.6-.8-4-2.4-2h-5.6l4.4-9.2-6.4-8.4 4-3.6h4z'/><path id='G' d='M279.2 101.2l7.2 3.6v1.6l4.4-.4 3.2 3.6 1.6-1.2 1.2 5.6 5.2.4-.8 3.2 2.4.4 1.2 2.8 4.8.8 1.2 2 1.6-2.8 1.2.8-.4 2.8 2.8 3.2-7.2 3.6 4.8 14.8-1.6 4.8 3.2 4.8-7.6 10.8v6l2.4 5.2-6.8-4h-3.6l-9.6 2-2 1.2v2.8l-3.2 1.2-2.8-3.2-14.8.8-2.4-1.6.4-6.4-2.4-.8 2-8.8-8-8.8-10 3.6-5.6-2-4.8 3.2-.8-3.2h-6l-1.6-3.2-8.4 4.8-2.4 4-4.4 2-3.2-1.6 5.6-8.8-1.2-2.8 5.2-1.2-6.8-6.4-.8-4.4-5.2 2.4-4.8-1.6-2-8.4 1.6-4.4 5.6 1.2 1.6-3.2-2.8-8.4 3.6-5.6 10.4 1.2 2 2v3.6l6.8-2.4 2 2.8 3.2.4 16.4-10.4 3.2 2.4 3.2-1.2 4 2.4 2-2.4 10.4-.4.8-3.2 3.2.4.4-2h2z'/><path id='H' d='M151.6 145.2l6.4 2.4 3.6 4.8h2.8l-2 3.2.8 2.4 4.4 3.2v3.2l5.6 4-1.6 2.4-9.2 1.2-1.6 5.6-5.6.4-8-4-1.2-4-3.2-.4-.4-6.8-2.8.8-3.2-2.8 1.2-1.6-2-4.8 3.6-.8 7.2-7.6 5.2-.8z'/><path id='I' d='M61.2 118.8l5.6 1.6 2-2.4 6.8 3.6 5.2-1.6 1.2 1.6-2.4 2h3.2l2 6h6l4-2.8 2 .4-.8 2.4 2.4-.4 2-3.2 4 .4-1.6-2.4 2.4-2.8 6 .4 2.4-5.2 9.6.8 6.8-2.8 9.2 1.2-2-6.4 4.4-2.8v4.4l8-1.2 2.8 4.8 3.2-.8v2l4 1.2-1.6 2.4 3.2 4.8-2.8.8-2.4 4.8-4.4.8v3.6l-8.4-.4-1.2 2-6.8-.4-1.6 1.6 2.4 13.6-8 2-9.2 5.2-5.2-3.2-3.6 2-3.2-1.6-2.4 2.8-2.4-1.6-9.2 1.6.4 1.6-3.2 1.6-3.2 10h-7.2l-6-1.6 1.6-2.4-4-3.2L66 166l-4-1.2.8-5.6-2.8-.8-1.6-3.2-3.6 3.2.4 2-3.6-.4v4l-4 1.2-1.6-2.8-.4-2.4 2.8-3.6-2-2.4 1.6-1.2-1.2-2.8 4-4 .4-7.2-2.4-1.2 6.8-2 4.8-5.2 2-3.2-2-4 .8-4.4z'/><path id='J' d='M31.2 116.4l2 .4-.4 2.8h6.8l1.2 4 4.4 1.6.4 2.4-1.6.8 1.6 3.6 6-2-.8 5.2-2 1.2 2.4 2.4-.4 7.2-4 4 1.2 2.8-1.6 1.2 2 2.4-2.8 3.6 2 3.6-1.2 2-3.2-1.2-1.2-2.8-6.4-2V154l-12-2.4 1.2-4.8-3.2-2.4.4-4.8-2-2 6.4-8-.4-4-2.8-.4-1.6-2.8 7.6-2 2-4z'/><path id='K' d='M327.6 68.4l.4 2 2.8-.4 2 2-.8 6 2 2.4-4.4-1.6-2 2.8-9.6-.4-1.6-3.2.8-6 2.4 1.6 1.6-2.4 3.6-.4.4-2.8 2.4.4z'/></defs><g text-rendering='optimizeLegibility'><use xlink:href='#B' class='B C D E'/><g stroke='silver'><use xlink:href='#B' class='B F G H'/><use xlink:href='#C' class='B C D E'/><use xlink:href='#C' class='B F G H'/><use xlink:href='#D' class='B C D E'/><use xlink:href='#D' class='B F G H'/><use xlink:href='#E' class='B C D E'/><use xlink:href='#E' class='B F G H'/><use xlink:href='#F' class='B C D E'/><use xlink:href='#F' class='B F G H'/><use xlink:href='#G' class='B C D E'/><use xlink:href='#G' class='B F G H'/><use xlink:href='#H' class='B C D E'/><use xlink:href='#H' class='B F G H'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B C D E'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B F G H'/><use xlink:href='#I' class='B C D E'/><use xlink:href='#I' class='B F G H'/><use xlink:href='#J' class='B C D E'/><use xlink:href='#J' class='B F G H'/><use xlink:href='#K' class='B C D E'/><use xlink:href='#K' class='B F G H'/></g></g></svg>";class xr extends $i{constructor(t){const e=t||{};super(Object.assign({unicode:xr.DEFAULT_UNICODE,tooltip:xr.DEFAULT_TOOLTIP_TEXT,tooltipAsTextElement:!0},e))}}xr.DEFAULT_TOOLTIP_TEXT="Ansicht teilen",xr.DEFAULT_UNICODE=59692;var Er=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Tr=function(t){function e(e,n,o){var i=t.call(this)||this,r=o||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.transition_=void 0===r.transition?250:r.transition,i.transitionStarts_={},i}return Er(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){j()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var o=e-n+1e3/60;return o>=this.transition_?1:wn(o/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(v);var Pr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Or=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=o,r.resolution=n,r.state=i,r}return Pr(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return j()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){j()},e}(v);var Sr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Rr(t,e,n){var o=t;if(o.src&&Rt){var i=o.decode(),r=!0;return i.then((function(){r&&e()})).catch((function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){r=!1}}var s=[O(o,"load",e),O(o,y,n)];return function(){s.forEach(S)}}!function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,o,0)||this;return a.src_=i,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}Sr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Jt(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Rr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Jt(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(Or);var Mr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ar=function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,s)||this;return a.crossOrigin_=i,a.src_=o,a.key=o,a.image_=new Image,null!==i&&(a.image_.crossOrigin=i),a.unlisten_=null,a.tileLoadFunction_=r,a}return Mr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=se(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Rr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Tr),jr=function(){function t(t,e,n,o,i,r){this.sourceProj_=t,this.targetProj_=e;var s={},a=Ue(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&oe(o)==oe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?oe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?oe(this.targetProj_.getExtent()):null;var l=ee(n),u=ne(n),c=qt(n),h=Bt(n),p=this.transformInv_(l),d=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),v=10+(r?Math.max(0,Math.ceil($(Wt(n)/(r*r*256*256)))):0);if(this.addQuad_(l,u,c,h,p,d,f,g,v),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach((function(t,e,n){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,n,o,i,r){this.triangles_.push({source:[o,i,r],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,o,i,r,s,a,l){var u=Ft([i,r,s,a]),c=this.sourceWorldWidth_?oe(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=oe(Ft([t,e,n,o]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)),!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||ie(u,this.maxSourceExtent_)){var f=0;if(!(d||isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)d=!0;else if(1!=(f=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!d){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(g),_=void 0;_=p?(ot(i[0],h)+ot(s[0],h))/2-ot(v[0],h):(i[0]+s[0])/2-v[0];var y=(i[1]+s[1])/2-v[1];d=_*_+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],w=this.transformInv_(m),C=[(o[0]+t[0])/2,(o[1]+t[1])/2],b=this.transformInv_(C);this.addQuad_(t,e,m,C,i,r,w,b,l-1),this.addQuad_(C,m,n,o,b,w,s,a,l-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(x),T=[(n[0]+o[0])/2,(n[1]+o[1])/2],P=this.transformInv_(T);this.addQuad_(t,x,T,o,i,E,P,a,l-1),this.addQuad_(x,e,n,T,E,r,s,P,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&f)&&this.addTriangle_(t,n,o,i,s,a),0==(14&f)&&this.addTriangle_(t,n,e,i,s,r),f&&(0==(13&f)&&this.addTriangle_(e,o,t,r,a,i),0==(7&f)&&this.addTriangle_(e,o,n,r,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,o){var i=e.source;Vt(t,i[0]),Vt(t,i[1]),Vt(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var Ir,Lr={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function Fr(t,e,n,o,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(o,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,o)+1,Math.max(n,i)),t.restore()}function kr(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function zr(t,e,n,o){var i=We(n,e,t),r=Ke(e,o,n),s=e.getMetersPerUnit();void 0!==s&&(r*=s);var a=t.getMetersPerUnit();void 0!==a&&(r/=a);var l=t.getExtent();if(!l||zt(l,i)){var u=Ke(t,r,i)/r;isFinite(u)&&u>0&&(r/=u)}return r}var Dr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Gr=function(t){function e(e,n,o,i,r,s,a,l,u,c,h,p){var d=t.call(this,r,0)||this;d.renderEdges_=void 0!==h&&h,d.contextOptions_=p,d.pixelRatio_=a,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=n,d.targetTileGrid_=i,d.wrappedTileCoord_=s||r,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var f=i.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),v=d.sourceTileGrid_.getExtent(),_=g?te(f,g):f;if(0===Wt(_))return d.state=4,d;var y=e.getExtent();y&&(v=v?te(v,y):y);var m=i.getResolution(d.wrappedTileCoord_[0]),w=function(t,e,n,o){var i=Yt(n),r=zr(t,e,i,o);return(!isFinite(r)||r<=0)&&Ut(n,(function(n){return r=zr(t,e,n,o),isFinite(r)&&r>0})),r}(e,o,_,m);if(!isFinite(w)||w<=0)return d.state=4,d;var C=void 0!==c?c:.5;if(d.triangulation_=new jr(e,o,_,v,w*C,m),0===d.triangulation_.getTriangles().length)return d.state=4,d;d.sourceZ_=n.getZForResolution(w);var b=d.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(b[1]=Y(b[1],v[1],v[3]),b[3]=Y(b[3],v[1],v[3])):b=te(b,v)),Wt(b)){for(var x=n.getTileRangeForExtentAndZ(b,d.sourceZ_),E=x.minX;E<=x.maxX;E++)for(var T=x.minY;T<=x.maxY;T++){var P=u(d.sourceZ_,E,T,a);P&&d.sourceTiles_.push(P)}0===d.sourceTiles_.length&&(d.state=4)}else d.state=4;return d}return Dr(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,o){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),o="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,o,i,r,s,a,l,u,c,p){var d=se(Math.round(n*t),Math.round(n*e));if(h(d,p),0===l.length)return d.canvas;function f(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";var g=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){var o,i;o=g,(i=t.extent)[0]<o[0]&&(o[0]=i[0]),i[2]>o[2]&&(o[2]=i[2]),i[1]<o[1]&&(o[1]=i[1]),i[3]>o[3]&&(o[3]=i[3])}));var v=oe(g),_=Jt(g),y=se(Math.round(n*v/o),Math.round(n*_/o));h(y,p);var m=n/o;l.forEach((function(t,e,n){var o=t.extent[0]-g[0],i=-(t.extent[3]-g[3]),r=oe(t.extent),s=Jt(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,o*m,i*m,r*m,s*m)}));var w=ee(s);return a.getTriangles().forEach((function(t,e,i){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],c=s[1][0],h=s[1][1],v=s[2][0],_=s[2][1],m=f((a[0][0]-w[0])/r),C=f(-(a[0][1]-w[1])/r),b=f((a[1][0]-w[0])/r),x=f(-(a[1][1]-w[1])/r),E=f((a[2][0]-w[0])/r),T=f(-(a[2][1]-w[1])/r),P=l,O=u;l=0,u=0;var S=function(t){for(var e=t.length,n=0;n<e;n++){for(var o=n,i=Math.abs(t[n][n]),r=n+1;r<e;r++){var s=Math.abs(t[r][n]);s>i&&(i=s,o=r)}if(0===i)return null;var a=t[o];t[o]=t[n],t[n]=a;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*h[p]}return h}([[c-=P,h-=O,0,0,b-m],[v-=P,_-=O,0,0,E-m],[0,0,c,h,x-C],[0,0,v,_,T-C]]);if(S){if(d.save(),d.beginPath(),function(){if(void 0===Ir){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Fr(t,4,5,4,0),Fr(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;Ir=kr(e,0)||kr(e,4)||kr(e,8)}return Ir}()||p===Lr){d.moveTo(b,x);for(var R=m-b,M=C-x,A=0;A<4;A++)d.lineTo(b+f((A+1)*R/4),x+f(A*M/3)),3!=A&&d.lineTo(b+f((A+1)*R/4),x+f((A+1)*M/3));d.lineTo(E,T)}else d.moveTo(b,x),d.lineTo(m,C),d.lineTo(E,T);d.clip(),d.transform(S[0],S[2],S[1],S[3],m,C),d.translate(g[0]-P,g[3]-O),d.scale(o/n,-o/n),d.drawImage(y.canvas,0,0),d.restore()}})),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,n){var o=t.target,i=(o[0][0]-w[0])/r,s=-(o[0][1]-w[1])/r,a=(o[1][0]-w[0])/r,l=-(o[1][1]-w[1])/r,u=(o[2][0]-w[0])/r,c=-(o[2][1]-w[1])/r;d.beginPath(),d.moveTo(a,l),d.lineTo(i,s),d.lineTo(u,c),d.closePath(),d.stroke()})),d.restore()),d.canvas}(o,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,o){var i=e.getState();if(0==i||1==i){t++;var r=P(e,_,(function(n){var o=e.getState();2!=o&&3!=o&&4!=o||(S(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(S),this.sourcesListenerKeys_=null},e}(Tr),Nr=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return q(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return q(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){q(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Kr(t,e,n,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=n,o):[t,e,n]}function Zr(t,e,n){return t+"/"+e+"/"+n}function Vr(t){return Zr(t[0],t[1],t[2])}var Hr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hr(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=(e=this.peekFirstKey(),e.split("/").map(Number))[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Vr(e.tileCoord)),e.release())}.bind(this))}var e},e}(Nr);var Ur=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Wr(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Br=function(t){function e(e){var n=t.call(this)||this;return n.projection=Ne(e.projection),n.attributions_=Wr(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:ct,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n}return Ur(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return j()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Wr(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(z);var qr=[0,0,0];const Yr=function(){function t(t){var e,n,o;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,q((e=this.resolutions_,!0,n=function(t,e){return e-t}||i,e.every((function(t,o){if(0===o)return!0;var i=n(e[o-1],t);return!(i>0||0===i)}))),17),!t.origins)for(var r=0,s=this.resolutions_.length-1;r<s;++r)if(o){if(this.resolutions_[r]/this.resolutions_[r+1]!==o){o=void 0;break}}else o=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,q(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=ee(a)),q(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,q(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,q(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new de(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var o=this.getTileRangeForExtentAndZ(a,e);n.minX=Math.max(o.minX,n.minX),n.maxX=Math.min(o.maxX,n.maxX),n.minY=Math.max(o.minY,n.minY),n.maxY=Math.min(o.maxY,n.maxY)}return n}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,n){for(var o=this.getTileRangeForExtentAndZ(t,e),i=o.minX,r=o.maxX;i<=r;++i)for(var s=o.minY,a=o.maxY;s<=a;++s)n([e,i,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,o){var i,r,s=null,a=t[0]-1;for(2===this.zoomFactor_?(i=t[1],r=t[2]):s=this.getTileCoordExtent(t,o);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?pe(i=Math.floor(i/2),i,r=Math.floor(r/2),r,n):this.getTileRangeForExtentAndZ(s,a,n)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],i=2*t[2];return pe(o,o+1,i,i+1,e)}var r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var o=t[0],i=t[1],r=t[2];if(e===o)return pe(i,r,i,r,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-o),a=Math.floor(i*s),l=Math.floor(r*s);return e<o?pe(a,a,l,l,n):pe(a,Math.floor(s*(i+1))-1,l,Math.floor(s*(r+1))-1,n)}var u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var o=this.getOrigin(t),i=this.getResolution(t),r=Xo(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*r[0]*i,a=o[0]+(e.maxX+1)*r[0]*i;return Nt(s,o[1]+e.minY*r[1]*i,a,o[1]+(e.maxY+1)*r[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var o=qr;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,o);var i=o[1],r=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,o),pe(i,o[1],r,o[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=Xo(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*n,e[1]-(t[2]+.5)*o[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=Xo(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*i[0]*o,s=n[1]-(t[2]+1)*i[1]*o;return Nt(r,s,r+i[0]*o,s+i[1]*o,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,o,i){var r=this.getZForResolution(n),s=n/this.getResolution(r),a=this.getOrigin(r),l=Xo(this.getTileSize(r),this.tmpSize_),u=o?.5:0,c=o?.5:0,h=Math.floor((t-a[0])/n+u),p=Math.floor((a[1]-e)/n+c),d=s*h/l[0],f=s*p/l[1];return o?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),Kr(r,d,f,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,o,i){var r=this.getOrigin(n),s=this.getResolution(n),a=Xo(this.getTileSize(n),this.tmpSize_),l=o?.5:0,u=o?.5:0,c=Math.floor((t-r[0])/s+l),h=Math.floor((r[1]-e)/s+u),p=c/a[0],d=h/a[1];return o?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Kr(n,p,d,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return Y(r(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),o=this.minZoom;o<e;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},t}();function Qr(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,o){return function(t,e,n,o){var i=$r(t,undefined,n);return new Yr({extent:t,origin:Qt(t,"top-left"),resolutions:i,tileSize:n})}(Jr(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function $r(t,e,n,o){for(var i=void 0!==e?e:42,r=Jt(t),s=oe(t),a=Xo(void 0!==n?n:256),l=o>0?o:Math.max(s/a[0],r/a[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function Jr(t){var e=(t=Ne(t)).getExtent();if(!e){var n=180*ge[ve.DEGREES]/t.getMetersPerUnit();e=Nt(-n,-n,n,n)}return e}var ts=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),es=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&Xo(o.getTileSize(o.getMinZoom()),[256,256]),n.tileCache=new Xr(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return ts(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,o){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var r,s,a,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)s=Zr(e,u,c),a=!1,i.containsKey(s)&&(a=2===(r=i.get(s)).getState())&&(a=!1!==o(r)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,o,i){return j()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Qr(t)},e.prototype.getTileCacheForProjection=function(t){return q(He(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var o,i,r,s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),l=Xo(s.getTileSize(t),this.tmpSize);return 1==a?l:(o=l,i=a,void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=o[0]*i+.5|0,r[1]=o[1]*i+.5|0,r)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var o=e[0],i=t.getTileCoordCenter(e),r=Jr(n);if(zt(r,i))return e;var s=oe(r),a=Math.ceil((r[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,o)}(o,t,n)),function(t,e){var n=t[0],o=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var r=e.getFullTileRange(n);return!r||r.containsXY(o,i)}(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,o){},e}(Br),ns=function(t){function e(e,n){var o=t.call(this,e)||this;return o.tile=n,o}return ts(e,t),e}(e);const os=es;function is(t,e){var n=/\{z\}/g,o=/\{x\}/g,i=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(o,s[1].toString()).replace(i,s[2].toString()).replace(r,(function(){var t=s[0],n=e.getFullTileRange(t);return q(n,55),(n.getHeight()-s[2]-1).toString()})):void 0}}var rs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ss=function(t){function e(n){var o=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return o.generateTileUrlFunction_=o.tileUrlFunction===e.prototype.tileUrlFunction,o.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(o.tileUrlFunction=n.tileUrlFunction),o.urls=null,n.urls?o.setUrls(n.urls):n.url&&o.setUrl(n.url),o.tileLoadingKeys_={},o}return rs(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,o=L(n),i=n.getState();1==i?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=3==i?"tileloaderror":2==i?"tileloadend":void 0),null!=e&&this.dispatchEvent(new ns(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var o=n[1].charCodeAt(0),i=n[2].charCodeAt(0),r=void 0;for(r=o;r<=i;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=is(t[i],e);return function(t){return 1===t.length?t[0]:function(e,n,o){if(e){var i=ot(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[i](e,n,o)}}}(o)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var o=Zr(t,e,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(os);var as=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ls(t,e){t.getImage().src=e}const us=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ls,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:Ar,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.contextOptions_=!1===e.imageSmoothing?Lr:void 0,n.renderReprojectionEdges_=!1,n}return as(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[o];i.expireCache(i==n?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!He(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!He(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!He(e,t)){var n=L(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Qr(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||He(e,t))return this.tileCache;var n=L(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Xr(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,o,i,r){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),l=a?this.tileUrlFunction(a,o,i):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(_,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,o,i){var r=this.getProjection();if(r&&i&&!He(r,i)){var s=this.getTileCacheForProjection(i),a=[t,e,n],l=void 0,u=Vr(a);s.containsKey(u)&&(l=s.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(r),p=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(a,i),f=new Gr(r,h,i,p,a,d,this.getTilePixelRatio(o),this.getGutter(),function(t,e,n,o){return this.getTileInternal(t,e,n,o,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return f.key=c,l?(f.interimTile=l,f.refreshInterimChain(),s.replace(u,f)):s.set(u,f),f}return this.getTileInternal(t,e,n,o,r||i)},e.prototype.getTileInternal=function(t,e,n,o,i){var r=null,s=Zr(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var l=r;r=this.createTile_(t,e,n,o,i,a),0==l.getState()?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,n,o,i,a),this.tileCache.set(s,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Ne(t);if(n){var o=L(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},e}(ss);var cs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const hs=function(t){function e(e){var n=e||{},o=void 0!==n.projection?n.projection:"EPSG:3857",i=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Ne("EPSG:3857").getExtent(),o={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:$r(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Yr(o)}({extent:Jr(o),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:o,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return cs(e,t),e}(us),ps={geolandbasemap:"https://maps{1-4}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",bmapgrau:"https://maps{1-4}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png",bmaporthofoto30cm:"https://maps{1-4}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg",bmapgelaende:"https://maps{1-4}.wien.gv.at/basemap/bmapgelaende/grau/google3857/{z}/{y}/{x}.jpeg",bmapoberflaeche:"https://maps{1-4}.wien.gv.at/basemap/bmapoberflaeche/grau/google3857/{z}/{y}/{x}.jpeg",bmapoverlay:"https://maps{1-4}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png"};return new Ui({target:"bgis-map",layers:[new an({source:new class extends hs{constructor(t){const e=(null==t?void 0:t.variant)||"geolandbasemap";super({url:ps[e],attributions:'Grundkarte: <a href="https://basemap.at/">basemap.at</a>',crossOrigin:"Anonymous"})}}})],controls:[new class extends Bi{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-footer",childControls:t}))}}([new class extends qo{constructor(t){const e=t||{},n=e.className?e.className:"bgis-scaleline";super({element:document.createElement("div"),target:e.target}),this.viewState=null,this._minWidth=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible=!1,this.renderedWidth=void 0,this.renderedSVG=void 0,this.dpi=e.dpi||void 0,this.element.className=n}render(t){const e=t.frameState;this.viewState=e?e.viewState:null,this.updateElement()}updateElement(){const t=this.viewState;if(!t)return void(this.renderedVisible&&(this.element.style.display="none",this.renderedVisible=!1));const e=t.center,n=t.projection,o=ve.METERS;let i=Ke(n,t.resolution,e,o);const r=this._minWidth*(this.dpi||mr)/mr,s=r*i;let a="";s<.001?(a="m",i*=1e6):s<1?(a="mm",i*=1e3):s<1e3?a="m":(a="km",i/=1e3);let l,u,c,h=3*Math.floor(Math.log(r*i)/Math.log(10));for(;;){c=Math.floor(h/3);const t=Math.pow(10,c);if(l=wr[(h%3+3)%3]*t,u=Math.round(l/i),isNaN(u))return this.element.style.display="none",void(this.renderedVisible=!1);if(u>=r)break;++h}let p=null;l&&c>=0&&(p=this.getGeneratedSVG(l.toFixed(c<0?-c:0)+" "+a,u)),p&&this.renderedSVG!=p&&(this.element.innerHTML="",this.element.appendChild(p),this.renderedSVG=p),this.renderedWidth!=u&&(this.element.style.width=u+"px",p&&p.setAttribute("width",String(u)),this.renderedWidth=u),this.renderedVisible||(this.element.style.display="",this.renderedVisible=!0)}getGeneratedSVG(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id","bgis-scaleline-svg"),n.setAttribute("viewBox","0 0 "+e+" 18"),n.setAttribute("width",String(e)),n.setAttribute("height","100%");const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("id","bgis-scaleline-svg-background"),o.setAttribute("x",String(0)),o.setAttribute("y",String(0)),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","#e5ecf0"),o.setAttribute("fill-opacity",".5"),o.setAttribute("stroke","black"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","0 "+e+" "+(e+36)),n.appendChild(o);const i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.textContent=t,i.setAttribute("x",String(e/2)),i.setAttribute("y",String(12)),i.setAttribute("text-anchor","middle"),i.setAttribute("font-size","1em"),i.setAttribute("style",'font-size: 0.75rem; font-family: "Source Sans Pro", sans-serif'),i.setAttribute("font-family",'"Source Sans Pro", sans-serif'),i.setAttribute("fill","black"),n.appendChild(i),n}setMinWidth(t){this._minWidth=t}getMinWidth(){return this._minWidth}},new class extends yr{constructor(t){const e=t||{};e.projection=e.projection?e.projection:"EPSG:4326",e.coordinateFormat=e.coordinateFormat?e.coordinateFormat:t=>t?function(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}(t,"{x}N/{y}E",4):"",e.undefinedHTML=e.undefinedHTML?e.undefinedHTML:"&nbsp;-&nbsp;N/&nbsp;-&nbsp;E",e.className=e.className?e.className:"ol-control ol-mouse-position bgis-mouseposition",super(e)}},new class extends Qo{constructor(t){super(t||{collapsed:!1}),this.element.className+=" bgis-copyright"}}]),new class extends Bi{constructor(t){let e=null;if(t.verticalControls&&t.verticalControls.length>0){const n=new Bi({styleClass:"bgis-bottom-right-vertical",childControls:t.verticalControls});e=new tr({containerToToggle:n,containerClassName:"ol-control bgis-control bgis-bottom-right-overlay",unicode:59655,unicodeToggled:59684,tooltip:"mehr..."}),t.horizontalControls.push(e)}const n=t||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-bottom-right-horizontal",childControls:t.horizontalControls})),this.toggleButton=e,null!=this.toggleButton&&this.toggleButton.addEventListener("toggle",(t=>(this.dispatchEvent(t),!0)))}getToggleButton(){return this.toggleButton}}({horizontalControls:[new class extends $i{constructor(t){const e=t||{};super(Object.assign({unicode:59704,tooltip:"Begleitkarten verwalten"},e))}},new class extends $i{constructor(t){const e=t||{};super(Object.assign({unicode:59703,tooltip:"Liste anzeigen"},e))}}],verticalControls:[new class extends $i{constructor(t){const e=t||{};super(Object.assign({unicode:59666,tooltip:"Ansicht drucken",tooltipAsTextElement:!0},e))}},new xr,new class extends $i{constructor(t){const e=t||{};super(Object.assign({unicode:59707,tooltip:"Toolbox einblenden",tooltipAsTextElement:!0},e))}}]}),new class extends Bi{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-top-right",childControls:t}))}}([new class extends $i{constructor(t){const e=t||{};super(Object.assign({unicode:59702,containerClassName:"ol-control bgis-control ol-geolocate",tooltip:"Standort zentrieren"},e));const n=t||{};this._geoLocation=new dr(n)}handleEvent(t){var e,n;return t.type===w&&this.geoLocation&&(null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n?void 0:n.getProjection())&&(this.geoLocation.once("change",(()=>{var t;this.geoLocation.setTracking(!1),this.getMap().getView().animate({center:(t=this.geoLocation.getPosition(),We(t,"EPSG:4326","EPSG:3857")),duration:300}),this.geoLocation.getPosition()&&this.dispatchEvent(new fr("location_retrieved",this.geoLocation.getPosition()))})),this.geoLocation.setTracking(!0)),!0}get geoLocation(){return this._geoLocation}},new class extends ei{constructor(t){const e=t||{};super(Object.assign(Object.assign({},e),{zoomInLabel:String.fromCodePoint(59700),zoomOutLabel:String.fromCodePoint(59701)})),this.element.className="ol-control bgis-control zoom-container"}}]),new br],interactions:Hi().extend([new class extends ri{constructor(t){super(t)}setMap(t){var e,n;if(t){Qi(".bgis .bgis-search .bgis-menu",".bgis","showappmenu"),Qi(".bgis .bgis-search .bgis-search-showfilter",".bgis .bgis-search","open"),Qi([".bgis .bgis-legend .bgis-showlegend",".bgis .bgis-legend .bgis-hidelegend"],".bgis .bgis-legend","open"),Qi(".bgis .bgis-legend .bgis-layers-tab",".bgis .bgis-legend","showinfos"),Qi(".bgis .bgis-legend .bgis-infos-tab",".bgis .bgis-legend","showinfos"),Qi(".bgis .bgis-listview #bgis-listview-close",".bgis","show-listview"),Qi(".bgis .bgis-max-map",".bgis-map-area","maximizemap"),Qi([".bgis .bgis-hide-header",".bgis .bgis-show-header"],".bgis-header","hide"),Qi([".bgis .bgis-hide-sidebar",".bgis .bgis-show-sidebar"],".bgis-sidebar","hide"),Qi([".bgis .bgis-hide-sidebar",".bgis .bgis-show-sidebar"],".bgis-sidebar","show-detail"),null===(e=document.querySelector(".bgis-hide-header"))||void 0===e||e.addEventListener("click",(()=>{window.dispatchEvent(new Event("resize"))})),null===(n=document.querySelector(".bgis-show-header"))||void 0===n||n.addEventListener("click",(()=>{window.dispatchEvent(new Event("resize"))})),Qi(".bgis .bgis-quicklink .bgis-quicklink-close",".bgis-quicklink","hide");const t=document.querySelector(".bgis-listview-splitter");t&&function(t,e){const n=t.nextElementSibling;if(n instanceof HTMLElement&&t instanceof HTMLElement){let e=0,o=0,i=0,r=0;const s=t=>{e=t.clientX,o=t.clientY;const s=n.getBoundingClientRect();i=s.height,r=s.width,n.style.flex="0 1 auto",n.style.width=`${r}px`,document.addEventListener("mousemove",a),document.addEventListener("mouseup",l),document.addEventListener("mouseleave",l)},a=t=>{const o=t.clientX-e;t.clientY;n.style.width=r-o+"px",window.dispatchEvent(new Event("resize"))},l=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l)};t.addEventListener("mousedown",s)}else console.log("unable to add resizer")}(t);const o=document.querySelector(".bgis-detail-splitter");o&&function(t){const e=t.parentElement,n=null==e?void 0:e.parentElement;if(e instanceof HTMLElement&&t instanceof HTMLElement){let o=0,i=0;const r=t=>{o=t.clientY;const n=e.getBoundingClientRect();i=n.height,e.style.flex="0 1 auto",e.style.height=`${i}px`,document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),document.addEventListener("mouseleave",a)},s=t=>{const r=t.clientY-o;e.style.height=i-r+"px",n&&(i-r>e.offsetHeight?n.classList.add("max"):n.classList.remove("max")),window.dispatchEvent(new Event("resize"))},a=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a)};t.addEventListener("mousedown",r)}else console.log("unable to add resizeDetails")}(o)}super.setMap(t)}}]),view:new ro({center:Yt([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),t})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZ2lzLWNvcmUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2JnaXMtY29yZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3RFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0Rpc3Bvc2FibGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2FycmF5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL29iai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL1RhcmdldC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC91dGlsLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3QuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1Byb3BlcnR5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Bc3NlcnRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvYXNzZXJ0cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbWF0aC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1N0YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9MYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVGlsZVByb3BlcnR5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9FdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaGFzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9Db3JuZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZG9tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Vbml0cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Qcm9qZWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2czODU3LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2c0MzI2LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3Byb2plY3Rpb25zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3RyYW5zZm9ybXMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NwaGVyZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVN0YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3UHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Nvb3JkaW5hdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NlbnRlcmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Jlc29sdXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yb3RhdGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Vhc2luZy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeUxheW91dC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2Nsb3Nlc3QuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9kZWZsYXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc2ltcGxpZnkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbmZsYXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvYXJlYS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9MaW5lYXJSaW5nLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2NvbnRhaW5zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NlZ21lbnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvcmV2ZXJzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L29yaWVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2x5Z29uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVmlldy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3SGludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbG9yLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9NYXAuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Nzcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvQ29tcG9zaXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Db2xsZWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Hcm91cC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVF1ZXVlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zaXplLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9QbHVnZ2FibGVNYXAuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvQ29udHJvbC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Sb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9jb25kaXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdQYW4uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9Cb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdCb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0tleUNvZGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvS2luZXRpYy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXAuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL0NvbXBvc2l0ZUNvbnRyb2wudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvQ29udGFpbmVyLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL3V0aWwvZG9tLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvYmFzZS9CdXR0b24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL1RvZ2dsZUJ1dHRvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvR2VvbG9jYXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9HZW9Mb2NhdGUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvTW91c2VQb3NpdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1NjYWxlTGluZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL092ZXJ2aWV3LnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvU2hhcmUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlQmFzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9jb21tb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9jb21tb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvTFJVQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVjb29yZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZUNhY2hlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU291cmNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC9UaWxlR3JpZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxldXJsZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9VcmxUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGVJbWFnZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1hZWi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9zb3VyY2UvQmFzZW1hcFNvdXJjZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zaXRlL2V4YW1wbGVzL2RhdGEvZnVsbC1mZWF0dXJlcy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Gb290ZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvQXR0cmlidXRpb24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvQm90dG9tUmlnaHQudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9MYXllci50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1ZpZXdMaXN0LnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvUHJpbnQudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9Ub29scy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Ub3BSaWdodC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1pvb20udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvaW50ZXJhY3Rpb24vVWlJbnRlcmFjdGlvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy91dGlsL3NwbGl0dGVyLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJCYXNlRXZlbnQiLCJ0eXBlIiwidGhpcyIsInByb3BhZ2F0aW9uU3RvcHBlZCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJ0YXJnZXQiLCJwcm90b3R5cGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIkRpc3Bvc2FibGUiLCJkaXNwb3NlZCIsImRpc3Bvc2UiLCJkaXNwb3NlSW50ZXJuYWwiLCJudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIiwiYSIsImIiLCJsaW5lYXJGaW5kTmVhcmVzdCIsImFyciIsImRpcmVjdGlvbiIsIm4iLCJsZW5ndGgiLCJpIiwiZXh0ZW5kIiwiZGF0YSIsImV4dGVuc2lvbiIsIkFycmF5IiwiaXNBcnJheSIsImVxdWFscyIsImFycjEiLCJhcnIyIiwibGVuMSIsIlRSVUUiLCJWT0lEIiwiYXNzaWduIiwidmFyX3NvdXJjZXMiLCJUeXBlRXJyb3IiLCJvdXRwdXQiLCJpaSIsImFyZ3VtZW50cyIsInNvdXJjZSIsImtleSIsImhhc093blByb3BlcnR5IiwiY2xlYXIiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImV4dGVuZFN0YXRpY3MiLCJnZXRWYWx1ZXMiLCJ2YWx1ZXMiLCJwdXNoIiwiX19leHRlbmRzIiwiZCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwicCIsImNhbGwiLCJTdHJpbmciLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiX3N1cGVyIiwiVGFyZ2V0Iiwib3B0X3RhcmdldCIsIl90aGlzIiwiZXZlbnRUYXJnZXRfIiwicGVuZGluZ1JlbW92YWxzXyIsImRpc3BhdGNoaW5nXyIsImxpc3RlbmVyc18iLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiaW5kZXhPZiIsImRpc3BhdGNoRXZlbnQiLCJldmVudCIsImV2dCIsInByb3BhZ2F0ZSIsImRpc3BhdGNoaW5nIiwicGVuZGluZ1JlbW92YWxzIiwiaGFuZGxlRXZlbnQiLCJwciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRMaXN0ZW5lcnMiLCJ1bmRlZmluZWQiLCJoYXNMaXN0ZW5lciIsIm9wdF90eXBlIiwia2V5cyIsImluZGV4Iiwic3BsaWNlIiwibGlzdGVuIiwib3B0X3RoaXMiLCJvcHRfb25jZSIsImJpbmQiLCJvcmlnaW5hbExpc3RlbmVyXzEiLCJhcHBseSIsImV2ZW50c0tleSIsImxpc3Rlbk9uY2UiLCJ1bmxpc3RlbkJ5S2V5IiwiT2JzZXJ2YWJsZSIsIm9uIiwib25JbnRlcm5hbCIsIm9uY2UiLCJvbmNlSW50ZXJuYWwiLCJ1biIsInVuSW50ZXJuYWwiLCJyZXZpc2lvbl8iLCJjaGFuZ2VkIiwiRXZlbnRUeXBlIiwiZ2V0UmV2aXNpb24iLCJsZW4iLCJvbF9rZXkiLCJ1bkJ5S2V5IiwiRXJyb3IiLCJ1aWRDb3VudGVyXyIsImdldFVpZCIsIm9iaiIsIm9sX3VpZCIsIk9iamVjdEV2ZW50Iiwib2xkVmFsdWUiLCJCYXNlT2JqZWN0Iiwib3B0X3ZhbHVlcyIsInZhbHVlc18iLCJzZXRQcm9wZXJ0aWVzIiwiZ2V0IiwiZ2V0S2V5cyIsImdldFByb3BlcnRpZXMiLCJoYXNQcm9wZXJ0aWVzIiwibm90aWZ5IiwiZXZlbnRUeXBlIiwiT2JqZWN0RXZlbnRUeXBlIiwiYWRkQ2hhbmdlTGlzdGVuZXIiLCJyZW1vdmVDaGFuZ2VMaXN0ZW5lciIsInNldCIsIm9wdF9zaWxlbnQiLCJhcHBseVByb3BlcnRpZXMiLCJ1bnNldCIsIkFzc2VydGlvbkVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzcGxpdCIsIm5hbWUiLCJhc3NlcnRpb24iLCJlcnJvckNvZGUiLCJtaW4iLCJtYXgiLCJNYXRoIiwiY29zaCIsIngiLCJ5IiwiZXhwIiwibG9nMiIsImxvZyIsIkxPRzJFIiwic3F1YXJlZFNlZ21lbnREaXN0YW5jZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiZHgiLCJkeSIsInQiLCJ0b0RlZ3JlZXMiLCJhbmdsZUluUmFkaWFucyIsIlBJIiwiYW5nbGVJbkRlZ3JlZXMiLCJyIiwibGVycCIsIkJhc2VMYXllciIsIm9wdGlvbnMiLCJwcm9wZXJ0aWVzIiwib3BhY2l0eSIsInZpc2libGUiLCJ6SW5kZXgiLCJtYXhSZXNvbHV0aW9uIiwiSW5maW5pdHkiLCJtaW5SZXNvbHV0aW9uIiwibWluWm9vbSIsIm1heFpvb20iLCJjbGFzc05hbWVfIiwiY2xhc3NOYW1lIiwic3RhdGVfIiwiZ2V0Q2xhc3NOYW1lIiwiZ2V0TGF5ZXJTdGF0ZSIsIm9wdF9tYW5hZ2VkIiwic3RhdGUiLCJsYXllciIsIm1hbmFnZWQiLCJnZXRaSW5kZXgiLCJyb3VuZCIsImdldE9wYWNpdHkiLCJzb3VyY2VTdGF0ZSIsImdldFNvdXJjZVN0YXRlIiwiZ2V0VmlzaWJsZSIsImV4dGVudCIsImdldEV4dGVudCIsImdldE1heFJlc29sdXRpb24iLCJnZXRNaW5SZXNvbHV0aW9uIiwiZ2V0TWluWm9vbSIsImdldE1heFpvb20iLCJnZXRMYXllcnNBcnJheSIsIm9wdF9hcnJheSIsImdldExheWVyU3RhdGVzQXJyYXkiLCJvcHRfc3RhdGVzIiwic2V0RXh0ZW50Iiwic2V0TWF4UmVzb2x1dGlvbiIsInNldE1pblJlc29sdXRpb24iLCJzZXRNYXhab29tIiwic2V0TWluWm9vbSIsInNldE9wYWNpdHkiLCJzZXRWaXNpYmxlIiwic2V0WkluZGV4IiwiemluZGV4IiwiaW5WaWV3IiwibGF5ZXJTdGF0ZSIsInZpZXdTdGF0ZSIsInJlc29sdXRpb24iLCJ6b29tIiwiTGF5ZXIiLCJiYXNlT3B0aW9ucyIsIm1hcFByZWNvbXBvc2VLZXlfIiwibWFwUmVuZGVyS2V5XyIsInNvdXJjZUNoYW5nZUtleV8iLCJyZW5kZXJlcl8iLCJyZW5kZXIiLCJtYXAiLCJzZXRNYXAiLCJoYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8iLCJzZXRTb3VyY2UiLCJhcnJheSIsInN0YXRlcyIsImdldFNvdXJjZSIsImdldFN0YXRlIiwiaGFuZGxlU291cmNlQ2hhbmdlXyIsImdldEZlYXR1cmVzIiwicGl4ZWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZyYW1lU3RhdGUiLCJsYXllclJlbmRlcmVyIiwiZ2V0UmVuZGVyZXIiLCJwcmVwYXJlRnJhbWUiLCJyZW5kZXJGcmFtZSIsImxheWVyU3RhdGVzQXJyYXkiLCJzb21lIiwiYXJyYXlMYXllclN0YXRlIiwiY3JlYXRlUmVuZGVyZXIiLCJoYXNSZW5kZXJlciIsIkJhc2UiLCJCYXNlVGlsZUxheWVyIiwib3B0X29wdGlvbnMiLCJwcmVsb2FkIiwidXNlSW50ZXJpbVRpbGVzT25FcnJvciIsInNldFByZWxvYWQiLCJzZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yIiwiZ2V0UHJlbG9hZCIsIlRpbGVQcm9wZXJ0eSIsImdldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJMYXllclJlbmRlcmVyIiwiYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8iLCJoYW5kbGVJbWFnZUNoYW5nZV8iLCJsYXllcl8iLCJkZWNsdXR0ZXJFeGVjdXRvckdyb3VwIiwibG9hZGVkVGlsZUNhbGxiYWNrIiwidGlsZXMiLCJ0aWxlIiwidGlsZUNvb3JkIiwidG9TdHJpbmciLCJjcmVhdGVMb2FkZWRUaWxlRmluZGVyIiwicHJvamVjdGlvbiIsInRpbGVSYW5nZSIsImNhbGxiYWNrIiwiZm9yRWFjaExvYWRlZFRpbGUiLCJmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSIsImNvb3JkaW5hdGUiLCJoaXRUb2xlcmFuY2UiLCJtYXRjaGVzIiwiZ2V0RGF0YUF0UGl4ZWwiLCJnZXRMYXllciIsImhhbmRsZUZvbnRzQ2hhbmdlZCIsInJlbmRlcklmUmVhZHlBbmRWaXNpYmxlIiwibG9hZEltYWdlIiwiaW1hZ2UiLCJpbWFnZVN0YXRlIiwibG9hZCIsIlJlbmRlckV2ZW50Iiwib3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybSIsIm9wdF9mcmFtZVN0YXRlIiwib3B0X2NvbnRleHQiLCJpbnZlcnNlUGl4ZWxUcmFuc2Zvcm0iLCJjb250ZXh0IiwidHJhbnNmb3JtU3RyaW5nRGl2IiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsIkZJUkVGT1giLCJXRUJLSVQiLCJERVZJQ0VfUElYRUxfUkFUSU8iLCJkZXZpY2VQaXhlbFJhdGlvIiwiV09SS0VSX09GRlNDUkVFTl9DQU5WQVMiLCJXb3JrZXJHbG9iYWxTY29wZSIsIk9mZnNjcmVlbkNhbnZhcyIsIklNQUdFX0RFQ09ERSIsIkltYWdlIiwiZGVjb2RlIiwiUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMiLCJwYXNzaXZlIiwid2luZG93IiwiZXJyb3IiLCJ0cmFuc2Zvcm0iLCJjb21wb3NlIiwiZHgxIiwiZHkxIiwic3giLCJzeSIsImFuZ2xlIiwiZHgyIiwiZHkyIiwic2luIiwiY29zIiwibWFrZUludmVyc2UiLCJtYXQiLCJkZXQiLCJjIiwiZSIsImYiLCJib3VuZGluZ0V4dGVudCIsImNvb3JkaW5hdGVzIiwiZXh0ZW5kQ29vcmRpbmF0ZSIsImNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSIsImNvbnRhaW5zQ29vcmRpbmF0ZSIsImNvbnRhaW5zWFkiLCJjb29yZGluYXRlUmVsYXRpb25zaGlwIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsInJlbGF0aW9uc2hpcCIsImNyZWF0ZU9yVXBkYXRlIiwib3B0X2V4dGVudCIsImNyZWF0ZU9yVXBkYXRlRW1wdHkiLCJleHRlbnQxIiwiZXh0ZW50MiIsImV4dGVuZEZsYXRDb29yZGluYXRlcyIsImZsYXRDb29yZGluYXRlcyIsIm9mZnNldCIsImVuZCIsInN0cmlkZSIsImV4dGVuZFhZIiwiZm9yRWFjaENvcm5lciIsInZhbCIsImdldEJvdHRvbUxlZnQiLCJnZXRCb3R0b21SaWdodCIsImdldFRvcFJpZ2h0IiwiZ2V0VG9wTGVmdCIsImdldEFyZWEiLCJhcmVhIiwiZ2V0SGVpZ2h0IiwiZ2V0Q2VudGVyIiwiZ2V0Q29ybmVyIiwiY29ybmVyIiwiQ29ybmVyIiwiZ2V0Rm9yVmlld0FuZFNpemUiLCJjZW50ZXIiLCJyb3RhdGlvbiIsInNpemUiLCJjb3NSb3RhdGlvbiIsInNpblJvdGF0aW9uIiwieENvcyIsInhTaW4iLCJ5Q29zIiwieVNpbiIsIngwIiwieDMiLCJ5MCIsInkzIiwiZ2V0SW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0cyIsImNyZWF0ZUNhbnZhc0NvbnRleHQyRCIsIm9wdF93aWR0aCIsIm9wdF9oZWlnaHQiLCJvcHRfY2FudmFzUG9vbCIsIm9wdF9Db250ZXh0MkRTZXR0aW5ncyIsImNhbnZhcyIsInNoaWZ0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJnZXRDb250ZXh0IiwicmVwbGFjZU5vZGUiLCJuZXdOb2RlIiwib2xkTm9kZSIsInBhcmVudCIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJyZW1vdmVOb2RlIiwibm9kZSIsInJlbW92ZUNoaWxkIiwiQ2FudmFzTGF5ZXJSZW5kZXJlciIsImNvbnRhaW5lciIsInJlbmRlcmVkUmVzb2x1dGlvbiIsInRlbXBUcmFuc2Zvcm0iLCJwaXhlbFRyYW5zZm9ybSIsImNvbnRhaW5lclJldXNlZCIsInVzZUNvbnRhaW5lciIsImxheWVyQ2xhc3NOYW1lIiwic3R5bGUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIkhUTUxDYW52YXNFbGVtZW50IiwicG9zaXRpb24iLCJhcHBlbmRDaGlsZCIsImxlZnQiLCJ0cmFuc2Zvcm1PcmlnaW4iLCJjbGlwVW5yb3RhdGVkIiwidG9wTGVmdCIsInRvcFJpZ2h0IiwiYm90dG9tUmlnaHQiLCJib3R0b21MZWZ0IiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0iLCJpbnZlcnRlZCIsInNhdmUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbGlwIiwiZGlzcGF0Y2hSZW5kZXJFdmVudF8iLCJldmVudF8xIiwicHJlUmVuZGVyIiwicG9zdFJlbmRlciIsImdldFJlbmRlclRyYW5zZm9ybSIsInBpeGVsUmF0aW8iLCJvZmZzZXRYIiwicmVuZGVyUGl4ZWwiLCJzbGljZSIsImxheWVyRXh0ZW50IiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0iLCJuZXdDYW52YXMiLCJuZXdDb250ZXh0IiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwiZ2V0SW1hZ2VEYXRhIiwiZXJyIiwiVWludDhBcnJheSIsIlRpbGVSYW5nZSIsImNvbnRhaW5zIiwiY29udGFpbnNUaWxlUmFuZ2UiLCJnZXRTaXplIiwiZ2V0V2lkdGgiLCJVbml0cyIsIkRFR1JFRVMiLCJGRUVUIiwiTUVURVJTIiwiUElYRUxTIiwiVElMRV9QSVhFTFMiLCJVU0ZFRVQiLCJNRVRFUlNfUEVSX1VOSVQiLCJQcm9qZWN0aW9uIiwiY29kZV8iLCJ1bml0c18iLCJleHRlbnRfIiwid29ybGRFeHRlbnRfIiwid29ybGRFeHRlbnQiLCJheGlzT3JpZW50YXRpb25fIiwiYXhpc09yaWVudGF0aW9uIiwiZ2xvYmFsXyIsImdsb2JhbCIsImNhbldyYXBYXyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmNfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uIiwiZGVmYXVsdFRpbGVHcmlkXyIsIm1ldGVyc1BlclVuaXRfIiwibWV0ZXJzUGVyVW5pdCIsImNhbldyYXBYIiwiZ2V0Q29kZSIsImdldFVuaXRzIiwiZ2V0TWV0ZXJzUGVyVW5pdCIsImdldFdvcmxkRXh0ZW50IiwiZ2V0QXhpc09yaWVudGF0aW9uIiwiaXNHbG9iYWwiLCJzZXRHbG9iYWwiLCJnZXREZWZhdWx0VGlsZUdyaWQiLCJzZXREZWZhdWx0VGlsZUdyaWQiLCJ0aWxlR3JpZCIsInNldFdvcmxkRXh0ZW50Iiwic2V0R2V0UG9pbnRSZXNvbHV0aW9uIiwiZnVuYyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmMiLCJSQURJVVMiLCJIQUxGX1NJWkUiLCJFWFRFTlQiLCJXT1JMRF9FWFRFTlQiLCJNQVhfU0FGRV9ZIiwidGFuIiwiRVBTRzM4NTdQcm9qZWN0aW9uIiwidW5pdHMiLCJwb2ludCIsIlBST0pFQ1RJT05TIiwiRVBTRzQzMjZQcm9qZWN0aW9uIiwib3B0X2F4aXNPcmllbnRhdGlvbiIsImNhY2hlIiwidHJhbnNmb3JtcyIsImRlc3RpbmF0aW9uIiwidHJhbnNmb3JtRm4iLCJzb3VyY2VDb2RlIiwiZGVzdGluYXRpb25Db2RlIiwiREVGQVVMVF9SQURJVVMiLCJnZXREaXN0YW5jZSIsImMxIiwiYzIiLCJvcHRfcmFkaXVzIiwicmFkaXVzIiwibGF0MSIsImxhdDIiLCJkZWx0YUxhdEJ5MiIsImRlbHRhTG9uQnkyIiwiYXRhbjIiLCJzcXJ0IiwiZGlzdGFuY2UiLCJiZWFyaW5nIiwibG9uMSIsImRCeVIiLCJsYXQiLCJhc2luIiwiY2xvbmVUcmFuc2Zvcm0iLCJpbnB1dCIsIm9wdF9vdXRwdXQiLCJvcHRfZGltZW5zaW9uIiwiaWRlbnRpdHlUcmFuc2Zvcm0iLCJhZGRQcm9qZWN0aW9uIiwiYWRkIiwicHJvamVjdGlvbkxpa2UiLCJyZXBsYWNlIiwib3B0X3VuaXRzIiwicG9pbnRSZXNvbHV0aW9uIiwiZ2V0dGVyIiwidG9FUFNHNDMyNl8xIiwiZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zIiwidmVydGljZXMiLCJhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMiLCJwcm9qZWN0aW9ucyIsImZvckVhY2giLCJhZGRQcm9qZWN0aW9ucyIsImNyZWF0ZVByb2plY3Rpb24iLCJkZWZhdWx0Q29kZSIsImVxdWl2YWxlbnQiLCJwcm9qZWN0aW9uMSIsInByb2plY3Rpb24yIiwiZXF1YWxVbml0cyIsInNvdXJjZVByb2plY3Rpb24iLCJkZXN0aW5hdGlvblByb2plY3Rpb24iLCJ0cmFuc2Zvcm1GdW5jIiwiZ2V0VHJhbnNmb3JtIiwicHJvamVjdGlvbnMyIiwiZm9yd2FyZFRyYW5zZm9ybSIsImludmVyc2VUcmFuc2Zvcm0iLCJ1c2VyUHJvamVjdGlvbiIsImdldFVzZXJQcm9qZWN0aW9uIiwidG9Vc2VyQ29vcmRpbmF0ZSIsImZyb21Vc2VyQ29vcmRpbmF0ZSIsImRlc3RQcm9qZWN0aW9uIiwiZnJvbVVzZXJFeHRlbnQiLCJkaW1lbnNpb24iLCJhdGFuIiwiQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIiLCJ0aWxlTGF5ZXIiLCJleHRlbnRDaGFuZ2VkIiwicmVuZGVyZWRFeHRlbnRfIiwicmVuZGVyZWRQaXhlbFJhdGlvIiwicmVuZGVyZWRQcm9qZWN0aW9uIiwicmVuZGVyZWRSZXZpc2lvbiIsInJlbmRlcmVkVGlsZXMiLCJuZXdUaWxlc18iLCJ0bXBFeHRlbnQiLCJ0bXBUaWxlUmFuZ2VfIiwiaXNEcmF3YWJsZVRpbGUiLCJ0aWxlU3RhdGUiLCJnZXRUaWxlIiwieiIsInNldFN0YXRlIiwiZ2V0SW50ZXJpbVRpbGUiLCJsYXllckluZGV4Iiwidmlld1Jlc29sdXRpb24iLCJ2aWV3Q2VudGVyIiwidGlsZVNvdXJjZSIsInNvdXJjZVJldmlzaW9uIiwiZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwiZ2V0WkZvclJlc29sdXRpb24iLCJ6RGlyZWN0aW9uIiwidGlsZVJlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uIiwidGlsZVBpeGVsUmF0aW8iLCJnZXRUaWxlUGl4ZWxSYXRpbyIsImNhbnZhc0V4dGVudCIsImdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoiLCJ0aWxlc1RvRHJhd0J5WiIsImZpbmRMb2FkZWRUaWxlcyIsInRtcFRpbGVSYW5nZSIsInVpZCIsImluVHJhbnNpdGlvbiIsImdldEFscGhhIiwidGltZSIsImNoaWxkVGlsZVJhbmdlIiwiZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UiLCJjb3ZlcmVkIiwiZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSIsImNhbnZhc1NjYWxlIiwiY2FudmFzVHJhbnNmb3JtIiwidHJhbnNmb3JtU3RyaW5nIiwiam9pbiIsImdldENvbnRleHRPcHRpb25zIiwiY2xpcHMiLCJjbGlwWnMiLCJjdXJyZW50Q2xpcCIsInpzIiwiTnVtYmVyIiwic29ydCIsImdldE9wYXF1ZSIsInJldmVyc2UiLCJjdXJyZW50WiIsImN1cnJlbnRUaWxlUGl4ZWxTaXplIiwiZ2V0VGlsZVBpeGVsU2l6ZSIsImN1cnJlbnRTY2FsZSIsImR4XzEiLCJkeV8xIiwib3JpZ2luVGlsZUNvb3JkIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaIiwib3JpZ2luVGlsZUV4dGVudCIsImdldFRpbGVDb29yZEV4dGVudCIsIm9yaWdpbl8xIiwidGlsZUd1dHRlciIsImdldEd1dHRlckZvclByb2plY3Rpb24iLCJ0aWxlc1RvRHJhdyIsInRpbGVDb29yZEtleSIsInhJbmRleCIsIm5leHRYIiwieUluZGV4IiwibmV4dFkiLCJ3IiwiaCIsInRyYW5zaXRpb24iLCJpXzEiLCJkcmF3VGlsZUltYWdlIiwicmVzdG9yZSIsInVuc2hpZnQiLCJ1cGRhdGVVc2VkVGlsZXMiLCJ1c2VkVGlsZXMiLCJtYW5hZ2VUaWxlUHlyYW1pZCIsInNjaGVkdWxlRXhwaXJlQ2FjaGUiLCJndXR0ZXIiLCJnZXRUaWxlSW1hZ2UiLCJ0aWxlQWxwaGEiLCJhbHBoYSIsImFscGhhQ2hhbmdlZCIsImdsb2JhbEFscGhhIiwiYW5pbWF0ZSIsImVuZFRyYW5zaXRpb24iLCJnZXRJbWFnZSIsImNhbkV4cGlyZUNhY2hlIiwicG9zdFJlbmRlckZ1bmN0aW9uIiwidGlsZVNvdXJjZUtleSIsImV4cGlyZUNhY2hlIiwicG9zdFJlbmRlckZ1bmN0aW9ucyIsImdldEtleSIsIm9wdF90aWxlQ2FsbGJhY2siLCJ3YW50ZWRUaWxlcyIsInRpbGVRdWV1ZSIsInRpbGVDb3VudCIsImlzS2V5UXVldWVkIiwiZW5xdWV1ZSIsImdldFRpbGVDb29yZENlbnRlciIsInVzZVRpbGUiLCJ1cGRhdGVDYWNoZVNpemUiLCJUaWxlTGF5ZXIiLCJCYXNlVGlsZSIsImNvb3JkaW5hdGUxIiwiY29vcmRpbmF0ZTIiLCJjb3NBbmdsZSIsInNpbkFuZ2xlIiwiY3JlYXRlRXh0ZW50Iiwib25seUNlbnRlciIsInNtb290aCIsIm9wdF9pc01vdmluZyIsIm9wdF9jZW50ZXJTaGlmdCIsInZpZXdXaWR0aCIsInZpZXdIZWlnaHQiLCJzaGlmdFgiLCJzaGlmdFkiLCJyYXRpbyIsIm5vbmUiLCJnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uIiwibWF4RXh0ZW50Iiwidmlld3BvcnRTaXplIiwic2hvd0Z1bGxFeHRlbnQiLCJ4UmVzb2x1dGlvbiIsInlSZXNvbHV0aW9uIiwiZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24iLCJyZXN1bHQiLCJjcmVhdGVNaW5NYXhSZXNvbHV0aW9uIiwib3B0X3Ntb290aCIsIm9wdF9tYXhFeHRlbnQiLCJvcHRfc2hvd0Z1bGxFeHRlbnQiLCJjYXBwZWRNYXhSZXMiLCJkaXNhYmxlIiwiZWFzZUluIiwicG93IiwiZWFzZU91dCIsImluQW5kT3V0IiwibGluZWFyIiwidG1wVHJhbnNmb3JtIiwiR2VvbWV0cnkiLCJmbiIsImxhc3RSZXN1bHQiLCJsYXN0QXJncyIsImxhc3RUaGlzIiwiY2FsbGVkIiwiZXh0ZW50UmV2aXNpb25fIiwic2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSIsInNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uIiwic2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsIiwicmV2aXNpb24iLCJzcXVhcmVkVG9sZXJhbmNlIiwib3B0X3RyYW5zZm9ybSIsImdldFNpbXBsaWZpZWRHZW9tZXRyeSIsImNsb25lIiwiYXBwbHlUcmFuc2Zvcm0iLCJuZXh0QXJncyIsInNpbXBsaWZ5VHJhbnNmb3JtZWQiLCJjbG9zZXN0UG9pbnRYWSIsImNsb3Nlc3RQb2ludCIsIm1pblNxdWFyZWREaXN0YW5jZSIsImNvb3JkIiwiZ2V0Q2xvc2VzdFBvaW50Iiwib3B0X2Nsb3Nlc3RQb2ludCIsIk5hTiIsImludGVyc2VjdHNDb29yZGluYXRlIiwiY29tcHV0ZUV4dGVudCIsImlzTmFOIiwicmV0dXJuT3JVcGRhdGUiLCJyb3RhdGUiLCJhbmNob3IiLCJzY2FsZSIsIm9wdF9zeSIsIm9wdF9hbmNob3IiLCJzaW1wbGlmeSIsInRvbGVyYW5jZSIsImdldFR5cGUiLCJpbnRlcnNlY3RzRXh0ZW50IiwidHJhbnNsYXRlIiwiZGVsdGFYIiwiZGVsdGFZIiwic291cmNlUHJvaiIsImluQ29vcmRpbmF0ZXMiLCJvdXRDb29yZGluYXRlcyIsInBpeGVsRXh0ZW50IiwicHJvamVjdGVkRXh0ZW50Iiwib3B0X2Rlc3QiLCJkZXN0IiwiaiIsImdldFN0cmlkZUZvckxheW91dCIsImxheW91dCIsIkdlb21ldHJ5TGF5b3V0IiwiU2ltcGxlR2VvbWV0cnkiLCJnZXRDb29yZGluYXRlcyIsImdldEZpcnN0Q29vcmRpbmF0ZSIsImdldEZsYXRDb29yZGluYXRlcyIsImdldExhc3RDb29yZGluYXRlIiwiZ2V0TGF5b3V0Iiwic2ltcGxpZmllZEdlb21ldHJ5IiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwiLCJnZXRTdHJpZGUiLCJzZXRGbGF0Q29vcmRpbmF0ZXMiLCJzZXRDb29yZGluYXRlcyIsIm9wdF9sYXlvdXQiLCJzZXRMYXlvdXQiLCJuZXN0aW5nIiwiZ2V0TGF5b3V0Rm9yU3RyaWRlIiwiYW5jaG9yWCIsImFuY2hvclkiLCJrIiwiYXNzaWduQ2xvc2VzdCIsIm9mZnNldDEiLCJvZmZzZXQyIiwibWF4U3F1YXJlZERlbHRhIiwic3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdFBvaW50IiwibWF4RGVsdGEiLCJpc1JpbmciLCJvcHRfdG1wUG9pbnQiLCJzcXVhcmVkRGlzdGFuY2UiLCJ0bXBQb2ludCIsImRlZmxhdGVDb29yZGluYXRlcyIsInNuYXAiLCJxdWFudGl6ZSIsInNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMiLCJzaW1wbGlmaWVkT2Zmc2V0IiwiaW5mbGF0ZUNvb3JkaW5hdGVzIiwib3B0X2Nvb3JkaW5hdGVzIiwibGluZWFyUmluZyIsInR3aWNlQXJlYSIsIkxpbmVhclJpbmciLCJtYXhEZWx0YV8iLCJtYXhEZWx0YVJldmlzaW9uXyIsIm1hcmtlcnMiLCJzdGFjayIsImxhc3QiLCJwb3AiLCJmaXJzdCIsIm1heFNxdWFyZWREaXN0YW5jZSIsInNxdWFyZWREaXN0YW5jZV8xIiwiZG91Z2xhc1BldWNrZXIiLCJQb2ludCIsImRlZmxhdGVDb29yZGluYXRlIiwibGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50IiwibGluZWFyUmluZ0NvbnRhaW5zWFkiLCJ3biIsImxpbmVhclJpbmdzQ29udGFpbnNYWSIsImVuZHMiLCJpbnRlcnNlY3RzTGluZVN0cmluZyIsImNvb3JkaW5hdGVzRXh0ZW50IiwicmV0IiwicG9pbnQxIiwicG9pbnQyIiwic3RhcnQiLCJzdGFydFJlbCIsImVuZFJlbCIsInN0YXJ0WCIsInN0YXJ0WSIsImVuZFgiLCJlbmRZIiwic2xvcGUiLCJpbnRlcnNlY3RzU2VnbWVudCIsInRtcCIsImxpbmVhclJpbmdJc0Nsb2Nrd2lzZSIsImVkZ2UiLCJvcmllbnRMaW5lYXJSaW5ncyIsIm9wdF9yaWdodCIsInJpZ2h0IiwiaXNDbG9ja3dpc2UiLCJQb2x5Z29uIiwib3B0X2VuZHMiLCJlbmRzXyIsImZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fIiwiZmxhdEludGVyaW9yUG9pbnRfIiwib3JpZW50ZWRSZXZpc2lvbl8iLCJvcmllbnRlZEZsYXRDb29yZGluYXRlc18iLCJhcHBlbmRMaW5lYXJSaW5nIiwicG9seWdvbiIsImFycmF5TWF4U3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQiLCJnZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyIsImxpbmVhclJpbmdzIiwib3B0X2Nvb3JkaW5hdGVzcyIsImNvb3JkaW5hdGVzcyIsImpqIiwiaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJnZXRFbmRzIiwiZ2V0RmxhdEludGVyaW9yUG9pbnQiLCJmbGF0Q2VudGVyIiwiZmxhdENlbnRlcnMiLCJmbGF0Q2VudGVyc09mZnNldCIsImludGVyc2VjdGlvbnMiLCJyciIsInBvaW50WCIsIm1heFNlZ21lbnRMZW5ndGgiLCJzZWdtZW50TGVuZ3RoIiwiYWJzIiwiZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkiLCJnZXRJbnRlcmlvclBvaW50IiwiZ2V0TGluZWFyUmluZ0NvdW50IiwiZ2V0TGluZWFyUmluZyIsImdldExpbmVhclJpbmdzIiwibGluZWFyUmluZ3NBcmVPcmllbnRlZCIsInNpbXBsaWZpZWRFbmRzIiwicXVhbnRpemVBcnJheSIsImludGVyc2VjdHNMaW5lYXJSaW5nIiwiaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSIsImRlZmxhdGVDb29yZGluYXRlc0FycmF5IiwiZnJvbUV4dGVudCIsImFuaW1hdGlvbkNhbGxiYWNrIiwicmV0dXJuVmFsdWUiLCJzZXRUaW1lb3V0IiwiaXNOb29wQW5pbWF0aW9uIiwiYW5pbWF0aW9uIiwic291cmNlQ2VudGVyIiwidGFyZ2V0Q2VudGVyIiwic291cmNlUmVzb2x1dGlvbiIsInRhcmdldFJlc29sdXRpb24iLCJzb3VyY2VSb3RhdGlvbiIsInRhcmdldFJvdGF0aW9uIiwiY2FsY3VsYXRlQ2VudGVyT24iLCJyb3RYIiwicm90WSIsIlZpZXciLCJoaW50c18iLCJhbmltYXRpb25zXyIsInVwZGF0ZUFuaW1hdGlvbktleV8iLCJwcm9qZWN0aW9uXyIsInZpZXdwb3J0U2l6ZV8iLCJ0YXJnZXRDZW50ZXJfIiwidGFyZ2V0UmVzb2x1dGlvbl8iLCJ0YXJnZXRSb3RhdGlvbl8iLCJjYW5jZWxBbmNob3JfIiwiYXBwbHlPcHRpb25zXyIsInJlc29sdXRpb25Db25zdHJhaW50SW5mbyIsInJlc29sdXRpb25Db25zdHJhaW50Iiwiem9vbUZhY3RvciIsIm11bHRpV29ybGQiLCJzbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludCIsInByb2pFeHRlbnQiLCJjb25zdHJhaW5Pbmx5Q2VudGVyIiwicmVzb2x1dGlvbnMiLCJjb25zdHJhaW5SZXNvbHV0aW9uIiwiY2FwcGVkIiwiZmxvb3IiLCJjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyIsImRlZmF1bHRNYXhSZXNvbHV0aW9uIiwiZGVmYXVsdE1pblJlc29sdXRpb24iLCJkZWZhdWx0TWF4Wm9vbSIsInBvd2VyIiwib3B0X21pblJlc29sdXRpb24iLCJtaW5ab29tTGV2ZWwiLCJjZWlsIiwiY2FwcGVkWm9vbUxldmVsIiwiem9vbUxldmVsIiwiY3JlYXRlU25hcFRvUG93ZXIiLCJjb25zdHJhaW50IiwiY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJtYXhSZXNvbHV0aW9uXyIsIm1pblJlc29sdXRpb25fIiwiem9vbUZhY3Rvcl8iLCJyZXNvbHV0aW9uc18iLCJwYWRkaW5nXyIsInBhZGRpbmciLCJtaW5ab29tXyIsImNlbnRlckNvbnN0cmFpbnQiLCJzbW9vdGhFeHRlbnRDb25zdHJhaW50IiwiY3JlYXRlQ2VudGVyQ29uc3RyYWludCIsInJvdGF0aW9uQ29uc3RyYWludCIsImVuYWJsZVJvdGF0aW9uIiwiY29uc3RyYWluUm90YXRpb24iLCJ0aGV0YSIsImNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludCIsImNvbnN0cmFpbnRzXyIsInNldFJvdGF0aW9uIiwic2V0Q2VudGVySW50ZXJuYWwiLCJzZXRSZXNvbHV0aW9uIiwic2V0Wm9vbSIsIm9wdGlvbnNfIiwib2xkUGFkZGluZyIsIm5ld1BhZGRpbmciLCJvZmZzZXRZIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsImdldFVwZGF0ZWRPcHRpb25zXyIsIm5ld09wdGlvbnMiLCJnZXRab29tIiwiZ2V0Q2VudGVySW50ZXJuYWwiLCJnZXRSb3RhdGlvbiIsInZhcl9hcmdzIiwiaXNEZWYiLCJnZXRBbmltYXRpbmciLCJyZXNvbHZlQ29uc3RyYWludHMiLCJhcmdzIiwiZ2V0UHJvamVjdGlvbiIsImFuaW1hdGVJbnRlcm5hbCIsImFuaW1hdGlvbkNvdW50IiwiRGF0ZSIsIm5vdyIsInNlcmllcyIsImNvbXBsZXRlIiwiZHVyYXRpb24iLCJlYXNpbmciLCJnZXRSZXNvbHV0aW9uRm9yWm9vbSIsImRlbHRhIiwic2V0SGludCIsInVwZGF0ZUFuaW1hdGlvbnNfIiwiZ2V0SW50ZXJhY3RpbmciLCJjYW5jZWxBbmltYXRpb25zIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJtb3JlIiwic2VyaWVzQ29tcGxldGUiLCJlbGFwc2VkIiwiZnJhY3Rpb24iLCJwcm9ncmVzcyIsImdldFZpZXdwb3J0U2l6ZV8iLCJjb25zdHJhaW5lZFJlc29sdXRpb24iLCJjYWxjdWxhdGVDZW50ZXJab29tIiwiYXBwbHlUYXJnZXRTdGF0ZV8iLCJjb25zdHJhaW5lZFJvdGF0aW9uIiwiY2FsY3VsYXRlQ2VudGVyUm90YXRlIiwiZmlsdGVyIiwiQm9vbGVhbiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImN1cnJlbnRDZW50ZXIiLCJjdXJyZW50UmVzb2x1dGlvbiIsIm9wdF9yb3RhdGlvbiIsInNldFZpZXdwb3J0U2l6ZSIsIm9wdF9zaXplIiwiVmlld1Byb3BlcnR5IiwiZ2V0Q29uc3RyYWludHMiLCJnZXRDb25zdHJhaW5SZXNvbHV0aW9uIiwiZ2V0SGludHMiLCJvcHRfaGludHMiLCJjYWxjdWxhdGVFeHRlbnQiLCJjYWxjdWxhdGVFeHRlbnRJbnRlcm5hbCIsImdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18iLCJnZXRab29tRm9yUmVzb2x1dGlvbiIsInNldENvbnN0cmFpblJlc29sdXRpb24iLCJlbmFibGVkIiwiZ2V0UmVzb2x1dGlvbnMiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50IiwiZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsIiwiZ2V0UmVzb2x1dGlvbkZvclZhbHVlRnVuY3Rpb24iLCJvcHRfcG93ZXIiLCJnZXRDb25zdHJhaW5lZFJlc29sdXRpb24iLCJnZXRWYWx1ZUZvclJlc29sdXRpb25GdW5jdGlvbiIsImxvZ1Bvd2VyIiwicmVkdWNlZFNpemUiLCJuZWFyZXN0IiwiYmFzZUxldmVsIiwiZml0IiwiZ2VvbWV0cnlPckV4dGVudCIsImdlb21ldHJ5IiwiZml0SW50ZXJuYWwiLCJyb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkiLCJjb29yZHMiLCJtaW5Sb3RYIiwibWluUm90WSIsIm1heFJvdFgiLCJtYXhSb3RZIiwicm90YXRlZEV4dGVudCIsImNlbnRlclJvdCIsImNlbnRlclgiLCJjZW50ZXJZIiwiZ2V0Q29uc3RyYWluZWRDZW50ZXIiLCJjZW50ZXJPbiIsImNlbnRlck9uSW50ZXJuYWwiLCJjYWxjdWxhdGVDZW50ZXJTaGlmdCIsImNlbnRlclNoaWZ0Iiwic2hpZnRlZENlbnRlciIsImFkanVzdENlbnRlciIsImRlbHRhQ29vcmRpbmF0ZXMiLCJzZXRDZW50ZXIiLCJhZGp1c3RDZW50ZXJJbnRlcm5hbCIsImFkanVzdFJlc29sdXRpb24iLCJhZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwiLCJpc01vdmluZyIsIm5ld1Jlc29sdXRpb24iLCJhZGp1c3Rab29tIiwiYWRqdXN0Um90YXRpb24iLCJhZGp1c3RSb3RhdGlvbkludGVybmFsIiwibmV3Um90YXRpb24iLCJoaW50Iiwib3B0X2RvTm90Q2FuY2VsQW5pbXMiLCJvcHRfZm9yY2VNb3ZpbmciLCJuZXdDZW50ZXIiLCJvcHRfZHVyYXRpb24iLCJvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiIsImJlZ2luSW50ZXJhY3Rpb24iLCJlbmRJbnRlcmFjdGlvbiIsImVuZEludGVyYWN0aW9uSW50ZXJuYWwiLCJvcHRfdGFyZ2V0UmVzb2x1dGlvbiIsImdldENvbnN0cmFpbmVkWm9vbSIsInRhcmdldFpvb20iLCJvcHRfZGlyZWN0aW9uIiwidGFyZ2V0UmVzIiwic3JjIiwiY3Jvc3NPcmlnaW4iLCJjb2xvciIsImciLCJhc1N0cmluZyIsInNoYXJlZCIsIkljb25JbWFnZUNhY2hlIiwiY2FjaGVfIiwiY2FjaGVTaXplXyIsIm1heENhY2hlU2l6ZV8iLCJleHBpcmUiLCJpY29uSW1hZ2UiLCJzZXRTaXplIiwibWF4Q2FjaGVTaXplIiwiZXhwaXJlSWNvbkNhY2hlIiwiTWFwUmVuZGVyZXIiLCJtYXBfIiwiZGlzcGF0Y2hSZW5kZXJFdmVudCIsImNhbGN1bGF0ZU1hdHJpY2VzMkQiLCJjaGVja1dyYXBwZWQiLCJ0aGlzQXJnIiwibGF5ZXJGaWx0ZXIiLCJ0aGlzQXJnMiIsImZlYXR1cmUiLCJ0cmFuc2xhdGVkQ29vcmRpbmF0ZSIsIndvcmxkV2lkdGgiLCJ3b3JsZHNBd2F5Iiwib3B0X3NvdXJjZUV4dGVudFdpZHRoIiwicHJvamVjdGlvbkV4dGVudCIsInNvdXJjZUV4dGVudFdpZHRoIiwib2Zmc2V0cyIsImxheWVyU3RhdGVzIiwibnVtTGF5ZXJzIiwidG1wQ29vcmQiLCJnZXRXcmFwWCIsImNhbGxiYWNrXzEiLCJvcmRlciIsIm0iLCJkaXN0YW5jZVNxIiwiZm9yRWFjaExheWVyQXRQaXhlbCIsImhhc0ZlYXR1cmVBdENvb3JkaW5hdGUiLCJnZXRNYXAiLCJzY2hlZHVsZUV4cGlyZUljb25DYWNoZSIsIkNMQVNTX0hJRERFTiIsIkNMQVNTX0NPTlRST0wiLCJjaGVja2VkRm9udHMiLCJSZWdFeHAiLCJjb25zb2xlIiwid2FybiIsIkNvbXBvc2l0ZU1hcFJlbmRlcmVyIiwiZm9udENoYW5nZUxpc3RlbmVyS2V5XyIsInJlZHJhd1RleHQiLCJlbGVtZW50XyIsIkNMQVNTX1VOU0VMRUNUQUJMRSIsImdldFZpZXdwb3J0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNoaWxkcmVuXyIsInJlbmRlcmVkVmlzaWJsZV8iLCJkZWNsdXR0ZXJMYXllcnMiLCJwcmV2aW91c0VsZW1lbnQiLCJlbGVtZW50IiwicmVuZGVyRGVjbHV0dGVyIiwiY2hpbGRyZW4iLCJvbGRDaGlsZHJlbiIsImNoaWxkTm9kZXMiLCJvbGRDaGlsZCIsIm5ld0NoaWxkIiwicmVwbGFjZUNoaWxkcmVuIiwiZGlzcGxheSIsIk1hcCIsIkNvbGxlY3Rpb25FdmVudCIsIm9wdF9lbGVtZW50Iiwib3B0X2luZGV4IiwiQ29sbGVjdGlvbiIsInVuaXF1ZV8iLCJ1bmlxdWUiLCJhcnJheV8iLCJhc3NlcnRVbmlxdWVfIiwidXBkYXRlTGVuZ3RoXyIsImdldExlbmd0aCIsImdldEFycmF5IiwiaXRlbSIsImluc2VydEF0IiwiZWxlbSIsIkNvbGxlY3Rpb25FdmVudFR5cGUiLCJyZW1vdmVBdCIsInJlbW92ZSIsInByZXYiLCJzZXRBdCIsIm9wdF9leGNlcHQiLCJMYXllckdyb3VwIiwibGF5ZXJzIiwibGF5ZXJzTGlzdGVuZXJLZXlzXyIsImxpc3RlbmVyS2V5c18iLCJoYW5kbGVMYXllcnNDaGFuZ2VkXyIsInNldExheWVycyIsImhhbmRsZUxheWVyQ2hhbmdlXyIsImdldExheWVycyIsImlkIiwiaGFuZGxlTGF5ZXJzQWRkXyIsImhhbmRsZUxheWVyc1JlbW92ZV8iLCJsYXllcnNBcnJheSIsImNvbGxlY3Rpb25FdmVudCIsInBvcyIsIm93bkxheWVyU3RhdGUiLCJkZWZhdWx0WkluZGV4IiwiTWFwRXZlbnQiLCJNYXBCcm93c2VyRXZlbnQiLCJvcmlnaW5hbEV2ZW50Iiwib3B0X2RyYWdnaW5nIiwicGl4ZWxfIiwiY29vcmRpbmF0ZV8iLCJkcmFnZ2luZyIsImdldEV2ZW50UGl4ZWwiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsIiwiU0lOR0xFQ0xJQ0siLCJDTElDSyIsIkRCTENMSUNLIiwiUE9JTlRFUkRSQUciLCJQT0lOVEVSTU9WRSIsIlBPSU5URVJET1dOIiwiUE9JTlRFUlVQIiwiUE9JTlRFUk9WRVIiLCJQT0lOVEVST1VUIiwiUE9JTlRFUkVOVEVSIiwiUE9JTlRFUkxFQVZFIiwiUE9JTlRFUkNBTkNFTCIsIk1hcEJyb3dzZXJFdmVudEhhbmRsZXIiLCJtb3ZlVG9sZXJhbmNlIiwiY2xpY2tUaW1lb3V0SWRfIiwiZW11bGF0ZUNsaWNrc18iLCJkcmFnZ2luZ18iLCJkcmFnTGlzdGVuZXJLZXlzXyIsIm1vdmVUb2xlcmFuY2VfIiwiZG93bl8iLCJhY3RpdmVQb2ludGVyc18iLCJ0cmFja2VkVG91Y2hlc18iLCJwb2ludGVyZG93bkxpc3RlbmVyS2V5XyIsImhhbmRsZVBvaW50ZXJEb3duXyIsIm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF8iLCJyZWxheWVkTGlzdGVuZXJLZXlfIiwicmVsYXlFdmVudF8iLCJib3VuZEhhbmRsZVRvdWNoTW92ZV8iLCJoYW5kbGVUb3VjaE1vdmVfIiwiZW11bGF0ZUNsaWNrXyIsInBvaW50ZXJFdmVudCIsIm5ld0V2ZW50IiwiY2xlYXJUaW1lb3V0IiwidXBkYXRlQWN0aXZlUG9pbnRlcnNfIiwicG9pbnRlcklkIiwiaGFuZGxlUG9pbnRlclVwXyIsImlzTW91c2VBY3Rpb25CdXR0b25fIiwiYnV0dG9uIiwiZG9jIiwiZ2V0T3duZXJEb2N1bWVudCIsImhhbmRsZVBvaW50ZXJNb3ZlXyIsImdldFJvb3ROb2RlIiwiaXNNb3ZpbmdfIiwiY2FuY2VsYWJsZSIsImNsaWVudFgiLCJjbGllbnRZIiwiRFJPUCIsIlByaW9yaXR5UXVldWUiLCJwcmlvcml0eUZ1bmN0aW9uIiwia2V5RnVuY3Rpb24iLCJwcmlvcml0eUZ1bmN0aW9uXyIsImtleUZ1bmN0aW9uXyIsImVsZW1lbnRzXyIsInByaW9yaXRpZXNfIiwicXVldWVkRWxlbWVudHNfIiwiZGVxdWV1ZSIsImVsZW1lbnRzIiwicHJpb3JpdGllcyIsInNpZnRVcF8iLCJlbGVtZW50S2V5IiwicHJpb3JpdHkiLCJzaWZ0RG93bl8iLCJnZXRDb3VudCIsImdldExlZnRDaGlsZEluZGV4XyIsImdldFJpZ2h0Q2hpbGRJbmRleF8iLCJnZXRQYXJlbnRJbmRleF8iLCJoZWFwaWZ5XyIsImlzRW1wdHkiLCJpc1F1ZXVlZCIsImNvdW50Iiwic3RhcnRJbmRleCIsImxJbmRleCIsInJJbmRleCIsInNtYWxsZXJDaGlsZEluZGV4IiwicGFyZW50SW5kZXgiLCJyZXByaW9yaXRpemUiLCJUaWxlUXVldWUiLCJ0aWxlUHJpb3JpdHlGdW5jdGlvbiIsInRpbGVDaGFuZ2VDYWxsYmFjayIsImJvdW5kSGFuZGxlVGlsZUNoYW5nZV8iLCJoYW5kbGVUaWxlQ2hhbmdlIiwidGlsZUNoYW5nZUNhbGxiYWNrXyIsInRpbGVzTG9hZGluZ18iLCJ0aWxlc0xvYWRpbmdLZXlzXyIsImFkZGVkIiwiZ2V0VGlsZXNMb2FkaW5nIiwidGlsZUtleSIsImxvYWRNb3JlVGlsZXMiLCJtYXhUb3RhbExvYWRpbmciLCJtYXhOZXdMb2FkcyIsIm5ld0xvYWRzIiwiaGFzQXJlYSIsInRvU2l6ZSIsIlBsdWdnYWJsZU1hcCIsIm9wdGlvbnNJbnRlcm5hbCIsImtleWJvYXJkRXZlbnRUYXJnZXQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRyb2xzIiwiaW50ZXJhY3Rpb25zIiwib3ZlcmxheXMiLCJsYXllckdyb3VwIiwidmlldyIsImNyZWF0ZU9wdGlvbnNJbnRlcm5hbCIsImJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XyIsImhhbmRsZUJyb3dzZXJFdmVudCIsIm1heFRpbGVzTG9hZGluZ18iLCJtYXhUaWxlc0xvYWRpbmciLCJwaXhlbFJhdGlvXyIsInBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyIsImFuaW1hdGlvbkRlbGF5S2V5XyIsImFuaW1hdGlvbkRlbGF5XyIsInJlbmRlckZyYW1lXyIsImNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyIsInBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyIsImZyYW1lSW5kZXhfIiwiZnJhbWVTdGF0ZV8iLCJwcmV2aW91c0V4dGVudF8iLCJ2aWV3UHJvcGVydHlMaXN0ZW5lcktleV8iLCJ2aWV3Q2hhbmdlTGlzdGVuZXJLZXlfIiwibGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyIsInZpZXdwb3J0XyIsIm92ZXJmbG93Iiwib3ZlcmxheUNvbnRhaW5lcl8iLCJwb2ludGVyRXZlbnRzIiwib3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8iLCJtYXBCcm93c2VyRXZlbnRIYW5kbGVyXyIsImtleWJvYXJkRXZlbnRUYXJnZXRfIiwia2V5SGFuZGxlcktleXNfIiwib3ZlcmxheXNfIiwib3ZlcmxheUlkSW5kZXhfIiwiaGFuZGxlUmVzaXplXyIsInBvc3RSZW5kZXJGdW5jdGlvbnNfIiwidGlsZVF1ZXVlXyIsImdldFRpbGVQcmlvcml0eSIsImhhbmRsZVRpbGVDaGFuZ2VfIiwiTWFwUHJvcGVydHkiLCJoYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8iLCJoYW5kbGVWaWV3Q2hhbmdlZF8iLCJoYW5kbGVTaXplQ2hhbmdlZF8iLCJoYW5kbGVUYXJnZXRDaGFuZ2VkXyIsImNvbnRyb2wiLCJpbnRlcmFjdGlvbiIsImFkZE92ZXJsYXlJbnRlcm5hbF8iLCJnZXRJZCIsImFkZENvbnRyb2wiLCJnZXRDb250cm9scyIsImFkZEludGVyYWN0aW9uIiwiZ2V0SW50ZXJhY3Rpb25zIiwiYWRkTGF5ZXIiLCJnZXRMYXllckdyb3VwIiwiYWRkT3ZlcmxheSIsIm92ZXJsYXkiLCJnZXRPdmVybGF5cyIsInNldFRhcmdldCIsImZvckVhY2hGZWF0dXJlQXRQaXhlbCIsImdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCIsImdldEZlYXR1cmVzQXRQaXhlbCIsImZlYXR1cmVzIiwiaGFzRmVhdHVyZUF0UGl4ZWwiLCJnZXRFdmVudENvb3JkaW5hdGUiLCJnZXRFdmVudENvb3JkaW5hdGVJbnRlcm5hbCIsInZpZXdwb3J0UG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJldmVudFBvc2l0aW9uIiwiY2hhbmdlZFRvdWNoZXMiLCJ0b3AiLCJnZXRUYXJnZXQiLCJnZXRUYXJnZXRFbGVtZW50IiwiZ2V0VmlldyIsImdldE92ZXJsYXlCeUlkIiwiZ2V0TG9hZGluZyIsImxvYWRpbmciLCJnZXRQaXhlbEZyb21Db29yZGluYXRlIiwidmlld0Nvb3JkaW5hdGUiLCJnZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwiLCJnZXRPdmVybGF5Q29udGFpbmVyIiwiZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCIsInRhcmdldEVsZW1lbnQiLCJvd25lckRvY3VtZW50IiwidGlsZUNlbnRlciIsImJyb3dzZXJFdmVudCIsIm1hcEJyb3dzZXJFdmVudCIsImhhbmRsZU1hcEJyb3dzZXJFdmVudCIsInJvb3ROb2RlIiwiZG9jdW1lbnRFbGVtZW50IiwiaW50ZXJhY3Rpb25zQXJyYXkiLCJnZXRBY3RpdmUiLCJoYW5kbGVQb3N0UmVuZGVyIiwiaGludHMiLCJ2aWV3SGludHMiLCJsb3dPbkZyYW1lQnVkZ2V0IiwidXBkYXRlU2l6ZSIsImhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfIiwidXBkYXRlVmlld3BvcnRTaXplXyIsImlzUmVuZGVyZWQiLCJyZW5kZXJTeW5jIiwicmVtb3ZlQ29udHJvbCIsInJlbW92ZUludGVyYWN0aW9uIiwicmVtb3ZlTGF5ZXIiLCJyZW1vdmVPdmVybGF5IiwicHJldmlvdXNGcmFtZVN0YXRlIiwiZGVjbHV0dGVyVHJlZSIsIk1hcEV2ZW50VHlwZSIsInNldExheWVyR3JvdXAiLCJzZXRWaWV3IiwiY29tcHV0ZWRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJvZmZzZXRXaWR0aCIsInBhcnNlRmxvYXQiLCJvZmZzZXRIZWlnaHQiLCJwYXJzZUludCIsIkNvbnRyb2wiLCJ0YXJnZXRfIiwibGlzdGVuZXJLZXlzIiwibWFwRXZlbnQiLCJBdHRyaWJ1dGlvbiIsInVsRWxlbWVudF8iLCJjb2xsYXBzZWRfIiwiY29sbGFwc2VkIiwidXNlckNvbGxhcHNlZF8iLCJvdmVycmlkZUNvbGxhcHNpYmxlXyIsImNvbGxhcHNpYmxlIiwiY29sbGFwc2libGVfIiwidGlwTGFiZWwiLCJleHBhbmRDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsIiwiY29sbGFwc2VDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsXyIsInRleHRDb250ZW50IiwibGFiZWwiLCJsYWJlbF8iLCJhY3RpdmVMYWJlbCIsInRvZ2dsZUJ1dHRvbl8iLCJzZXRBdHRyaWJ1dGUiLCJ0aXRsZSIsImhhbmRsZUNsaWNrXyIsImNzc0NsYXNzZXMiLCJyZW5kZXJlZEF0dHJpYnV0aW9uc18iLCJjb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyIsImxvb2t1cCIsInZpc2libGVBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkdldHRlciIsImdldEF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9ucyIsImdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIiwic2V0Q29sbGFwc2libGUiLCJ1cGRhdGVFbGVtZW50XyIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkcmVuIiwiaW5uZXJIVE1MIiwiaGFuZGxlVG9nZ2xlXyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldENvbGxhcHNpYmxlIiwic2V0Q29sbGFwc2VkIiwiZ2V0Q29sbGFwc2VkIiwiUm90YXRlIiwiY29tcGFzc0NsYXNzTmFtZSIsImNhbGxSZXNldE5vcnRoXyIsInJlc2V0Tm9ydGgiLCJkdXJhdGlvbl8iLCJhdXRvSGlkZV8iLCJhdXRvSGlkZSIsInJvdGF0aW9uXyIsInJlc2V0Tm9ydGhfIiwiWm9vbSIsInpvb21JbkNsYXNzTmFtZSIsInpvb21PdXRDbGFzc05hbWUiLCJ6b29tSW5MYWJlbCIsInpvb21PdXRMYWJlbCIsInpvb21JblRpcExhYmVsIiwiem9vbU91dFRpcExhYmVsIiwiaW5FbGVtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJvdXRFbGVtZW50Iiwiem9vbUJ5RGVsdGFfIiwiY3VycmVudFpvb20iLCJuZXdab29tIiwiem9vbUJ5RGVsdGEiLCJJbnRlcmFjdGlvbiIsInNldEFjdGl2ZSIsImFjdGl2ZSIsIkRvdWJsZUNsaWNrWm9vbSIsImRlbHRhXyIsInN0b3BFdmVudCIsInNoaWZ0S2V5IiwiUG9pbnRlckludGVyYWN0aW9uIiwiaGFuZGxlRG93bkV2ZW50IiwiaGFuZGxlRHJhZ0V2ZW50IiwiaGFuZGxlTW92ZUV2ZW50IiwiaGFuZGxlVXBFdmVudCIsInN0b3BEb3duIiwiaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSIsInRyYWNrZWRQb2ludGVyc18iLCJ0YXJnZXRQb2ludGVycyIsImdldFBvaW50ZXJDb3VudCIsInVwZGF0ZVRyYWNrZWRQb2ludGVyc18iLCJoYW5kbGVkVXAiLCJoYW5kbGVkIiwiaXNQb2ludGVyRHJhZ2dpbmdFdmVudCIsImNvbmRpdGlvbnMiLCJwYXNzIiwiYWx0U2hpZnRLZXlzT25seSIsImFsdEtleSIsIm1ldGFLZXkiLCJjdHJsS2V5IiwiZm9jdXNXaXRoVGFiaW5kZXgiLCJoYXNBdHRyaWJ1dGUiLCJhY3RpdmVFbGVtZW50IiwiYWx3YXlzIiwibW91c2VBY3Rpb25CdXR0b24iLCJub01vZGlmaWVyS2V5cyIsInNoaWZ0S2V5T25seSIsInRhcmdldE5vdEVkaXRhYmxlIiwidGFnTmFtZSIsIm1vdXNlT25seSIsInBvaW50ZXJUeXBlIiwicHJpbWFyeUFjdGlvbiIsImlzUHJpbWFyeSIsIkRyYWdQYW4iLCJraW5ldGljXyIsImtpbmV0aWMiLCJsYXN0Q2VudHJvaWQiLCJsYXN0UG9pbnRlcnNDb3VudF8iLCJwYW5uaW5nXyIsImNvbmRpdGlvbiIsImNvbmRpdGlvbl8iLCJvbkZvY3VzT25seSIsIm5vS2luZXRpY18iLCJjZW50cm9pZCIsInVwZGF0ZSIsImJlZ2luIiwiZ2V0QW5nbGUiLCJjZW50ZXJweCIsIlBvaW50ZXIiLCJEcmFnUm90YXRlIiwibGFzdEFuZ2xlXyIsIlJlbmRlckJveCIsImdlb21ldHJ5XyIsInN0YXJ0UGl4ZWxfIiwiZW5kUGl4ZWxfIiwicmVuZGVyXyIsInN0YXJ0UGl4ZWwiLCJlbmRQaXhlbCIsInB4Iiwic2V0UGl4ZWxzIiwiY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSIsImdldEdlb21ldHJ5IiwiRHJhZ0JveEV2ZW50IiwiRHJhZ0JveCIsImJveF8iLCJtaW5BcmVhXyIsIm1pbkFyZWEiLCJvbkJveEVuZCIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwiY29tcGxldGVCb3giLCJEcmFnWm9vbSIsIm91dF8iLCJvdXQiLCJmYWN0b3IiLCJLZXlib2FyZFBhbiIsImRlZmF1bHRDb25kaXRpb25fIiwicGl4ZWxEZWx0YV8iLCJwaXhlbERlbHRhIiwia2V5RXZlbnQiLCJrZXlDb2RlIiwibWFwVW5pdHNEZWx0YSIsInBhbiIsIktleWJvYXJkWm9vbSIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsIktpbmV0aWMiLCJkZWNheSIsIm1pblZlbG9jaXR5IiwiZGVsYXkiLCJkZWNheV8iLCJtaW5WZWxvY2l0eV8iLCJkZWxheV8iLCJwb2ludHNfIiwiYW5nbGVfIiwiaW5pdGlhbFZlbG9jaXR5XyIsImxhc3RJbmRleCIsImZpcnN0SW5kZXgiLCJNb2RlIiwiTW91c2VXaGVlbFpvb20iLCJ0b3RhbERlbHRhXyIsImxhc3REZWx0YV8iLCJ0aW1lb3V0XyIsInRpbWVvdXQiLCJ1c2VBbmNob3JfIiwidXNlQW5jaG9yIiwiY29uc3RyYWluUmVzb2x1dGlvbl8iLCJsYXN0QW5jaG9yXyIsInN0YXJ0VGltZV8iLCJ0aW1lb3V0SWRfIiwibW9kZV8iLCJ0cmFja3BhZEV2ZW50R2FwXyIsInRyYWNrcGFkVGltZW91dElkXyIsImRlbHRhUGVyWm9vbV8iLCJlbmRJbnRlcmFjdGlvbl8iLCJ3aGVlbEV2ZW50IiwiZGVsdGFNb2RlIiwiV2hlZWxFdmVudCIsIkRPTV9ERUxUQV9QSVhFTCIsIkRPTV9ERUxUQV9MSU5FIiwidGltZUxlZnQiLCJoYW5kbGVXaGVlbFpvb21fIiwic2V0TW91c2VBbmNob3IiLCJQaW5jaFJvdGF0ZSIsInBvaW50ZXJPcHRpb25zIiwiYW5jaG9yXyIsInJvdGF0aW5nXyIsInJvdGF0aW9uRGVsdGFfIiwidGhyZXNob2xkXyIsInRocmVzaG9sZCIsInJvdGF0aW9uRGVsdGEiLCJ0b3VjaDAiLCJ0b3VjaDEiLCJQaW5jaFpvb20iLCJsYXN0RGlzdGFuY2VfIiwibGFzdFNjYWxlRGVsdGFfIiwic2NhbGVEZWx0YSIsImFsdFNoaWZ0RHJhZ1JvdGF0ZSIsImRvdWJsZUNsaWNrWm9vbSIsInpvb21EZWx0YSIsInpvb21EdXJhdGlvbiIsImRyYWdQYW4iLCJwaW5jaFJvdGF0ZSIsInBpbmNoWm9vbSIsImtleWJvYXJkIiwibW91c2VXaGVlbFpvb20iLCJzaGlmdERyYWdab29tIiwiem9vbU9wdGlvbnMiLCJyb3RhdGVPcHRpb25zIiwiYXR0cmlidXRpb24iLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJDb21wb3NpdGUiLCJDb21wb3NpdGVDb250cm9sIiwiY2hpbGRDb250cm9scyIsIm9wdHMiLCJzdXBlciIsIkNvbnRhaW5lciIsInN0eWxlQ2xhc3MiLCJ0b0FycmF5IiwidG9nZ2xlQ2xhc3MiLCJzZWxlY3RvcnMydG9nZ2xlIiwidG9nZ2xlQ2xhc3NOYW1lcyIsImFuY2VzdG9yIiwic2VsZWN0b3IydG9nZ2xlIiwidG9nZ2xlRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVDbGFzc05hbWUiLCJ0b2dnbGVDbGFzc09uQ2xpY2siLCJjbGlja1NlbGVjdG9ycyIsImNsaWNrU2VsZWN0b3IiLCJCdXR0b24iLCJ0b29sdGlwQXNUZXh0RWxlbWVudCIsInVuaWNvZGUiLCJpY29uQ2xhc3NOYW1lIiwidG9vbHRpcCIsImJ1dHRvbkNvbnRhaW5lckVsZW1lbnQiLCJjb250YWluZXJDbGFzc05hbWUiLCJidXR0b25FbGVtZW50IiwiZnJvbUNvZGVQb2ludCIsImdldEljb25FbGVtZW50Rm9ySWNvbkNsYXNzTmFtZSIsImFwcGVuZCIsImRpdkVsZW1lbnQiLCJzcGFuRWxlbWVudCIsImdldEJ1dHRvbiIsImljb25FbGVtZW50IiwiVG9nZ2xlRXZlbnQiLCJpc1RvZ2dsZWQiLCJUb2dnbGVCdXR0b24iLCJjb250YWluZXJUb1RvZ2dsZSIsIl9pc1RvZ2dsZWQiLCJ1bmljb2RlVG9nZ2xlZCIsImljb25DbGFzc05hbWVUb2dnbGVkIiwicGFyZW50RWxlbWVudCIsImdldFBhcmVudEVsZW1lbnQiLCJoYW5kbGVPdmVybGF5Rm9yRWxlbWVudCIsImhhbmRsZU92ZXJsYXlPdXRlciIsInNldEJ1dHRvblVuaWNvZGUiLCJzZXRCdXR0b25JY29uQ2xhc3NOYW1lIiwiZ2V0U3R5bGVDbGFzcyIsImNyZWF0ZUNoaWxkSWZOb3RFeGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGlsZCIsInJlbW92ZUNoaWxkcmVuSWZFeGlzdCIsIm92ZXJsYXlhYmxlUGFyZW50cyIsImNsb3Nlc3RQYXJlbnQiLCJjbG9zZXN0IiwiR2VvbG9jYXRpb25FcnJvciIsIkdlb2xvY2F0aW9uIiwicG9zaXRpb25fIiwidHJhbnNmb3JtXyIsIndhdGNoSWRfIiwiaGFuZGxlUHJvamVjdGlvbkNoYW5nZWRfIiwiaGFuZGxlVHJhY2tpbmdDaGFuZ2VkXyIsInNldFByb2plY3Rpb24iLCJ0cmFja2luZ09wdGlvbnMiLCJzZXRUcmFja2luZ09wdGlvbnMiLCJzZXRUcmFja2luZyIsInRyYWNraW5nIiwiZ2V0VHJhY2tpbmciLCJnZW9sb2NhdGlvbiIsIndhdGNoUG9zaXRpb24iLCJwb3NpdGlvbkNoYW5nZV8iLCJwb3NpdGlvbkVycm9yXyIsImdldFRyYWNraW5nT3B0aW9ucyIsImNsZWFyV2F0Y2giLCJhY2N1cmFjeSIsImFsdGl0dWRlIiwiYWx0aXR1ZGVBY2N1cmFjeSIsImhlYWRpbmciLCJsb25naXR1ZGUiLCJsYXRpdHVkZSIsInByb2plY3RlZFBvc2l0aW9uIiwic3BlZWQiLCJvcHRfbiIsIm9wdF9zcGhlcmVSYWRpdXMiLCJjaXJjdWxhciIsImdldEFjY3VyYWN5IiwiZ2V0QWNjdXJhY3lHZW9tZXRyeSIsImdldEFsdGl0dWRlIiwiZ2V0QWx0aXR1ZGVBY2N1cmFjeSIsImdldEhlYWRpbmciLCJnZXRQb3NpdGlvbiIsImdldFNwZWVkIiwiTG9jYXRpb25SZXRyaWV2ZWRFdmVudCIsIlBST0pFQ1RJT04iLCJDT09SRElOQVRFX0ZPUk1BVCIsIk1vdXNlUG9zaXRpb24iLCJjb29yZGluYXRlRm9ybWF0Iiwic2V0Q29vcmRpbmF0ZUZvcm1hdCIsInJlbmRlck9uTW91c2VPdXQiLCJwbGFjZWhvbGRlciIsInVuZGVmaW5lZEhUTUwiLCJwbGFjZWhvbGRlcl8iLCJyZW5kZXJPbk1vdXNlT3V0XyIsInJlbmRlcmVkSFRNTF8iLCJtYXBQcm9qZWN0aW9uXyIsImdldENvb3JkaW5hdGVGb3JtYXQiLCJoYW5kbGVNb3VzZU1vdmUiLCJ1cGRhdGVIVE1MXyIsImhhbmRsZU1vdXNlT3V0Iiwidmlld3BvcnQiLCJmb3JtYXQiLCJodG1sIiwiRElTUExBWV9EUEkiLCJMRUFESU5HX0RJR0lUUyIsIk92ZXJ2aWV3TWFwRXZlbnQiLCJPdmVydmlldyIsIm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCIsImZpZ3VyZUVsZW1lbnQiLCJTVkdfQ09ERSIsIm9uT3ZlcnZpZXdJbWFnZUNsaWNrIiwic3ZnRWxlbWVudCIsImJhY2tncm91bmRTVkdSZWN0RWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsIlNWR19XSURUSCIsIlNWR19IRUlHSFQiLCJCQUNLR1JPVU5EX0NPTE9SIiwicHJlcGVuZCIsInVwZGF0ZUNyb3NzaGFpciIsImdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0IiwiZXhpc3RpbmdFbG1zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImV4aXN0aW5nRWxtIiwiZnJvbSIsImdldENyb3NzaGFpciIsImNzc0NsYXNzIiwibGluZSIsImNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgiLCJvdmVydmlld0NvbnRhaW5lckNsaWVudEJvdW5kaW5nUmVjdCIsImNsaWNrTG9uTGF0IiwiZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHgiLCJvUHgiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsIlNoYXJlIiwiREVGQVVMVF9VTklDT0RFIiwiREVGQVVMVF9UT09MVElQX1RFWFQiLCJUaWxlIiwiaW50ZXJpbVRpbGUiLCJ0cmFuc2l0aW9uXyIsInRyYW5zaXRpb25TdGFydHNfIiwicmVsZWFzZSIsInJlZnJlc2hJbnRlcmltQ2hhaW4iLCJnZXRUaWxlQ29vcmQiLCJJbWFnZUJhc2UiLCJnZXRQaXhlbFJhdGlvIiwibGlzdGVuSW1hZ2UiLCJsb2FkSGFuZGxlciIsImVycm9ySGFuZGxlciIsImltZyIsInByb21pc2UiLCJsaXN0ZW5pbmdfMSIsInRoZW4iLCJjYXRjaCIsIkltYWdlV3JhcHBlciIsImltYWdlTG9hZEZ1bmN0aW9uIiwic3JjXyIsImltYWdlXyIsInVubGlzdGVuXyIsImltYWdlTG9hZEZ1bmN0aW9uXyIsImhhbmRsZUltYWdlRXJyb3JfIiwidW5saXN0ZW5JbWFnZV8iLCJoYW5kbGVJbWFnZUxvYWRfIiwic2V0SW1hZ2UiLCJJbWFnZVRpbGUiLCJ0aWxlTG9hZEZ1bmN0aW9uIiwiY3Jvc3NPcmlnaW5fIiwidGlsZUxvYWRGdW5jdGlvbl8iLCJjdHgiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJUcmlhbmd1bGF0aW9uIiwidGFyZ2V0UHJvaiIsInRhcmdldEV4dGVudCIsIm1heFNvdXJjZUV4dGVudCIsImVycm9yVGhyZXNob2xkIiwib3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiIsInNvdXJjZVByb2pfIiwidGFyZ2V0UHJval8iLCJ0cmFuc2Zvcm1JbnZDYWNoZSIsInRyYW5zZm9ybUludiIsInRyYW5zZm9ybUludl8iLCJtYXhTb3VyY2VFeHRlbnRfIiwiZXJyb3JUaHJlc2hvbGRTcXVhcmVkXyIsInRyaWFuZ2xlc18iLCJ3cmFwc1hJblNvdXJjZV8iLCJjYW5XcmFwWEluU291cmNlXyIsInNvdXJjZVdvcmxkV2lkdGhfIiwidGFyZ2V0V29ybGRXaWR0aF8iLCJkZXN0aW5hdGlvblRvcExlZnQiLCJkZXN0aW5hdGlvblRvcFJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21SaWdodCIsImRlc3RpbmF0aW9uQm90dG9tTGVmdCIsInNvdXJjZVRvcExlZnQiLCJzb3VyY2VUb3BSaWdodCIsInNvdXJjZUJvdHRvbVJpZ2h0Iiwic291cmNlQm90dG9tTGVmdCIsIm1heFN1YmRpdmlzaW9uIiwiYWRkUXVhZF8iLCJsZWZ0Qm91bmRfMSIsInRyaWFuZ2xlIiwibmV3VHJpYW5nbGUiLCJhZGRUcmlhbmdsZV8iLCJhU3JjIiwiYlNyYyIsImNTcmMiLCJkU3JjIiwic291cmNlUXVhZEV4dGVudCIsInNvdXJjZUNvdmVyYWdlWCIsInNvdXJjZVdvcmxkV2lkdGgiLCJ3cmFwc1giLCJuZWVkc1N1YmRpdmlzaW9uIiwiaXNGaW5pdGUiLCJpc05vdEZpbml0ZSIsImNlbnRlclNyYyIsImJjIiwiYmNTcmMiLCJkYSIsImRhU3JjIiwiYWIiLCJhYlNyYyIsImNkIiwiY2RTcmMiLCJjYWxjdWxhdGVTb3VyY2VFeHRlbnQiLCJnZXRUcmlhbmdsZXMiLCJicm9rZW5EaWFnb25hbFJlbmRlcmluZ18iLCJJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJtc0ltYWdlU21vb3RoaW5nRW5hYmxlZCIsImRyYXdUZXN0VHJpYW5nbGUiLCJ1MSIsInYxIiwidTIiLCJ2MiIsImNsb3NlUGF0aCIsInZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nIiwiY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbiIsInRhcmdldE1ldGVyc1BlclVuaXQiLCJzb3VyY2VNZXRlcnNQZXJVbml0Iiwic291cmNlRXh0ZW50IiwiY29tcGVuc2F0aW9uRmFjdG9yIiwiUmVwcm9qVGlsZSIsInNvdXJjZVRpbGVHcmlkIiwidGFyZ2V0VGlsZUdyaWQiLCJ3cmFwcGVkVGlsZUNvb3JkIiwiZ2V0VGlsZUZ1bmN0aW9uIiwib3B0X2Vycm9yVGhyZXNob2xkIiwib3B0X3JlbmRlckVkZ2VzIiwib3B0X2NvbnRleHRPcHRpb25zIiwicmVuZGVyRWRnZXNfIiwiY29udGV4dE9wdGlvbnNfIiwiZ3V0dGVyXyIsImNhbnZhc18iLCJzb3VyY2VUaWxlR3JpZF8iLCJ0YXJnZXRUaWxlR3JpZF8iLCJ3cmFwcGVkVGlsZUNvb3JkXyIsInNvdXJjZVRpbGVzXyIsInNvdXJjZXNMaXN0ZW5lcktleXNfIiwic291cmNlWl8iLCJtYXhUYXJnZXRFeHRlbnQiLCJsaW1pdGVkVGFyZ2V0RXh0ZW50Iiwic291cmNlUHJvakV4dGVudCIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24iLCJlcnJvclRocmVzaG9sZEluUGl4ZWxzIiwidHJpYW5ndWxhdGlvbl8iLCJzb3VyY2VSYW5nZSIsInNyY1giLCJzcmNZIiwicmVwcm9qZWN0XyIsInNvdXJjZXMiLCJnZXRUaWxlU2l6ZSIsInRyaWFuZ3VsYXRpb24iLCJwaXhlbFJvdW5kIiwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIiwic291cmNlRGF0YUV4dGVudCIsImNhbnZhc1dpZHRoSW5Vbml0cyIsImNhbnZhc0hlaWdodEluVW5pdHMiLCJzdGl0Y2hDb250ZXh0Iiwic3RpdGNoU2NhbGUiLCJ4UG9zIiwieVBvcyIsInNyY1dpZHRoIiwic3JjSGVpZ2h0IiwidGFyZ2V0VG9wTGVmdCIsInUwIiwidjAiLCJzb3VyY2VOdW1lcmljYWxTaGlmdFgiLCJzb3VyY2VOdW1lcmljYWxTaGlmdFkiLCJhZmZpbmVDb2VmcyIsIm1heFJvdyIsIm1heEVsIiwiYWJzVmFsdWUiLCJjb2VmIiwibCIsInNvbHZlTGluZWFyU3lzdGVtIiwiaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZyIsInVkIiwidmQiLCJzdGVwIiwic3RlcHMiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsInN0cm9rZSIsImxlZnRUb0xvYWRfMSIsInNvdXJjZUxpc3RlbktleV8xIiwidW5saXN0ZW5Tb3VyY2VzXyIsIkxSVUNhY2hlIiwib3B0X2hpZ2hXYXRlck1hcmsiLCJoaWdoV2F0ZXJNYXJrIiwiY291bnRfIiwiZW50cmllc18iLCJvbGRlc3RfIiwibmV3ZXN0XyIsImNvbnRhaW5zS2V5IiwiZW50cnkiLCJ2YWx1ZV8iLCJrZXlfIiwibmV3ZXIiLCJvbGRlciIsInBlZWtMYXN0IiwicGVla0xhc3RLZXkiLCJwZWVrRmlyc3RLZXkiLCJvcHRfdGlsZUNvb3JkIiwiZ2V0S2V5WlhZIiwiVGlsZUNhY2hlIiwicHJ1bmVFeGNlcHROZXdlc3RaIiwiYWRhcHRBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkxpa2UiLCJTb3VyY2UiLCJhdHRyaWJ1dGlvbnNfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGVfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJ3cmFwWF8iLCJ3cmFwWCIsInJlZnJlc2giLCJzZXRBdHRyaWJ1dGlvbnMiLCJ0bXBUaWxlQ29vcmQiLCJUaWxlR3JpZCIsImNvbXBhcmUiLCJldmVyeSIsImN1cnJlbnRWYWwiLCJyZXMiLCJvcmlnaW5zIiwib3JpZ2luXyIsIm9yaWdpbiIsIm9yaWdpbnNfIiwidGlsZVNpemVzXyIsInRpbGVTaXplcyIsInRpbGVTaXplXyIsInRpbGVTaXplIiwiZnVsbFRpbGVSYW5nZXNfIiwidG1wU2l6ZV8iLCJ0bXBFeHRlbnRfIiwic2l6ZXMiLCJyZXN0cmljdGVkVGlsZVJhbmdlIiwiY2FsY3VsYXRlVGlsZVJhbmdlc18iLCJmb3JFYWNoVGlsZUNvb3JkIiwib3B0X3RpbGVSYW5nZSIsInRpbGVDb29yZEV4dGVudCIsImdldE9yaWdpbiIsImdldFRpbGVSYW5nZUZvclRpbGVDb29yZEFuZFoiLCJ0aWxlQ29vcmRaIiwidGlsZUNvb3JkWCIsInRpbGVDb29yZFkiLCJnZXRUaWxlUmFuZ2VFeHRlbnQiLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFpfIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uIiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyIsInJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kiLCJhZGp1c3RYIiwiYWRqdXN0WSIsInhGcm9tT3JpZ2luIiwieUZyb21PcmlnaW4iLCJnZXRUaWxlQ29vcmRSZXNvbHV0aW9uIiwiZ2V0RnVsbFRpbGVSYW5nZSIsImZ1bGxUaWxlUmFuZ2VzIiwiZ2V0Rm9yUHJvamVjdGlvbiIsIm9wdF9tYXhab29tIiwib3B0X3RpbGVTaXplIiwib3B0X2Nvcm5lciIsInJlc29sdXRpb25zRnJvbUV4dGVudCIsImNyZWF0ZUZvckV4dGVudCIsImV4dGVudEZyb21Qcm9qZWN0aW9uIiwiY3JlYXRlRm9yUHJvamVjdGlvbiIsIm9wdF9tYXhSZXNvbHV0aW9uIiwiaGFsZiIsIlRpbGVTb3VyY2UiLCJvcGFxdWVfIiwib3BhcXVlIiwidGlsZVBpeGVsUmF0aW9fIiwidGlsZUNhY2hlIiwiY2FjaGVTaXplIiwidG1wU2l6ZSIsInRpbGVPcHRpb25zIiwiZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsImxvYWRlZCIsInNldEtleSIsImdldFRpbGVHcmlkIiwiZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uIiwib3B0X3Byb2plY3Rpb24iLCJ3aXRoaW5FeHRlbnRBbmRaIiwiVGlsZVNvdXJjZUV2ZW50IiwiY3JlYXRlRnJvbVRlbXBsYXRlIiwidGVtcGxhdGUiLCJ6UmVnRXgiLCJ4UmVnRXgiLCJ5UmVnRXgiLCJkYXNoWVJlZ0V4IiwicmFuZ2UiLCJVcmxUaWxlIiwiZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fIiwidGlsZVVybEZ1bmN0aW9uIiwidXJscyIsInNldFVybHMiLCJ1cmwiLCJzZXRVcmwiLCJ0aWxlTG9hZGluZ0tleXNfIiwiZ2V0VGlsZUxvYWRGdW5jdGlvbiIsImdldFRpbGVVcmxGdW5jdGlvbiIsImdldFByb3RvdHlwZU9mIiwiZ2V0VXJscyIsInNldFRpbGVMb2FkRnVuY3Rpb24iLCJzZXRUaWxlVXJsRnVuY3Rpb24iLCJtYXRjaCIsImV4ZWMiLCJzdGFydENoYXJDb2RlIiwic3RvcENoYXJDb2RlIiwiZnJvbUNoYXJDb2RlIiwic3RvcF8xIiwiZXhwYW5kVXJsIiwidGVtcGxhdGVzIiwidGlsZVVybEZ1bmN0aW9ucyIsImNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRlbXBsYXRlcyIsImRlZmF1bHRUaWxlTG9hZEZ1bmN0aW9uIiwiaW1hZ2VUaWxlIiwiVGlsZUltYWdlIiwidGlsZUNsYXNzIiwidGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsInRpbGVHcmlkRm9yUHJvamVjdGlvbiIsInJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyIsInJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkIiwiaW1hZ2VTbW9vdGhpbmciLCJyZW5kZXJSZXByb2plY3Rpb25FZGdlc18iLCJ1c2VkVGlsZUNhY2hlIiwiZ2V0R3V0dGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsInRoaXNQcm9qIiwicHJvaktleSIsImNyZWF0ZVRpbGVfIiwidXJsVGlsZUNvb3JkIiwidGlsZVVybCIsIm5ld1RpbGUiLCJnZXRUaWxlSW50ZXJuYWwiLCJzZXRSZW5kZXJSZXByb2plY3Rpb25FZGdlcyIsInNldFRpbGVHcmlkRm9yUHJvamVjdGlvbiIsInRpbGVncmlkIiwicHJvaiIsIlhZWiIsInh5ek9wdGlvbnMiLCJncmlkT3B0aW9ucyIsImNyZWF0ZVhZWiIsIlZBUklBTlRTIiwiZ2VvbGFuZGJhc2VtYXAiLCJibWFwZ3JhdSIsImJtYXBvcnRob2ZvdG8zMGNtIiwiYm1hcGdlbGFlbmRlIiwiYm1hcG9iZXJmbGFlY2hlIiwiYm1hcG92ZXJsYXkiLCJ2YXJpYW50IiwiX21pbldpZHRoIiwibWluV2lkdGgiLCJyZW5kZXJlZFZpc2libGUiLCJyZW5kZXJlZFdpZHRoIiwicmVuZGVyZWRTVkciLCJkcGkiLCJ1cGRhdGVFbGVtZW50IiwicG9pbnRSZXNvbHV0aW9uVW5pdHMiLCJub21pbmFsQ291bnQiLCJzdWZmaXgiLCJkZWNpbWFsQ291bnQiLCJkZWNpbWFsIiwiZ2VuZXJhdGVkU1ZHIiwiZ2V0R2VuZXJhdGVkU1ZHIiwidG9GaXhlZCIsInR4dCIsInN2ZyIsInJlY3QiLCJ0ZXh0Iiwib3B0X2ZyYWN0aW9uRGlnaXRzIiwidG9nZ2xlQnV0dG9uIiwidmVydGljYWxDb250cm9scyIsImhvcml6b250YWxDb250cm9scyIsImdlb0xvY2F0aW9uT3B0aW9ucyIsIl9nZW9Mb2NhdGlvbiIsImdlb0xvY2F0aW9uIiwiRXZlbnQiLCJsaXN0Vmlld1NwbGl0dGVyIiwicmVzaXplciIsIm5leHRTaWJsaW5nIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiSFRNTEVsZW1lbnQiLCJuZXh0U2libGluZ0hlaWdodCIsIm5leHRTaWJsaW5nV2lkdGgiLCJtb3VzZURvd25IYW5kbGVyIiwicmVjdE5leHQiLCJmbGV4IiwibW91c2VNb3ZlSGFuZGxlciIsIm1vdXNlVXBIYW5kbGVyIiwicmVzaXphYmxlIiwiZGV0YWlsU3BsaXR0ZXIiLCJzaWRlYmFyIiwicGFyZW50SGVpZ2h0IiwicmVzaXplRGV0YWlscyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUFRLGFBQWVELElBRXZCRCxFQUFLLGFBQWVDLElBUnRCLENBU0dLLE1BQU0sV0FDVCxNLG1CQ1RBLEksS0NBd0IsQ0FBQ0osSUFDSCxvQkFBWEssUUFBMEJBLE9BQU9DLGFBQzFDQyxPQUFPQyxlQUFlUixFQUFTSyxPQUFPQyxZQUFhLENBQUVHLE1BQU8sV0FFN0RGLE9BQU9DLGVBQWVSLEVBQVMsYUFBYyxDQUFFUyxPQUFPLEssSUMrRHZELFFBdkQrQixXQUkzQixTQUFTQyxFQUFVQyxHQUlmQyxLQUFLQyxtQkFJTEQsS0FBS0UsaUJBTUxGLEtBQUtELEtBQU9BLEVBTVpDLEtBQUtHLE9BQVMsS0FpQmxCLE9BVkFMLEVBQVVNLFVBQVVDLGVBQWlCLFdBQ2pDTCxLQUFLRSxrQkFBbUIsR0FNNUJKLEVBQVVNLFVBQVVFLGdCQUFrQixXQUNsQ04sS0FBS0Msb0JBQXFCLEdBRXZCSCxFQXpDbUIsR0NQOUIsRUFNb0IsaUJDb0JwQixFQXpCZ0MsV0FDNUIsU0FBU1MsSUFN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QUFRaGhFLGlCQUFpQixZQUFhc2hFLFFBRXRDLy9CLFFBQVFwOEIsSUFBSSwrQkRqRUo0OEQsQ0FBY0gsR0FNdEJ0Z0IsTUFBTXozQyxPQUFPRCxPWHJCbkJxaUMsS0FBTSxJQUFJLEdBQUssQ0FDYjE1QixPQUFRTCxHQUFVLENBQUMsTUFBUyxRQUFTLFFBQVMsVUFDOUN5aUIscUJBQXFCLEVBQ3JCRSxxQkFBcUIsRUFDckJodEIsT0FBUSxDQUFDLE1BQVMsUUFBUyxRQUFTLFNBQ3BDaEIsUUFBUyxHQUNURCxRQUFTLEVBQ1R3QyxLQUFNLE0iLCJmaWxlIjoiZXhhbXBsZS1mdWxsLWZlYXR1cmVzLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImJnaXMtY29yZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJiZ2lzLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFN0cmlwcGVkIGRvd24gaW1wbGVtZW50YXRpb24gb2YgdGhlIFczQyBET00gTGV2ZWwgMiBFdmVudCBpbnRlcmZhY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0yLUV2ZW50cy9ldmVudHMuaHRtbCNFdmVudHMtaW50ZXJmYWNlLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gb25seSBwcm92aWRlcyBgdHlwZWAgYW5kIGB0YXJnZXRgIHByb3BlcnRpZXMsIGFuZFxuICogYHN0b3BQcm9wYWdhdGlvbmAgYW5kIGBwcmV2ZW50RGVmYXVsdGAgbWV0aG9kcy4gSXQgaXMgbWVhbnQgYXMgYmFzZSBjbGFzc1xuICogZm9yIGhpZ2hlciBsZXZlbCBldmVudHMgZGVmaW5lZCBpbiB0aGUgbGlicmFyeSwgYW5kIHdvcmtzIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL1RhcmdldH5UYXJnZXR9LlxuICovXG52YXIgQmFzZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZUV2ZW50KHR5cGUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBldmVudCB0eXBlLlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV2ZW50IHRhcmdldC5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50IGRlZmF1bHQuIFRoaXMgbWVhbnMgdGhhdCBubyBlbXVsYXRlZCBgY2xpY2tgLCBgc2luZ2xlY2xpY2tgIG9yIGBkb3VibGVjbGlja2AgZXZlbnRzXG4gICAgICogd2lsbCBiZSBmaXJlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUV2ZW50O1xufSgpKTtcbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKGV2dCkge1xuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbn1cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG59XG5leHBvcnQgZGVmYXVsdCBCYXNlRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvT2JqZWN0RXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgcHJvcGVydHkgaXMgY2hhbmdlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL09iamVjdC5PYmplY3RFdmVudCNwcm9wZXJ0eWNoYW5nZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQUk9QRVJUWUNIQU5HRTogJ3Byb3BlcnR5Y2hhbmdlJyxcbn07XG4vKipcbiAqIEB0eXBlZGVmIHsncHJvcGVydHljaGFuZ2UnfSBUeXBlc1xuICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3RFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0Rpc3Bvc2FibGVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBPYmplY3RzIHRoYXQgbmVlZCB0byBjbGVhbiB1cCBhZnRlciB0aGVtc2VsdmVzLlxuICovXG52YXIgRGlzcG9zYWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEaXNwb3NhYmxlKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9iamVjdCBoYXMgYWxyZWFkeSBiZWVuIGRpc3Bvc2VkLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNwb3NlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBkaXNwb3NhYmxlIG9iamVjdHMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICByZXR1cm4gRGlzcG9zYWJsZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBEaXNwb3NhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlzcG9zYWJsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvYXJyYXlcbiAqL1xuLyoqXG4gKiBQZXJmb3JtcyBhIGJpbmFyeSBzZWFyY2ggb24gdGhlIHByb3ZpZGVkIHNvcnRlZCBsaXN0IGFuZCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgaXRlbSBpZiBmb3VuZC4gSWYgaXQgY2FuJ3QgYmUgZm91bmQgaXQnbGwgcmV0dXJuIC0xLlxuICogaHR0cHM6Ly9naXRodWIuY29tL2Rhcmtza3lhcHAvYmluYXJ5LXNlYXJjaFxuICpcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGhheXN0YWNrIEl0ZW1zIHRvIHNlYXJjaCB0aHJvdWdoLlxuICogQHBhcmFtIHsqfSBuZWVkbGUgVGhlIGl0ZW0gdG8gbG9vayBmb3IuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0X2NvbXBhcmF0b3JdIENvbXBhcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgaXRlbSBpZiBmb3VuZCwgLTEgaWYgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluYXJ5U2VhcmNoKGhheXN0YWNrLCBuZWVkbGUsIG9wdF9jb21wYXJhdG9yKSB7XG4gICAgdmFyIG1pZCwgY21wO1xuICAgIHZhciBjb21wYXJhdG9yID0gb3B0X2NvbXBhcmF0b3IgfHwgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbjtcbiAgICB2YXIgbG93ID0gMDtcbiAgICB2YXIgaGlnaCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICAvKiBOb3RlIHRoYXQgXCIobG93ICsgaGlnaCkgPj4+IDFcIiBtYXkgb3ZlcmZsb3csIGFuZCByZXN1bHRzIGluIGEgdHlwZWNhc3RcbiAgICAgICAgICogdG8gZG91YmxlICh3aGljaCBnaXZlcyB0aGUgd3JvbmcgcmVzdWx0cykuICovXG4gICAgICAgIG1pZCA9IGxvdyArICgoaGlnaCAtIGxvdykgPj4gMSk7XG4gICAgICAgIGNtcCA9ICtjb21wYXJhdG9yKGhheXN0YWNrW21pZF0sIG5lZWRsZSk7XG4gICAgICAgIGlmIChjbXAgPCAwLjApIHtcbiAgICAgICAgICAgIC8qIFRvbyBsb3cuICovXG4gICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLyogS2V5IGZvdW5kIG9yIHRvbyBoaWdoICovXG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICAgICAgZm91bmQgPSAhY21wO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qIEtleSBub3QgZm91bmQuICovXG4gICAgcmV0dXJuIGZvdW5kID8gbG93IDogfmxvdztcbn1cbi8qKlxuICogQ29tcGFyZSBmdW5jdGlvbiBmb3IgYXJyYXkgc29ydCB0aGF0IGlzIHNhZmUgZm9yIG51bWJlcnMuXG4gKiBAcGFyYW0geyp9IGEgVGhlIGZpcnN0IG9iamVjdCB0byBiZSBjb21wYXJlZC5cbiAqIEBwYXJhbSB7Kn0gYiBUaGUgc2Vjb25kIG9iamVjdCB0byBiZSBjb21wYXJlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gQSBuZWdhdGl2ZSBudW1iZXIsIHplcm8sIG9yIGEgcG9zaXRpdmUgbnVtYmVyIGFzIHRoZSBmaXJzdFxuICogICAgIGFyZ3VtZW50IGlzIGxlc3MgdGhhbiwgZXF1YWwgdG8sIG9yIGdyZWF0ZXIgdGhhbiB0aGUgc2Vjb25kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwO1xufVxuLyoqXG4gKiBXaGV0aGVyIHRoZSBhcnJheSBjb250YWlucyB0aGUgZ2l2ZW4gb2JqZWN0LlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyp9IG9iaiBUaGUgb2JqZWN0IGZvciB3aGljaCB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBpbiB0aGUgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlcyhhcnIsIG9iaikge1xuICAgIHJldHVybiBhcnIuaW5kZXhPZihvYmopID49IDA7XG59XG4vKipcbiAqIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259IGNhbiB1c2UgYSBmdW5jdGlvblxuICogb2YgdGhpcyB0eXBlIHRvIGRldGVybWluZSB3aGljaCBuZWFyZXN0IHJlc29sdXRpb24gdG8gdXNlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyBhIHZhbHVlIGJldHdlZW4gdHdvIGFycmF5IGVudHJpZXMsXG4gKiBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGUgbmVhcmVzdCBoaWdoZXIgZW50cnkgYW5kXG4gKiBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGUgbmVhcmVzdCBsb3dlciBlbnRyeVxuICogYXMgYXJndW1lbnRzIGFuZCByZXR1cm5zIGEgYHtudW1iZXJ9YC4gSWYgYSBuZWdhdGl2ZSBudW1iZXIgb3IgemVybyBpcyByZXR1cm5lZFxuICogdGhlIGxvd2VyIHZhbHVlIHdpbGwgYmUgdXNlZCwgaWYgYSBwb3NpdGl2ZSBudW1iZXIgaXMgcmV0dXJuZWQgdGhlIGhpZ2hlciB2YWx1ZVxuICogd2lsbCBiZSB1c2VkLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKG51bWJlciwgbnVtYmVyLCBudW1iZXIpOiBudW1iZXJ9IE5lYXJlc3REaXJlY3Rpb25GdW5jdGlvblxuICogQGFwaVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYXJyIEFycmF5IGluIGRlc2NjZW5kaW5nIG9yZGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCBUYXJnZXQuXG4gKiBAcGFyYW0ge251bWJlcnxOZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IGRpcmVjdGlvblxuICogICAgMCBtZWFucyByZXR1cm4gdGhlIG5lYXJlc3QsXG4gKiAgICA+IDAgbWVhbnMgcmV0dXJuIHRoZSBsYXJnZXN0IG5lYXJlc3QsXG4gKiAgICA8IDAgbWVhbnMgcmV0dXJuIHRoZSBzbWFsbGVzdCBuZWFyZXN0LlxuICogQHJldHVybiB7bnVtYmVyfSBJbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhckZpbmROZWFyZXN0KGFyciwgdGFyZ2V0LCBkaXJlY3Rpb24pIHtcbiAgICB2YXIgbiA9IGFyci5sZW5ndGg7XG4gICAgaWYgKGFyclswXSA8PSB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhcmdldCA8PSBhcnJbbiAtIDFdKSB7XG4gICAgICAgIHJldHVybiBuIC0gMTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBpID0gdm9pZCAwO1xuICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCkge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPCAwKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA8PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkaXJlY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24odGFyZ2V0LCBhcnJbaSAtIDFdLCBhcnJbaV0pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFycltpIC0gMV0gLSB0YXJnZXQgPCB0YXJnZXQgLSBhcnJbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuIC0gMTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBBcnJheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpbiBCZWdpbiBpbmRleC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV2ZXJzZVN1YkFycmF5KGFyciwgYmVnaW4sIGVuZCkge1xuICAgIHdoaWxlIChiZWdpbiA8IGVuZCkge1xuICAgICAgICB2YXIgdG1wID0gYXJyW2JlZ2luXTtcbiAgICAgICAgYXJyW2JlZ2luXSA9IGFycltlbmRdO1xuICAgICAgICBhcnJbZW5kXSA9IHRtcDtcbiAgICAgICAgKytiZWdpbjtcbiAgICAgICAgLS1lbmQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0geyFBcnJheTxWQUxVRT58VkFMVUV9IGRhdGEgVGhlIGVsZW1lbnRzIG9yIGFycmF5cyBvZiBlbGVtZW50cyB0byBhZGQgdG8gYXJyLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoYXJyLCBkYXRhKSB7XG4gICAgdmFyIGV4dGVuc2lvbiA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuICAgIHZhciBsZW5ndGggPSBleHRlbnNpb24ubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyW2Fyci5sZW5ndGhdID0gZXh0ZW5zaW9uW2ldO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtWQUxVRX0gb2JqIFRoZSBlbGVtZW50IHRvIHJlbW92ZS5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoYXJyLCBvYmopIHtcbiAgICB2YXIgaSA9IGFyci5pbmRleE9mKG9iaik7XG4gICAgdmFyIGZvdW5kID0gaSA+IC0xO1xuICAgIGlmIChmb3VuZCkge1xuICAgICAgICBhcnIuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIHNlYXJjaCBpbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVkFMVUUsIG51bWJlciwgPykgOiBib29sZWFufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjb21wYXJlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtWQUxVRXxudWxsfSBUaGUgZWxlbWVudCBmb3VuZCBvciBudWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZChhcnIsIGZ1bmMpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyLmxlbmd0aCA+Pj4gMDtcbiAgICB2YXIgdmFsdWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IGFycltpXTtcbiAgICAgICAgaWYgKGZ1bmModmFsdWUsIGksIGFycikpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMSBUaGUgZmlyc3QgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjIgVGhlIHNlY29uZCBhcnJheSB0byBjb21wYXJlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdHdvIGFycmF5cyBhcmUgZXF1YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYXJyMSwgYXJyMikge1xuICAgIHZhciBsZW4xID0gYXJyMS5sZW5ndGg7XG4gICAgaWYgKGxlbjEgIT09IGFycjIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4xOyBpKyspIHtcbiAgICAgICAgaWYgKGFycjFbaV0gIT09IGFycjJbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogU29ydCB0aGUgcGFzc2VkIGFycmF5IHN1Y2ggdGhhdCB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMgaXMgcHJldmVydmVkLlxuICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NvcnRpbmdfYWxnb3JpdGhtI1N0YWJpbGl0eSBmb3IgZGV0YWlscy5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gc29ydCAobW9kaWZpZXMgb3JpZ2luYWwpLlxuICogQHBhcmFtIHshZnVuY3Rpb24oKiwgKik6IG51bWJlcn0gY29tcGFyZUZuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhYmxlU29ydChhcnIsIGNvbXBhcmVGbmMpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyLmxlbmd0aDtcbiAgICB2YXIgdG1wID0gQXJyYXkoYXJyLmxlbmd0aCk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRtcFtpXSA9IHsgaW5kZXg6IGksIHZhbHVlOiBhcnJbaV0gfTtcbiAgICB9XG4gICAgdG1wLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmVGbmMoYS52YWx1ZSwgYi52YWx1ZSkgfHwgYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgfSk7XG4gICAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJbaV0gPSB0bXBbaV0udmFsdWU7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNlYXJjaCBpbi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJuIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEluZGV4KGFyciwgZnVuYykge1xuICAgIHZhciBpbmRleDtcbiAgICB2YXIgZm91bmQgPSAhYXJyLmV2ZXJ5KGZ1bmN0aW9uIChlbCwgaWR4KSB7XG4gICAgICAgIGluZGV4ID0gaWR4O1xuICAgICAgICByZXR1cm4gIWZ1bmMoZWwsIGlkeCwgYXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm91bmQgPyBpbmRleCA6IC0xO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHRlc3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0X2Z1bmNdIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc3RyaWN0XSBTdHJpY3RseSBzb3J0ZWQgKGRlZmF1bHQgZmFsc2UpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJuIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTb3J0ZWQoYXJyLCBvcHRfZnVuYywgb3B0X3N0cmljdCkge1xuICAgIHZhciBjb21wYXJlID0gb3B0X2Z1bmMgfHwgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbjtcbiAgICByZXR1cm4gYXJyLmV2ZXJ5KGZ1bmN0aW9uIChjdXJyZW50VmFsLCBpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXMgPSBjb21wYXJlKGFycltpbmRleCAtIDFdLCBjdXJyZW50VmFsKTtcbiAgICAgICAgcmV0dXJuICEocmVzID4gMCB8fCAob3B0X3N0cmljdCAmJiByZXMgPT09IDApKTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9mdW5jdGlvbnNcbiAqL1xuaW1wb3J0IHsgZXF1YWxzIGFzIGFycmF5RXF1YWxzIH0gZnJvbSAnLi9hcnJheS5qcyc7XG4vKipcbiAqIEFsd2F5cyByZXR1cm5zIHRydWUuXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVFJVRSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQWx3YXlzIHJldHVybnMgZmFsc2UuXG4gKiBAcmV0dXJuIHtib29sZWFufSBmYWxzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZBTFNFKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQSByZXVzYWJsZSBmdW5jdGlvbiwgdXNlZCBlLmcuIGFzIGEgZGVmYXVsdCBmb3IgY2FsbGJhY2tzLlxuICpcbiAqIEByZXR1cm4ge3ZvaWR9IE5vdGhpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBWT0lEKCkgeyB9XG4vKipcbiAqIFdyYXAgYSBmdW5jdGlvbiBpbiBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgcmVtZW1iZXJzIHRoZSBsYXN0IHJldHVybi4gIElmIHRoZVxuICogcmV0dXJuZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHR3aWNlIGluIGEgcm93IHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFuZCB0aGUgc2FtZVxuICogdGhpcyBvYmplY3QsIGl0IHdpbGwgcmV0dXJuIHRoZSB2YWx1ZSBmcm9tIHRoZSBmaXJzdCBjYWxsIGluIHRoZSBzZWNvbmQgY2FsbC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFueSk6IFJldHVyblR5cGV9IGZuIFRoZSBmdW5jdGlvbiB0byBtZW1vaXplLlxuICogQHJldHVybiB7ZnVuY3Rpb24oLi4uYW55KTogUmV0dXJuVHlwZX0gVGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICogQHRlbXBsYXRlIFJldHVyblR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemVPbmUoZm4pIHtcbiAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgLyoqIEB0eXBlIHtSZXR1cm5UeXBlfSAqL1xuICAgIHZhciBsYXN0UmVzdWx0O1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8YW55Pn0gKi9cbiAgICB2YXIgbGFzdEFyZ3M7XG4gICAgdmFyIGxhc3RUaGlzO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZXh0QXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgIGlmICghY2FsbGVkIHx8IHRoaXMgIT09IGxhc3RUaGlzIHx8ICFhcnJheUVxdWFscyhuZXh0QXJncywgbGFzdEFyZ3MpKSB7XG4gICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgICAgICAgbGFzdEFyZ3MgPSBuZXh0QXJncztcbiAgICAgICAgICAgIGxhc3RSZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdW5jdGlvbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL29ialxuICovXG4vKipcbiAqIFBvbHlmaWxsIGZvciBPYmplY3QuYXNzaWduKCkuICBBc3NpZ25zIGVudW1lcmFibGUgYW5kIG93biBwcm9wZXJ0aWVzIGZyb21cbiAqIG9uZSBvciBtb3JlIHNvdXJjZSBvYmplY3RzIHRvIGEgdGFyZ2V0IG9iamVjdC5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduLlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0LlxuICogQHBhcmFtIHsuLi5PYmplY3R9IHZhcl9zb3VyY2VzIFRoZSBzb3VyY2Ugb2JqZWN0KHMpLlxuICogQHJldHVybiB7IU9iamVjdH0gVGhlIG1vZGlmaWVkIHRhcmdldCBvYmplY3QuXG4gKi9cbmV4cG9ydCB2YXIgYXNzaWduID0gdHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbidcbiAgICA/IE9iamVjdC5hc3NpZ25cbiAgICA6IGZ1bmN0aW9uICh0YXJnZXQsIHZhcl9zb3VyY2VzKSB7XG4gICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xuLyoqXG4gKiBSZW1vdmVzIGFsbCBwcm9wZXJ0aWVzIGZyb20gYW4gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNsZWFyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIob2JqZWN0KSB7XG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICAgIH1cbn1cbi8qKlxuICogUG9seWZpbGwgZm9yIE9iamVjdC52YWx1ZXMoKS4gIEdldCBhbiBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMgZnJvbSBhbiBvYmplY3QuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L3ZhbHVlc1xuICpcbiAqIEBwYXJhbSB7IU9iamVjdDxLLFY+fSBvYmplY3QgVGhlIG9iamVjdCBmcm9tIHdoaWNoIHRvIGdldCB0aGUgdmFsdWVzLlxuICogQHJldHVybiB7IUFycmF5PFY+fSBUaGUgcHJvcGVydHkgdmFsdWVzLlxuICogQHRlbXBsYXRlIEssVlxuICovXG5leHBvcnQgdmFyIGdldFZhbHVlcyA9IHR5cGVvZiBPYmplY3QudmFsdWVzID09PSAnZnVuY3Rpb24nXG4gICAgPyBPYmplY3QudmFsdWVzXG4gICAgOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChvYmplY3RbcHJvcGVydHldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH07XG4vKipcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaGFzIGFueSBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBlbXB0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkob2JqZWN0KSB7XG4gICAgdmFyIHByb3BlcnR5O1xuICAgIGZvciAocHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuICFwcm9wZXJ0eTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9iai5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9UYXJnZXRcbiAqL1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9FdmVudC5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGNsZWFyIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGVkZWYge0V2ZW50VGFyZ2V0fFRhcmdldH0gRXZlbnRUYXJnZXRMaWtlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBzaW1wbGlmaWVkIGltcGxlbWVudGF0aW9uIG9mIHRoZSBXM0MgRE9NIExldmVsIDIgRXZlbnRUYXJnZXQgaW50ZXJmYWNlLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDAwL1JFQy1ET00tTGV2ZWwtMi1FdmVudHMtMjAwMDExMTMvZXZlbnRzLmh0bWwjRXZlbnRzLUV2ZW50VGFyZ2V0LlxuICpcbiAqIFRoZXJlIGFyZSB0d28gaW1wb3J0YW50IHNpbXBsaWZpY2F0aW9ucyBjb21wYXJlZCB0byB0aGUgc3BlY2lmaWNhdGlvbjpcbiAqXG4gKiAxLiBUaGUgaGFuZGxpbmcgb2YgYHVzZUNhcHR1cmVgIGluIGBhZGRFdmVudExpc3RlbmVyYCBhbmRcbiAqICAgIGByZW1vdmVFdmVudExpc3RlbmVyYC4gVGhlcmUgaXMgbm8gcmVhbCBjYXB0dXJlIG1vZGVsLlxuICogMi4gVGhlIGhhbmRsaW5nIG9mIGBzdG9wUHJvcGFnYXRpb25gIGFuZCBgcHJldmVudERlZmF1bHRgIG9uIGBkaXNwYXRjaEV2ZW50YC5cbiAqICAgIFRoZXJlIGlzIG5vIGV2ZW50IHRhcmdldCBoaWVyYXJjaHkuIFdoZW4gYSBsaXN0ZW5lciBjYWxsc1xuICogICAgYHN0b3BQcm9wYWdhdGlvbmAgb3IgYHByZXZlbnREZWZhdWx0YCBvbiBhbiBldmVudCBvYmplY3QsIGl0IG1lYW5zIHRoYXQgbm9cbiAqICAgIG1vcmUgbGlzdGVuZXJzIGFmdGVyIHRoaXMgb25lIHdpbGwgYmUgY2FsbGVkLiBTYW1lIGFzIHdoZW4gdGhlIGxpc3RlbmVyXG4gKiAgICByZXR1cm5zIGZhbHNlLlxuICovXG52YXIgVGFyZ2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUYXJnZXQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHsqfSBbb3B0X3RhcmdldF0gRGVmYXVsdCBldmVudCB0YXJnZXQgZm9yIGRpc3BhdGNoZWQgZXZlbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRhcmdldChvcHRfdGFyZ2V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV2ZW50VGFyZ2V0XyA9IG9wdF90YXJnZXQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBlbmRpbmdSZW1vdmFsc18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kaXNwYXRjaGluZ18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcj4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGlzdGVuZXJzXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghdHlwZSB8fCAhbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfIHx8ICh0aGlzLmxpc3RlbmVyc18gPSB7fSk7XG4gICAgICAgIHZhciBsaXN0ZW5lcnNGb3JUeXBlID0gbGlzdGVuZXJzW3R5cGVdIHx8IChsaXN0ZW5lcnNbdHlwZV0gPSBbXSk7XG4gICAgICAgIGlmIChsaXN0ZW5lcnNGb3JUeXBlLmluZGV4T2YobGlzdGVuZXIpID09PSAtMSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZS5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBhbmQgY2FsbHMgYWxsIGxpc3RlbmVycyBsaXN0ZW5pbmcgZm9yIGV2ZW50c1xuICAgICAqIG9mIHRoaXMgdHlwZS4gVGhlIGV2ZW50IHBhcmFtZXRlciBjYW4gZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuXG4gICAgICogT2JqZWN0IHdpdGggYSBgdHlwZWAgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdHxzdHJpbmd9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gYGZhbHNlYCBpZiBhbnlvbmUgY2FsbGVkIHByZXZlbnREZWZhdWx0IG9uIHRoZVxuICAgICAqICAgICBldmVudCBvYmplY3Qgb3IgaWYgYW55IG9mIHRoZSBsaXN0ZW5lcnMgcmV0dXJuZWQgZmFsc2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdHxFdmVudH0gKi9cbiAgICAgICAgdmFyIGV2dCA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZycgPyBuZXcgRXZlbnQoZXZlbnQpIDogZXZlbnQ7XG4gICAgICAgIHZhciB0eXBlID0gZXZ0LnR5cGU7XG4gICAgICAgIGlmICghZXZ0LnRhcmdldCkge1xuICAgICAgICAgICAgZXZ0LnRhcmdldCA9IHRoaXMuZXZlbnRUYXJnZXRfIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgIHZhciBwcm9wYWdhdGU7XG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHZhciBkaXNwYXRjaGluZyA9IHRoaXMuZGlzcGF0Y2hpbmdfIHx8ICh0aGlzLmRpc3BhdGNoaW5nXyA9IHt9KTtcbiAgICAgICAgICAgIHZhciBwZW5kaW5nUmVtb3ZhbHMgPSB0aGlzLnBlbmRpbmdSZW1vdmFsc18gfHwgKHRoaXMucGVuZGluZ1JlbW92YWxzXyA9IHt9KTtcbiAgICAgICAgICAgIGlmICghKHR5cGUgaW4gZGlzcGF0Y2hpbmcpKSB7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hpbmdbdHlwZV0gPSAwO1xuICAgICAgICAgICAgICAgIHBlbmRpbmdSZW1vdmFsc1t0eXBlXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2Rpc3BhdGNoaW5nW3R5cGVdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ2hhbmRsZUV2ZW50JyBpbiBsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJPYmplY3R9ICovIChsaXN0ZW5lcnNbaV0pLmhhbmRsZUV2ZW50KGV2dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9ufSAqLyAobGlzdGVuZXJzW2ldKS5jYWxsKHRoaXMsIGV2dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcm9wYWdhdGUgPT09IGZhbHNlIHx8IGV2dC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC0tZGlzcGF0Y2hpbmdbdHlwZV07XG4gICAgICAgICAgICBpZiAoZGlzcGF0Y2hpbmdbdHlwZV0gPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcHIgPSBwZW5kaW5nUmVtb3ZhbHNbdHlwZV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBlbmRpbmdSZW1vdmFsc1t0eXBlXTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocHItLSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgVk9JRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBkaXNwYXRjaGluZ1t0eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9wYWdhdGU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyc18gJiYgY2xlYXIodGhpcy5saXN0ZW5lcnNfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdGVuZXJzIGZvciBhIHNwZWNpZmllZCBldmVudCB0eXBlLiBMaXN0ZW5lcnMgYXJlIHJldHVybmVkIGluIHRoZVxuICAgICAqIG9yZGVyIHRoYXQgdGhleSB3aWxsIGJlIGNhbGxlZCBpbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyPnx1bmRlZmluZWR9IExpc3RlbmVycy5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmdldExpc3RlbmVycyA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXSkgfHwgdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRfdHlwZV0gVHlwZS4gSWYgbm90IHByb3ZpZGVkLFxuICAgICAqICAgICBgdHJ1ZWAgd2lsbCBiZSByZXR1cm5lZCBpZiB0aGlzIGV2ZW50IHRhcmdldCBoYXMgYW55IGxpc3RlbmVycy5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBIYXMgbGlzdGVuZXJzLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuaGFzTGlzdGVuZXIgPSBmdW5jdGlvbiAob3B0X3R5cGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc18pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0X3R5cGVcbiAgICAgICAgICAgID8gb3B0X3R5cGUgaW4gdGhpcy5saXN0ZW5lcnNfXG4gICAgICAgICAgICA6IE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzXykubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdSZW1vdmFsc18gJiYgdHlwZSBpbiB0aGlzLnBlbmRpbmdSZW1vdmFsc18pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBsaXN0ZW5lciBhIG5vLW9wLCBhbmQgcmVtb3ZlIGxhdGVyIGluICNkaXNwYXRjaEV2ZW50KClcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzW2luZGV4XSA9IFZPSUQ7XG4gICAgICAgICAgICAgICAgICAgICsrdGhpcy5wZW5kaW5nUmVtb3ZhbHNfW3R5cGVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGFyZ2V0O1xufShEaXNwb3NhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBUYXJnZXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UYXJnZXQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBHZW5lcmljIGNoYW5nZSBldmVudC4gVHJpZ2dlcmVkIHdoZW4gdGhlIHJldmlzaW9uIGNvdW50ZXIgaXMgaW5jcmVhc2VkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNjaGFuZ2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ0hBTkdFOiAnY2hhbmdlJyxcbiAgICAvKipcbiAgICAgKiBHZW5lcmljIGVycm9yIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2Vycm9yXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEVSUk9SOiAnZXJyb3InLFxuICAgIEJMVVI6ICdibHVyJyxcbiAgICBDTEVBUjogJ2NsZWFyJyxcbiAgICBDT05URVhUTUVOVTogJ2NvbnRleHRtZW51JyxcbiAgICBDTElDSzogJ2NsaWNrJyxcbiAgICBEQkxDTElDSzogJ2RibGNsaWNrJyxcbiAgICBEUkFHRU5URVI6ICdkcmFnZW50ZXInLFxuICAgIERSQUdPVkVSOiAnZHJhZ292ZXInLFxuICAgIERST1A6ICdkcm9wJyxcbiAgICBGT0NVUzogJ2ZvY3VzJyxcbiAgICBLRVlET1dOOiAna2V5ZG93bicsXG4gICAgS0VZUFJFU1M6ICdrZXlwcmVzcycsXG4gICAgTE9BRDogJ2xvYWQnLFxuICAgIFJFU0laRTogJ3Jlc2l6ZScsXG4gICAgVE9VQ0hNT1ZFOiAndG91Y2htb3ZlJyxcbiAgICBXSEVFTDogJ3doZWVsJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50c1xuICovXG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4vb2JqLmpzJztcbi8qKlxuICogS2V5IHRvIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX5PYnNlcnZhYmxlI3VuQnlLZXl9LlxuICogQHR5cGVkZWYge09iamVjdH0gRXZlbnRzS2V5XG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgVGFyZ2V0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBMaXN0ZW5lciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhbiBldmVudCBvYmplY3QgYXMgYXJndW1lbnQuXG4gKiBXaGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIGV2ZW50IHByb3BhZ2F0aW9uIHdpbGwgc3RvcC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpKTogKHZvaWR8Ym9vbGVhbil9IExpc3RlbmVyRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMaXN0ZW5lck9iamVjdFxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBoYW5kbGVFdmVudCBIYW5kbGVFdmVudCBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7TGlzdGVuZXJGdW5jdGlvbnxMaXN0ZW5lck9iamVjdH0gTGlzdGVuZXJcbiAqL1xuLyoqXG4gKiBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJuc1xuICogYSBrZXkgZm9yIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLnVubGlzdGVuQnlLZXl9LlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRfdGhpc10gT2JqZWN0IHJlZmVyZW5jZWQgYnkgdGhlIGB0aGlzYCBrZXl3b3JkIGluIHRoZVxuICogICAgIGxpc3RlbmVyLiBEZWZhdWx0IGlzIHRoZSBgdGFyZ2V0YC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9vbmNlXSBJZiB0cnVlLCBhZGQgdGhlIGxpc3RlbmVyIGFzIG9uZS1vZmYgbGlzdGVuZXIuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcywgb3B0X29uY2UpIHtcbiAgICBpZiAob3B0X3RoaXMgJiYgb3B0X3RoaXMgIT09IHRhcmdldCkge1xuICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyLmJpbmQob3B0X3RoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0X29uY2UpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsTGlzdGVuZXJfMSA9IGxpc3RlbmVyO1xuICAgICAgICBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIG9yaWdpbmFsTGlzdGVuZXJfMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXZlbnRzS2V5ID0ge1xuICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgIH07XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgIHJldHVybiBldmVudHNLZXk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyBhIG9uZS1vZmYgZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgYXMgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyXG4gKiB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zIGEga2V5IGZvciB1c2Ugd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMudW5saXN0ZW5CeUtleX0gaW4gY2FzZSB0aGUgbGlzdGVuZXIgbmVlZHMgdG8gYmVcbiAqIHVucmVnaXN0ZXJlZCBiZWZvcmUgaXQgaXMgY2FsbGVkLlxuICpcbiAqIFdoZW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMubGlzdGVufSBpcyBjYWxsZWQgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMgYWZ0ZXIgdGhpc1xuICogZnVuY3Rpb24sIHRoZSBzZWxmLXVucmVnaXN0ZXJpbmcgbGlzdGVuZXIgd2lsbCBiZSB0dXJuZWQgaW50byBhIHBlcm1hbmVudFxuICogbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdF90aGlzXSBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBLZXkgZm9yIHVubGlzdGVuQnlLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzKSB7XG4gICAgcmV0dXJuIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcywgdHJ1ZSk7XG59XG4vKipcbiAqIFVucmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycyBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGUgYXJndW1lbnQgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gaXMgdGhlIGtleSByZXR1cm5lZCBmcm9tXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy5saXN0ZW59IG9yIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLmxpc3Rlbk9uY2V9LlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzS2V5fSBrZXkgVGhlIGtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVubGlzdGVuQnlLZXkoa2V5KSB7XG4gICAgaWYgKGtleSAmJiBrZXkudGFyZ2V0KSB7XG4gICAgICAgIGtleS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihrZXkudHlwZSwga2V5Lmxpc3RlbmVyKTtcbiAgICAgICAgY2xlYXIoa2V5KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudHMuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9PYnNlcnZhYmxlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCBsaXN0ZW5PbmNlLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuLyoqKlxuICogQHRlbXBsYXRlIHtzdHJpbmd9IFR5cGVcbiAqIEB0ZW1wbGF0ZSB7RXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gRXZlbnRDbGFzc1xuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYgeyh0eXBlOiBUeXBlfFR5cGVbXSwgbGlzdGVuZXI6IChldmVudDogRXZlbnRDbGFzcykgPT4gPykgPT4gUmV0dXJufSBPblNpZ25hdHVyZVxuICovXG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYgeyh0eXBlOiBUeXBlW10sIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpID0+ID8pID0+IFJldHVybn0gQ29tYmluZWRPblNpZ25hdHVyZVxuICovXG4vKioqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59IE9uUmV0dXJuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYgeydjaGFuZ2UnfCdlcnJvcid9IEV2ZW50VHlwZXNcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBBbiBldmVudCB0YXJnZXQgcHJvdmlkaW5nIGNvbnZlbmllbnQgbWV0aG9kcyBmb3IgbGlzdGVuZXIgcmVnaXN0cmF0aW9uXG4gKiBhbmQgdW5yZWdpc3RyYXRpb24uIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBhbHdheXMgYXZhaWxhYmxlIHRocm91Z2hcbiAqIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX5PYnNlcnZhYmxlI2NoYW5nZWR9LlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0XG4gKiBAYXBpXG4gKi9cbnZhciBPYnNlcnZhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIE9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uID0gX3RoaXMub25JbnRlcm5hbDtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7T25TaWduYXR1cmU8RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZSA9IF90aGlzLm9uY2VJbnRlcm5hbDtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7T25TaWduYXR1cmU8RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgdm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51biA9IF90aGlzLnVuSW50ZXJuYWw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmV2aXNpb25fID0gMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZWFzZXMgdGhlIHJldmlzaW9uIGNvdW50ZXIgYW5kIGRpc3BhdGNoZXMgYSAnY2hhbmdlJyBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKyt0aGlzLnJldmlzaW9uXztcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhpcyBvYmplY3QuICBFYWNoIHRpbWUgdGhlIG9iamVjdCBpcyBtb2RpZmllZCxcbiAgICAgKiBpdHMgdmVyc2lvbiBudW1iZXIgd2lsbCBiZSBpbmNyZW1lbnRlZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJldmlzaW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5nZXRSZXZpc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV2aXNpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBFdmVudCBrZXkuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLm9uSW50ZXJuYWwgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSB0eXBlLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBrZXlzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAga2V5c1tpXSA9IGxpc3Rlbih0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW4odGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbig/KTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IEV2ZW50IGtleS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25jZUludGVybmFsID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICAgICAgICBrZXkgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBrZXlbaV0gPSBsaXN0ZW5PbmNlKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleSA9IGxpc3Rlbk9uY2UodGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleSA9IGtleTtcbiAgICAgICAgcmV0dXJuIGtleTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVubGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbig/KTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnVuSW50ZXJuYWwgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGtleSA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgdW5CeUtleShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHR5cGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oRXZlbnRUYXJnZXQpKTtcbi8qKlxuICogTGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAqICAgICBjYWxsZWQgd2l0aCBhbiBhcnJheSBvZiBldmVudCB0eXBlcyBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSByZXR1cm5cbiAqICAgICB3aWxsIGJlIGFuIGFycmF5IG9mIGtleXMuXG4gKiBAYXBpXG4gKi9cbk9ic2VydmFibGUucHJvdG90eXBlLm9uO1xuLyoqXG4gKiBMaXN0ZW4gb25jZSBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuIElmXG4gKiAgICAgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgcmV0dXJuXG4gKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICogQGFwaVxuICovXG5PYnNlcnZhYmxlLnByb3RvdHlwZS5vbmNlO1xuLyoqXG4gKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUudW47XG4vKipcbiAqIFJlbW92ZXMgYW4gZXZlbnQgbGlzdGVuZXIgdXNpbmcgdGhlIGtleSByZXR1cm5lZCBieSBgb24oKWAgb3IgYG9uY2UoKWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBrZXkgVGhlIGtleSByZXR1cm5lZCBieSBgb24oKWBcbiAqICAgICBvciBgb25jZSgpYCAob3IgYW4gYXJyYXkgb2Yga2V5cykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bkJ5S2V5KGtleSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0ga2V5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoa2V5W2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdW5saXN0ZW5CeUtleSgvKiogQHR5cGUge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX0gKi8gKGtleSkpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IE9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC91dGlsXG4gKi9cbi8qKlxuICogQHJldHVybiB7P30gQW55IHJldHVybi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFic3RyYWN0KCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgez99ICovICgoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuaW1wbGVtZW50ZWQgYWJzdHJhY3QgbWV0aG9kLicpO1xuICAgIH0pKCkpO1xufVxuLyoqXG4gKiBDb3VudGVyIGZvciBnZXRVaWQuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQHByaXZhdGVcbiAqL1xudmFyIHVpZENvdW50ZXJfID0gMDtcbi8qKlxuICogR2V0cyBhIHVuaXF1ZSBJRCBmb3IgYW4gb2JqZWN0LiBUaGlzIG11dGF0ZXMgdGhlIG9iamVjdCBzbyB0aGF0IGZ1cnRoZXIgY2FsbHNcbiAqIHdpdGggdGhlIHNhbWUgb2JqZWN0IGFzIGEgcGFyYW1ldGVyIHJldHVybnMgdGhlIHNhbWUgdmFsdWUuIFVuaXF1ZSBJRHMgYXJlIGdlbmVyYXRlZFxuICogYXMgYSBzdHJpY3RseSBpbmNyZWFzaW5nIHNlcXVlbmNlLiBBZGFwdGVkIGZyb20gZ29vZy5nZXRVaWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGdldCB0aGUgdW5pcXVlIElEIGZvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVuaXF1ZSBJRCBmb3IgdGhlIG9iamVjdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVpZChvYmopIHtcbiAgICByZXR1cm4gb2JqLm9sX3VpZCB8fCAob2JqLm9sX3VpZCA9IFN0cmluZygrK3VpZENvdW50ZXJfKSk7XG59XG4vKipcbiAqIE9wZW5MYXllcnMgdmVyc2lvbi5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgVkVSU0lPTiA9ICc2LjYuMSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvT2JqZWN0XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4vT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24sIGlzRW1wdHkgfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKi9cbnZhciBPYmplY3RFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JqZWN0RXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcHJvcGVydHkgbmFtZS5cbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIFRoZSBvbGQgdmFsdWUgZm9yIGBrZXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE9iamVjdEV2ZW50KHR5cGUsIGtleSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB3aG9zZSB2YWx1ZSBpcyBjaGFuZ2luZy5cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9sZCB2YWx1ZS4gVG8gZ2V0IHRoZSBuZXcgdmFsdWUgdXNlIGBlLnRhcmdldC5nZXQoZS5rZXkpYCB3aGVyZVxuICAgICAgICAgKiBgZWAgaXMgdGhlIGV2ZW50IG9iamVjdC5cbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9sZFZhbHVlID0gb2xkVmFsdWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgT2JqZWN0RXZlbnQgfTtcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBPYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgUmV0dXJuPn0gT2JqZWN0T25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBNb3N0IG5vbi10cml2aWFsIGNsYXNzZXMgaW5oZXJpdCBmcm9tIHRoaXMuXG4gKlxuICogVGhpcyBleHRlbmRzIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX0gd2l0aCBvYnNlcnZhYmxlXG4gKiBwcm9wZXJ0aWVzLCB3aGVyZSBlYWNoIHByb3BlcnR5IGlzIG9ic2VydmFibGUgYXMgd2VsbCBhcyB0aGUgb2JqZWN0IGFzIGFcbiAqIHdob2xlLlxuICpcbiAqIENsYXNzZXMgdGhhdCBpbmhlcml0IGZyb20gdGhpcyBoYXZlIHByZS1kZWZpbmVkIHByb3BlcnRpZXMsIHRvIHdoaWNoIHlvdSBjYW5cbiAqIGFkZCB5b3VyIG93bnMuIFRoZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzIGFyZSBsaXN0ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uIGFzXG4gKiAnT2JzZXJ2YWJsZSBQcm9wZXJ0aWVzJywgYW5kIGhhdmUgdGhlaXIgb3duIGFjY2Vzc29yczsgZm9yIGV4YW1wbGUsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGhhcyBhIGB0YXJnZXRgIHByb3BlcnR5LCBhY2Nlc3NlZCB3aXRoXG4gKiBgZ2V0VGFyZ2V0KClgIGFuZCBjaGFuZ2VkIHdpdGggYHNldFRhcmdldCgpYC4gTm90IGFsbCBwcm9wZXJ0aWVzIGFyZSBob3dldmVyXG4gKiBzZXR0YWJsZS4gVGhlcmUgYXJlIGFsc28gZ2VuZXJhbC1wdXJwb3NlIGFjY2Vzc29ycyBgZ2V0KClgIGFuZCBgc2V0KClgLiBGb3JcbiAqIGV4YW1wbGUsIGBnZXQoJ3RhcmdldCcpYCBpcyBlcXVpdmFsZW50IHRvIGBnZXRUYXJnZXQoKWAuXG4gKlxuICogVGhlIGBzZXRgIGFjY2Vzc29ycyB0cmlnZ2VyIGEgY2hhbmdlIGV2ZW50LCBhbmQgeW91IGNhbiBtb25pdG9yIHRoaXMgYnlcbiAqIHJlZ2lzdGVyaW5nIGEgbGlzdGVuZXIuIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL1ZpZXd+Vmlld30gaGFzIGFcbiAqIGBjZW50ZXJgIHByb3BlcnR5LCBzbyBgdmlldy5vbignY2hhbmdlOmNlbnRlcicsIGZ1bmN0aW9uKGV2dCkgey4uLn0pO2Agd291bGRcbiAqIGNhbGwgdGhlIGZ1bmN0aW9uIHdoZW5ldmVyIHRoZSB2YWx1ZSBvZiB0aGUgY2VudGVyIHByb3BlcnR5IGNoYW5nZXMuIFdpdGhpblxuICogdGhlIGZ1bmN0aW9uLCBgZXZ0LnRhcmdldGAgd291bGQgYmUgdGhlIHZpZXcsIHNvIGBldnQudGFyZ2V0LmdldENlbnRlcigpYFxuICogd291bGQgcmV0dXJuIHRoZSBuZXcgY2VudGVyLlxuICpcbiAqIFlvdSBjYW4gYWRkIHlvdXIgb3duIG9ic2VydmFibGUgcHJvcGVydGllcyB3aXRoXG4gKiBgb2JqZWN0LnNldCgncHJvcCcsICd2YWx1ZScpYCwgYW5kIHJldHJpZXZlIHRoYXQgd2l0aCBgb2JqZWN0LmdldCgncHJvcCcpYC5cbiAqIFlvdSBjYW4gbGlzdGVuIGZvciBjaGFuZ2VzIG9uIHRoYXQgcHJvcGVydHkgdmFsdWUgd2l0aFxuICogYG9iamVjdC5vbignY2hhbmdlOnByb3AnLCBsaXN0ZW5lcilgLiBZb3UgY2FuIGdldCBhIGxpc3Qgb2YgYWxsXG4gKiBwcm9wZXJ0aWVzIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdCNnZXRQcm9wZXJ0aWVzfS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG9ic2VydmFibGUgcHJvcGVydGllcyBhcmUgc2VwYXJhdGUgZnJvbSBzdGFuZGFyZCBKUyBwcm9wZXJ0aWVzLlxuICogWW91IGNhbiwgZm9yIGV4YW1wbGUsIGdpdmUgeW91ciBtYXAgb2JqZWN0IGEgdGl0bGUgd2l0aFxuICogYG1hcC50aXRsZT0nTmV3IHRpdGxlJ2AgYW5kIHdpdGggYG1hcC5zZXQoJ3RpdGxlJywgJ0Fub3RoZXIgdGl0bGUnKWAuIFRoZVxuICogZmlyc3Qgd2lsbCBiZSBhIGBoYXNPd25Qcm9wZXJ0eWA7IHRoZSBzZWNvbmQgd2lsbCBhcHBlYXIgaW5cbiAqIGBnZXRQcm9wZXJ0aWVzKClgLiBPbmx5IHRoZSBzZWNvbmQgaXMgb2JzZXJ2YWJsZS5cbiAqXG4gKiBQcm9wZXJ0aWVzIGNhbiBiZSBkZWxldGVkIGJ5IHVzaW5nIHRoZSB1bnNldCBtZXRob2QuIEUuZy5cbiAqIG9iamVjdC51bnNldCgnZm9vJykuXG4gKlxuICogQGZpcmVzIE9iamVjdEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlT2JqZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlT2JqZWN0LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgKj59IFtvcHRfdmFsdWVzXSBBbiBvYmplY3Qgd2l0aCBrZXktdmFsdWUgcGFpcnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZU9iamVjdChvcHRfdmFsdWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09iamVjdE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0T25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09iamVjdE9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8vIENhbGwge0BsaW5rIG1vZHVsZTpvbC91dGlsLmdldFVpZH0gdG8gZW5zdXJlIHRoYXQgdGhlIG9yZGVyIG9mIG9iamVjdHMnIGlkcyBpc1xuICAgICAgICAvLyB0aGUgc2FtZSBhcyB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGNyZWF0ZWQuICBUaGlzIGFsc28gaGVscHMgdG9cbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgb2JqZWN0IHByb3BlcnRpZXMgYXJlIGFsd2F5cyBhZGRlZCBpbiB0aGUgc2FtZSBvcmRlciwgd2hpY2hcbiAgICAgICAgLy8gaGVscHMgbWFueSBKYXZhU2NyaXB0IGVuZ2luZXMgZ2VuZXJhdGUgZmFzdGVyIGNvZGUuXG4gICAgICAgIGdldFVpZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52YWx1ZXNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdF92YWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhvcHRfdmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEByZXR1cm4geyp9IFZhbHVlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVzXyAmJiB0aGlzLnZhbHVlc18uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBsaXN0IG9mIG9iamVjdCBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBMaXN0IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudmFsdWVzXyAmJiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlc18pKSB8fCBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbiBvYmplY3Qgb2YgYWxsIHByb3BlcnR5IG5hbWVzIGFuZCB2YWx1ZXMuXG4gICAgICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgKj59IE9iamVjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgYXNzaWduKHt9LCB0aGlzLnZhbHVlc18pKSB8fCB7fTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaGFzIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuaGFzUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIE9sZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoa2V5LCBvbGRWYWx1ZSkge1xuICAgICAgICB2YXIgZXZlbnRUeXBlO1xuICAgICAgICBldmVudFR5cGUgPSBcImNoYW5nZTpcIiArIGtleTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICAgICAgZXZlbnRUeXBlID0gT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5hZGRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChrZXksIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZTpcIiArIGtleSwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChrZXksIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZTpcIiArIGtleSwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2lsZW50XSBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgb3B0X3NpbGVudCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXNfIHx8ICh0aGlzLnZhbHVlc18gPSB7fSk7XG4gICAgICAgIGlmIChvcHRfc2lsZW50KSB7XG4gICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdmFsdWVzW2tleV07XG4gICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIGEgY29sbGVjdGlvbiBvZiBrZXktdmFsdWUgcGFpcnMuICBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIGFueSBleGlzdGluZ1xuICAgICAqIHByb3BlcnRpZXMgYW5kIGFkZHMgbmV3IG9uZXMgKGl0IGRvZXMgbm90IHJlbW92ZSBhbnkgZXhpc3RpbmcgcHJvcGVydGllcykuXG4gICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2lsZW50XSBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5zZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHZhbHVlcywgb3B0X3NpbGVudCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICB0aGlzLnNldChrZXksIHZhbHVlc1trZXldLCBvcHRfc2lsZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbHkgYW55IHByb3BlcnRpZXMgZnJvbSBhbm90aGVyIG9iamVjdCB3aXRob3V0IHRyaWdnZXJpbmcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7QmFzZU9iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5hcHBseVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGlmICghc291cmNlLnZhbHVlc18pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ24odGhpcy52YWx1ZXNfIHx8ICh0aGlzLnZhbHVlc18gPSB7fSksIHNvdXJjZS52YWx1ZXNfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVuc2V0cyBhIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3NpbGVudF0gVW5zZXQgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS51bnNldCA9IGZ1bmN0aW9uIChrZXksIG9wdF9zaWxlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVzXyAmJiBrZXkgaW4gdGhpcy52YWx1ZXNfKSB7XG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KHRoaXMudmFsdWVzXykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc18gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFvcHRfc2lsZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoa2V5LCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCYXNlT2JqZWN0O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBCYXNlT2JqZWN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9Qcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBPUEFDSVRZOiAnb3BhY2l0eScsXG4gICAgVklTSUJMRTogJ3Zpc2libGUnLFxuICAgIEVYVEVOVDogJ2V4dGVudCcsXG4gICAgWl9JTkRFWDogJ3pJbmRleCcsXG4gICAgTUFYX1JFU09MVVRJT046ICdtYXhSZXNvbHV0aW9uJyxcbiAgICBNSU5fUkVTT0xVVElPTjogJ21pblJlc29sdXRpb24nLFxuICAgIE1BWF9aT09NOiAnbWF4Wm9vbScsXG4gICAgTUlOX1pPT006ICdtaW5ab29tJyxcbiAgICBTT1VSQ0U6ICdzb3VyY2UnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvQXNzZXJ0aW9uRXJyb3JcbiAqL1xuaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gJy4vdXRpbC5qcyc7XG4vKipcbiAqIEVycm9yIG9iamVjdCB0aHJvd24gd2hlbiBhbiBhc3NlcnRpb24gZmFpbGVkLiBUaGlzIGlzIGFuIEVDTUEtMjYyIEVycm9yLFxuICogZXh0ZW5kZWQgd2l0aCBhIGBjb2RlYCBwcm9wZXJ0eS5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvci5cbiAqL1xudmFyIEFzc2VydGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc3NlcnRpb25FcnJvciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29kZSBFcnJvciBjb2RlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKGNvZGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHBhdGggPSBWRVJTSU9OID09PSAnbGF0ZXN0JyA/IFZFUlNJT04gOiAndicgKyBWRVJTSU9OLnNwbGl0KCctJylbMF07XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ0Fzc2VydGlvbiBmYWlsZWQuIFNlZSBodHRwczovL29wZW5sYXllcnMub3JnL2VuLycgK1xuICAgICAgICAgICAgcGF0aCArXG4gICAgICAgICAgICAnL2RvYy9lcnJvcnMvIycgK1xuICAgICAgICAgICAgY29kZSArXG4gICAgICAgICAgICAnIGZvciBkZXRhaWxzLic7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVycm9yIGNvZGUuIFRoZSBtZWFuaW5nIG9mIHRoZSBjb2RlIGNhbiBiZSBmb3VuZCBvblxuICAgICAgICAgKiBodHRwczovL29wZW5sYXllcnMub3JnL2VuL2xhdGVzdC9kb2MvZXJyb3JzLyAocmVwbGFjZSBgbGF0ZXN0YCB3aXRoXG4gICAgICAgICAqIHRoZSB2ZXJzaW9uIGZvdW5kIGluIHRoZSBPcGVuTGF5ZXJzIHNjcmlwdCdzIGhlYWRlciBjb21tZW50IGlmIGEgdmVyc2lvblxuICAgICAgICAgKiBvdGhlciB0aGFuIHRoZSBsYXRlc3QgaXMgdXNlZCkuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InO1xuICAgICAgICAvLyBSZS1hc3NpZ24gbWVzc2FnZSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SaWNoLUhhcnJpcy9idWJsZS9pc3N1ZXMvNDBcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEFzc2VydGlvbkVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IGRlZmF1bHQgQXNzZXJ0aW9uRXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc3NlcnRpb25FcnJvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvYXNzZXJ0c1xuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG4vKipcbiAqIEBwYXJhbSB7Kn0gYXNzZXJ0aW9uIEFzc2VydGlvbiB3ZSBleHBlY3RlZCB0byBiZSB0cnV0aHkuXG4gKiBAcGFyYW0ge251bWJlcn0gZXJyb3JDb2RlIEVycm9yIGNvZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoYXNzZXJ0aW9uLCBlcnJvckNvZGUpIHtcbiAgICBpZiAoIWFzc2VydGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoZXJyb3JDb2RlKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9tYXRoXG4gKi9cbi8qKlxuICogVGFrZXMgYSBudW1iZXIgYW5kIGNsYW1wcyBpdCB0byB3aXRoaW4gdGhlIHByb3ZpZGVkIGJvdW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSB2YWx1ZSB0byByZXR1cm4uXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGlucHV0IG51bWJlciBpZiBpdCBpcyB3aXRoaW4gYm91bmRzLCBvciB0aGUgbmVhcmVzdFxuICogICAgIG51bWJlciB3aXRoaW4gdGhlIGJvdW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbn1cbi8qKlxuICogUmV0dXJuIHRoZSBoeXBlcmJvbGljIGNvc2luZSBvZiBhIGdpdmVuIG51bWJlci4gVGhlIG1ldGhvZCB3aWxsIHVzZSB0aGVcbiAqIG5hdGl2ZSBgTWF0aC5jb3NoYCBmdW5jdGlvbiBpZiBpdCBpcyBhdmFpbGFibGUsIG90aGVyd2lzZSB0aGUgaHlwZXJib2xpY1xuICogY29zaW5lIHdpbGwgYmUgY2FsY3VsYXRlZCB2aWEgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTW96aWxsYVxuICogZGV2ZWxvcGVyIG5ldHdvcmsuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEByZXR1cm4ge251bWJlcn0gSHlwZXJib2xpYyBjb3NpbmUgb2YgeC5cbiAqL1xuZXhwb3J0IHZhciBjb3NoID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBXcmFwcGVkIGluIGEgaWlmZSwgdG8gc2F2ZSB0aGUgb3ZlcmhlYWQgb2YgY2hlY2tpbmcgZm9yIHRoZSBuYXRpdmVcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiBvbiBldmVyeSBpbnZvY2F0aW9uLlxuICAgIHZhciBjb3NoO1xuICAgIGlmICgnY29zaCcgaW4gTWF0aCkge1xuICAgICAgICAvLyBUaGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgdGhlIG5hdGl2ZSBNYXRoLmNvc2ggZnVuY3Rpb24sIHVzZSBpdOKAplxuICAgICAgICBjb3NoID0gTWF0aC5jb3NoO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8g4oCmIGVsc2UsIHVzZSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIE1ETjpcbiAgICAgICAgY29zaCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB2YXIgeSA9IC8qKiBAdHlwZSB7TWF0aH0gKi8gKE1hdGgpLmV4cCh4KTtcbiAgICAgICAgICAgIHJldHVybiAoeSArIDEgLyB5KSAvIDI7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjb3NoO1xufSkoKTtcbi8qKlxuICogUmV0dXJuIHRoZSBiYXNlIDIgbG9nYXJpdGhtIG9mIGEgZ2l2ZW4gbnVtYmVyLiBUaGUgbWV0aG9kIHdpbGwgdXNlIHRoZVxuICogbmF0aXZlIGBNYXRoLmxvZzJgIGZ1bmN0aW9uIGlmIGl0IGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBiYXNlIDJcbiAqIGxvZ2FyaXRobSB3aWxsIGJlIGNhbGN1bGF0ZWQgdmlhIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgdGhlXG4gKiBNb3ppbGxhIGRldmVsb3BlciBuZXR3b3JrLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEJhc2UgMiBsb2dhcml0aG0gb2YgeC5cbiAqL1xuZXhwb3J0IHZhciBsb2cyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBXcmFwcGVkIGluIGEgaWlmZSwgdG8gc2F2ZSB0aGUgb3ZlcmhlYWQgb2YgY2hlY2tpbmcgZm9yIHRoZSBuYXRpdmVcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiBvbiBldmVyeSBpbnZvY2F0aW9uLlxuICAgIHZhciBsb2cyO1xuICAgIGlmICgnbG9nMicgaW4gTWF0aCkge1xuICAgICAgICAvLyBUaGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgdGhlIG5hdGl2ZSBNYXRoLmxvZzIgZnVuY3Rpb24sIHVzZSBpdOKAplxuICAgICAgICBsb2cyID0gTWF0aC5sb2cyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8g4oCmIGVsc2UsIHVzZSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIE1ETjpcbiAgICAgICAgbG9nMiA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5sb2coeCkgKiBNYXRoLkxPRzJFO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbG9nMjtcbn0pKCk7XG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgY2xvc2VzdCBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb2ludCAoeCwgeSkgYW5kIHRoZVxuICogbGluZSBzZWdtZW50ICh4MSwgeTEpIHRvICh4MiwgeTIpLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge251bWJlcn0geDEgWDEuXG4gKiBAcGFyYW0ge251bWJlcn0geTEgWTEuXG4gKiBAcGFyYW0ge251bWJlcn0geDIgWDIuXG4gKiBAcGFyYW0ge251bWJlcn0geTIgWTIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkU2VnbWVudERpc3RhbmNlKHgsIHksIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIGR4ID0geDIgLSB4MTtcbiAgICB2YXIgZHkgPSB5MiAtIHkxO1xuICAgIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgICAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBpZiAodCA+IDEpIHtcbiAgICAgICAgICAgIHgxID0geDI7XG4gICAgICAgICAgICB5MSA9IHkyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICAgICAgICB4MSArPSBkeCAqIHQ7XG4gICAgICAgICAgICB5MSArPSBkeSAqIHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZSh4LCB5LCB4MSwgeTEpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoeDEsIHkxKSBhbmQgKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geDEgWDEuXG4gKiBAcGFyYW0ge251bWJlcn0geTEgWTEuXG4gKiBAcGFyYW0ge251bWJlcn0geDIgWDIuXG4gKiBAcGFyYW0ge251bWJlcn0geTIgWTIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBTb2x2ZXMgc3lzdGVtIG9mIGxpbmVhciBlcXVhdGlvbnMgdXNpbmcgR2F1c3NpYW4gZWxpbWluYXRpb24gbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IG1hdCBBdWdtZW50ZWQgbWF0cml4IChuIHggbiArIDEgY29sdW1uKVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gcm93LW1ham9yIG9yZGVyLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIHJlc3VsdGluZyB2ZWN0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb2x2ZUxpbmVhclN5c3RlbShtYXQpIHtcbiAgICB2YXIgbiA9IG1hdC5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgLy8gRmluZCBtYXggaW4gdGhlIGktdGggY29sdW1uIChpZ25vcmluZyBpIC0gMSBmaXJzdCByb3dzKVxuICAgICAgICB2YXIgbWF4Um93ID0gaTtcbiAgICAgICAgdmFyIG1heEVsID0gTWF0aC5hYnMobWF0W2ldW2ldKTtcbiAgICAgICAgZm9yICh2YXIgciA9IGkgKyAxOyByIDwgbjsgcisrKSB7XG4gICAgICAgICAgICB2YXIgYWJzVmFsdWUgPSBNYXRoLmFicyhtYXRbcl1baV0pO1xuICAgICAgICAgICAgaWYgKGFic1ZhbHVlID4gbWF4RWwpIHtcbiAgICAgICAgICAgICAgICBtYXhFbCA9IGFic1ZhbHVlO1xuICAgICAgICAgICAgICAgIG1heFJvdyA9IHI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heEVsID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gbWF0cml4IGlzIHNpbmd1bGFyXG4gICAgICAgIH1cbiAgICAgICAgLy8gU3dhcCBtYXggcm93IHdpdGggaS10aCAoY3VycmVudCkgcm93XG4gICAgICAgIHZhciB0bXAgPSBtYXRbbWF4Um93XTtcbiAgICAgICAgbWF0W21heFJvd10gPSBtYXRbaV07XG4gICAgICAgIG1hdFtpXSA9IHRtcDtcbiAgICAgICAgLy8gU3VidHJhY3QgdGhlIGktdGggcm93IHRvIG1ha2UgYWxsIHRoZSByZW1haW5pbmcgcm93cyAwIGluIHRoZSBpLXRoIGNvbHVtblxuICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBuOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBjb2VmID0gLW1hdFtqXVtpXSAvIG1hdFtpXVtpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSBpOyBrIDwgbiArIDE7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmIChpID09IGspIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0W2pdW2tdID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdFtqXVtrXSArPSBjb2VmICogbWF0W2ldW2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTb2x2ZSBBeD1iIGZvciB1cHBlciB0cmlhbmd1bGFyIG1hdHJpeCBBIChtYXQpXG4gICAgdmFyIHggPSBuZXcgQXJyYXkobik7XG4gICAgZm9yICh2YXIgbCA9IG4gLSAxOyBsID49IDA7IGwtLSkge1xuICAgICAgICB4W2xdID0gbWF0W2xdW25dIC8gbWF0W2xdW2xdO1xuICAgICAgICBmb3IgKHZhciBtID0gbCAtIDE7IG0gPj0gMDsgbS0tKSB7XG4gICAgICAgICAgICBtYXRbbV1bbl0gLT0gbWF0W21dW2xdICogeFtsXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geDtcbn1cbi8qKlxuICogQ29udmVydHMgcmFkaWFucyB0byB0byBkZWdyZWVzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBBbmdsZSBpbiByYWRpYW5zLlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBpbiBkZWdyZWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9EZWdyZWVzKGFuZ2xlSW5SYWRpYW5zKSB7XG4gICAgcmV0dXJuIChhbmdsZUluUmFkaWFucyAqIDE4MCkgLyBNYXRoLlBJO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBkZWdyZWVzIHRvIHJhZGlhbnMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5EZWdyZWVzIEFuZ2xlIGluIGRlZ3JlZXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIHJhZGlhbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbnMoYW5nbGVJbkRlZ3JlZXMpIHtcbiAgICByZXR1cm4gKGFuZ2xlSW5EZWdyZWVzICogTWF0aC5QSSkgLyAxODA7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1vZHVsbyBvZiBhIC8gYiwgZGVwZW5kaW5nIG9uIHRoZSBzaWduIG9mIGIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGEgRGl2aWRlbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gYiBEaXZpc29yLlxuICogQHJldHVybiB7bnVtYmVyfSBNb2R1bG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb2R1bG8oYSwgYikge1xuICAgIHZhciByID0gYSAlIGI7XG4gICAgcmV0dXJuIHIgKiBiIDwgMCA/IHIgKyBiIDogcjtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGluZWFybHkgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIHggYmV0d2VlbiBhIGFuZCBiLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGIgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0geCBWYWx1ZSB0byBiZSBpbnRlcnBvbGF0ZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEludGVycG9sYXRlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxlcnAoYSwgYiwgeCkge1xuICAgIHJldHVybiBhICsgeCAqIChiIC0gYSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRoLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IExheWVyUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmV4dGVudCd8J2NoYW5nZTptYXhSZXNvbHV0aW9uJ3wnY2hhbmdlOm1heFpvb20nfFxuICogICAgJ2NoYW5nZTptaW5SZXNvbHV0aW9uJ3wnY2hhbmdlOm1pblpvb20nfCdjaGFuZ2U6b3BhY2l0eSd8J2NoYW5nZTp2aXNpYmxlJ3wnY2hhbmdlOnpJbmRleCd9IEJhc2VMYXllck9iamVjdEV2ZW50VHlwZXNcbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8QmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xCYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzLCBSZXR1cm4+fSBCYXNlTGF5ZXJPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsICo+fSBbcHJvcGVydGllc10gQXJiaXRyYXJ5IG9ic2VydmFibGUgcHJvcGVydGllcy4gQ2FuIGJlIGFjY2Vzc2VkIHdpdGggYCNnZXQoKWAgYW5kIGAjc2V0KClgLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIE5vdGUgdGhhdCB3aXRoIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX0gYW5kIGFsbCBpdHMgc3ViY2xhc3NlcywgYW55IHByb3BlcnR5IHNldCBpblxuICogdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R9IHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3QsIHNvXG4gKiBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VMYXllcihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBwcm9wZXJ0aWVzID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBkZWxldGUgcHJvcGVydGllcy5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgYXNzaWduKHByb3BlcnRpZXMsIG9wdGlvbnMucHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk9QQUNJVFldID1cbiAgICAgICAgICAgIG9wdGlvbnMub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFjaXR5IDogMTtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPT09ICdudW1iZXInLCA2NCk7IC8vIExheWVyIG9wYWNpdHkgbXVzdCBiZSBhIG51bWJlclxuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuVklTSUJMRV0gPVxuICAgICAgICAgICAgb3B0aW9ucy52aXNpYmxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnZpc2libGUgOiB0cnVlO1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuWl9JTkRFWF0gPSBvcHRpb25zLnpJbmRleDtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OXSA9XG4gICAgICAgICAgICBvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4UmVzb2x1dGlvbiA6IEluZmluaXR5O1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT05dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5SZXNvbHV0aW9uIDogMDtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1JTl9aT09NXSA9XG4gICAgICAgICAgICBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IC1JbmZpbml0eTtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1BWF9aT09NXSA9XG4gICAgICAgICAgICBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IEluZmluaXR5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNsYXNzTmFtZV8gPVxuICAgICAgICAgICAgcHJvcGVydGllcy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLWxheWVyJztcbiAgICAgICAgZGVsZXRlIHByb3BlcnRpZXMuY2xhc3NOYW1lO1xuICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZV8gPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gQ1NTIGNsYXNzIG5hbWUuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRDbGFzc05hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgbWVhbnQgdG8gYmUgY2FsbGVkIGJ5IGxheWVycyBvciBsYXllciByZW5kZXJlcnMgYmVjYXVzZSB0aGUgc3RhdGVcbiAgICAgKiBpcyBpbmNvcnJlY3QgaWYgdGhlIGxheWVyIGlzIGluY2x1ZGVkIGluIGEgbGF5ZXIgZ3JvdXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfbWFuYWdlZF0gTGF5ZXIgaXMgbWFuYWdlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfSBMYXllciBzdGF0ZS5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGUgPSBmdW5jdGlvbiAob3B0X21hbmFnZWQpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfSAqL1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlXyB8fFxuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqLyAoe1xuICAgICAgICAgICAgICAgIGxheWVyOiB0aGlzLFxuICAgICAgICAgICAgICAgIG1hbmFnZWQ6IG9wdF9tYW5hZ2VkID09PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0X21hbmFnZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdmFyIHpJbmRleCA9IHRoaXMuZ2V0WkluZGV4KCk7XG4gICAgICAgIHN0YXRlLm9wYWNpdHkgPSBjbGFtcChNYXRoLnJvdW5kKHRoaXMuZ2V0T3BhY2l0eSgpICogMTAwKSAvIDEwMCwgMCwgMSk7XG4gICAgICAgIHN0YXRlLnNvdXJjZVN0YXRlID0gdGhpcy5nZXRTb3VyY2VTdGF0ZSgpO1xuICAgICAgICBzdGF0ZS52aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlKCk7XG4gICAgICAgIHN0YXRlLmV4dGVudCA9IHRoaXMuZ2V0RXh0ZW50KCk7XG4gICAgICAgIHN0YXRlLnpJbmRleCA9IHpJbmRleCA9PT0gdW5kZWZpbmVkICYmICFzdGF0ZS5tYW5hZ2VkID8gSW5maW5pdHkgOiB6SW5kZXg7XG4gICAgICAgIHN0YXRlLm1heFJlc29sdXRpb24gPSB0aGlzLmdldE1heFJlc29sdXRpb24oKTtcbiAgICAgICAgc3RhdGUubWluUmVzb2x1dGlvbiA9IE1hdGgubWF4KHRoaXMuZ2V0TWluUmVzb2x1dGlvbigpLCAwKTtcbiAgICAgICAgc3RhdGUubWluWm9vbSA9IHRoaXMuZ2V0TWluWm9vbSgpO1xuICAgICAgICBzdGF0ZS5tYXhab29tID0gdGhpcy5nZXRNYXhab29tKCk7XG4gICAgICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gW29wdF9hcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZVxuICAgICAqICAgICBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiAob3B0X2FycmF5KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gW29wdF9zdGF0ZXNdIE9wdGlvbmFsIGxpc3Qgb2YgbGF5ZXJcbiAgICAgKiAgICAgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IExpc3Qgb2YgbGF5ZXIgc3RhdGVzLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIChvcHRfc3RhdGVzKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnQgZXh0ZW50fSBvZiB0aGUgbGF5ZXIgb3IgYHVuZGVmaW5lZGAgaWYgaXRcbiAgICAgKiB3aWxsIGJlIHZpc2libGUgcmVnYXJkbGVzcyBvZiBleHRlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9IFRoZSBsYXllciBleHRlbnQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5FWFRFTlQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUlOX1pPT00pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWF4aW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWF4Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllciAoYmV0d2VlbiAwIGFuZCAxKS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE9wYWNpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuT1BBQ0lUWSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIFotaW5kZXggb2YgdGhlIGxheWVyLCB3aGljaCBpcyB1c2VkIHRvIG9yZGVyIGxheWVycyBiZWZvcmVcbiAgICAgKiByZW5kZXJpbmcuIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBaLWluZGV4IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFpJbmRleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5aX0lOREVYKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGV4dGVudCBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS4gIElmIGB1bmRlZmluZWRgLCB0aGUgbGF5ZXJcbiAgICAgKiB3aWxsIGJlIHZpc2libGUgYXQgYWxsIGV4dGVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gZXh0ZW50IFRoZSBleHRlbnQgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0RXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LkVYVEVOVCwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChtYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04sIG1heFJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtaW5pbXVtIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKG1pblJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTiwgbWluUmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1heGltdW0gem9vbSAoZXhjbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIHpvb20gbGV2ZWxzIGZvciBsYXllciB2aXNpYmlsaXR5IGFyZSBiYXNlZCBvbiB0aGVcbiAgICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFpvb20gVGhlIG1heGltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24gKG1heFpvb20pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTSwgbWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1pbmltdW0gem9vbSAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIHpvb20gbGV2ZWxzIGZvciBsYXllciB2aXNpYmlsaXR5IGFyZSBiYXNlZCBvbiB0aGVcbiAgICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblpvb20gVGhlIG1pbmltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNaW5ab29tID0gZnVuY3Rpb24gKG1pblpvb20pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTSwgbWluWm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLCBhbGxvd2VkIHZhbHVlcyByYW5nZSBmcm9tIDAgdG8gMS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRPcGFjaXR5ID0gZnVuY3Rpb24gKG9wYWNpdHkpIHtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiBvcGFjaXR5ID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZLCBvcGFjaXR5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2libGUgVGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uICh2aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuVklTSUJMRSwgdmlzaWJsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZSByZW5kZXJpbmcuXG4gICAgICogVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6aW5kZXggVGhlIHotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0WkluZGV4ID0gZnVuY3Rpb24gKHppbmRleCkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlpfSU5ERVgsIHppbmRleCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVfKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlXy5sYXllciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnN0YXRlXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlTGF5ZXI7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGJlZm9yZSBhIGxheWVyIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZXJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQUkVSRU5ERVI6ICdwcmVyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBhIGxheWVyIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3RyZW5kZXJcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9TVFJFTkRFUjogJ3Bvc3RyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBiZWZvcmUgbGF5ZXJzIGFyZSByZW5kZXJlZC5cbiAgICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZWNvbXBvc2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJFQ09NUE9TRTogJ3ByZWNvbXBvc2UnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBhbGwgbGF5ZXJzIGFyZSByZW5kZXJlZC5cbiAgICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3Rjb21wb3NlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPU1RDT01QT1NFOiAncG9zdGNvbXBvc2UnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHJlbmRlcmluZyBpcyBjb21wbGV0ZSwgaS5lLiBhbGwgc291cmNlcyBhbmQgdGlsZXMgaGF2ZVxuICAgICAqIGZpbmlzaGVkIGxvYWRpbmcgZm9yIHRoZSBjdXJyZW50IHZpZXdwb3J0LCBhbmQgYWxsIHRpbGVzIGFyZSBmYWRlZCBpbi5cbiAgICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3JlbmRlcmNvbXBsZXRlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJFTkRFUkNPTVBMRVRFOiAncmVuZGVyY29tcGxldGUnLFxufTtcbi8qKlxuICogQHR5cGVkZWYgeydwb3N0cmVuZGVyJ3wncHJlY29tcG9zZSd8J3Bvc3Rjb21wb3NlJ3wncmVuZGVyY29tcGxldGUnfSBNYXBSZW5kZXJFdmVudFR5cGVzXG4gKi9cbi8qKlxuICogQHR5cGVkZWYgeydwb3N0cmVuZGVyJ3wncHJlcmVuZGVyJ30gTGF5ZXJSZW5kZXJFdmVudFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1N0YXRlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIFN0YXRlIG9mIHRoZSBzb3VyY2UsIG9uZSBvZiAndW5kZWZpbmVkJywgJ2xvYWRpbmcnLCAncmVhZHknIG9yICdlcnJvcicuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBVTkRFRklORUQ6ICd1bmRlZmluZWQnLFxuICAgIExPQURJTkc6ICdsb2FkaW5nJyxcbiAgICBSRUFEWTogJ3JlYWR5JyxcbiAgICBFUlJPUjogJ2Vycm9yJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0xheWVyXG4gKi9cbmltcG9ydCBCYXNlTGF5ZXIgZnJvbSAnLi9CYXNlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZSk6SFRNTEVsZW1lbnR9IFJlbmRlckZ1bmN0aW9uXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAgICdjaGFuZ2U6c291cmNlJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfCdjaGFuZ2U6c291cmNlJ3xcbiAqICAgICBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgUmV0dXJuPn0gTGF5ZXJPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2VUeXBlXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtTb3VyY2VUeXBlfSBbc291cmNlXSBTb3VyY2UgZm9yIHRoaXMgbGF5ZXIuICBJZiBub3QgcHJvdmlkZWQgdG8gdGhlIGNvbnN0cnVjdG9yLFxuICogdGhlIHNvdXJjZSBjYW4gYmUgc2V0IGJ5IGNhbGxpbmcge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciNzZXRTb3VyY2UgbGF5ZXIuc2V0U291cmNlKHNvdXJjZSl9IGFmdGVyXG4gKiBjb25zdHJ1Y3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBNYXAuXG4gKiBAcHJvcGVydHkge1JlbmRlckZ1bmN0aW9ufSBbcmVuZGVyXSBSZW5kZXIgZnVuY3Rpb24uIFRha2VzIHRoZSBmcmFtZSBzdGF0ZSBhcyBpbnB1dCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGFuXG4gKiBIVE1MIGVsZW1lbnQuIFdpbGwgb3ZlcndyaXRlIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBmb3IgdGhlIGxheWVyLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eSwgdGhlIHZhbHVlIGlzIHJvdW5kZWQgdG8gdHdvIGRpZ2l0cyB0byBhcHBlYXIgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBzb3VyY2VTdGF0ZSBTb3VyY2VTdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdmlzaWJsZSBWaXNpYmxlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBtYW5hZ2VkIE1hbmFnZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6SW5kZXggWkluZGV4LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluaW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblpvb20gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFpvb20gTWF4aW11bSB6b29tLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZnJvbSB3aGljaCBhbGwgbGF5ZXIgdHlwZXMgYXJlIGRlcml2ZWQuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW5zdGFudGlhdGVkXG4gKiBpbiB0aGUgY2FzZSB3aGVyZSBhIGN1c3RvbSBsYXllciBpcyBiZSBhZGRlZCB0byB0aGUgbWFwIHdpdGggYSBjdXN0b20gYHJlbmRlcmAgZnVuY3Rpb24uXG4gKiBTdWNoIGEgZnVuY3Rpb24gY2FuIGJlIHNwZWNpZmllZCBpbiB0aGUgYG9wdGlvbnNgIG9iamVjdCwgYW5kIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhbiBIVE1MIGVsZW1lbnQuXG4gKlxuICogQSB2aXN1YWwgcmVwcmVzZW50YXRpb24gb2YgcmFzdGVyIG9yIHZlY3RvciBtYXAgZGF0YS5cbiAqIExheWVycyBncm91cCB0b2dldGhlciB0aG9zZSBwcm9wZXJ0aWVzIHRoYXQgcGVydGFpbiB0byBob3cgdGhlIGRhdGEgaXMgdG8gYmVcbiAqIGRpc3BsYXllZCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBzb3VyY2Ugb2YgdGhhdCBkYXRhLlxuICpcbiAqIExheWVycyBhcmUgdXN1YWxseSBhZGRlZCB0byBhIG1hcCB3aXRoIHtAbGluayBpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdCNhZGRMYXllciBtYXAuYWRkTGF5ZXIoKX0uIENvbXBvbmVudHNcbiAqIGxpa2Uge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9TZWxlY3R+U2VsZWN0fSB1c2UgdW5tYW5hZ2VkIGxheWVyc1xuICogaW50ZXJuYWxseS4gVGhlc2UgdW5tYW5hZ2VkIGxheWVycyBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0TWFwfSBpbnN0ZWFkLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKlxuICogUGxlYXNlIG5vdGUgdGhhdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyBzZXZlcmFsIGxheWVycyBtaWdodCBnZXQgcmVuZGVyZWQgdG9cbiAqIHRoZSBzYW1lIEhUTUwgZWxlbWVudCwgd2hpY2ggd2lsbCBjYXVzZSB7QGxpbmsgaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHQjZm9yRWFjaExheWVyQXRQaXhlbCBtYXAuZm9yRWFjaExheWVyQXRQaXhlbCgpfSB0b1xuICogZ2l2ZSBmYWxzZSBwb3NpdGl2ZXMuIFRvIGF2b2lkIHRoaXMsIGFwcGx5IGRpZmZlcmVudCBgY2xhc3NOYW1lYCBwcm9wZXJ0aWVzIHRvIHRoZVxuICogbGF5ZXJzIGF0IGNyZWF0aW9uIHRpbWUuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5SZW5kZXJFdmVudCNwcmVyZW5kZXJcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuUmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICpcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2VUeXBlXG4gKiBAYXBpXG4gKi9cbnZhciBMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPFNvdXJjZVR5cGU+fSBvcHRpb25zIExheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGF5ZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYmFzZU9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMuc291cmNlO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0xheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBQcmVjb21wb3NlS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBSZW5kZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAvLyBPdmVyd3JpdGUgZGVmYXVsdCByZW5kZXIgbWV0aG9kIHdpdGggYSBjdXN0b20gb25lXG4gICAgICAgIGlmIChvcHRpb25zLnJlbmRlcikge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyID0gb3B0aW9ucy5yZW5kZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubWFwKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRNYXAob3B0aW9ucy5tYXApO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKExheWVyUHJvcGVydHkuU09VUkNFLCBfdGhpcy5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8pO1xuICAgICAgICB2YXIgc291cmNlID0gb3B0aW9ucy5zb3VyY2VcbiAgICAgICAgICAgID8gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAob3B0aW9ucy5zb3VyY2UpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIF90aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gW29wdF9hcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRMYXllcnNBcnJheSA9IGZ1bmN0aW9uIChvcHRfYXJyYXkpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gb3B0X2FycmF5ID8gb3B0X2FycmF5IDogW107XG4gICAgICAgIGFycmF5LnB1c2godGhpcyk7XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IFtvcHRfc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIChvcHRfc3RhdGVzKSB7XG4gICAgICAgIHZhciBzdGF0ZXMgPSBvcHRfc3RhdGVzID8gb3B0X3N0YXRlcyA6IFtdO1xuICAgICAgICBzdGF0ZXMucHVzaCh0aGlzLmdldExheWVyU3RhdGUoKSk7XG4gICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtTb3VyY2VUeXBlfSBUaGUgbGF5ZXIgc291cmNlIChvciBgbnVsbGAgaWYgbm90IHlldCBzZXQpLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge1NvdXJjZVR5cGV9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlNPVVJDRSkpIHx8IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gU291cmNlIHN0YXRlLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgICAgIHJldHVybiAhc291cmNlID8gU291cmNlU3RhdGUuVU5ERUZJTkVEIDogc291cmNlLmdldFN0YXRlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYW5kbGVTb3VyY2VDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlQ2hhbmdlS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnNvdXJjZUNoYW5nZUtleV8pO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5nZXRTb3VyY2UoKTtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbGlzdGVuKHNvdXJjZSwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVTb3VyY2VDaGFuZ2VfLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWxcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoXG4gICAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldEZlYXR1cmVzID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gcmVzb2x2ZShbXSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5nZXRGZWF0dXJlcyhwaXhlbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbiBjaGFyZ2UgdG8gbWFuYWdlIHRoZSByZW5kZXJpbmcgb2YgdGhlIGxheWVyLiBPbmUgbGF5ZXIgdHlwZSBpc1xuICAgICAqIGJvdW5kZWQgd2l0aCBvbmUgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFRhcmdldCB3aGljaCB0aGUgcmVuZGVyZXIgbWF5IChidXQgbmVlZCBub3QpIHVzZVxuICAgICAqIGZvciByZW5kZXJpbmcgaXRzIGNvbnRlbnQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSByZW5kZXJlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBsYXllclJlbmRlcmVyID0gdGhpcy5nZXRSZW5kZXJlcigpO1xuICAgICAgICBpZiAobGF5ZXJSZW5kZXJlci5wcmVwYXJlRnJhbWUoZnJhbWVTdGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllclJlbmRlcmVyLnJlbmRlckZyYW1lKGZyYW1lU3RhdGUsIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGxheWVyIHRvIGJlIHJlbmRlcmVkIG9uIHRvcCBvZiBvdGhlciBsYXllcnMgb24gYSBtYXAuIFRoZSBtYXAgd2lsbFxuICAgICAqIG5vdCBtYW5hZ2UgdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgY2FsbGJhY2sgaW5cbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gd2lsbCByZWNlaXZlIGBudWxsYCBhcyBsYXllci4gVGhpc1xuICAgICAqIGlzIHVzZWZ1bCBmb3IgdGVtcG9yYXJ5IGxheWVycy4gVG8gcmVtb3ZlIGFuIHVubWFuYWdlZCBsYXllciBmcm9tIHRoZSBtYXAsXG4gICAgICogdXNlIGAjc2V0TWFwKG51bGwpYC5cbiAgICAgKlxuICAgICAqIFRvIGFkZCB0aGUgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwLCB1c2VcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjYWRkTGF5ZXJ9IGluc3RlYWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgaWYgKHRoaXMubWFwUHJlY29tcG9zZUtleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBQcmVjb21wb3NlS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hcCkge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWFwUmVuZGVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFJlbmRlcktleV8pO1xuICAgICAgICAgICAgdGhpcy5tYXBSZW5kZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWFwKSB7XG4gICAgICAgICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbGlzdGVuKG1hcCwgUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyRXZlbnQgPSBcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0fSAqLyAoZXZ0KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IHJlbmRlckV2ZW50LmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gQSBsYXllciBjYW4gb25seSBiZSBhZGRlZCB0byB0aGUgbWFwIG9uY2UuIFVzZSBlaXRoZXIgYGxheWVyLnNldE1hcCgpYCBvciBgbWFwLmFkZExheWVyKClgLCBub3QgYm90aC5cbiAgICAgICAgICAgICAgICBhc3NlcnQoIWxheWVyU3RhdGVzQXJyYXkuc29tZShmdW5jdGlvbiAoYXJyYXlMYXllclN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheUxheWVyU3RhdGUubGF5ZXIgPT09IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICAgICAgfSksIDY3KTtcbiAgICAgICAgICAgICAgICBsYXllclN0YXRlc0FycmF5LnB1c2gobGF5ZXJTdGF0ZSk7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IGxpc3Rlbih0aGlzLCBFdmVudFR5cGUuQ0hBTkdFLCBtYXAucmVuZGVyLCBtYXApO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGF5ZXIgc291cmNlLlxuICAgICAqIEBwYXJhbSB7U291cmNlVHlwZX0gc291cmNlIFRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLnNldFNvdXJjZSA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsIHNvdXJjZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlbmRlcmVyIGZvciB0aGlzIGxheWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IFRoZSBsYXllciByZW5kZXJlci5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfID0gdGhpcy5jcmVhdGVSZW5kZXJlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBsYXllciBoYXMgYSByZW5kZXJlci5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuaGFzUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gQSBsYXllciByZW5kZXJlci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0U291cmNlKG51bGwpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyO1xufShCYXNlTGF5ZXIpKTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgbGF5ZXIgaXMgdmlzaWJsZSBhbmQgaWYgdGhlIHByb3ZpZGVkIHZpZXcgc3RhdGVcbiAqIGhhcyByZXNvbHV0aW9uIGFuZCB6b29tIGxldmVscyB0aGF0IGFyZSBpbiByYW5nZSBvZiB0aGUgbGF5ZXIncyBtaW4vbWF4LlxuICogQHBhcmFtIHtTdGF0ZX0gbGF5ZXJTdGF0ZSBMYXllciBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5TdGF0ZX0gdmlld1N0YXRlIFZpZXcgc3RhdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaXMgdmlzaWJsZSBhdCB0aGUgZ2l2ZW4gdmlldyBzdGF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpIHtcbiAgICBpZiAoIWxheWVyU3RhdGUudmlzaWJsZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgaWYgKHJlc29sdXRpb24gPCBsYXllclN0YXRlLm1pblJlc29sdXRpb24gfHxcbiAgICAgICAgcmVzb2x1dGlvbiA+PSBsYXllclN0YXRlLm1heFJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgem9vbSA9IHZpZXdTdGF0ZS56b29tO1xuICAgIHJldHVybiB6b29tID4gbGF5ZXJTdGF0ZS5taW5ab29tICYmIHpvb20gPD0gbGF5ZXJTdGF0ZS5tYXhab29tO1xufVxuZXhwb3J0IGRlZmF1bHQgTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVGlsZVByb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFBSRUxPQUQ6ICdwcmVsb2FkJyxcbiAgICBVU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUjogJ3VzZUludGVyaW1UaWxlc09uRXJyb3InLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVQcm9wZXJ0eS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VUaWxlXG4gKi9cbmltcG9ydCBMYXllciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBUaWxlUHJvcGVydHkgZnJvbSAnLi9UaWxlUHJvcGVydHkuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAgICdjaGFuZ2U6c291cmNlJ3wnY2hhbmdlOnByZWxvYWQnfCdjaGFuZ2U6dXNlSW50ZXJpbVRpbGVzT25FcnJvcicsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgJ2NoYW5nZTpzb3VyY2UnfCdjaGFuZ2U6cHJlbG9hZCd8J2NoYW5nZTp1c2VJbnRlcmltVGlsZXNPbkVycm9yJ3xpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgUmV0dXJuPn0gQmFzZVRpbGVMYXllck9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJlbG9hZD0wXSBQcmVsb2FkLiBMb2FkIGxvdy1yZXNvbHV0aW9uIHRpbGVzIHVwIHRvIGBwcmVsb2FkYCBsZXZlbHMuIGAwYFxuICogbWVhbnMgbm8gcHJlbG9hZGluZy5cbiAqIEBwcm9wZXJ0eSB7VGlsZVNvdXJjZVR5cGV9IFtzb3VyY2VdIFNvdXJjZSBmb3IgdGhpcyBsYXllci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIFNldHMgdGhlIGxheWVyIGFzIG92ZXJsYXkgb24gYSBtYXAuIFRoZSBtYXAgd2lsbCBub3QgbWFuYWdlXG4gKiB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbiwgYW5kIHRoZSBsYXllciB3aWxsIGJlIHJlbmRlcmVkIG9uIHRvcC4gVGhpcyBpcyB1c2VmdWwgZm9yXG4gKiB0ZW1wb3JhcnkgbGF5ZXJzLiBUaGUgc3RhbmRhcmQgd2F5IHRvIGFkZCBhIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCBpcyB0b1xuICogdXNlIHtAbGluayBpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdCNhZGRMYXllciBtYXAuYWRkTGF5ZXIoKX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VJbnRlcmltVGlsZXNPbkVycm9yPXRydWVdIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBGb3IgbGF5ZXIgc291cmNlcyB0aGF0IHByb3ZpZGUgcHJlLXJlbmRlcmVkLCB0aWxlZCBpbWFnZXMgaW4gZ3JpZHMgdGhhdCBhcmVcbiAqIG9yZ2FuaXplZCBieSB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQGV4dGVuZHMge0xheWVyPFRpbGVTb3VyY2VUeXBlPn1cbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VUaWxlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VUaWxlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPFRpbGVTb3VyY2VUeXBlPn0gW29wdF9vcHRpb25zXSBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZVRpbGVMYXllcihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnByZWxvYWQ7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlVGlsZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIF90aGlzLnNldFByZWxvYWQob3B0aW9ucy5wcmVsb2FkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZWxvYWQgOiAwKTtcbiAgICAgICAgX3RoaXMuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcihvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3IgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3JcbiAgICAgICAgICAgIDogdHJ1ZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuZ2V0UHJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5zZXRQcmVsb2FkID0gZnVuY3Rpb24gKHByZWxvYWQpIHtcbiAgICAgICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQsIHByZWxvYWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUludGVyaW1UaWxlc09uRXJyb3IgVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uICh1c2VJbnRlcmltVGlsZXNPbkVycm9yKSB7XG4gICAgICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUiwgdXNlSW50ZXJpbVRpbGVzT25FcnJvcik7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZVRpbGVMYXllcjtcbn0oTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VUaWxlTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlVGlsZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL0xheWVyXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4uL09ic2VydmFibGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyVHlwZVxuICovXG52YXIgTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gbGF5ZXIgTGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGF5ZXJSZW5kZXJlcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8gPSBfdGhpcy5oYW5kbGVJbWFnZUNoYW5nZV8uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtMYXllclR5cGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllcl8gPSBsYXllcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXBcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlY2x1dHRlckV4ZWN1dG9yR3JvdXAgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBsYXllciBsZXZlbCBoaXQgZGV0ZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoXG4gICAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHZvaWR9IElmIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgICAgICBpZiAoIXRpbGVzW3pvb21dKSB7XG4gICAgICAgICAgICB0aWxlc1t6b29tXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRpbGVzW3pvb21dW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gc291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbiBvZiB0aGUgdGlsZXMuXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IEEgZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggYSB6b29tIGxldmVsIGFuZCBhIHRpbGUgcmFuZ2UgdG8gYWRkIGxvYWRlZCB0aWxlcyB0byB0aGUgbG9va3VwLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVMb2FkZWRUaWxlRmluZGVyID0gZnVuY3Rpb24gKHNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXMpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBsb2FkZWQuXG4gICAgICAgICAqIEB0aGlzIHtMYXllclJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHpvb20sIHRpbGVSYW5nZSkge1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5sb2FkZWRUaWxlQ2FsbGJhY2suYmluZCh0aGlzLCB0aWxlcywgem9vbSk7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlLmZvckVhY2hMb2FkZWRUaWxlKHByb2plY3Rpb24sIHpvb20sIHRpbGVSYW5nZSwgY2FsbGJhY2spO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL01hcC5qc1wiKS5IaXRNYXRjaDxUPj59IG1hdGNoZXMgVGhlIGhpdCBkZXRlY3RlZCBtYXRjaGVzIHdpdGggdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBtYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fSBUaGUgcmVzdWx0LiAgSWYgdGhlcmUgaXMgbm8gZGF0YSBhdCB0aGUgcGl4ZWxcbiAgICAgKiAgICBsb2NhdGlvbiwgbnVsbCB3aWxsIGJlIHJldHVybmVkLiAgSWYgdGhlcmUgaXMgZGF0YSwgYnV0IHBpeGVsIHZhbHVlcyBjYW5ub3QgYmVcbiAgICAgKiAgICByZXR1cm5lZCwgYW5kIGVtcHR5IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RGF0YUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0xheWVyVHlwZX0gTGF5ZXIuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYWN0aW9uIG5lY2Vzc2FyeSB0byBnZXQgdGhlIGxheWVyIHJlbmRlcmVkIGFmdGVyIG5ldyBmb250cyBoYXZlIGxvYWRlZFxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZUZvbnRzQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBJbWFnZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUNoYW5nZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGltYWdlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgaWYgKGltYWdlLmdldFN0YXRlKCkgPT09IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIGlmIG5vdCBhbHJlYWR5IGxvYWRlZCwgYW5kIHJlZ2lzdGVyIHRoZSBpbWFnZSBjaGFuZ2VcbiAgICAgKiBsaXN0ZW5lciBpZiBuZWVkZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH0gaW1hZ2UgSW1hZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbWFnZSBpcyBhbHJlYWR5IGxvYWRlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB2YXIgaW1hZ2VTdGF0ZSA9IGltYWdlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmIChpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuTE9BREVEICYmIGltYWdlU3RhdGUgIT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIGltYWdlLmxvYWQoKTtcbiAgICAgICAgICAgIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgbGF5ZXIuZ2V0U291cmNlU3RhdGUoKSA9PSBTb3VyY2VTdGF0ZS5SRUFEWSkge1xuICAgICAgICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXJSZW5kZXJlcjtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVN0YXRlXG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIElETEU6IDAsXG4gICAgTE9BRElORzogMSxcbiAgICBMT0FERUQ6IDIsXG4gICAgRVJST1I6IDMsXG4gICAgRU1QVFk6IDQsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VTdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50XG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbnZhciBSZW5kZXJFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVuZGVyRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBbb3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybV0gVHJhbnNmb3JtIGZvclxuICAgICAqICAgICBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBbb3B0X2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7P0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gW29wdF9jb250ZXh0XSBDb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlbmRlckV2ZW50KHR5cGUsIG9wdF9pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIG9wdF9mcmFtZVN0YXRlLCBvcHRfY29udGV4dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhbnNmb3JtIGZyb20gQ1NTIHBpeGVscyAocmVsYXRpdmUgdG8gdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgbWFwIHZpZXdwb3J0KVxuICAgICAgICAgKiB0byByZW5kZXJlZCBwaXhlbHMgb24gdGhpcyBldmVudCdzIGBjb250ZXh0YC4gT25seSBhdmFpbGFibGUgd2hlbiBhIENhbnZhcyByZW5kZXJlciBpcyB1c2VkLCBudWxsIG90aGVyd2lzZS5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gPSBvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByZW5kZXIgZnJhbWUgc3RhdGUuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZXx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZyYW1lU3RhdGUgPSBvcHRfZnJhbWVTdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbnZhcyBjb250ZXh0LiBOb3QgYXZhaWxhYmxlIHdoZW4gdGhlIGV2ZW50IGlzIGRpc3BhdGNoZWQgYnkgdGhlIG1hcC4gT25seSBhdmFpbGFibGVcbiAgICAgICAgICogd2hlbiBhIENhbnZhcyByZW5kZXJlciBpcyB1c2VkLCBudWxsIG90aGVyd2lzZS5cbiAgICAgICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRHxudWxsfHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dCA9IG9wdF9jb250ZXh0O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBSZW5kZXJFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlckV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2hhc1xuICovXG52YXIgdWEgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbmF2aWdhdG9yLnVzZXJBZ2VudCAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKVxuICAgIDogJyc7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBGaXJlZm94IGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBGSVJFRk9YID0gdWEuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMTtcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIFNhZmFyaSBhcyBicm93c2VyLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgU0FGQVJJID0gdWEuaW5kZXhPZignc2FmYXJpJykgIT09IC0xICYmIHVhLmluZGV4T2YoJ2Nocm9tJykgPT0gLTE7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIFdlYktpdCBlbmdpbmUuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBXRUJLSVQgPSB1YS5pbmRleE9mKCd3ZWJraXQnKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignZWRnZScpID09IC0xO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBNYWMgYXMgcGxhdGZvcm0uXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBNQUMgPSB1YS5pbmRleE9mKCdtYWNpbnRvc2gnKSAhPT0gLTE7XG4vKipcbiAqIFRoZSByYXRpbyBiZXR3ZWVuIHBoeXNpY2FsIHBpeGVscyBhbmQgZGV2aWNlLWluZGVwZW5kZW50IHBpeGVsc1xuICogKGRpcHMpIG9uIHRoZSBkZXZpY2UgKGB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb2ApLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIERFVklDRV9QSVhFTF9SQVRJTyA9IHR5cGVvZiBkZXZpY2VQaXhlbFJhdGlvICE9PSAndW5kZWZpbmVkJyA/IGRldmljZVBpeGVsUmF0aW8gOiAxO1xuLyoqXG4gKiBUaGUgZXhlY3V0aW9uIGNvbnRleHQgaXMgYSB3b3JrZXIgd2l0aCBPZmZzY3JlZW5DYW52YXMgYXZhaWxhYmxlLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyA9IHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4vKipcbiAqIEltYWdlLnByb3RvdHlwZS5kZWNvZGUoKSBpcyBzdXBwb3J0ZWQuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9ERUNPREUgPSB0eXBlb2YgSW1hZ2UgIT09ICd1bmRlZmluZWQnICYmIEltYWdlLnByb3RvdHlwZS5kZWNvZGU7XG4vKipcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFzc2l2ZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHBhc3NpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBwYXNzaXZlIG5vdCBzdXBwb3J0ZWRcbiAgICB9XG4gICAgcmV0dXJuIHBhc3NpdmU7XG59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90cmFuc2Zvcm1cbiAqL1xuaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBbiBhcnJheSByZXByZXNlbnRpbmcgYW4gYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZvciB1c2Ugd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC90cmFuc2Zvcm19IGZ1bmN0aW9ucy4gVGhlIGFycmF5IGhhcyA2IGVsZW1lbnRzLlxuICogQHR5cGVkZWYgeyFBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBDb2xsZWN0aW9uIG9mIGFmZmluZSAyZCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMuIFRoZSBmdW5jdGlvbnMgd29yayBvbiBhblxuICogYXJyYXkgb2YgNiBlbGVtZW50cy4gVGhlIGVsZW1lbnQgb3JkZXIgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBbU1ZHTWF0cml4XG4gKiBpbnRlcmZhY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TVkdNYXRyaXgpIGFuZCBpc1xuICogYSBzdWJzZXQgKGVsZW1lbnRzIGEgdG8gZikgb2YgYSAzw5czIG1hdHJpeDpcbiAqIGBgYFxuICogWyBhIGMgZSBdXG4gKiBbIGIgZCBmIF1cbiAqIFsgMCAwIDEgXVxuICogYGBgXG4gKi9cbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtUcmFuc2Zvcm19XG4gKi9cbnZhciB0bXBfID0gbmV3IEFycmF5KDYpO1xuLyoqXG4gKiBDcmVhdGUgYW4gaWRlbnRpdHkgdHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gSWRlbnRpdHkgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHJldHVybiBbMSwgMCwgMCwgMSwgMCwgMF07XG59XG4vKipcbiAqIFJlc2V0cyB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHRvIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBzZXQodHJhbnNmb3JtLCAxLCAwLCAwLCAxLCAwLCAwKTtcbn1cbi8qKlxuICogTXVsdGlwbHkgdGhlIHVuZGVybHlpbmcgbWF0cmljZXMgb2YgdHdvIHRyYW5zZm9ybXMgYW5kIHJldHVybiB0aGUgcmVzdWx0IGluXG4gKiB0aGUgZmlyc3QgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIFRyYW5zZm9ybSBwYXJhbWV0ZXJzIG9mIG1hdHJpeCAxLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0yIFRyYW5zZm9ybSBwYXJhbWV0ZXJzIG9mIG1hdHJpeCAyLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBtdWx0aXBsaWVkIHdpdGggdHJhbnNmb3JtMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KHRyYW5zZm9ybTEsIHRyYW5zZm9ybTIpIHtcbiAgICB2YXIgYTEgPSB0cmFuc2Zvcm0xWzBdO1xuICAgIHZhciBiMSA9IHRyYW5zZm9ybTFbMV07XG4gICAgdmFyIGMxID0gdHJhbnNmb3JtMVsyXTtcbiAgICB2YXIgZDEgPSB0cmFuc2Zvcm0xWzNdO1xuICAgIHZhciBlMSA9IHRyYW5zZm9ybTFbNF07XG4gICAgdmFyIGYxID0gdHJhbnNmb3JtMVs1XTtcbiAgICB2YXIgYTIgPSB0cmFuc2Zvcm0yWzBdO1xuICAgIHZhciBiMiA9IHRyYW5zZm9ybTJbMV07XG4gICAgdmFyIGMyID0gdHJhbnNmb3JtMlsyXTtcbiAgICB2YXIgZDIgPSB0cmFuc2Zvcm0yWzNdO1xuICAgIHZhciBlMiA9IHRyYW5zZm9ybTJbNF07XG4gICAgdmFyIGYyID0gdHJhbnNmb3JtMls1XTtcbiAgICB0cmFuc2Zvcm0xWzBdID0gYTEgKiBhMiArIGMxICogYjI7XG4gICAgdHJhbnNmb3JtMVsxXSA9IGIxICogYTIgKyBkMSAqIGIyO1xuICAgIHRyYW5zZm9ybTFbMl0gPSBhMSAqIGMyICsgYzEgKiBkMjtcbiAgICB0cmFuc2Zvcm0xWzNdID0gYjEgKiBjMiArIGQxICogZDI7XG4gICAgdHJhbnNmb3JtMVs0XSA9IGExICogZTIgKyBjMSAqIGYyICsgZTE7XG4gICAgdHJhbnNmb3JtMVs1XSA9IGIxICogZTIgKyBkMSAqIGYyICsgZjE7XG4gICAgcmV0dXJuIHRyYW5zZm9ybTE7XG59XG4vKipcbiAqIFNldCB0aGUgdHJhbnNmb3JtIGNvbXBvbmVudHMgYS1mIG9uIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIGEgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgYiBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjIFRoZSBjIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGQgVGhlIGQgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZSBUaGUgZSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmIFRoZSBmIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gTWF0cml4IHdpdGggdHJhbnNmb3JtIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQodHJhbnNmb3JtLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgdHJhbnNmb3JtWzBdID0gYTtcbiAgICB0cmFuc2Zvcm1bMV0gPSBiO1xuICAgIHRyYW5zZm9ybVsyXSA9IGM7XG4gICAgdHJhbnNmb3JtWzNdID0gZDtcbiAgICB0cmFuc2Zvcm1bNF0gPSBlO1xuICAgIHRyYW5zZm9ybVs1XSA9IGY7XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbi8qKlxuICogU2V0IHRyYW5zZm9ybSBvbiBvbmUgbWF0cml4IGZyb20gYW5vdGhlciBtYXRyaXguXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgTWF0cml4IHRvIHNldCB0cmFuc2Zvcm0gdG8uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgTWF0cml4IHRvIHNldCB0cmFuc2Zvcm0gZnJvbS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgd2l0aCB0cmFuc2Zvcm0gZnJvbSB0cmFuc2Zvcm0yIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRGcm9tQXJyYXkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICAgIHRyYW5zZm9ybTFbMF0gPSB0cmFuc2Zvcm0yWzBdO1xuICAgIHRyYW5zZm9ybTFbMV0gPSB0cmFuc2Zvcm0yWzFdO1xuICAgIHRyYW5zZm9ybTFbMl0gPSB0cmFuc2Zvcm0yWzJdO1xuICAgIHRyYW5zZm9ybTFbM10gPSB0cmFuc2Zvcm0yWzNdO1xuICAgIHRyYW5zZm9ybTFbNF0gPSB0cmFuc2Zvcm0yWzRdO1xuICAgIHRyYW5zZm9ybTFbNV0gPSB0cmFuc2Zvcm0yWzVdO1xuICAgIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBjb29yZGluYXRlIHdpdGggdGhlIGdpdmVuIHRyYW5zZm9ybSByZXR1cm5pbmcgdGhlXG4gKiByZXN1bHRpbmcsIHRyYW5zZm9ybWVkIGNvb3JkaW5hdGUuIFRoZSBjb29yZGluYXRlIHdpbGwgYmUgbW9kaWZpZWQgaW4tcGxhY2UuXG4gKlxuICogQHBhcmFtIHtUcmFuc2Zvcm19IHRyYW5zZm9ybSBUaGUgdHJhbnNmb3JtYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfGltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUgdG8gdHJhbnNmb3JtLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcmV0dXJuIGNvb3JkaW5hdGUgc28gdGhhdCBvcGVyYXRpb25zIGNhbiBiZVxuICogICAgIGNoYWluZWQgdG9nZXRoZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseSh0cmFuc2Zvcm0sIGNvb3JkaW5hdGUpIHtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICAgIGNvb3JkaW5hdGVbMF0gPSB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XTtcbiAgICBjb29yZGluYXRlWzFdID0gdHJhbnNmb3JtWzFdICogeCArIHRyYW5zZm9ybVszXSAqIHkgKyB0cmFuc2Zvcm1bNV07XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEFwcGxpZXMgcm90YXRpb24gdG8gdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZSBpbiByYWRpYW5zLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHJvdGF0ZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKHRyYW5zZm9ybSwgYW5nbGUpIHtcbiAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIGNvcywgc2luLCAtc2luLCBjb3MsIDAsIDApKTtcbn1cbi8qKlxuICogQXBwbGllcyBzY2FsZSB0byBhIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHkgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgc2NhbGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHRyYW5zZm9ybSwgeCwgeSkge1xuICAgIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCB4LCAwLCAwLCB5LCAwLCAwKSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBzY2FsZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRhcmdldCBUcmFuc2Zvcm0gdG8gb3ZlcndyaXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlU2NhbGUodGFyZ2V0LCB4LCB5KSB7XG4gICAgcmV0dXJuIHNldCh0YXJnZXQsIHgsIDAsIDAsIHksIDAsIDApO1xufVxuLyoqXG4gKiBBcHBsaWVzIHRyYW5zbGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZHggVHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeSBUcmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHRyYW5zbGF0ZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHRyYW5zZm9ybSwgZHgsIGR5KSB7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIDEsIDAsIDAsIDEsIGR4LCBkeSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY29tcG9zaXRlIHRyYW5zZm9ybSBnaXZlbiBhbiBpbml0aWFsIHRyYW5zbGF0aW9uLCBzY2FsZSwgcm90YXRpb24sIGFuZFxuICogZmluYWwgdHJhbnNsYXRpb24gKGluIHRoYXQgb3JkZXIgb25seSwgbm90IGNvbW11dGF0aXZlKS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm0gKHdpbGwgYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MSBJbml0aWFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkxIEluaXRpYWwgdHJhbnNsYXRpb24geS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeSBTY2FsZSBmYWN0b3IgeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiAoaW4gY291bnRlci1jbG9ja3dpc2UgcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgyIEZpbmFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkyIEZpbmFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgY29tcG9zaXRlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2UodHJhbnNmb3JtLCBkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpIHtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdHJhbnNmb3JtWzBdID0gc3ggKiBjb3M7XG4gICAgdHJhbnNmb3JtWzFdID0gc3kgKiBzaW47XG4gICAgdHJhbnNmb3JtWzJdID0gLXN4ICogc2luO1xuICAgIHRyYW5zZm9ybVszXSA9IHN5ICogY29zO1xuICAgIHRyYW5zZm9ybVs0XSA9IGR4MiAqIHN4ICogY29zIC0gZHkyICogc3ggKiBzaW4gKyBkeDE7XG4gICAgdHJhbnNmb3JtWzVdID0gZHgyICogc3kgKiBzaW4gKyBkeTIgKiBzeSAqIGNvcyArIGR5MTtcbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY29tcG9zaXRlIHRyYW5zZm9ybSBnaXZlbiBhbiBpbml0aWFsIHRyYW5zbGF0aW9uLCBzY2FsZSwgcm90YXRpb24sIGFuZFxuICogZmluYWwgdHJhbnNsYXRpb24gKGluIHRoYXQgb3JkZXIgb25seSwgbm90IGNvbW11dGF0aXZlKS4gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1cbiAqIHN0cmluZyBjYW4gYmUgYXBwbGllZCBhcyBgdHJhbnNmb3JtYCBwcm9wZXJ0eSBvZiBhbiBIVE1MRWxlbWVudCdzIHN0eWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MSBJbml0aWFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkxIEluaXRpYWwgdHJhbnNsYXRpb24geS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeSBTY2FsZSBmYWN0b3IgeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiAoaW4gY291bnRlci1jbG9ja3dpc2UgcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgyIEZpbmFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkyIEZpbmFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wb3NpdGUgY3NzIHRyYW5zZm9ybS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2VDc3NUcmFuc2Zvcm0oZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nKGNvbXBvc2UoY3JlYXRlKCksIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5MikpO1xufVxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gc291cmNlIFRoZSBzb3VyY2UgdHJhbnNmb3JtIHRvIGludmVydC5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBpbnZlcnRlZCAoc291cmNlKSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQoc291cmNlKSB7XG4gICAgcmV0dXJuIG1ha2VJbnZlcnNlKHNvdXJjZSwgc291cmNlKTtcbn1cbi8qKlxuICogSW52ZXJ0IHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRhcmdldCBUcmFuc2Zvcm0gdG8gYmUgc2V0IGFzIHRoZSBpbnZlcnNlIG9mXG4gKiAgICAgdGhlIHNvdXJjZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHNvdXJjZSBUaGUgc291cmNlIHRyYW5zZm9ybSB0byBpbnZlcnQuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgaW52ZXJ0ZWQgKHRhcmdldCkgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUludmVyc2UodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICB2YXIgZGV0ID0gZGV0ZXJtaW5hbnQoc291cmNlKTtcbiAgICBhc3NlcnQoZGV0ICE9PSAwLCAzMik7IC8vIFRyYW5zZm9ybWF0aW9uIG1hdHJpeCBjYW5ub3QgYmUgaW52ZXJ0ZWRcbiAgICB2YXIgYSA9IHNvdXJjZVswXTtcbiAgICB2YXIgYiA9IHNvdXJjZVsxXTtcbiAgICB2YXIgYyA9IHNvdXJjZVsyXTtcbiAgICB2YXIgZCA9IHNvdXJjZVszXTtcbiAgICB2YXIgZSA9IHNvdXJjZVs0XTtcbiAgICB2YXIgZiA9IHNvdXJjZVs1XTtcbiAgICB0YXJnZXRbMF0gPSBkIC8gZGV0O1xuICAgIHRhcmdldFsxXSA9IC1iIC8gZGV0O1xuICAgIHRhcmdldFsyXSA9IC1jIC8gZGV0O1xuICAgIHRhcmdldFszXSA9IGEgLyBkZXQ7XG4gICAgdGFyZ2V0WzRdID0gKGMgKiBmIC0gZCAqIGUpIC8gZGV0O1xuICAgIHRhcmdldFs1XSA9IC0oYSAqIGYgLSBiICogZSkgLyBkZXQ7XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGV0ZXJtaW5hbnQgb2YgdGhlIGdpdmVuIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gbWF0IE1hdHJpeC5cbiAqIEByZXR1cm4ge251bWJlcn0gRGV0ZXJtaW5hbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudChtYXQpIHtcbiAgICByZXR1cm4gbWF0WzBdICogbWF0WzNdIC0gbWF0WzFdICogbWF0WzJdO1xufVxuLyoqXG4gKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdHJhbnNmb3JtU3RyaW5nRGl2O1xuLyoqXG4gKiBBIHJvdW5kZWQgc3RyaW5nIHZlcnNpb24gb2YgdGhlIHRyYW5zZm9ybS4gIFRoaXMgY2FuIGJlIHVzZWRcbiAqIGZvciBDU1MgdHJhbnNmb3Jtcy5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gbWF0IE1hdHJpeC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRyYW5zZm9ybSBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nKG1hdCkge1xuICAgIHZhciB0cmFuc2Zvcm1TdHJpbmcgPSAnbWF0cml4KCcgKyBtYXQuam9pbignLCAnKSArICcpJztcbiAgICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVN0cmluZztcbiAgICB9XG4gICAgdmFyIG5vZGUgPSB0cmFuc2Zvcm1TdHJpbmdEaXYgfHwgKHRyYW5zZm9ybVN0cmluZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0cmluZztcbiAgICByZXR1cm4gbm9kZS5zdHlsZS50cmFuc2Zvcm07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9Db3JuZXJcbiAqL1xuLyoqXG4gKiBFeHRlbnQgY29ybmVyLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIEJPVFRPTV9MRUZUOiAnYm90dG9tLWxlZnQnLFxuICAgIEJPVFRPTV9SSUdIVDogJ2JvdHRvbS1yaWdodCcsXG4gICAgVE9QX0xFRlQ6ICd0b3AtbGVmdCcsXG4gICAgVE9QX1JJR0hUOiAndG9wLXJpZ2h0Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db3JuZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudFxuICovXG5pbXBvcnQgQ29ybmVyIGZyb20gJy4vZXh0ZW50L0Nvcm5lci5qcyc7XG5pbXBvcnQgUmVsYXRpb25zaGlwIGZyb20gJy4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiBleHRlbnQ6IGBbbWlueCwgbWlueSwgbWF4eCwgbWF4eV1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IEV4dGVudFxuICogQGFwaVxuICovXG4vKipcbiAqIEJ1aWxkIGFuIGV4dGVudCB0aGF0IGluY2x1ZGVzIGFsbCBnaXZlbiBjb29yZGluYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEJvdW5kaW5nIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJvdW5kaW5nRXh0ZW50KGNvb3JkaW5hdGVzKSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHhzIFhzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB5cyBZcy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5mdW5jdGlvbiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIG1pblggPSBNYXRoLm1pbi5hcHBseShudWxsLCB4cyk7XG4gICAgdmFyIG1pblkgPSBNYXRoLm1pbi5hcHBseShudWxsLCB5cyk7XG4gICAgdmFyIG1heFggPSBNYXRoLm1heC5hcHBseShudWxsLCB4cyk7XG4gICAgdmFyIG1heFkgPSBNYXRoLm1heC5hcHBseShudWxsLCB5cyk7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBSZXR1cm4gZXh0ZW50IGluY3JlYXNlZCBieSB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgYW1vdW50IGJ5IHdoaWNoIHRoZSBleHRlbnQgc2hvdWxkIGJlIGJ1ZmZlcmVkLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihleHRlbnQsIHZhbHVlLCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXSAtIHZhbHVlO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdIC0gdmFsdWU7XG4gICAgICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl0gKyB2YWx1ZTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXSArIHZhbHVlO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBleHRlbnRbMF0gLSB2YWx1ZSxcbiAgICAgICAgICAgIGV4dGVudFsxXSAtIHZhbHVlLFxuICAgICAgICAgICAgZXh0ZW50WzJdICsgdmFsdWUsXG4gICAgICAgICAgICBleHRlbnRbM10gKyB2YWx1ZSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiBhbiBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQgdG8gY2xvbmUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gVGhlIGNsb25lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoZXh0ZW50LCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXTtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IGV4dGVudFsyXTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZXh0ZW50LnNsaWNlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7bnVtYmVyfSBDbG9zZXN0IHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkoZXh0ZW50LCB4LCB5KSB7XG4gICAgdmFyIGR4LCBkeTtcbiAgICBpZiAoeCA8IGV4dGVudFswXSkge1xuICAgICAgICBkeCA9IGV4dGVudFswXSAtIHg7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4dGVudFsyXSA8IHgpIHtcbiAgICAgICAgZHggPSB4IC0gZXh0ZW50WzJdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZHggPSAwO1xuICAgIH1cbiAgICBpZiAoeSA8IGV4dGVudFsxXSkge1xuICAgICAgICBkeSA9IGV4dGVudFsxXSAtIHk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4dGVudFszXSA8IHkpIHtcbiAgICAgICAgZHkgPSB5IC0gZXh0ZW50WzNdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZHkgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICAgIHJldHVybiBjb250YWluc1hZKGV4dGVudCwgY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG59XG4vKipcbiAqIENoZWNrIGlmIG9uZSBleHRlbnQgY29udGFpbnMgYW5vdGhlci5cbiAqXG4gKiBBbiBleHRlbnQgaXMgZGVlbWVkIGNvbnRhaW5lZCBpZiBpdCBsaWVzIGNvbXBsZXRlbHkgd2l0aGluIHRoZSBvdGhlciBleHRlbnQsXG4gKiBpbmNsdWRpbmcgaWYgdGhleSBzaGFyZSBvbmUgb3IgbW9yZSBlZGdlcy5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNlY29uZCBleHRlbnQgaXMgY29udGFpbmVkIGJ5IG9yIG9uIHRoZSBlZGdlIG9mIHRoZVxuICogICAgIGZpcnN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNFeHRlbnQoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHJldHVybiAoZXh0ZW50MVswXSA8PSBleHRlbnQyWzBdICYmXG4gICAgICAgIGV4dGVudDJbMl0gPD0gZXh0ZW50MVsyXSAmJlxuICAgICAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbMV0gJiZcbiAgICAgICAgZXh0ZW50MlszXSA8PSBleHRlbnQxWzNdKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWSBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHgsIHkgdmFsdWVzIGFyZSBjb250YWluZWQgaW4gdGhlIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zWFkoZXh0ZW50LCB4LCB5KSB7XG4gICAgcmV0dXJuIGV4dGVudFswXSA8PSB4ICYmIHggPD0gZXh0ZW50WzJdICYmIGV4dGVudFsxXSA8PSB5ICYmIHkgPD0gZXh0ZW50WzNdO1xufVxuLyoqXG4gKiBHZXQgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGEgY29vcmRpbmF0ZSBhbmQgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qc1wiKS5kZWZhdWx0fSBUaGUgcmVsYXRpb25zaGlwIChiaXR3aXNlIGNvbXBhcmUgd2l0aFxuICogICAgIGltcG9ydChcIi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qc1wiKS5SZWxhdGlvbnNoaXApLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICAgIHZhciByZWxhdGlvbnNoaXAgPSBSZWxhdGlvbnNoaXAuVU5LTk9XTjtcbiAgICBpZiAoeCA8IG1pblgpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkxFRlQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHggPiBtYXhYKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5SSUdIVDtcbiAgICB9XG4gICAgaWYgKHkgPCBtaW5ZKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5CRUxPVztcbiAgICB9XG4gICAgZWxzZSBpZiAoeSA+IG1heFkpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkFCT1ZFO1xuICAgIH1cbiAgICBpZiAocmVsYXRpb25zaGlwID09PSBSZWxhdGlvbnNoaXAuVU5LTk9XTikge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HO1xuICAgIH1cbiAgICByZXR1cm4gcmVsYXRpb25zaGlwO1xufVxuLyoqXG4gKiBDcmVhdGUgYW4gZW1wdHkgZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFbXB0eSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbXB0eSgpIHtcbiAgICByZXR1cm4gW0luZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHldO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZXh0ZW50IG9yIHVwZGF0ZSB0aGUgcHJvdmlkZWQgZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gbWluWDtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IG1pblk7XG4gICAgICAgIG9wdF9leHRlbnRbMl0gPSBtYXhYO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gbWF4WTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW21pblgsIG1pblksIG1heFgsIG1heFldO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGVtcHR5IGV4dGVudCBvciBtYWtlIHRoZSBwcm92aWRlZCBvbmUgZW1wdHkuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKEluZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHksIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZShjb29yZGluYXRlLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZVsxXTtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoeCwgeSwgeCwgeSwgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlcyhjb29yZGluYXRlcywgb3B0X2V4dGVudCkge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICAgIHJldHVybiBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIGNvb3JkaW5hdGVzKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCk7XG4gICAgcmV0dXJuIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gcmluZ3MgUmluZ3MuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tUmluZ3MocmluZ3MsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gZXh0ZW5kUmluZ3MoZXh0ZW50LCByaW5ncyk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0d28gZXh0ZW50cyBhcmUgZXF1aXZhbGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGV4dGVudHMgYXJlIGVxdWl2YWxlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHJldHVybiAoZXh0ZW50MVswXSA9PSBleHRlbnQyWzBdICYmXG4gICAgICAgIGV4dGVudDFbMl0gPT0gZXh0ZW50MlsyXSAmJlxuICAgICAgICBleHRlbnQxWzFdID09IGV4dGVudDJbMV0gJiZcbiAgICAgICAgZXh0ZW50MVszXSA9PSBleHRlbnQyWzNdKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHR3byBleHRlbnRzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWl2YWxlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UgaW4gZXh0ZW50IGNvb3JkaW5hdGUgdW5pdHMuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGV4dGVudHMgZGlmZmVyIGJ5IGxlc3MgdGhhbiB0aGUgdG9sZXJhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwcm94aW1hdGVseUVxdWFscyhleHRlbnQxLCBleHRlbnQyLCB0b2xlcmFuY2UpIHtcbiAgICByZXR1cm4gKE1hdGguYWJzKGV4dGVudDFbMF0gLSBleHRlbnQyWzBdKSA8IHRvbGVyYW5jZSAmJlxuICAgICAgICBNYXRoLmFicyhleHRlbnQxWzJdIC0gZXh0ZW50MlsyXSkgPCB0b2xlcmFuY2UgJiZcbiAgICAgICAgTWF0aC5hYnMoZXh0ZW50MVsxXSAtIGV4dGVudDJbMV0pIDwgdG9sZXJhbmNlICYmXG4gICAgICAgIE1hdGguYWJzKGV4dGVudDFbM10gLSBleHRlbnQyWzNdKSA8IHRvbGVyYW5jZSk7XG59XG4vKipcbiAqIE1vZGlmeSBhbiBleHRlbnQgdG8gaW5jbHVkZSBhbm90aGVyIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIFRoZSBleHRlbnQgdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBUaGUgZXh0ZW50IHRoYXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgZmlyc3QuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEEgcmVmZXJlbmNlIHRvIHRoZSBmaXJzdCAoZXh0ZW5kZWQpIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgaWYgKGV4dGVudDJbMF0gPCBleHRlbnQxWzBdKSB7XG4gICAgICAgIGV4dGVudDFbMF0gPSBleHRlbnQyWzBdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MlsyXSA+IGV4dGVudDFbMl0pIHtcbiAgICAgICAgZXh0ZW50MVsyXSA9IGV4dGVudDJbMl07XG4gICAgfVxuICAgIGlmIChleHRlbnQyWzFdIDwgZXh0ZW50MVsxXSkge1xuICAgICAgICBleHRlbnQxWzFdID0gZXh0ZW50MlsxXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDJbM10gPiBleHRlbnQxWzNdKSB7XG4gICAgICAgIGV4dGVudDFbM10gPSBleHRlbnQyWzNdO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50MTtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICAgIGlmIChjb29yZGluYXRlWzBdIDwgZXh0ZW50WzBdKSB7XG4gICAgICAgIGV4dGVudFswXSA9IGNvb3JkaW5hdGVbMF07XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlWzBdID4gZXh0ZW50WzJdKSB7XG4gICAgICAgIGV4dGVudFsyXSA9IGNvb3JkaW5hdGVbMF07XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlWzFdIDwgZXh0ZW50WzFdKSB7XG4gICAgICAgIGV4dGVudFsxXSA9IGNvb3JkaW5hdGVbMV07XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlWzFdID4gZXh0ZW50WzNdKSB7XG4gICAgICAgIGV4dGVudFszXSA9IGNvb3JkaW5hdGVbMV07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIGV4dGVuZFhZKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kUmluZ3MoZXh0ZW50LCByaW5ncykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJpbmdzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCByaW5nc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRYWShleHRlbnQsIHgsIHkpIHtcbiAgICBleHRlbnRbMF0gPSBNYXRoLm1pbihleHRlbnRbMF0sIHgpO1xuICAgIGV4dGVudFsxXSA9IE1hdGgubWluKGV4dGVudFsxXSwgeSk7XG4gICAgZXh0ZW50WzJdID0gTWF0aC5tYXgoZXh0ZW50WzJdLCB4KTtcbiAgICBleHRlbnRbM10gPSBNYXRoLm1heChleHRlbnRbM10sIHkpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbGxzIGBjYWxsYmFja2AgZm9yIGVhY2ggY29ybmVyIG9mIHRoZSBleHRlbnQuIElmIHRoZVxuICogY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGF0IHZhbHVlXG4gKiBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBTfSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEByZXR1cm4ge1N8Ym9vbGVhbn0gVmFsdWUuXG4gKiBAdGVtcGxhdGUgU1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaENvcm5lcihleHRlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHZhbDtcbiAgICB2YWwgPSBjYWxsYmFjayhnZXRCb3R0b21MZWZ0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICB2YWwgPSBjYWxsYmFjayhnZXRUb3BSaWdodChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHZhbCA9IGNhbGxiYWNrKGdldFRvcExlZnQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEdldCB0aGUgc2l6ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFyZWEoZXh0ZW50KSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIGlmICghaXNFbXB0eShleHRlbnQpKSB7XG4gICAgICAgIGFyZWEgPSBnZXRXaWR0aChleHRlbnQpICogZ2V0SGVpZ2h0KGV4dGVudCk7XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLyoqXG4gKiBHZXQgdGhlIGJvdHRvbSBsZWZ0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQm90dG9tIGxlZnQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdHRvbUxlZnQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMF0sIGV4dGVudFsxXV07XG59XG4vKipcbiAqIEdldCB0aGUgYm90dG9tIHJpZ2h0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQm90dG9tIHJpZ2h0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3R0b21SaWdodChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFsyXSwgZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSBjZW50ZXIgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDZW50ZXIuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDZW50ZXIoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFsoZXh0ZW50WzBdICsgZXh0ZW50WzJdKSAvIDIsIChleHRlbnRbMV0gKyBleHRlbnRbM10pIC8gMl07XG59XG4vKipcbiAqIEdldCBhIGNvcm5lciBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC9Db3JuZXIuanNcIikuZGVmYXVsdH0gY29ybmVyIENvcm5lci5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb3JuZXIgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvcm5lcihleHRlbnQsIGNvcm5lcikge1xuICAgIHZhciBjb29yZGluYXRlO1xuICAgIGlmIChjb3JuZXIgPT09IENvcm5lci5CT1RUT01fTEVGVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tTGVmdChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5CT1RUT01fUklHSFQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldEJvdHRvbVJpZ2h0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvcm5lciA9PT0gQ29ybmVyLlRPUF9MRUZUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvcm5lciA9PT0gQ29ybmVyLlRPUF9SSUdIVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0VG9wUmlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFzc2VydChmYWxzZSwgMTMpOyAvLyBJbnZhbGlkIGNvcm5lclxuICAgIH1cbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5sYXJnZWQgYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVubGFyZ2VkQXJlYShleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgdmFyIG1pblggPSBNYXRoLm1pbihleHRlbnQxWzBdLCBleHRlbnQyWzBdKTtcbiAgICB2YXIgbWluWSA9IE1hdGgubWluKGV4dGVudDFbMV0sIGV4dGVudDJbMV0pO1xuICAgIHZhciBtYXhYID0gTWF0aC5tYXgoZXh0ZW50MVsyXSwgZXh0ZW50MlsyXSk7XG4gICAgdmFyIG1heFkgPSBNYXRoLm1heChleHRlbnQxWzNdLCBleHRlbnQyWzNdKTtcbiAgICByZXR1cm4gKG1heFggLSBtaW5YKSAqIChtYXhZIC0gbWluWSk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZHggPSAocmVzb2x1dGlvbiAqIHNpemVbMF0pIC8gMjtcbiAgICB2YXIgZHkgPSAocmVzb2x1dGlvbiAqIHNpemVbMV0pIC8gMjtcbiAgICB2YXIgY29zUm90YXRpb24gPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gICAgdmFyIHNpblJvdGF0aW9uID0gTWF0aC5zaW4ocm90YXRpb24pO1xuICAgIHZhciB4Q29zID0gZHggKiBjb3NSb3RhdGlvbjtcbiAgICB2YXIgeFNpbiA9IGR4ICogc2luUm90YXRpb247XG4gICAgdmFyIHlDb3MgPSBkeSAqIGNvc1JvdGF0aW9uO1xuICAgIHZhciB5U2luID0gZHkgKiBzaW5Sb3RhdGlvbjtcbiAgICB2YXIgeCA9IGNlbnRlclswXTtcbiAgICB2YXIgeSA9IGNlbnRlclsxXTtcbiAgICB2YXIgeDAgPSB4IC0geENvcyArIHlTaW47XG4gICAgdmFyIHgxID0geCAtIHhDb3MgLSB5U2luO1xuICAgIHZhciB4MiA9IHggKyB4Q29zIC0geVNpbjtcbiAgICB2YXIgeDMgPSB4ICsgeENvcyArIHlTaW47XG4gICAgdmFyIHkwID0geSAtIHhTaW4gLSB5Q29zO1xuICAgIHZhciB5MSA9IHkgLSB4U2luICsgeUNvcztcbiAgICB2YXIgeTIgPSB5ICsgeFNpbiArIHlDb3M7XG4gICAgdmFyIHkzID0geSArIHhTaW4gLSB5Q29zO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShNYXRoLm1pbih4MCwgeDEsIHgyLCB4MyksIE1hdGgubWluKHkwLCB5MSwgeTIsIHkzKSwgTWF0aC5tYXgoeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1heCh5MCwgeTEsIHkyLCB5MyksIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGhlaWdodCBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gSGVpZ2h0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVpZ2h0KGV4dGVudCkge1xuICAgIHJldHVybiBleHRlbnRbM10gLSBleHRlbnRbMV07XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEludGVyc2VjdGlvbiBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJzZWN0aW9uQXJlYShleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IGdldEludGVyc2VjdGlvbihleHRlbnQxLCBleHRlbnQyKTtcbiAgICByZXR1cm4gZ2V0QXJlYShpbnRlcnNlY3Rpb24pO1xufVxuLyoqXG4gKiBHZXQgdGhlIGludGVyc2VjdGlvbiBvZiB0d28gZXh0ZW50cy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIE9wdGlvbmFsIGV4dGVudCB0byBwb3B1bGF0ZSB3aXRoIGludGVyc2VjdGlvbi5cbiAqIEByZXR1cm4ge0V4dGVudH0gSW50ZXJzZWN0aW5nIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbihleHRlbnQxLCBleHRlbnQyLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IG9wdF9leHRlbnQgPyBvcHRfZXh0ZW50IDogY3JlYXRlRW1wdHkoKTtcbiAgICBpZiAoaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSkge1xuICAgICAgICBpZiAoZXh0ZW50MVswXSA+IGV4dGVudDJbMF0pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblswXSA9IGV4dGVudDFbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMF0gPSBleHRlbnQyWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnQxWzFdID4gZXh0ZW50MlsxXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzFdID0gZXh0ZW50MVsxXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsxXSA9IGV4dGVudDJbMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dGVudDFbMl0gPCBleHRlbnQyWzJdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMl0gPSBleHRlbnQxWzJdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzJdID0gZXh0ZW50MlsyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50MVszXSA8IGV4dGVudDJbM10pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblszXSA9IGV4dGVudDFbM107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bM10gPSBleHRlbnQyWzNdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGludGVyc2VjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBNYXJnaW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJnaW4oZXh0ZW50KSB7XG4gICAgcmV0dXJuIGdldFdpZHRoKGV4dGVudCkgKyBnZXRIZWlnaHQoZXh0ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBzaXplICh3aWR0aCwgaGVpZ2h0KSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVGhlIGV4dGVudCBzaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6ZShleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFsyXSAtIGV4dGVudFswXSwgZXh0ZW50WzNdIC0gZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSB0b3AgbGVmdCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRvcCBsZWZ0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BMZWZ0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbM11dO1xufVxuLyoqXG4gKiBHZXQgdGhlIHRvcCByaWdodCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRvcCByaWdodCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wUmlnaHQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMl0sIGV4dGVudFszXV07XG59XG4vKipcbiAqIEdldCB0aGUgd2lkdGggb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkdGgoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFsyXSAtIGV4dGVudFswXTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIG9uZSBleHRlbnQgaW50ZXJzZWN0cyBhbm90aGVyLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGV4dGVudHMgaW50ZXJzZWN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdIDw9IGV4dGVudDJbMl0gJiZcbiAgICAgICAgZXh0ZW50MVsyXSA+PSBleHRlbnQyWzBdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlszXSAmJlxuICAgICAgICBleHRlbnQxWzNdID49IGV4dGVudDJbMV0pO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gZXh0ZW50IGlzIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFsyXSA8IGV4dGVudFswXSB8fCBleHRlbnRbM10gPCBleHRlbnRbMV07XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldHVybk9yVXBkYXRlKGV4dGVudCwgb3B0X2V4dGVudCkge1xuICAgIGlmIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF07XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBleHRlbnRbMV07XG4gICAgICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl07XG4gICAgICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM107XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVGcm9tQ2VudGVyKGV4dGVudCwgdmFsdWUpIHtcbiAgICB2YXIgZGVsdGFYID0gKChleHRlbnRbMl0gLSBleHRlbnRbMF0pIC8gMikgKiAodmFsdWUgLSAxKTtcbiAgICB2YXIgZGVsdGFZID0gKChleHRlbnRbM10gLSBleHRlbnRbMV0pIC8gMikgKiAodmFsdWUgLSAxKTtcbiAgICBleHRlbnRbMF0gLT0gZGVsdGFYO1xuICAgIGV4dGVudFsyXSArPSBkZWx0YVg7XG4gICAgZXh0ZW50WzFdIC09IGRlbHRhWTtcbiAgICBleHRlbnRbM10gKz0gZGVsdGFZO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIHNlZ21lbnQgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXMgaW50ZXJzZWN0cyAoY3Jvc3NlcyxcbiAqIHRvdWNoZXMsIG9yIGlzIGNvbnRhaW5lZCBieSkgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHN0YXJ0IFNlZ21lbnQgc3RhcnQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGVuZCBTZWdtZW50IGVuZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNlZ21lbnQgaW50ZXJzZWN0cyB0aGUgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBzdGFydCwgZW5kKSB7XG4gICAgdmFyIGludGVyc2VjdHMgPSBmYWxzZTtcbiAgICB2YXIgc3RhcnRSZWwgPSBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgc3RhcnQpO1xuICAgIHZhciBlbmRSZWwgPSBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgZW5kKTtcbiAgICBpZiAoc3RhcnRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcgfHxcbiAgICAgICAgZW5kUmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HKSB7XG4gICAgICAgIGludGVyc2VjdHMgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIG1pblggPSBleHRlbnRbMF07XG4gICAgICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICAgICAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICAgICAgdmFyIG1heFkgPSBleHRlbnRbM107XG4gICAgICAgIHZhciBzdGFydFggPSBzdGFydFswXTtcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHN0YXJ0WzFdO1xuICAgICAgICB2YXIgZW5kWCA9IGVuZFswXTtcbiAgICAgICAgdmFyIGVuZFkgPSBlbmRbMV07XG4gICAgICAgIHZhciBzbG9wZSA9IChlbmRZIC0gc3RhcnRZKSAvIChlbmRYIC0gc3RhcnRYKTtcbiAgICAgICAgdmFyIHggPSB2b2lkIDAsIHkgPSB2b2lkIDA7XG4gICAgICAgIGlmICghIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuQUJPVkUpICYmICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuQUJPVkUpKSB7XG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBpbnRlcnNlY3RzIHRvcFxuICAgICAgICAgICAgeCA9IGVuZFggLSAoZW5kWSAtIG1heFkpIC8gc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geCA+PSBtaW5YICYmIHggPD0gbWF4WDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdHMgJiZcbiAgICAgICAgICAgICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkgJiZcbiAgICAgICAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuUklHSFQpKSB7XG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBpbnRlcnNlY3RzIHJpZ2h0XG4gICAgICAgICAgICB5ID0gZW5kWSAtIChlbmRYIC0gbWF4WCkgKiBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB5ID49IG1pblkgJiYgeSA8PSBtYXhZO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyAmJlxuICAgICAgICAgICAgISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLkJFTE9XKSAmJlxuICAgICAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgYm90dG9tXG4gICAgICAgICAgICB4ID0gZW5kWCAtIChlbmRZIC0gbWluWSkgLyBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB4ID49IG1pblggJiYgeCA8PSBtYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyAmJlxuICAgICAgICAgICAgISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLkxFRlQpICYmXG4gICAgICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkxFRlQpKSB7XG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBpbnRlcnNlY3RzIGxlZnRcbiAgICAgICAgICAgIHkgPSBlbmRZIC0gKGVuZFggLSBtaW5YKSAqIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGludGVyc2VjdHM7XG59XG4vKipcbiAqIEFwcGx5IGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIHRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKiBDYWxsZWQgd2l0aCBgW21pblgsIG1pblksIG1heFgsIG1heFldYCBleHRlbnQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N0b3BzXSBOdW1iZXIgb2Ygc3RvcHMgcGVyIHNpZGUgdXNlZCBmb3IgdGhlIHRyYW5zZm9ybS5cbiAqIEJ5IGRlZmF1bHQgb25seSB0aGUgY29ybmVycyBhcmUgdXNlZC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1Gbiwgb3B0X2V4dGVudCwgb3B0X3N0b3BzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gW107XG4gICAgaWYgKG9wdF9zdG9wcyA+IDEpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gZXh0ZW50WzJdIC0gZXh0ZW50WzBdO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdF9zdG9wczsgKytpKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGV4dGVudFswXSArICh3aWR0aCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbMV0sIGV4dGVudFsyXSwgZXh0ZW50WzFdICsgKGhlaWdodCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbMl0gLSAod2lkdGggKiBpKSAvIG9wdF9zdG9wcywgZXh0ZW50WzNdLCBleHRlbnRbMF0sIGV4dGVudFszXSAtIChoZWlnaHQgKiBpKSAvIG9wdF9zdG9wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gW1xuICAgICAgICAgICAgZXh0ZW50WzBdLFxuICAgICAgICAgICAgZXh0ZW50WzFdLFxuICAgICAgICAgICAgZXh0ZW50WzJdLFxuICAgICAgICAgICAgZXh0ZW50WzFdLFxuICAgICAgICAgICAgZXh0ZW50WzJdLFxuICAgICAgICAgICAgZXh0ZW50WzNdLFxuICAgICAgICAgICAgZXh0ZW50WzBdLFxuICAgICAgICAgICAgZXh0ZW50WzNdLFxuICAgICAgICBdO1xuICAgIH1cbiAgICB0cmFuc2Zvcm1Gbihjb29yZGluYXRlcywgY29vcmRpbmF0ZXMsIDIpO1xuICAgIHZhciB4cyA9IFtdO1xuICAgIHZhciB5cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgICAgIHhzLnB1c2goY29vcmRpbmF0ZXNbaV0pO1xuICAgICAgICB5cy5wdXNoKGNvb3JkaW5hdGVzW2kgKyAxXSk7XG4gICAgfVxuICAgIHJldHVybiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGV4dGVudCBpbi1wbGFjZSB0byBiZSB3aXRoaW4gdGhlIHJlYWwgd29ybGRcbiAqIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBleHRlbnQgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGV4dGVudCwgcHJvamVjdGlvbikge1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgY2VudGVyID0gZ2V0Q2VudGVyKGV4dGVudCk7XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgICAgICAoY2VudGVyWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjZW50ZXJbMF0gPj0gcHJvamVjdGlvbkV4dGVudFsyXSkpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmZsb29yKChjZW50ZXJbMF0gLSBwcm9qZWN0aW9uRXh0ZW50WzBdKSAvIHdvcmxkV2lkdGgpO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gd29ybGRzQXdheSAqIHdvcmxkV2lkdGg7XG4gICAgICAgIGV4dGVudFswXSAtPSBvZmZzZXQ7XG4gICAgICAgIGV4dGVudFsyXSAtPSBvZmZzZXQ7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9SZWxhdGlvbnNoaXBcbiAqL1xuLyoqXG4gKiBSZWxhdGlvbnNoaXAgdG8gYW4gZXh0ZW50LlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFVOS05PV046IDAsXG4gICAgSU5URVJTRUNUSU5HOiAxLFxuICAgIEFCT1ZFOiAyLFxuICAgIFJJR0hUOiA0LFxuICAgIEJFTE9XOiA4LFxuICAgIExFRlQ6IDE2LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlbGF0aW9uc2hpcC5qcy5tYXAiLCJpbXBvcnQgeyBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyB9IGZyb20gJy4vaGFzLmpzJztcbi8qKlxuICogQG1vZHVsZSBvbC9kb21cbiAqL1xuLy9GSVhNRSBNb3ZlIHRoaXMgZnVuY3Rpb24gdG8gdGhlIGNhbnZhcyBtb2R1bGVcbi8qKlxuICogQ3JlYXRlIGFuIGh0bWwgY2FudmFzIGVsZW1lbnQgYW5kIHJldHVybnMgaXRzIDJkIGNvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF93aWR0aF0gQ2FudmFzIHdpZHRoLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfaGVpZ2h0XSBDYW52YXMgaGVpZ2h0LlxuICogQHBhcmFtIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD59IFtvcHRfY2FudmFzUG9vbF0gQ2FudmFzIHBvb2wgdG8gdGFrZSBleGlzdGluZyBjYW52YXMgZnJvbS5cbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEU2V0dGluZ3N9IFtvcHRfQ29udGV4dDJEU2V0dGluZ3NdIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRFNldHRpbmdzXG4gKiBAcmV0dXJuIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IFRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzQ29udGV4dDJEKG9wdF93aWR0aCwgb3B0X2hlaWdodCwgb3B0X2NhbnZhc1Bvb2wsIG9wdF9Db250ZXh0MkRTZXR0aW5ncykge1xuICAgIHZhciBjYW52YXMgPSBvcHRfY2FudmFzUG9vbCAmJiBvcHRfY2FudmFzUG9vbC5sZW5ndGhcbiAgICAgICAgPyBvcHRfY2FudmFzUG9vbC5zaGlmdCgpXG4gICAgICAgIDogV09SS0VSX09GRlNDUkVFTl9DQU5WQVNcbiAgICAgICAgICAgID8gbmV3IE9mZnNjcmVlbkNhbnZhcyhvcHRfd2lkdGggfHwgMzAwLCBvcHRfaGVpZ2h0IHx8IDMwMClcbiAgICAgICAgICAgIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgaWYgKG9wdF93aWR0aCkge1xuICAgICAgICBjYW52YXMud2lkdGggPSBvcHRfd2lkdGg7XG4gICAgfVxuICAgIGlmIChvcHRfaGVpZ2h0KSB7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBvcHRfaGVpZ2h0O1xuICAgIH1cbiAgICAvL0ZJWE1FIEFsbG93IE9mZnNjcmVlbkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCBhcyByZXR1cm4gdHlwZVxuICAgIHJldHVybiAvKiogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gKi8gKGNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIG9wdF9Db250ZXh0MkRTZXR0aW5ncykpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgd2lkdGggZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlcldpZHRoKHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB3aWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVyV2lkdGgoZWxlbWVudCkge1xuICAgIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICB3aWR0aCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5SaWdodCwgMTApO1xuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIGhlaWdodCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgaW5jbHVkaW5nIG1hcmdpbixcbiAqIHBhZGRpbmcgYW5kIGJvcmRlci5cbiAqIEVxdWl2YWxlbnQgdG8galF1ZXJ5J3MgYCQoZWwpLm91dGVySGVpZ2h0KHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBoZWlnaHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlckhlaWdodChlbGVtZW50KSB7XG4gICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgaGVpZ2h0ICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpblRvcCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luQm90dG9tLCAxMCk7XG4gICAgcmV0dXJuIGhlaWdodDtcbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gcmVwbGFjZSBvbGQgbm9kZVxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIFRoZSBub2RlIHRvIGJlIHJlcGxhY2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlTm9kZShuZXdOb2RlLCBvbGROb2RlKSB7XG4gICAgdmFyIHBhcmVudCA9IG9sZE5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybiB7Tm9kZX0gVGhlIG5vZGUgdGhhdCB3YXMgcmVtb3ZlZCBvciBudWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlID8gbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpIDogbnVsbDtcbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZSB0aGUgY2hpbGRyZW4gZnJvbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpIHtcbiAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGlsZCk7XG4gICAgfVxufVxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGNoaWxkcmVuIG9mIGEgcGFyZW50IG5vZGUgc28gdGhleSBtYXRjaCB0aGVcbiAqIHByb3ZpZGVkIGxpc3Qgb2YgY2hpbGRyZW4uICBUaGlzIGZ1bmN0aW9uIGFpbXMgdG8gZWZmaWNpZW50bHlcbiAqIHJlbW92ZSwgYWRkLCBhbmQgcmVvcmRlciBjaGlsZCBub2RlcyB3aGlsZSBtYWludGFpbmluZyBhIHNpbXBsZVxuICogaW1wbGVtZW50YXRpb24gKGl0IGlzIG5vdCBndWFyYW50ZWVkIHRvIG1pbmltaXplIERPTSBvcGVyYXRpb25zKS5cbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgcGFyZW50IG5vZGUgd2hvc2UgY2hpbGRyZW4gbmVlZCByZXdvcmtpbmcuXG4gKiBAcGFyYW0ge0FycmF5PE5vZGU+fSBjaGlsZHJlbiBUaGUgZGVzaXJlZCBjaGlsZHJlbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VDaGlsZHJlbihub2RlLCBjaGlsZHJlbikge1xuICAgIHZhciBvbGRDaGlsZHJlbiA9IG5vZGUuY2hpbGROb2RlcztcbiAgICBmb3IgKHZhciBpID0gMDsgdHJ1ZTsgKytpKSB7XG4gICAgICAgIHZhciBvbGRDaGlsZCA9IG9sZENoaWxkcmVuW2ldO1xuICAgICAgICB2YXIgbmV3Q2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgLy8gY2hlY2sgaWYgb3VyIHdvcmsgaXMgZG9uZVxuICAgICAgICBpZiAoIW9sZENoaWxkICYmICFuZXdDaGlsZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgY2hpbGRyZW4gbWF0Y2hcbiAgICAgICAgaWYgKG9sZENoaWxkID09PSBuZXdDaGlsZCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgYSBuZXcgY2hpbGQgbmVlZHMgdG8gYmUgYWRkZWRcbiAgICAgICAgaWYgKCFvbGRDaGlsZCkge1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChuZXdDaGlsZCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiBhbiBvbGQgY2hpbGQgbmVlZHMgdG8gYmUgcmVtb3ZlZFxuICAgICAgICBpZiAoIW5ld0NoaWxkKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG9sZENoaWxkKTtcbiAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlb3JkZXJcbiAgICAgICAgbm9kZS5pbnNlcnRCZWZvcmUobmV3Q2hpbGQsIG9sZENoaWxkKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvTGF5ZXJcbiAqL1xuaW1wb3J0IExheWVyUmVuZGVyZXIgZnJvbSAnLi4vTGF5ZXIuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50IGZyb20gJy4uLy4uL3JlbmRlci9FdmVudC5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uLy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgY3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgY29udGFpbnNDb29yZGluYXRlLCBnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCwgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHQsIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4uLy4uL2RvbS5qcyc7XG4vKipcbiAqIEBhYnN0cmFjdFxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllclR5cGVcbiAqIEBleHRlbmRzIHtMYXllclJlbmRlcmVyPExheWVyVHlwZT59XG4gKi9cbnZhciBDYW52YXNMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNMYXllclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TGF5ZXJUeXBlfSBsYXllciBMYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNMYXllclJlbmRlcmVyKGxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGxheWVyKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRSZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSB0ZW1wb3JhcnkgdHJhbnNmb3JtLiAgVGhlIHZhbHVlcyBpbiB0aGlzIHRyYW5zZm9ybSBzaG91bGQgb25seSBiZSB1c2VkIGluIGFcbiAgICAgICAgICogZnVuY3Rpb24gdGhhdCBzZXRzIHRoZSB2YWx1ZXMuXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZW1wVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHJhbnNmb3JtIGZvciByZW5kZXJlZCBwaXhlbHMgdG8gdmlld3BvcnQgQ1NTIHBpeGVscy4gIFRoaXMgdHJhbnNmb3JtIG11c3RcbiAgICAgICAgICogYmUgc2V0IHdoZW4gcmVuZGVyaW5nIGEgZnJhbWUgYW5kIG1heSBiZSB1c2VkIGJ5IG90aGVyIGZ1bmN0aW9ucyBhZnRlciByZW5kZXJpbmcuXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRyYW5zZm9ybSBmb3Igdmlld3BvcnQgQ1NTIHBpeGVscyB0byByZW5kZXJlZCBwaXhlbHMuICBUaGlzIHRyYW5zZm9ybSBtdXN0XG4gICAgICAgICAqIGJlIHNldCB3aGVuIHJlbmRlcmluZyBhIGZyYW1lIGFuZCBtYXkgYmUgdXNlZCBieSBvdGhlciBmdW5jdGlvbnMgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRhaW5lclJldXNlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIHJlbmRlcmluZyBjb250YWluZXIgZnJvbSBhbiBleGlzdGluZyB0YXJnZXQsIGlmIGNvbXBhdGlibGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFBvdGVudGlhbCByZW5kZXIgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2Zvcm0gQ1NTIFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLnVzZUNvbnRhaW5lciA9IGZ1bmN0aW9uICh0YXJnZXQsIHRyYW5zZm9ybSwgb3BhY2l0eSkge1xuICAgICAgICB2YXIgbGF5ZXJDbGFzc05hbWUgPSB0aGlzLmdldExheWVyKCkuZ2V0Q2xhc3NOYW1lKCk7XG4gICAgICAgIHZhciBjb250YWluZXIsIGNvbnRleHQ7XG4gICAgICAgIGlmICh0YXJnZXQgJiZcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5vcGFjaXR5ID09PSAnJyAmJlxuICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTmFtZSA9PT0gbGF5ZXJDbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSB0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQgJiZcbiAgICAgICAgICAgIChjb250ZXh0LmNhbnZhcy53aWR0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9PT0gdHJhbnNmb3JtKSkge1xuICAgICAgICAgICAgLy8gQ29udGFpbmVyIG9mIHRoZSBwcmV2aW91cyBsYXllciByZW5kZXJlciBjYW4gYmUgdXNlZC5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gdGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmV1c2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbnRhaW5lclJldXNlZCkge1xuICAgICAgICAgICAgLy8gUHJldmlvdXNseSByZXVzZWQgY29udGFpbmVyIGNhbm5vdCBiZSB1c2VkIGFueSBtb3JlLlxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmV1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gbGF5ZXJDbGFzc05hbWU7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBjb250YWluZXIuc3R5bGU7XG4gICAgICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgICAgIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoKTtcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgICAgICAgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG4gICAgICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICAgICAgc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gJ3RvcCBsZWZ0JztcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IENsaXAgZXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jbGlwVW5yb3RhdGVkID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUsIGV4dGVudCkge1xuICAgICAgICB2YXIgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICAgICAgdmFyIHRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIHRvcExlZnQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbVJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tTGVmdCk7XG4gICAgICAgIHZhciBpbnZlcnRlZCA9IHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgdG9wTGVmdCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCB0b3BSaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21SaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21MZWZ0KTtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKE1hdGgucm91bmQodG9wTGVmdFswXSksIE1hdGgucm91bmQodG9wTGVmdFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKHRvcFJpZ2h0WzBdKSwgTWF0aC5yb3VuZCh0b3BSaWdodFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzBdKSwgTWF0aC5yb3VuZChib3R0b21SaWdodFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbUxlZnRbMF0pLCBNYXRoLnJvdW5kKGJvdHRvbUxlZnRbMV0pKTtcbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnRfID0gZnVuY3Rpb24gKHR5cGUsIGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICBpZiAobGF5ZXIuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBldmVudF8xID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGxheWVyLmRpc3BhdGNoRXZlbnQoZXZlbnRfMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUFJFUkVOREVSLCBjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucG9zdFJlbmRlciA9IGZ1bmN0aW9uIChjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlBPU1RSRU5ERVIsIGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nIHRvIGFuIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHJvdGF0ZWQgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCBPZmZzZXQgb24gdGhlIHgtYXhpcyBpbiB2aWV3IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFJlbmRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIChjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBwaXhlbFJhdGlvLCB3aWR0aCwgaGVpZ2h0LCBvZmZzZXRYKSB7XG4gICAgICAgIHZhciBkeDEgPSB3aWR0aCAvIDI7XG4gICAgICAgIHZhciBkeTEgPSBoZWlnaHQgLyAyO1xuICAgICAgICB2YXIgc3ggPSBwaXhlbFJhdGlvIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHN5ID0gLXN4O1xuICAgICAgICB2YXIgZHgyID0gLWNlbnRlclswXSArIG9mZnNldFg7XG4gICAgICAgIHZhciBkeTIgPSAtY2VudGVyWzFdO1xuICAgICAgICByZXR1cm4gY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIC1yb3RhdGlvbiwgZHgyLCBkeTIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheX0gVGhlIHJlc3VsdC4gIElmIHRoZXJlIGlzIG5vIGRhdGEgYXQgdGhlIHBpeGVsXG4gICAgICogICAgbG9jYXRpb24sIG51bGwgd2lsbCBiZSByZXR1cm5lZC4gIElmIHRoZXJlIGlzIGRhdGEsIGJ1dCBwaXhlbCB2YWx1ZXMgY2Fubm90IGJlXG4gICAgICogICAgcmV0dXJuZWQsIGFuZCBlbXB0eSBhcnJheSB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldERhdGFBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHJlbmRlclBpeGVsID0gYXBwbHlUcmFuc2Zvcm0odGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIHBpeGVsLnNsaWNlKCkpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgbGF5ZXJFeHRlbnQgPSBsYXllci5nZXRFeHRlbnQoKTtcbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyQ29vcmRpbmF0ZSA9IGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0sIHBpeGVsLnNsaWNlKCkpO1xuICAgICAgICAgICAgLyoqIGdldCBvbmx5IGRhdGEgaW5zaWRlIG9mIHRoZSBsYXllciBleHRlbnQgKi9cbiAgICAgICAgICAgIGlmICghY29udGFpbnNDb29yZGluYXRlKGxheWVyRXh0ZW50LCByZW5kZXJDb29yZGluYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHggPSBNYXRoLnJvdW5kKHJlbmRlclBpeGVsWzBdKTtcbiAgICAgICAgICAgIHZhciB5ID0gTWF0aC5yb3VuZChyZW5kZXJQaXhlbFsxXSk7XG4gICAgICAgICAgICB2YXIgbmV3Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICB2YXIgbmV3Q29udGV4dCA9IG5ld0NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgbmV3Q2FudmFzLndpZHRoID0gMTtcbiAgICAgICAgICAgIG5ld0NhbnZhcy5oZWlnaHQgPSAxO1xuICAgICAgICAgICAgbmV3Q29udGV4dC5jbGVhclJlY3QoMCwgMCwgMSwgMSk7XG4gICAgICAgICAgICBuZXdDb250ZXh0LmRyYXdJbWFnZShjb250ZXh0LmNhbnZhcywgeCwgeSwgMSwgMSwgMCwgMCwgMSwgMSk7XG4gICAgICAgICAgICBkYXRhID0gbmV3Q29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgMSwgMSkuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyLm5hbWUgPT09ICdTZWN1cml0eUVycm9yJykge1xuICAgICAgICAgICAgICAgIC8vIHRhaW50ZWQgY2FudmFzLCB3ZSBhc3N1bWUgdGhlcmUgaXMgZGF0YSBhdCB0aGUgZ2l2ZW4gcGl4ZWwgKGFsdGhvdWdoIHRoZXJlIG1pZ2h0IG5vdCBiZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhWzNdID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuICAgIHJldHVybiBDYW52YXNMYXllclJlbmRlcmVyO1xufShMYXllclJlbmRlcmVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNMYXllclJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVSYW5nZVxuICovXG4vKipcbiAqIEEgcmVwcmVzZW50YXRpb24gb2YgYSBjb250aWd1b3VzIGJsb2NrIG9mIHRpbGVzLiAgQSB0aWxlIHJhbmdlIGlzIHNwZWNpZmllZFxuICogYnkgaXRzIG1pbi9tYXggdGlsZSBjb29yZGluYXRlcyBhbmQgaXMgaW5jbHVzaXZlIG9mIGNvb3JkaW5hdGVzLlxuICovXG52YXIgVGlsZVJhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhYID0gbWF4WDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblkgPSBtaW5ZO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluc1hZKHRpbGVDb29yZFsxXSwgdGlsZUNvb3JkWzJdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zVGlsZVJhbmdlID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluWCA8PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgICAgICAgdGlsZVJhbmdlLm1heFggPD0gdGhpcy5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1pblkgJiZcbiAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhZIDw9IHRoaXMubWF4WSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBjb29yZGluYXRlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnNYWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblggPD0geCAmJiB4IDw9IHRoaXMubWF4WCAmJiB0aGlzLm1pblkgPD0geSAmJiB5IDw9IHRoaXMubWF4WTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBFcXVhbHMuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YID09IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICAgICAgICB0aGlzLm1pblkgPT0gdGlsZVJhbmdlLm1pblkgJiZcbiAgICAgICAgICAgIHRoaXMubWF4WCA9PSB0aWxlUmFuZ2UubWF4WCAmJlxuICAgICAgICAgICAgdGhpcy5tYXhZID09IHRpbGVSYW5nZS5tYXhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgaWYgKHRpbGVSYW5nZS5taW5YIDwgdGhpcy5taW5YKSB7XG4gICAgICAgICAgICB0aGlzLm1pblggPSB0aWxlUmFuZ2UubWluWDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZVJhbmdlLm1heFggPiB0aGlzLm1heFgpIHtcbiAgICAgICAgICAgIHRoaXMubWF4WCA9IHRpbGVSYW5nZS5tYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWluWSA8IHRoaXMubWluWSkge1xuICAgICAgICAgICAgdGhpcy5taW5ZID0gdGlsZVJhbmdlLm1pblk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVSYW5nZS5tYXhZID4gdGhpcy5tYXhZKSB7XG4gICAgICAgICAgICB0aGlzLm1heFkgPSB0aWxlUmFuZ2UubWF4WTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFkgLSB0aGlzLm1pblkgKyAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFNpemUuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW3RoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRIZWlnaHQoKV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFggLSB0aGlzLm1pblggKyAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEludGVyc2VjdHMuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5pbnRlcnNlY3RzID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluWCA8PSB0aWxlUmFuZ2UubWF4WCAmJlxuICAgICAgICAgICAgdGhpcy5tYXhYID49IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICAgICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1heFkgJiZcbiAgICAgICAgICAgIHRoaXMubWF4WSA+PSB0aWxlUmFuZ2UubWluWSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZVJhbmdlO1xufSgpKTtcbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICogQHBhcmFtIHtUaWxlUmFuZ2V9IFt0aWxlUmFuZ2VdIFRpbGVSYW5nZS5cbiAqIEByZXR1cm4ge1RpbGVSYW5nZX0gVGlsZSByYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1heFgsIG1pblksIG1heFksIHRpbGVSYW5nZSkge1xuICAgIGlmICh0aWxlUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aWxlUmFuZ2UubWluWCA9IG1pblg7XG4gICAgICAgIHRpbGVSYW5nZS5tYXhYID0gbWF4WDtcbiAgICAgICAgdGlsZVJhbmdlLm1pblkgPSBtaW5ZO1xuICAgICAgICB0aWxlUmFuZ2UubWF4WSA9IG1heFk7XG4gICAgICAgIHJldHVybiB0aWxlUmFuZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBUaWxlUmFuZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUmFuZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovVW5pdHNcbiAqL1xuLyoqXG4gKiBQcm9qZWN0aW9uIHVuaXRzOiBgJ2RlZ3JlZXMnYCwgYCdmdCdgLCBgJ20nYCwgYCdwaXhlbHMnYCwgYCd0aWxlLXBpeGVscydgIG9yXG4gKiBgJ3VzLWZ0J2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgVW5pdHMgPSB7XG4gICAgLyoqXG4gICAgICogRGVncmVlc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBERUdSRUVTOiAnZGVncmVlcycsXG4gICAgLyoqXG4gICAgICogRmVldFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGRUVUOiAnZnQnLFxuICAgIC8qKlxuICAgICAqIE1ldGVyc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNRVRFUlM6ICdtJyxcbiAgICAvKipcbiAgICAgKiBQaXhlbHNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUElYRUxTOiAncGl4ZWxzJyxcbiAgICAvKipcbiAgICAgKiBUaWxlIFBpeGVsc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFX1BJWEVMUzogJ3RpbGUtcGl4ZWxzJyxcbiAgICAvKipcbiAgICAgKiBVUyBGZWV0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVTRkVFVDogJ3VzLWZ0Jyxcbn07XG4vKipcbiAqIE1ldGVycyBwZXIgdW5pdCBsb29rdXAgdGFibGUuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtPYmplY3Q8VW5pdHMsIG51bWJlcj59XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgTUVURVJTX1BFUl9VTklUID0ge307XG4vLyB1c2UgdGhlIHJhZGl1cyBvZiB0aGUgTm9ybWFsIHNwaGVyZVxuTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdID0gKDIgKiBNYXRoLlBJICogNjM3MDk5NykgLyAzNjA7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuRkVFVF0gPSAwLjMwNDg7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuTUVURVJTXSA9IDE7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuVVNGRUVUXSA9IDEyMDAgLyAzOTM3O1xuZXhwb3J0IGRlZmF1bHQgVW5pdHM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Vbml0cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9Qcm9qZWN0aW9uXG4gKi9cbmltcG9ydCB7IE1FVEVSU19QRVJfVU5JVCB9IGZyb20gJy4vVW5pdHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29kZSBUaGUgU1JTIGlkZW50aWZpZXIgY29kZSwgZS5nLiBgRVBTRzo0MzI2YC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3VuaXRzXSBVbml0cy4gUmVxdWlyZWQgdW5sZXNzIGFcbiAqIHByb2o0IHByb2plY3Rpb24gaXMgZGVmaW5lZCBmb3IgYGNvZGVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb249J2VudSddIFRoZSBheGlzIG9yaWVudGF0aW9uIGFzIHNwZWNpZmllZCBpbiBQcm9qNC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dsb2JhbD1mYWxzZV0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyB2YWxpZCBmb3IgdGhlIHdob2xlIGdsb2JlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttZXRlcnNQZXJVbml0XSBUaGUgbWV0ZXJzIHBlciB1bml0IGZvciB0aGUgU1JTLlxuICogSWYgbm90IHByb3ZpZGVkLCB0aGUgYHVuaXRzYCBhcmUgdXNlZCB0byBnZXQgdGhlIG1ldGVycyBwZXIgdW5pdCBmcm9tIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovVW5pdHN+TUVURVJTX1BFUl9VTklUfVxuICogbG9va3VwIHRhYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbd29ybGRFeHRlbnRdIFRoZSB3b3JsZCBleHRlbnQgZm9yIHRoZSBTUlMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IFtnZXRQb2ludFJlc29sdXRpb25dXG4gKiBGdW5jdGlvbiB0byBkZXRlcm1pbmUgcmVzb2x1dGlvbiBhdCBhIHBvaW50LiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICogYG51bWJlcmAgdmlldyByZXNvbHV0aW9uIGFuZCBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlIENvb3JkaW5hdGV9IGFzIGFyZ3VtZW50cywgYW5kIHJldHVybnNcbiAqIHRoZSBgbnVtYmVyYCByZXNvbHV0aW9uIGluIHByb2plY3Rpb24gdW5pdHMgYXQgdGhlIHBhc3NlZCBjb29yZGluYXRlLiBJZiB0aGlzIGlzIGB1bmRlZmluZWRgLFxuICogdGhlIGRlZmF1bHQge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmdldFBvaW50UmVzb2x1dGlvbiBnZXRQb2ludFJlc29sdXRpb24oKX0gZnVuY3Rpb24gd2lsbCBiZSB1c2VkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gZGVmaW5pdGlvbiBjbGFzcy4gT25lIG9mIHRoZXNlIGlzIGNyZWF0ZWQgZm9yIGVhY2ggcHJvamVjdGlvblxuICogc3VwcG9ydGVkIGluIHRoZSBhcHBsaWNhdGlvbiBhbmQgc3RvcmVkIGluIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p9IG5hbWVzcGFjZS5cbiAqIFlvdSBjYW4gdXNlIHRoZXNlIGluIGFwcGxpY2F0aW9ucywgYnV0IHRoaXMgaXMgbm90IHJlcXVpcmVkLCBhcyBBUEkgcGFyYW1zXG4gKiBhbmQgb3B0aW9ucyB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qflByb2plY3Rpb25MaWtlfSB3aGljaCBtZWFucyB0aGUgc2ltcGxlIHN0cmluZ1xuICogY29kZSB3aWxsIHN1ZmZpY2UuXG4gKlxuICogWW91IGNhbiB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmdldH0gdG8gcmV0cmlldmUgdGhlIG9iamVjdCBmb3IgYSBwYXJ0aWN1bGFyXG4gKiBwcm9qZWN0aW9uLlxuICpcbiAqIFRoZSBsaWJyYXJ5IGluY2x1ZGVzIGRlZmluaXRpb25zIGZvciBgRVBTRzo0MzI2YCBhbmQgYEVQU0c6Mzg1N2AsIHRvZ2V0aGVyXG4gKiB3aXRoIHRoZSBmb2xsb3dpbmcgYWxpYXNlczpcbiAqICogYEVQU0c6NDMyNmA6IENSUzo4NCwgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQsIHVybjpvZ2M6ZGVmOmNyczpPR0M6Mjo4NCxcbiAqICAgICBodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjNDMyNixcbiAqICAgICB1cm46eC1vZ2M6ZGVmOmNyczpFUFNHOjQzMjZcbiAqICogYEVQU0c6Mzg1N2A6IEVQU0c6MTAyMTAwLCBFUFNHOjEwMjExMywgRVBTRzo5MDA5MTMsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni4xODozOjM4NTcsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTdcbiAqXG4gKiBJZiB5b3UgdXNlIFtwcm9qNGpzXShodHRwczovL2dpdGh1Yi5jb20vcHJvajRqcy9wcm9qNGpzKSwgYWxpYXNlcyBjYW5cbiAqIGJlIGFkZGVkIHVzaW5nIGBwcm9qNC5kZWZzKClgLiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmVcbiAqIGFkZGVkLCBjYWxsIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovcHJvajQucmVnaXN0ZXJ9IGZ1bmN0aW9uLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFByb2plY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFByb2plY3Rpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQcm9qZWN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvZGVfID0gb3B0aW9ucy5jb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVW5pdHMgb2YgcHJvamVjdGVkIGNvb3JkaW5hdGVzLiBXaGVuIHNldCB0byBgVElMRV9QSVhFTFNgLCBhXG4gICAgICAgICAqIGB0aGlzLmV4dGVudF9gIGFuZCBgdGhpcy53b3JsZEV4dGVudF9gIG11c3QgYmUgY29uZmlndXJlZCBwcm9wZXJseSBmb3IgZWFjaFxuICAgICAgICAgKiB0aWxlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51bml0c18gPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdH0gKi8gKG9wdGlvbnMudW5pdHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVmFsaWRpdHkgZXh0ZW50IG9mIHRoZSBwcm9qZWN0aW9uIGluIHByb2plY3RlZCBjb29yZGluYXRlcy4gRm9yIHByb2plY3Rpb25zXG4gICAgICAgICAqIHdpdGggYFRJTEVfUElYRUxTYCB1bml0cywgdGhpcyBpcyB0aGUgZXh0ZW50IG9mIHRoZSB0aWxlIGluXG4gICAgICAgICAqIHRpbGUgcGl4ZWwgc3BhY2UuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHRlbnRfID0gb3B0aW9ucy5leHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZXh0ZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4dGVudCBvZiB0aGUgd29ybGQgaW4gRVBTRzo0MzI2LiBGb3IgcHJvamVjdGlvbnMgd2l0aFxuICAgICAgICAgKiBgVElMRV9QSVhFTFNgIHVuaXRzLCB0aGlzIGlzIHRoZSBleHRlbnQgb2YgdGhlIHRpbGUgaW5cbiAgICAgICAgICogcHJvamVjdGVkIGNvb3JkaW5hdGUgc3BhY2UuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53b3JsZEV4dGVudF8gPVxuICAgICAgICAgICAgb3B0aW9ucy53b3JsZEV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53b3JsZEV4dGVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5heGlzT3JpZW50YXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXhpc09yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiA6ICdlbnUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdsb2JhbF8gPSBvcHRpb25zLmdsb2JhbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5nbG9iYWwgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgdGhpcy5leHRlbnRfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18gPSBvcHRpb25zLmdldFBvaW50UmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZXRlcnNQZXJVbml0XyA9IG9wdGlvbnMubWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHByb2plY3Rpb24gaXMgc3VpdGFibGUgZm9yIHdyYXBwaW5nIHRoZSB4LWF4aXNcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5jYW5XcmFwWCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuV3JhcFhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb2RlIGZvciB0aGlzIHByb2plY3Rpb24sIGUuZy4gJ0VQU0c6NDMyNicuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBDb2RlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRDb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2RlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHVuaXRzIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9IFVuaXRzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRVbml0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pdHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbW91bnQgb2YgbWV0ZXJzIHBlciB1bml0IG9mIHRoaXMgcHJvamVjdGlvbi4gIElmIHRoZSBwcm9qZWN0aW9uIGlzXG4gICAgICogbm90IGNvbmZpZ3VyZWQgd2l0aCBgbWV0ZXJzUGVyVW5pdGAgb3IgYSB1bml0cyBpZGVudGlmaWVyLCB0aGUgcmV0dXJuIGlzXG4gICAgICogYHVuZGVmaW5lZGAuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gTWV0ZXJzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRNZXRlcnNQZXJVbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRlcnNQZXJVbml0XyB8fCBNRVRFUlNfUEVSX1VOSVRbdGhpcy51bml0c19dO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3b3JsZCBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53b3JsZEV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGF4aXMgb3JpZW50YXRpb24gb2YgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEV4YW1wbGUgdmFsdWVzIGFyZTpcbiAgICAgKiBlbnUgLSB0aGUgZGVmYXVsdCBlYXN0aW5nLCBub3J0aGluZywgZWxldmF0aW9uLlxuICAgICAqIG5ldSAtIG5vcnRoaW5nLCBlYXN0aW5nLCB1cCAtIHVzZWZ1bCBmb3IgXCJsYXQvbG9uZ1wiIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMsXG4gICAgICogICAgIG9yIHNvdXRoIG9yaWVudGF0ZWQgdHJhbnN2ZXJzZSBtZXJjYXRvci5cbiAgICAgKiB3bnUgLSB3ZXN0aW5nLCBub3J0aGluZywgdXAgLSBzb21lIHBsYW5ldGFyeSBjb29yZGluYXRlIHN5c3RlbXMgaGF2ZVxuICAgICAqICAgICBcIndlc3QgcG9zaXRpdmVcIiBjb29yZGluYXRlIHN5c3RlbXNcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEF4aXMgb3JpZW50YXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldEF4aXNPcmllbnRhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXhpc09yaWVudGF0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIElzIHRoaXMgcHJvamVjdGlvbiBhIGdsb2JhbCBwcm9qZWN0aW9uIHdoaWNoIHNwYW5zIHRoZSB3aG9sZSB3b3JsZD9cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuaXNHbG9iYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdsb2JhbF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgaWYgdGhlIHByb2plY3Rpb24gaXMgYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGdsb2JhbCBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2xvYmFsID0gZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB0aGlzLmdsb2JhbF8gPSBnbG9iYWw7XG4gICAgICAgIHRoaXMuY2FuV3JhcFhfID0gISEoZ2xvYmFsICYmIHRoaXMuZXh0ZW50Xyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaGUgZGVmYXVsdCB0aWxlIGdyaWQuXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RGVmYXVsdFRpbGVHcmlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VGlsZUdyaWRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaGUgZGVmYXVsdCB0aWxlIGdyaWQuXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0RGVmYXVsdFRpbGVHcmlkID0gZnVuY3Rpb24gKHRpbGVHcmlkKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IHRpbGVHcmlkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldEV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdGhpcy5leHRlbnRfID0gZXh0ZW50O1xuICAgICAgICB0aGlzLmNhbldyYXBYXyA9ICEhKHRoaXMuZ2xvYmFsXyAmJiBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB3b3JsZCBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHdvcmxkRXh0ZW50IFdvcmxkIGV4dGVudFxuICAgICAqICAgICBbbWlubG9uLCBtaW5sYXQsIG1heGxvbiwgbWF4bGF0XS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0V29ybGRFeHRlbnQgPSBmdW5jdGlvbiAod29ybGRFeHRlbnQpIHtcbiAgICAgICAgdGhpcy53b3JsZEV4dGVudF8gPSB3b3JsZEV4dGVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZ2V0UG9pbnRSZXNvbHV0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmdldFBvaW50UmVzb2x1dGlvbn1cbiAgICAgKiBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcn0gZnVuYyBGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRHZXRQb2ludFJlc29sdXRpb24gPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gZnVuYztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VzdG9tIHBvaW50IHJlc29sdXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgcHJvamVjdGlvbiAoaWYgc2V0KS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGN1c3RvbSBwb2ludFxuICAgICAqIHJlc29sdXRpb24gZnVuY3Rpb24gKGlmIHNldCkuXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY187XG4gICAgfTtcbiAgICByZXR1cm4gUHJvamVjdGlvbjtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvamVjdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzM4NTdcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcbmltcG9ydCB7IGNvc2ggfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogUmFkaXVzIG9mIFdHUzg0IHNwaGVyZVxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBSQURJVVMgPSA2Mzc4MTM3O1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgSEFMRl9TSVpFID0gTWF0aC5QSSAqIFJBRElVUztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbLUhBTEZfU0laRSwgLUhBTEZfU0laRSwgSEFMRl9TSVpFLCBIQUxGX1NJWkVdO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICovXG5leHBvcnQgdmFyIFdPUkxEX0VYVEVOVCA9IFstMTgwLCAtODUsIDE4MCwgODVdO1xuLyoqXG4gKiBNYXhpbXVtIHNhZmUgdmFsdWUgaW4geSBkaXJlY3Rpb25cbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBNQVhfU0FGRV9ZID0gUkFESVVTICogTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDIpKTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIHdlYi9zcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKi9cbnZhciBFUFNHMzg1N1Byb2plY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVQU0czODU3UHJvamVjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29kZSBDb2RlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEVQU0czODU3UHJvamVjdGlvbihjb2RlKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgdW5pdHM6IFVuaXRzLk1FVEVSUyxcbiAgICAgICAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgICAgICAgd29ybGRFeHRlbnQ6IFdPUkxEX0VYVEVOVCxcbiAgICAgICAgICAgIGdldFBvaW50UmVzb2x1dGlvbjogZnVuY3Rpb24gKHJlc29sdXRpb24sIHBvaW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb24gLyBjb3NoKHBvaW50WzFdIC8gUkFESVVTKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBFUFNHMzg1N1Byb2plY3Rpb247XG59KFByb2plY3Rpb24pKTtcbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzozODU3LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IHZhciBQUk9KRUNUSU9OUyA9IFtcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjM4NTcnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjEwMCcpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6MTAyMTEzJyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzo5MDA5MTMnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjMzg1NycpLFxuXTtcbi8qKlxuICogVHJhbnNmb3JtYXRpb24gZnJvbSBFUFNHOjQzMjYgdG8gRVBTRzozODU3LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUVQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIgZGltZW5zaW9uID0gb3B0X2RpbWVuc2lvbiA+IDEgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICBpZiAob3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgICAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgICAgICBvdXRwdXRbaV0gPSAoSEFMRl9TSVpFICogaW5wdXRbaV0pIC8gMTgwO1xuICAgICAgICB2YXIgeSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKChNYXRoLlBJICogKCtpbnB1dFtpICsgMV0gKyA5MCkpIC8gMzYwKSk7XG4gICAgICAgIGlmICh5ID4gTUFYX1NBRkVfWSkge1xuICAgICAgICAgICAgeSA9IE1BWF9TQUZFX1k7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoeSA8IC1NQVhfU0FGRV9ZKSB7XG4gICAgICAgICAgICB5ID0gLU1BWF9TQUZFX1k7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0W2kgKyAxXSA9IHk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybWF0aW9uIGZyb20gRVBTRzozODU3IHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24gKGRlZmF1bHQgaXMgYDJgKS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRVBTRzQzMjYoaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0O1xuICAgIGlmIChvdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZGltZW5zaW9uID4gMikge1xuICAgICAgICAgICAgLy8gcHJlc2VydmUgdmFsdWVzIGJleW9uZCBzZWNvbmQgZGltZW5zaW9uXG4gICAgICAgICAgICBvdXRwdXQgPSBpbnB1dC5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgIG91dHB1dFtpXSA9ICgxODAgKiBpbnB1dFtpXSkgLyBIQUxGX1NJWkU7XG4gICAgICAgIG91dHB1dFtpICsgMV0gPVxuICAgICAgICAgICAgKDM2MCAqIE1hdGguYXRhbihNYXRoLmV4cChpbnB1dFtpICsgMV0gLyBSQURJVVMpKSkgLyBNYXRoLlBJIC0gOTA7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcHNnMzg1Ny5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzQzMjZcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcbi8qKlxuICogU2VtaS1tYWpvciByYWRpdXMgb2YgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcbi8qKlxuICogRXh0ZW50IG9mIHRoZSBFUFNHOjQzMjYgcHJvamVjdGlvbiB3aGljaCBpcyB0aGUgd2hvbGUgd29ybGQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbLTE4MCwgLTkwLCAxODAsIDkwXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIE1FVEVSU19QRVJfVU5JVCA9IChNYXRoLlBJICogUkFESVVTKSAvIDE4MDtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIFdHUzg0IGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKEVQU0c6NDMyNikuXG4gKlxuICogTm90ZSB0aGF0IE9wZW5MYXllcnMgZG9lcyBub3Qgc3RyaWN0bHkgY29tcGx5IHdpdGggdGhlIEVQU0cgZGVmaW5pdGlvbi5cbiAqIFRoZSBFUFNHIHJlZ2lzdHJ5IGRlZmluZXMgNDMyNiBhcyBhIENSUyBmb3IgTGF0aXR1ZGUsTG9uZ2l0dWRlICh5LHgpLlxuICogT3BlbkxheWVycyB0cmVhdHMgRVBTRzo0MzI2IGFzIGEgcHNldWRvLXByb2plY3Rpb24sIHdpdGggeCx5IGNvb3JkaW5hdGVzLlxuICovXG52YXIgRVBTRzQzMjZQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHNDMyNlByb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdF9heGlzT3JpZW50YXRpb25dIEF4aXMgb3JpZW50YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gRVBTRzQzMjZQcm9qZWN0aW9uKGNvZGUsIG9wdF9heGlzT3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGNvZGU6IGNvZGUsXG4gICAgICAgICAgICB1bml0czogVW5pdHMuREVHUkVFUyxcbiAgICAgICAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgICAgICAgYXhpc09yaWVudGF0aW9uOiBvcHRfYXhpc09yaWVudGF0aW9uLFxuICAgICAgICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgICAgICAgbWV0ZXJzUGVyVW5pdDogTUVURVJTX1BFUl9VTklULFxuICAgICAgICAgICAgd29ybGRFeHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEVQU0c0MzI2UHJvamVjdGlvbjtcbn0oUHJvamVjdGlvbikpO1xuLyoqXG4gKiBQcm9qZWN0aW9ucyBlcXVhbCB0byBFUFNHOjQzMjYuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICovXG5leHBvcnQgdmFyIFBST0pFQ1RJT05TID0gW1xuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ0NSUzo4NCcpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ0VQU0c6NDMyNicsICduZXUnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCcpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpPR0M6Mjo4NCcpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCM0MzI2JywgJ25ldScpLFxuXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVwc2c0MzI2LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL3Byb2plY3Rpb25zXG4gKi9cbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xudmFyIGNhY2hlID0ge307XG4vKipcbiAqIENsZWFyIHRoZSBwcm9qZWN0aW9ucyBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGNhY2hlID0ge307XG59XG4vKipcbiAqIEdldCBhIGNhY2hlZCBwcm9qZWN0aW9uIGJ5IGNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29kZSBUaGUgY29kZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gVGhlIHByb2plY3Rpb24gKGlmIGNhY2hlZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoY29kZSkge1xuICAgIHJldHVybiAoY2FjaGVbY29kZV0gfHxcbiAgICAgICAgY2FjaGVbY29kZS5yZXBsYWNlKC91cm46KHgtKT9vZ2M6ZGVmOmNyczpFUFNHOiguKjopPyhcXHcrKSQvLCAnRVBTRzokMycpXSB8fFxuICAgICAgICBudWxsKTtcbn1cbi8qKlxuICogQWRkIGEgcHJvamVjdGlvbiB0byB0aGUgY2FjaGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29kZSBUaGUgcHJvamVjdGlvbiBjb2RlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbiB0byBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChjb2RlLCBwcm9qZWN0aW9uKSB7XG4gICAgY2FjaGVbY29kZV0gPSBwcm9qZWN0aW9uO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvamVjdGlvbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovdHJhbnNmb3Jtc1xuICovXG5pbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbj4+fVxuICovXG52YXIgdHJhbnNmb3JtcyA9IHt9O1xuLyoqXG4gKiBDbGVhciB0aGUgdHJhbnNmb3JtIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdHJhbnNmb3JtcyA9IHt9O1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgYSBjb252ZXJzaW9uIGZ1bmN0aW9uIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBTb3VyY2UuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKHNvdXJjZSwgZGVzdGluYXRpb24sIHRyYW5zZm9ybUZuKSB7XG4gICAgdmFyIHNvdXJjZUNvZGUgPSBzb3VyY2UuZ2V0Q29kZSgpO1xuICAgIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvbi5nZXRDb2RlKCk7XG4gICAgaWYgKCEoc291cmNlQ29kZSBpbiB0cmFuc2Zvcm1zKSkge1xuICAgICAgICB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdID0ge307XG4gICAgfVxuICAgIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXSA9IHRyYW5zZm9ybUZuO1xufVxuLyoqXG4gKiBVbnJlZ2lzdGVycyB0aGUgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi4gIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY2xlYW4gdXBcbiAqIGNhY2hlZCB0cmFuc2Zvcm1zIGR1cmluZyB0ZXN0aW5nLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUaGUgdW5yZWdpc3RlcmVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIHNvdXJjZUNvZGUgPSBzb3VyY2UuZ2V0Q29kZSgpO1xuICAgIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICAgIGlmIChpc0VtcHR5KHRyYW5zZm9ybXNbc291cmNlQ29kZV0pKSB7XG4gICAgICAgIGRlbGV0ZSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBHZXQgYSB0cmFuc2Zvcm0gZ2l2ZW4gYSBzb3VyY2UgY29kZSBhbmQgYSBkZXN0aW5hdGlvbiBjb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZUNvZGUgVGhlIGNvZGUgZm9yIHRoZSBzb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbkNvZGUgVGhlIGNvZGUgZm9yIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbnx1bmRlZmluZWR9IFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gKGlmIGZvdW5kKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChzb3VyY2VDb2RlLCBkZXN0aW5hdGlvbkNvZGUpIHtcbiAgICB2YXIgdHJhbnNmb3JtO1xuICAgIGlmIChzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMgJiYgZGVzdGluYXRpb25Db2RlIGluIHRyYW5zZm9ybXNbc291cmNlQ29kZV0pIHtcbiAgICAgICAgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3Jtcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3BoZXJlXG4gKi9cbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgeyB0b0RlZ3JlZXMsIHRvUmFkaWFucyB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggb3B0aW9ucyBmb3IgdGhlIHtAbGluayBnZXRMZW5ndGh9IG9yIHtAbGluayBnZXRBcmVhfVxuICogZnVuY3Rpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gU3BoZXJlTWV0cmljT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXVxuICogUHJvamVjdGlvbiBvZiB0aGUgIGdlb21ldHJ5LiAgQnkgZGVmYXVsdCwgdGhlIGdlb21ldHJ5IGlzIGFzc3VtZWQgdG8gYmUgaW5cbiAqIFdlYiBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmFkaXVzPTYzNzEwMDguOF0gU3BoZXJlIHJhZGl1cy4gIEJ5IGRlZmF1bHQsIHRoZVxuICogW21lYW4gRWFydGggcmFkaXVzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FYXJ0aF9yYWRpdXMjTWVhbl9yYWRpdXMpXG4gKiBmb3IgdGhlIFdHUzg0IGVsbGlwc29pZCBpcyB1c2VkLlxuICovXG4vKipcbiAqIFRoZSBtZWFuIEVhcnRoIHJhZGl1cyAoMS8zICogKDJhICsgYikpIGZvciB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRWFydGhfcmFkaXVzI01lYW5fcmFkaXVzXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfUkFESVVTID0gNjM3MTAwOC44O1xuLyoqXG4gKiBHZXQgdGhlIGdyZWF0IGNpcmNsZSBkaXN0YW5jZSAoaW4gbWV0ZXJzKSBiZXR3ZWVuIHR3byBnZW9ncmFwaGljIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheX0gYzEgU3RhcnRpbmcgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7QXJyYXl9IGMyIEVuZGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcmFkaXVzXSBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuICBEZWZhdWx0cyB0byB0aGUgRWFydGgnc1xuICogICAgIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBncmVhdCBjaXJjbGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzIChpbiBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlzdGFuY2UoYzEsIGMyLCBvcHRfcmFkaXVzKSB7XG4gICAgdmFyIHJhZGl1cyA9IG9wdF9yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIGxhdDEgPSB0b1JhZGlhbnMoYzFbMV0pO1xuICAgIHZhciBsYXQyID0gdG9SYWRpYW5zKGMyWzFdKTtcbiAgICB2YXIgZGVsdGFMYXRCeTIgPSAobGF0MiAtIGxhdDEpIC8gMjtcbiAgICB2YXIgZGVsdGFMb25CeTIgPSB0b1JhZGlhbnMoYzJbMF0gLSBjMVswXSkgLyAyO1xuICAgIHZhciBhID0gTWF0aC5zaW4oZGVsdGFMYXRCeTIpICogTWF0aC5zaW4oZGVsdGFMYXRCeTIpICtcbiAgICAgICAgTWF0aC5zaW4oZGVsdGFMb25CeTIpICpcbiAgICAgICAgICAgIE1hdGguc2luKGRlbHRhTG9uQnkyKSAqXG4gICAgICAgICAgICBNYXRoLmNvcyhsYXQxKSAqXG4gICAgICAgICAgICBNYXRoLmNvcyhsYXQyKTtcbiAgICByZXR1cm4gMiAqIHJhZGl1cyAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcbn1cbi8qKlxuICogR2V0IHRoZSBjdW11bGF0aXZlIGdyZWF0IGNpcmNsZSBsZW5ndGggb2YgbGluZXN0cmluZyBjb29yZGluYXRlcyAoZ2VvZ3JhcGhpYykuXG4gKiBAcGFyYW0ge0FycmF5fSBjb29yZGluYXRlcyBMaW5lc3RyaW5nIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggKGluIG1ldGVycykuXG4gKi9cbmZ1bmN0aW9uIGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpIHtcbiAgICB2YXIgbGVuZ3RoID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaSAtIDE7ICsraSkge1xuICAgICAgICBsZW5ndGggKz0gZ2V0RGlzdGFuY2UoY29vcmRpbmF0ZXNbaV0sIGNvb3JkaW5hdGVzW2kgKyAxXSwgcmFkaXVzKTtcbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbi8qKlxuICogR2V0IHRoZSBzcGhlcmljYWwgbGVuZ3RoIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZVxuICogZ3JlYXQgY2lyY2xlIGRpc3RhbmNlcyBiZXR3ZWVuIGNvb3JkaW5hdGVzLiAgRm9yIHBvbHlnb25zLCB0aGUgbGVuZ3RoIGlzXG4gKiB0aGUgc3VtIG9mIGFsbCByaW5ncy4gIEZvciBwb2ludHMsIHRoZSBsZW5ndGggaXMgemVyby4gIEZvciBtdWx0aS1wYXJ0XG4gKiBnZW9tZXRyaWVzLCB0aGUgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlIGxlbmd0aCBvZiBlYWNoIHBhcnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMgZm9yIHRoZVxuICogbGVuZ3RoIGNhbGN1bGF0aW9uLiAgQnkgZGVmYXVsdCwgZ2VvbWV0cmllcyBhcmUgYXNzdW1lZCB0byBiZSBpbiAnRVBTRzozODU3Jy5cbiAqIFlvdSBjYW4gY2hhbmdlIHRoaXMgYnkgcHJvdmlkaW5nIGEgYHByb2plY3Rpb25gIG9wdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNwaGVyaWNhbCBsZW5ndGggKGluIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGgoZ2VvbWV0cnksIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gfHwgJ0VQU0c6Mzg1Nyc7XG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgaWYgKHR5cGUgIT09IEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OKSB7XG4gICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIH1cbiAgICB2YXIgbGVuZ3RoID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORzoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBsZW5ndGggPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046IHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyaWVzID0gXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRHZW9tZXRyaWVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGgoZ2VvbWV0cmllc1tpXSwgb3B0X29wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAnICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgc3BoZXJpY2FsIGFyZWEgZm9yIGEgbGlzdCBvZiBjb29yZGluYXRlcy5cbiAqXG4gKiBbUmVmZXJlbmNlXShodHRwczovL3Rycy5qcGwubmFzYS5nb3YvaGFuZGxlLzIwMTQvNDA0MDkpXG4gKiBSb2JlcnQuIEcuIENoYW1iZXJsYWluIGFuZCBXaWxsaWFtIEguIER1cXVldHRlLCBcIlNvbWUgQWxnb3JpdGhtcyBmb3JcbiAqIFBvbHlnb25zIG9uIGEgU3BoZXJlXCIsIEpQTCBQdWJsaWNhdGlvbiAwNy0wMywgSmV0IFByb3B1bHNpb25cbiAqIExhYm9yYXRvcnksIFBhc2FkZW5hLCBDQSwgSnVuZSAyMDA3XG4gKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIExpc3Qgb2YgY29vcmRpbmF0ZXMgb2YgYSBsaW5lYXJcbiAqIHJpbmcuIElmIHRoZSByaW5nIGlzIG9yaWVudGVkIGNsb2Nrd2lzZSwgdGhlIGFyZWEgd2lsbCBiZSBwb3NpdGl2ZSxcbiAqIG90aGVyd2lzZSBpdCB3aWxsIGJlIG5lZ2F0aXZlLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgc3BoZXJlIHJhZGl1cy5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAoaW4gc3F1YXJlIG1ldGVycykuXG4gKi9cbmZ1bmN0aW9uIGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIHZhciBsZW4gPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdmFyIHgxID0gY29vcmRpbmF0ZXNbbGVuIC0gMV1bMF07XG4gICAgdmFyIHkxID0gY29vcmRpbmF0ZXNbbGVuIC0gMV1bMV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgeDIgPSBjb29yZGluYXRlc1tpXVswXTtcbiAgICAgICAgdmFyIHkyID0gY29vcmRpbmF0ZXNbaV1bMV07XG4gICAgICAgIGFyZWEgKz1cbiAgICAgICAgICAgIHRvUmFkaWFucyh4MiAtIHgxKSAqXG4gICAgICAgICAgICAgICAgKDIgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTEpKSArIE1hdGguc2luKHRvUmFkaWFucyh5MikpKTtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIChhcmVhICogcmFkaXVzICogcmFkaXVzKSAvIDIuMDtcbn1cbi8qKlxuICogR2V0IHRoZSBzcGhlcmljYWwgYXJlYSBvZiBhIGdlb21ldHJ5LiAgVGhpcyBpcyB0aGUgYXJlYSAoaW4gbWV0ZXJzKSBhc3N1bWluZ1xuICogdGhhdCBwb2x5Z29uIGVkZ2VzIGFyZSBzZWdtZW50cyBvZiBncmVhdCBjaXJjbGVzIG9uIGEgc3BoZXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zIGZvciB0aGUgYXJlYVxuICogICAgIGNhbGN1bGF0aW9uLiAgQnkgZGVmYXVsdCwgZ2VvbWV0cmllcyBhcmUgYXNzdW1lZCB0byBiZSBpbiAnRVBTRzozODU3Jy5cbiAqICAgICBZb3UgY2FuIGNoYW5nZSB0aGlzIGJ5IHByb3ZpZGluZyBhIGBwcm9qZWN0aW9uYCBvcHRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBzcGhlcmljYWwgYXJlYSAoaW4gc3F1YXJlIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmVhKGdlb21ldHJ5LCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uIHx8ICdFUFNHOjM4NTcnO1xuICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICAgIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCkudHJhbnNmb3JtKHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICB9XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIHZhciBjb29yZGluYXRlcywgY29vcmRzLCBpLCBpaSwgaiwgamo7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPSU5UOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORzoge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9MWUdPTjoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGFyZWEgPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXNbMF0sIHJhZGl1cykpO1xuICAgICAgICAgICAgZm9yIChpID0gMSwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXNbaV0sIHJhZGl1cykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb29yZHMgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgICAgICBhcmVhICs9IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZHNbMF0sIHJhZGl1cykpO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDEsIGpqID0gY29vcmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OOiB7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cmllcyA9IFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBhcmVhICs9IGdldEFyZWEoZ2VvbWV0cmllc1tpXSwgb3B0X29wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAnICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgYXQgdGhlIGdpdmVuIGRpc3RhbmNlIGFuZCBiZWFyaW5nIGZyb20gYGMxYC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjMSBUaGUgb3JpZ2luIHBvaW50IChgW2xvbiwgbGF0XWAgaW4gZGVncmVlcykuXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgVGhlIGdyZWF0LWNpcmNsZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBvcmlnaW5cbiAqICAgICBwb2ludCBhbmQgdGhlIHRhcmdldCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWFyaW5nIFRoZSBiZWFyaW5nIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3JhZGl1c10gVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSB0YXJnZXQgcG9pbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvZmZzZXQoYzEsIGRpc3RhbmNlLCBiZWFyaW5nLCBvcHRfcmFkaXVzKSB7XG4gICAgdmFyIHJhZGl1cyA9IG9wdF9yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIGxhdDEgPSB0b1JhZGlhbnMoYzFbMV0pO1xuICAgIHZhciBsb24xID0gdG9SYWRpYW5zKGMxWzBdKTtcbiAgICB2YXIgZEJ5UiA9IGRpc3RhbmNlIC8gcmFkaXVzO1xuICAgIHZhciBsYXQgPSBNYXRoLmFzaW4oTWF0aC5zaW4obGF0MSkgKiBNYXRoLmNvcyhkQnlSKSArXG4gICAgICAgIE1hdGguY29zKGxhdDEpICogTWF0aC5zaW4oZEJ5UikgKiBNYXRoLmNvcyhiZWFyaW5nKSk7XG4gICAgdmFyIGxvbiA9IGxvbjEgK1xuICAgICAgICBNYXRoLmF0YW4yKE1hdGguc2luKGJlYXJpbmcpICogTWF0aC5zaW4oZEJ5UikgKiBNYXRoLmNvcyhsYXQxKSwgTWF0aC5jb3MoZEJ5UikgLSBNYXRoLnNpbihsYXQxKSAqIE1hdGguc2luKGxhdCkpO1xuICAgIHJldHVybiBbdG9EZWdyZWVzKGxvbiksIHRvRGVncmVlcyhsYXQpXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwaGVyZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvalxuICovXG4vKipcbiAqIFRoZSBvbC9wcm9qIG1vZHVsZSBzdG9yZXM6XG4gKiAqIGEgbGlzdCBvZiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn1cbiAqIG9iamVjdHMsIG9uZSBmb3IgZWFjaCBwcm9qZWN0aW9uIHN1cHBvcnRlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqICogYSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgbmVlZGVkIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgaW4gb25lIHByb2plY3Rpb25cbiAqIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgc3RhdGljIGZ1bmN0aW9ucyBhcmUgdGhlIG1ldGhvZHMgdXNlZCB0byBtYWludGFpbiB0aGVzZS5cbiAqIEVhY2ggdHJhbnNmb3JtIGZ1bmN0aW9uIGNhbiBoYW5kbGUgbm90IG9ubHkgc2ltcGxlIGNvb3JkaW5hdGUgcGFpcnMsIGJ1dCBhbHNvXG4gKiBsYXJnZSBhcnJheXMgb2YgY29vcmRpbmF0ZXMgc3VjaCBhcyB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBXaGVuIGxvYWRlZCwgdGhlIGxpYnJhcnkgYWRkcyBwcm9qZWN0aW9uIG9iamVjdHMgZm9yIEVQU0c6NDMyNiAoV0dTODRcbiAqIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMpIGFuZCBFUFNHOjM4NTcgKFdlYiBvciBTcGhlcmljYWwgTWVyY2F0b3IsIGFzIHVzZWRcbiAqIGZvciBleGFtcGxlIGJ5IEJpbmcgTWFwcyBvciBPcGVuU3RyZWV0TWFwKSwgdG9nZXRoZXIgd2l0aCB0aGUgcmVsZXZhbnRcbiAqIHRyYW5zZm9ybSBmdW5jdGlvbnMuXG4gKlxuICogQWRkaXRpb25hbCB0cmFuc2Zvcm1zIG1heSBiZSBhZGRlZCBieSB1c2luZyB0aGUgaHR0cDovL3Byb2o0anMub3JnL1xuICogbGlicmFyeSAodmVyc2lvbiAyLjIgb3IgbGF0ZXIpLiBZb3UgY2FuIHVzZSB0aGUgZnVsbCBidWlsZCBzdXBwbGllZCBieVxuICogUHJvajRqcywgb3IgY3JlYXRlIGEgY3VzdG9tIGJ1aWxkIHRvIHN1cHBvcnQgdGhvc2UgcHJvamVjdGlvbnMgeW91IG5lZWQ7IHNlZVxuICogdGhlIFByb2o0anMgd2Vic2l0ZSBmb3IgaG93IHRvIGRvIHRoaXMuIFlvdSBhbHNvIG5lZWQgdGhlIFByb2o0anMgZGVmaW5pdGlvbnNcbiAqIGZvciB0aGUgcmVxdWlyZWQgcHJvamVjdGlvbnMuIFRoZXNlIGRlZmluaXRpb25zIGNhbiBiZSBvYnRhaW5lZCBmcm9tXG4gKiBodHRwczovL2Vwc2cuaW8vLCBhbmQgYXJlIGEgSlMgZnVuY3Rpb24sIHNvIGNhbiBiZSBsb2FkZWQgaW4gYSBzY3JpcHRcbiAqIHRhZyAoYXMgaW4gdGhlIGV4YW1wbGVzKSBvciBwYXN0ZWQgaW50byB5b3VyIGFwcGxpY2F0aW9uLlxuICpcbiAqIEFmdGVyIGFsbCByZXF1aXJlZCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGFyZSBhZGRlZCB0byBwcm9qNCdzIHJlZ2lzdHJ5IChieVxuICogdXNpbmcgYHByb2o0LmRlZnMoKWApLCBzaW1wbHkgY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBmcm9tIHRoZSBgb2wvcHJvai9wcm9qNGBcbiAqIHBhY2thZ2UuIEV4aXN0aW5nIHRyYW5zZm9ybXMgYXJlIG5vdCBjaGFuZ2VkIGJ5IHRoaXMgZnVuY3Rpb24uIFNlZVxuICogZXhhbXBsZXMvd21zLWltYWdlLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogQWRkaXRpb25hbCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGNhbiBiZSByZWdpc3RlcmVkIHdpdGggYHByb2o0LmRlZnMoKWAgYW55XG4gKiB0aW1lLiBKdXN0IG1ha2Ugc3VyZSB0byBjYWxsIGByZWdpc3Rlcihwcm9qNClgIGFnYWluOyBmb3IgZXhhbXBsZSwgd2l0aCB1c2VyLXN1cHBsaWVkIGRhdGEgd2hlcmUgeW91IGRvbid0XG4gKiBrbm93IGluIGFkdmFuY2Ugd2hhdCBwcm9qZWN0aW9ucyBhcmUgbmVlZGVkLCB5b3UgY2FuIGluaXRpYWxseSBsb2FkIG1pbmltYWxcbiAqIHN1cHBvcnQgYW5kIHRoZW4gbG9hZCB3aGljaGV2ZXIgYXJlIHJlcXVlc3RlZC5cbiAqXG4gKiBOb3RlIHRoYXQgUHJvajRqcyBkb2VzIG5vdCBzdXBwb3J0IHByb2plY3Rpb24gZXh0ZW50cy4gSWYgeW91IHdhbnQgdG8gYWRkXG4gKiBvbmUgZm9yIGNyZWF0aW5nIGRlZmF1bHQgdGlsZSBncmlkcywgeW91IGNhbiBhZGQgaXQgYWZ0ZXIgdGhlIFByb2plY3Rpb25cbiAqIG9iamVjdCBoYXMgYmVlbiBjcmVhdGVkIHdpdGggYHNldEV4dGVudGAsIGZvciBleGFtcGxlLFxuICogYGdldCgnRVBTRzoxMjM0Jykuc2V0RXh0ZW50KGV4dGVudClgLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIFByb2o0anMgc3VwcG9ydCwgYW55IHRyYW5zZm9ybSBmdW5jdGlvbnMgY2FuIGJlIGFkZGVkIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFRvIHVzZSB0aGlzLCB5b3UgbXVzdCBmaXJzdCBjcmVhdGVcbiAqIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259IG9iamVjdCBmb3IgdGhlIG5ldyBwcm9qZWN0aW9uIGFuZCBhZGQgaXQgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmFkZFByb2plY3Rpb259LiBZb3UgY2FuIHRoZW4gYWRkIHRoZSBmb3J3YXJkIGFuZCBpbnZlcnNlXG4gKiBmdW5jdGlvbnMgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXN9LiBTZWVcbiAqIGV4YW1wbGVzL3dtcy1jdXN0b20tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZiB0aGlzLlxuICpcbiAqIE5vdGUgdGhhdCBpZiBubyB0cmFuc2Zvcm1zIGFyZSBuZWVkZWQgYW5kIHlvdSBvbmx5IG5lZWQgdG8gZGVmaW5lIHRoZVxuICogcHJvamVjdGlvbiwganVzdCBhZGQgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmFkZFByb2plY3Rpb259LiBTZWUgZXhhbXBsZXMvd21zLW5vLXByb2ogZm9yIGFuIGV4YW1wbGUgb2ZcbiAqIHRoaXMuXG4gKi9cbmltcG9ydCBQcm9qZWN0aW9uIGZyb20gJy4vcHJvai9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cywgeyBNRVRFUlNfUEVSX1VOSVQgfSBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHsgUFJPSkVDVElPTlMgYXMgRVBTRzM4NTdfUFJPSkVDVElPTlMsIGZyb21FUFNHNDMyNiwgdG9FUFNHNDMyNiwgfSBmcm9tICcuL3Byb2ovZXBzZzM4NTcuanMnO1xuaW1wb3J0IHsgUFJPSkVDVElPTlMgYXMgRVBTRzQzMjZfUFJPSkVDVElPTlMgfSBmcm9tICcuL3Byb2ovZXBzZzQzMjYuanMnO1xuaW1wb3J0IHsgYWRkIGFzIGFkZFByb2osIGNsZWFyIGFzIGNsZWFyUHJvaiwgZ2V0IGFzIGdldFByb2osIH0gZnJvbSAnLi9wcm9qL3Byb2plY3Rpb25zLmpzJztcbmltcG9ydCB7IGFkZCBhcyBhZGRUcmFuc2Zvcm1GdW5jLCBjbGVhciBhcyBjbGVhclRyYW5zZm9ybUZ1bmNzLCBnZXQgYXMgZ2V0VHJhbnNmb3JtRnVuYywgfSBmcm9tICcuL3Byb2ovdHJhbnNmb3Jtcy5qcyc7XG5pbXBvcnQgeyBhcHBseVRyYW5zZm9ybSwgZ2V0V2lkdGggfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjbGFtcCwgbW9kdWxvIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGdldERpc3RhbmNlIH0gZnJvbSAnLi9zcGhlcmUuanMnO1xuaW1wb3J0IHsgZ2V0V29ybGRzQXdheSB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEEgcHJvamVjdGlvbiBhcyB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0sIFNSUyBpZGVudGlmaWVyXG4gKiBzdHJpbmcgb3IgdW5kZWZpbmVkLlxuICogQHR5cGVkZWYge1Byb2plY3Rpb258c3RyaW5nfHVuZGVmaW5lZH0gUHJvamVjdGlvbkxpa2VcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBBIHRyYW5zZm9ybSBmdW5jdGlvbiBhY2NlcHRzIGFuIGFycmF5IG9mIGlucHV0IGNvb3JkaW5hdGUgdmFsdWVzLCBhbiBvcHRpb25hbFxuICogb3V0cHV0IGFycmF5LCBhbmQgYW4gb3B0aW9uYWwgZGltZW5zaW9uIChkZWZhdWx0IHNob3VsZCBiZSAyKS4gIFRoZSBmdW5jdGlvblxuICogdHJhbnNmb3JtcyB0aGUgaW5wdXQgY29vcmRpbmF0ZSB2YWx1ZXMsIHBvcHVsYXRlcyB0aGUgb3V0cHV0IGFycmF5LCBhbmRcbiAqIHJldHVybnMgdGhlIG91dHB1dCBhcnJheS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oQXJyYXk8bnVtYmVyPiwgQXJyYXk8bnVtYmVyPj0sIG51bWJlcj0pOiBBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1GdW5jdGlvblxuICogQGFwaVxuICovXG5leHBvcnQgeyBNRVRFUlNfUEVSX1VOSVQgfTtcbmV4cG9ydCB7IFByb2plY3Rpb24gfTtcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgY29vcmRpbmF0ZSBhcnJheSAobmV3IGFycmF5LCBzYW1lIGNvb3JkaW5hdGVcbiAqICAgICB2YWx1ZXMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVUcmFuc2Zvcm0oaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICB2YXIgb3V0cHV0O1xuICAgIGlmIChvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgb3B0X291dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvdXRwdXQgPSBpbnB1dC5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGNvb3JkaW5hdGUgYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IElucHV0IGNvb3JkaW5hdGUgYXJyYXkgKHNhbWUgYXJyYXkgYXMgaW5wdXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHlUcmFuc2Zvcm0oaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0ICE9PSBvcHRfb3V0cHV0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9wdF9vdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dDtcbn1cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGFkZFByb2oocHJvamVjdGlvbi5nZXRDb2RlKCksIHByb2plY3Rpb24pO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbiwgcHJvamVjdGlvbiwgY2xvbmVUcmFuc2Zvcm0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb25zKHByb2plY3Rpb25zKSB7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChhZGRQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogRmV0Y2hlcyBhIFByb2plY3Rpb24gb2JqZWN0IGZvciB0aGUgY29kZSBzcGVjaWZpZWQuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbkxpa2UgRWl0aGVyIGEgY29kZSBzdHJpbmcgd2hpY2ggaXNcbiAqICAgICBhIGNvbWJpbmF0aW9uIG9mIGF1dGhvcml0eSBhbmQgaWRlbnRpZmllciBzdWNoIGFzIFwiRVBTRzo0MzI2XCIsIG9yIGFuXG4gKiAgICAgZXhpc3RpbmcgcHJvamVjdGlvbiBvYmplY3QsIG9yIHVuZGVmaW5lZC5cbiAqIEByZXR1cm4ge1Byb2plY3Rpb259IFByb2plY3Rpb24gb2JqZWN0LCBvciBudWxsIGlmIG5vdCBpbiBsaXN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHByb2plY3Rpb25MaWtlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9qZWN0aW9uTGlrZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRQcm9qKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKVxuICAgICAgICA6IC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb25MaWtlKSB8fCBudWxsO1xufVxuLyoqXG4gKiBHZXQgdGhlIHJlc29sdXRpb24gb2YgdGhlIHBvaW50IGluIGRlZ3JlZXMgb3IgZGlzdGFuY2UgdW5pdHMuXG4gKiBGb3IgcHJvamVjdGlvbnMgd2l0aCBkZWdyZWVzIGFzIHRoZSB1bml0IHRoaXMgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZVxuICogcHJvdmlkZWQgcmVzb2x1dGlvbi4gRm9yIG90aGVyIHByb2plY3Rpb25zIHRoZSBwb2ludCByZXNvbHV0aW9uIGlzXG4gKiBieSBkZWZhdWx0IGVzdGltYXRlZCBieSB0cmFuc2Zvcm1pbmcgdGhlICdwb2ludCcgcGl4ZWwgdG8gRVBTRzo0MzI2LFxuICogbWVhc3VyaW5nIGl0cyB3aWR0aCBhbmQgaGVpZ2h0IG9uIHRoZSBub3JtYWwgc3BoZXJlLFxuICogYW5kIHRha2luZyB0aGUgYXZlcmFnZSBvZiB0aGUgd2lkdGggYW5kIGhlaWdodC5cbiAqIEEgY3VzdG9tIGZ1bmN0aW9uIGNhbiBiZSBwcm92aWRlZCBmb3IgYSBzcGVjaWZpYyBwcm9qZWN0aW9uLCBlaXRoZXJcbiAqIGJ5IHNldHRpbmcgdGhlIGBnZXRQb2ludFJlc29sdXRpb25gIG9wdGlvbiBpbiB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IGNvbnN0cnVjdG9yIG9yIGJ5IHVzaW5nXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9uI3NldEdldFBvaW50UmVzb2x1dGlvbn0gdG8gY2hhbmdlIGFuIGV4aXN0aW5nXG4gKiBwcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBOb21pbmFsIHJlc29sdXRpb24gaW4gcHJvamVjdGlvbiB1bml0cy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50IHRvIGZpbmQgYWRqdXN0ZWQgcmVzb2x1dGlvbiBhdC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1VuaXRzLmpzXCIpLmRlZmF1bHR9IFtvcHRfdW5pdHNdIFVuaXRzIHRvIGdldCB0aGUgcG9pbnQgcmVzb2x1dGlvbiBpbi5cbiAqIERlZmF1bHQgaXMgdGhlIHByb2plY3Rpb24ncyB1bml0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gUG9pbnQgcmVzb2x1dGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBvaW50UmVzb2x1dGlvbihwcm9qZWN0aW9uLCByZXNvbHV0aW9uLCBwb2ludCwgb3B0X3VuaXRzKSB7XG4gICAgcHJvamVjdGlvbiA9IGdldChwcm9qZWN0aW9uKTtcbiAgICB2YXIgcG9pbnRSZXNvbHV0aW9uO1xuICAgIHZhciBnZXR0ZXIgPSBwcm9qZWN0aW9uLmdldFBvaW50UmVzb2x1dGlvbkZ1bmMoKTtcbiAgICBpZiAoZ2V0dGVyKSB7XG4gICAgICAgIHBvaW50UmVzb2x1dGlvbiA9IGdldHRlcihyZXNvbHV0aW9uLCBwb2ludCk7XG4gICAgICAgIGlmIChvcHRfdW5pdHMgJiYgb3B0X3VuaXRzICE9PSBwcm9qZWN0aW9uLmdldFVuaXRzKCkpIHtcbiAgICAgICAgICAgIHZhciBtZXRlcnNQZXJVbml0ID0gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgICAgICBpZiAobWV0ZXJzUGVyVW5pdCkge1xuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIChwb2ludFJlc29sdXRpb24gKiBtZXRlcnNQZXJVbml0KSAvIE1FVEVSU19QRVJfVU5JVFtvcHRfdW5pdHNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdW5pdHMgPSBwcm9qZWN0aW9uLmdldFVuaXRzKCk7XG4gICAgICAgIGlmICgodW5pdHMgPT0gVW5pdHMuREVHUkVFUyAmJiAhb3B0X3VuaXRzKSB8fCBvcHRfdW5pdHMgPT0gVW5pdHMuREVHUkVFUykge1xuICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVzdGltYXRlIHBvaW50IHJlc29sdXRpb24gYnkgdHJhbnNmb3JtaW5nIHRoZSBjZW50ZXIgcGl4ZWwgdG8gRVBTRzo0MzI2LFxuICAgICAgICAgICAgLy8gbWVhc3VyaW5nIGl0cyB3aWR0aCBhbmQgaGVpZ2h0IG9uIHRoZSBub3JtYWwgc3BoZXJlLCBhbmQgdGFraW5nIHRoZVxuICAgICAgICAgICAgLy8gYXZlcmFnZSBvZiB0aGUgd2lkdGggYW5kIGhlaWdodC5cbiAgICAgICAgICAgIHZhciB0b0VQU0c0MzI2XzEgPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMocHJvamVjdGlvbiwgZ2V0KCdFUFNHOjQzMjYnKSk7XG4gICAgICAgICAgICBpZiAodG9FUFNHNDMyNl8xID09PSBpZGVudGl0eVRyYW5zZm9ybSAmJiB1bml0cyAhPT0gVW5pdHMuREVHUkVFUykge1xuICAgICAgICAgICAgICAgIC8vIG5vIHRyYW5zZm9ybSBpcyBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uICogcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdmVydGljZXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdIC0gcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSArIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdIC0gcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSArIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmVydGljZXMgPSB0b0VQU0c0MzI2XzEodmVydGljZXMsIHZlcnRpY2VzLCAyKTtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBnZXREaXN0YW5jZSh2ZXJ0aWNlcy5zbGljZSgwLCAyKSwgdmVydGljZXMuc2xpY2UoMiwgNCkpO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBnZXREaXN0YW5jZSh2ZXJ0aWNlcy5zbGljZSg0LCA2KSwgdmVydGljZXMuc2xpY2UoNiwgOCkpO1xuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9ICh3aWR0aCArIGhlaWdodCkgLyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1ldGVyc1BlclVuaXQgPSBvcHRfdW5pdHNcbiAgICAgICAgICAgICAgICA/IE1FVEVSU19QRVJfVU5JVFtvcHRfdW5pdHNdXG4gICAgICAgICAgICAgICAgOiBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgICAgIGlmIChtZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gLz0gbWV0ZXJzUGVyVW5pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRSZXNvbHV0aW9uO1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMuIFRob3NlIGFsbG93XG4gKiB0byB0cmFuc2Zvcm0gYmV0d2VlbiBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMocHJvamVjdGlvbnMpIHtcbiAgICBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucyk7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHByb2plY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlICE9PSBkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMoc291cmNlLCBkZXN0aW5hdGlvbiwgY2xvbmVUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIGFueSBwcm9qZWN0aW9uXG4gKiBpbiBwcm9qZWN0aW9uMSB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczEgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczIgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBmb3J3YXJkVHJhbnNmb3JtIFRyYW5zZm9ybWF0aW9uIGZyb20gYW55XG4gKiAgIHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBpbnZlcnNlVHJhbnNmb3JtIFRyYW5zZm9ybSBmcm9tIGFueSBwcm9qZWN0aW9uXG4gKiAgIGluIHByb2plY3Rpb24yIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xLi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKHByb2plY3Rpb25zMSwgcHJvamVjdGlvbnMyLCBmb3J3YXJkVHJhbnNmb3JtLCBpbnZlcnNlVHJhbnNmb3JtKSB7XG4gICAgcHJvamVjdGlvbnMxLmZvckVhY2goZnVuY3Rpb24gKHByb2plY3Rpb24xKSB7XG4gICAgICAgIHByb2plY3Rpb25zMi5mb3JFYWNoKGZ1bmN0aW9uIChwcm9qZWN0aW9uMikge1xuICAgICAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIsIGZvcndhcmRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhwcm9qZWN0aW9uMiwgcHJvamVjdGlvbjEsIGludmVyc2VUcmFuc2Zvcm0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8qKlxuICogQ2xlYXIgYWxsIGNhY2hlZCBwcm9qZWN0aW9ucyBhbmQgdHJhbnNmb3Jtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWxsUHJvamVjdGlvbnMoKSB7XG4gICAgY2xlYXJQcm9qKCk7XG4gICAgY2xlYXJUcmFuc2Zvcm1GdW5jcygpO1xufVxuLyoqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb258c3RyaW5nfHVuZGVmaW5lZH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGRlZmF1bHRDb2RlIERlZmF1bHQgY29kZS5cbiAqIEByZXR1cm4ge1Byb2plY3Rpb259IFByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0aW9uKHByb2plY3Rpb24sIGRlZmF1bHRDb2RlKSB7XG4gICAgaWYgKCFwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBnZXQoZGVmYXVsdENvZGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcHJvamVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGdldChwcm9qZWN0aW9uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge1Byb2plY3Rpb259ICovIChwcm9qZWN0aW9uKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+VHJhbnNmb3JtRnVuY3Rpb259IGZyb20gYSBzaW1wbGUgMkQgY29vcmRpbmF0ZSB0cmFuc2Zvcm1cbiAqIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZFRyYW5zZm9ybSBDb29yZGluYXRlXG4gKiAgICAgdHJhbnNmb3JtLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGNvb3JkVHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICAgICAgdmFyIG91dHB1dCA9IG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCA/IG9wdF9vdXRwdXQgOiBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBjb29yZFRyYW5zZm9ybShbaW5wdXRbaV0sIGlucHV0W2kgKyAxXV0pO1xuICAgICAgICAgICAgb3V0cHV0W2ldID0gcG9pbnRbMF07XG4gICAgICAgICAgICBvdXRwdXRbaSArIDFdID0gcG9pbnRbMV07XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSAyOyAtLWopIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbaSArIGpdID0gaW5wdXRbaSArIGpdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBiZXR3ZWVuIHRoZVxuICogc291cmNlIHByb2plY3Rpb24gYW5kIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogVGhlIGZvcndhcmQgYW5kIGludmVyc2UgZnVuY3Rpb25zIGNvbnZlcnQgY29vcmRpbmF0ZSBwYWlyczsgdGhpcyBmdW5jdGlvblxuICogY29udmVydHMgdGhlc2UgaW50byB0aGUgZnVuY3Rpb25zIHVzZWQgaW50ZXJuYWxseSB3aGljaCBhbHNvIGhhbmRsZVxuICogZXh0ZW50cyBhbmQgY29vcmRpbmF0ZSBhcnJheXMuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZm9yd2FyZCBUaGUgZm9yd2FyZCB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGludmVyc2UgVGhlIGludmVyc2UgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24gdG8gdGhlIHNvdXJjZVxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXMoc291cmNlLCBkZXN0aW5hdGlvbiwgZm9yd2FyZCwgaW52ZXJzZSkge1xuICAgIHZhciBzb3VyY2VQcm9qID0gZ2V0KHNvdXJjZSk7XG4gICAgdmFyIGRlc3RQcm9qID0gZ2V0KGRlc3RpbmF0aW9uKTtcbiAgICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZVByb2osIGRlc3RQcm9qLCBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShmb3J3YXJkKSk7XG4gICAgYWRkVHJhbnNmb3JtRnVuYyhkZXN0UHJvaiwgc291cmNlUHJvaiwgY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oaW52ZXJzZSkpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIGxvbmdpdHVkZS9sYXRpdHVkZSB0byBhIGRpZmZlcmVudCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIGFzIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUsIGkuZS5cbiAqICAgICBhbiBhcnJheSB3aXRoIGxvbmdpdHVkZSBhcyAxc3QgYW5kIGxhdGl0dWRlIGFzIDJuZCBlbGVtZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gW29wdF9wcm9qZWN0aW9uXSBUYXJnZXQgcHJvamVjdGlvbi4gVGhlXG4gKiAgICAgZGVmYXVsdCBpcyBXZWIgTWVyY2F0b3IsIGkuZS4gJ0VQU0c6Mzg1NycuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZSBwcm9qZWN0ZWQgdG8gdGhlIHRhcmdldCBwcm9qZWN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUxvbkxhdChjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbikge1xuICAgIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgJ0VQU0c6NDMyNicsIG9wdF9wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfcHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgdG8gbG9uZ2l0dWRlL2xhdGl0dWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBQcm9qZWN0ZWQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IFtvcHRfcHJvamVjdGlvbl0gUHJvamVjdGlvbiBvZiB0aGUgY29vcmRpbmF0ZS5cbiAqICAgICBUaGUgZGVmYXVsdCBpcyBXZWIgTWVyY2F0b3IsIGkuZS4gJ0VQU0c6Mzg1NycuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZSBhcyBsb25naXR1ZGUgYW5kIGxhdGl0dWRlLCBpLmUuIGFuIGFycmF5XG4gKiAgICAgd2l0aCBsb25naXR1ZGUgYXMgMXN0IGFuZCBsYXRpdHVkZSBhcyAybmQgZWxlbWVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvTG9uTGF0KGNvb3JkaW5hdGUsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgdmFyIGxvbkxhdCA9IHRyYW5zZm9ybShjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xuICAgIHZhciBsb24gPSBsb25MYXRbMF07XG4gICAgaWYgKGxvbiA8IC0xODAgfHwgbG9uID4gMTgwKSB7XG4gICAgICAgIGxvbkxhdFswXSA9IG1vZHVsbyhsb24gKyAxODAsIDM2MCkgLSAxODA7XG4gICAgfVxuICAgIHJldHVybiBsb25MYXQ7XG59XG4vKipcbiAqIENoZWNrcyBpZiB0d28gcHJvamVjdGlvbnMgYXJlIHRoZSBzYW1lLCB0aGF0IGlzIGV2ZXJ5IGNvb3JkaW5hdGUgaW4gb25lXG4gKiBwcm9qZWN0aW9uIGRvZXMgcmVwcmVzZW50IHRoZSBzYW1lIGdlb2dyYXBoaWMgcG9pbnQgYXMgdGhlIHNhbWUgY29vcmRpbmF0ZSBpblxuICogdGhlIG90aGVyIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uMSBQcm9qZWN0aW9uIDEuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24yIFByb2plY3Rpb24gMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWl2YWxlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVpdmFsZW50KHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMikge1xuICAgIGlmIChwcm9qZWN0aW9uMSA9PT0gcHJvamVjdGlvbjIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBlcXVhbFVuaXRzID0gcHJvamVjdGlvbjEuZ2V0VW5pdHMoKSA9PT0gcHJvamVjdGlvbjIuZ2V0VW5pdHMoKTtcbiAgICBpZiAocHJvamVjdGlvbjEuZ2V0Q29kZSgpID09PSBwcm9qZWN0aW9uMi5nZXRDb2RlKCkpIHtcbiAgICAgICAgcmV0dXJuIGVxdWFsVW5pdHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyA9PT0gY2xvbmVUcmFuc2Zvcm0gJiYgZXF1YWxVbml0cztcbiAgICB9XG59XG4vKipcbiAqIFNlYXJjaGVzIGluIHRoZSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgZm9yIHRoZSBmdW5jdGlvbiBmb3IgY29udmVydGluZ1xuICogY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBQcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIFByb2plY3Rpb25cbiAqICAgICBvYmplY3QuXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbikge1xuICAgIHZhciBzb3VyY2VDb2RlID0gc291cmNlUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1GdW5jKHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSk7XG4gICAgaWYgKCF0cmFuc2Zvcm1GdW5jKSB7XG4gICAgICAgIHRyYW5zZm9ybUZ1bmMgPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmM7XG59XG4vKipcbiAqIEdpdmVuIHRoZSBwcm9qZWN0aW9uLWxpa2Ugb2JqZWN0cywgc2VhcmNoZXMgZm9yIGEgdHJhbnNmb3JtYXRpb25cbiAqIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBjb29yZGluYXRlcyBhcnJheSBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGVcbiAqIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSBnZXQoc291cmNlKTtcbiAgICB2YXIgZGVzdGluYXRpb25Qcm9qZWN0aW9uID0gZ2V0KGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gc291cmNlIHByb2plY3Rpb24gdG8gZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIFRoaXMgcmV0dXJucyBhIG5ldyBjb29yZGluYXRlIChhbmQgZG9lcyBub3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCkuXG4gKlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvcHJvai50cmFuc2Zvcm1FeHRlbnR9IGZvciBleHRlbnQgdHJhbnNmb3JtYXRpb24uXG4gKiBTZWUgdGhlIHRyYW5zZm9ybSBtZXRob2Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5fkdlb21ldHJ5fSBhbmQgaXRzXG4gKiBzdWJjbGFzc2VzIGZvciBnZW9tZXRyeSB0cmFuc2Zvcm1zLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi1saWtlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKGNvb3JkaW5hdGUsIHVuZGVmaW5lZCwgY29vcmRpbmF0ZS5sZW5ndGgpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGV4dGVudCBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uICBUaGlzXG4gKiByZXR1cm5zIGEgbmV3IGV4dGVudCAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudCB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N0b3BzXSBOdW1iZXIgb2Ygc3RvcHMgcGVyIHNpZGUgdXNlZCBmb3IgdGhlIHRyYW5zZm9ybS5cbiAqIEJ5IGRlZmF1bHQgb25seSB0aGUgY29ybmVycyBhcmUgdXNlZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIHRyYW5zZm9ybWVkIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHNvdXJjZSwgZGVzdGluYXRpb24sIG9wdF9zdG9wcykge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShleHRlbnQsIHRyYW5zZm9ybUZ1bmMsIHVuZGVmaW5lZCwgb3B0X3N0b3BzKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gcG9pbnQgdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2plY3Rpb24gU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtV2l0aFByb2plY3Rpb25zKHBvaW50LCBzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pO1xuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKHBvaW50KTtcbn1cbi8qKlxuICogQHR5cGUgez9Qcm9qZWN0aW9ufVxuICovXG52YXIgdXNlclByb2plY3Rpb24gPSBudWxsO1xuLyoqXG4gKiBTZXQgdGhlIHByb2plY3Rpb24gZm9yIGNvb3JkaW5hdGVzIHN1cHBsaWVkIGZyb20gYW5kIHJldHVybmVkIGJ5IEFQSSBtZXRob2RzLlxuICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlclxuICogcHJvamVjdGlvbnMgaXMgbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VXNlclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIHVzZXJQcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBDbGVhciB0aGUgdXNlciBwcm9qZWN0aW9uIGlmIHNldC4gIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZlxuICogdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZFxuICogYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclVzZXJQcm9qZWN0aW9uKCkge1xuICAgIHVzZXJQcm9qZWN0aW9uID0gbnVsbDtcbn1cbi8qKlxuICogR2V0IHRoZSBwcm9qZWN0aW9uIGZvciBjb29yZGluYXRlcyBzdXBwbGllZCBmcm9tIGFuZCByZXR1cm5lZCBieSBBUEkgbWV0aG9kcy5cbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXJcbiAqIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZCBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqIEByZXR1cm4gez9Qcm9qZWN0aW9ufSBUaGUgdXNlciBwcm9qZWN0aW9uIChvciBudWxsIGlmIG5vdCBzZXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlclByb2plY3Rpb24oKSB7XG4gICAgcmV0dXJuIHVzZXJQcm9qZWN0aW9uO1xufVxuLyoqXG4gKiBVc2UgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyAoV0dTLTg0IGRhdHVtKSBpbiBBUEkgbWV0aG9kcy4gIE5vdGUgdGhhdCB0aGlzXG4gKiBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2YgdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyIHByb2plY3Rpb25zIGlzXG4gKiBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VHZW9ncmFwaGljKCkge1xuICAgIHNldFVzZXJQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBpbnRvIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGUgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGUgSW5wdXQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGNvb3JkaW5hdGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHNvdXJjZVByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHNvdXJjZVByb2plY3Rpb24sIHVzZXJQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBmcm9tIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGUgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGUgSW5wdXQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RQcm9qZWN0aW9uIFRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIGlucHV0IGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZGVzdFByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHVzZXJQcm9qZWN0aW9uLCBkZXN0UHJvamVjdGlvbik7XG59XG4vKipcbiAqIFJldHVybiBhbiBleHRlbnQgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBleHRlbnQgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IElucHV0IGV4dGVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGV4dGVudCBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgaW5wdXQgZXh0ZW50IGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJFeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgc291cmNlUHJvamVjdGlvbiwgdXNlclByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gYW4gZXh0ZW50IHRyYW5zZm9ybWVkIGZyb20gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgZXh0ZW50IGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBJbnB1dCBleHRlbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIGlucHV0IGV4dGVudCB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Vc2VyRXh0ZW50KGV4dGVudCwgZGVzdFByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBleHRlbnQ7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgc2FmZSBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbiBmcm9tIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gKiBcIlNhZmVcIiBtZWFucyB0aGF0IGl0IGNhbiBoYW5kbGUgd3JhcHBpbmcgb2YgeC1jb29yZGluYXRlcyBmb3IgZ2xvYmFsIHByb2plY3Rpb25zLFxuICogYW5kIHRoYXQgY29vcmRpbmF0ZXMgZXhjZWVkaW5nIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB2YWxpZGl0eSBleHRlbnQncyByYW5nZSB3aWxsIGJlXG4gKiBjbGFtcGVkIHRvIHRoZSB2YWxpZGl0eSByYW5nZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdFByb2ogRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdHJhbnNmb3JtIFRyYW5zZm9ybSBmdW5jdGlvbiAoc291cmNlIHRvIGRlc3RpYXRpb24pLlxuICogQHJldHVybiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gU2FmZSB0cmFuc2Zvcm0gZnVuY3Rpb24gKHNvdXJjZSB0byBkZXN0aWF0aW9uKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNhZmVDb29yZGluYXRlVHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RQcm9qLCB0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNvb3JkKSB7XG4gICAgICAgIHZhciBzb3VyY2VYID0gY29vcmRbMF07XG4gICAgICAgIHZhciBzb3VyY2VZID0gY29vcmRbMV07XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZCwgd29ybGRzQXdheTtcbiAgICAgICAgaWYgKHNvdXJjZVByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZUV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICB2YXIgc291cmNlRXh0ZW50V2lkdGggPSBnZXRXaWR0aChzb3VyY2VFeHRlbnQpO1xuICAgICAgICAgICAgd29ybGRzQXdheSA9IGdldFdvcmxkc0F3YXkoY29vcmQsIHNvdXJjZVByb2osIHNvdXJjZUV4dGVudFdpZHRoKTtcbiAgICAgICAgICAgIGlmICh3b3JsZHNBd2F5KSB7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSB4IHRvIHRoZSByZWFsIHdvcmxkXG4gICAgICAgICAgICAgICAgc291cmNlWCA9IHNvdXJjZVggLSB3b3JsZHNBd2F5ICogc291cmNlRXh0ZW50V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzb3VyY2VYID0gY2xhbXAoc291cmNlWCwgc291cmNlRXh0ZW50WzBdLCBzb3VyY2VFeHRlbnRbMl0pO1xuICAgICAgICAgICAgc291cmNlWSA9IGNsYW1wKHNvdXJjZVksIHNvdXJjZUV4dGVudFsxXSwgc291cmNlRXh0ZW50WzNdKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkID0gdHJhbnNmb3JtKFtzb3VyY2VYLCBzb3VyY2VZXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZCA9IHRyYW5zZm9ybShjb29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdvcmxkc0F3YXkgJiYgZGVzdFByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgICAgICAgLy8gTW92ZSB0cmFuc2Zvcm1lZCBjb29yZGluYXRlIGJhY2sgdG8gdGhlIG9mZnNldCB3b3JsZFxuICAgICAgICAgICAgdHJhbnNmb3JtZWRbMF0gKz0gd29ybGRzQXdheSAqIGdldFdpZHRoKGRlc3RQcm9qLmdldEV4dGVudCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XG4gICAgfTtcbn1cbi8qKlxuICogQWRkIHRyYW5zZm9ybXMgdG8gYW5kIGZyb20gRVBTRzo0MzI2IGFuZCBFUFNHOjM4NTcuICBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZFxuICogYnkgd2hlbiB0aGlzIG1vZHVsZSBpcyBleGVjdXRlZCBhbmQgc2hvdWxkIG9ubHkgbmVlZCB0byBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXJcbiAqIGBjbGVhckFsbFByb2plY3Rpb25zKClgIGlzIGNhbGxlZCAoZS5nLiBpbiB0ZXN0cykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tb24oKSB7XG4gICAgLy8gQWRkIHRyYW5zZm9ybWF0aW9ucyB0aGF0IGRvbid0IGFsdGVyIGNvb3JkaW5hdGVzIHRvIGNvbnZlcnQgd2l0aGluIHNldCBvZlxuICAgIC8vIHByb2plY3Rpb25zIHdpdGggZXF1YWwgbWVhbmluZy5cbiAgICBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMoRVBTRzM4NTdfUFJPSkVDVElPTlMpO1xuICAgIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHNDMyNl9QUk9KRUNUSU9OUyk7XG4gICAgLy8gQWRkIHRyYW5zZm9ybWF0aW9ucyB0byBjb252ZXJ0IEVQU0c6NDMyNiBsaWtlIGNvb3JkaW5hdGVzIHRvIEVQU0c6Mzg1NyBsaWtlXG4gICAgLy8gY29vcmRpbmF0ZXMgYW5kIGJhY2suXG4gICAgYWRkRXF1aXZhbGVudFRyYW5zZm9ybXMoRVBTRzQzMjZfUFJPSkVDVElPTlMsIEVQU0czODU3X1BST0pFQ1RJT05TLCBmcm9tRVBTRzQzMjYsIHRvRVBTRzQzMjYpO1xufVxuYWRkQ29tbW9uKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllclxuICovXG5pbXBvcnQgQ2FudmFzTGF5ZXJSZW5kZXJlciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBUaWxlUmFuZ2UgZnJvbSAnLi4vLi4vVGlsZVJhbmdlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIG1ha2VJbnZlcnNlLCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlRW1wdHksIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBnZXRUb3BMZWZ0LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBmcm9tVXNlckV4dGVudCB9IGZyb20gJy4uLy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgdG9TdHJpbmcgYXMgdG9UcmFuc2Zvcm1TdHJpbmcgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgcmVuZGVyZXIgZm9yIHRpbGUgbGF5ZXJzLlxuICogQGFwaVxuICovXG52YXIgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc1RpbGVMYXllclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gdGlsZUxheWVyIFRpbGUgbGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIodGlsZUxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVMYXllcikgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlcmVkIGV4dGVudCBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgcHJldmlvdXMgYHJlbmRlckZyYW1lKClgIGNhbGxcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkRXh0ZW50XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUHJvamVjdGlvbiA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJldmlzaW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFRpbGVzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5ld1RpbGVzXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBUaWxlUmFuZ2VfID0gbmV3IFRpbGVSYW5nZSgwLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaWxlIGlzIGRyYXdhYmxlLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5pc0RyYXdhYmxlVGlsZSA9IGZ1bmN0aW9uICh0aWxlKSB7XG4gICAgICAgIHZhciB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB0aWxlU3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIHZhciB1c2VJbnRlcmltVGlsZXNPbkVycm9yID0gdGlsZUxheWVyLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IoKTtcbiAgICAgICAgcmV0dXJuICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSB8fFxuICAgICAgICAgICAgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1IgJiYgIXVzZUludGVyaW1UaWxlc09uRXJyb3IpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB0aWxlU291cmNlID0gdGlsZUxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICB2YXIgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgICAgIGlmICghdGlsZUxheWVyLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gdXNlSW50ZXJpbVRpbGVzT25FcnJvciBpcyBmYWxzZSwgd2UgY29uc2lkZXIgdGhlIGVycm9yIHRpbGUgYXMgbG9hZGVkLlxuICAgICAgICAgICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkxPQURFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIFByZWxvYWRlZCB0aWxlcyBmb3IgbG93ZXIgcmVzb2x1dGlvbnMgbWlnaHQgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLlxuICAgICAgICAgICAgICAgIHRoaXMubmV3VGlsZXNfID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgICAgICAgIHRpbGUgPSB0aWxlLmdldEludGVyaW1UaWxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fSB0aWxlcyBMb29rdXAgb2YgbG9hZGVkIHRpbGVzIGJ5IHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dm9pZH0gSWYgYGZhbHNlYCwgdGhlIHRpbGUgd2lsbCBub3QgYmUgY29uc2lkZXJlZCBsb2FkZWQuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUubG9hZGVkVGlsZUNhbGxiYWNrLmNhbGwodGhpcywgdGlsZXMsIHpvb20sIHRpbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSB3aGV0aGVyIHJlbmRlciBzaG91bGQgYmUgY2FsbGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXIgaXMgcmVhZHkgdG8gYmUgcmVuZGVyZWQuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0TGF5ZXIoKS5nZXRTb3VyY2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciB0aGUgbGF5ZXIuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHRoYXQgbWF5IGJlIHVzZWQgdG8gcmVuZGVyIGNvbnRlbnQgdG8uXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSByZW5kZXJlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXlbZnJhbWVTdGF0ZS5sYXllckluZGV4XTtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB2YXIgdmlld1Jlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHZpZXdDZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB2aWV3U3RhdGUucm90YXRpb247XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgdGlsZUxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgdGlsZVNvdXJjZSA9IHRpbGVMYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgdmFyIHNvdXJjZVJldmlzaW9uID0gdGlsZVNvdXJjZS5nZXRSZXZpc2lvbigpO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aWxlU291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHogPSB0aWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbih2aWV3UmVzb2x1dGlvbiwgdGlsZVNvdXJjZS56RGlyZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIGV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgICAgICB2YXIgbGF5ZXJFeHRlbnQgPSBsYXllclN0YXRlLmV4dGVudCAmJiBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgcHJvamVjdGlvbik7XG4gICAgICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgICAgICAgZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudCwgZnJvbVVzZXJFeHRlbnQobGF5ZXJTdGF0ZS5leHRlbnQsIHByb2plY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZVBpeGVsUmF0aW8gPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgICAgICAvLyBkZXNpcmVkIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyBpbiBwaXhlbHNcbiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5yb3VuZChmcmFtZVN0YXRlLnNpemVbMF0gKiB0aWxlUGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVsxXSAqIHRpbGVQaXhlbFJhdGlvKTtcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KHdpZHRoICogd2lkdGggKyBoZWlnaHQgKiBoZWlnaHQpKTtcbiAgICAgICAgICAgIHdpZHRoID0gc2l6ZTtcbiAgICAgICAgICAgIGhlaWdodCA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR4ID0gKHRpbGVSZXNvbHV0aW9uICogd2lkdGgpIC8gMiAvIHRpbGVQaXhlbFJhdGlvO1xuICAgICAgICB2YXIgZHkgPSAodGlsZVJlc29sdXRpb24gKiBoZWlnaHQpIC8gMiAvIHRpbGVQaXhlbFJhdGlvO1xuICAgICAgICB2YXIgY2FudmFzRXh0ZW50ID0gW1xuICAgICAgICAgICAgdmlld0NlbnRlclswXSAtIGR4LFxuICAgICAgICAgICAgdmlld0NlbnRlclsxXSAtIGR5LFxuICAgICAgICAgICAgdmlld0NlbnRlclswXSArIGR4LFxuICAgICAgICAgICAgdmlld0NlbnRlclsxXSArIGR5LFxuICAgICAgICBdO1xuICAgICAgICB2YXIgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHRpbGVzVG9EcmF3QnlaID0ge307XG4gICAgICAgIHRpbGVzVG9EcmF3QnlaW3pdID0ge307XG4gICAgICAgIHZhciBmaW5kTG9hZGVkVGlsZXMgPSB0aGlzLmNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIodGlsZVNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXNUb0RyYXdCeVopO1xuICAgICAgICB2YXIgdG1wRXh0ZW50ID0gdGhpcy50bXBFeHRlbnQ7XG4gICAgICAgIHZhciB0bXBUaWxlUmFuZ2UgPSB0aGlzLnRtcFRpbGVSYW5nZV87XG4gICAgICAgIHRoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgICAgICAgIHZhciB0aWxlID0gdGhpcy5nZXRUaWxlKHosIHgsIHksIGZyYW1lU3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSBnZXRVaWQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZXNUb0RyYXdCeVpbel1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluVHJhbnNpdGlvbiA9IHRpbGUuaW5UcmFuc2l0aW9uKHVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubmV3VGlsZXNfICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluVHJhbnNpdGlvbiB8fCB0aGlzLnJlbmRlcmVkVGlsZXMuaW5kZXhPZih0aWxlKSA9PT0gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdUaWxlc18gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgbG9vayBmb3IgYWx0IHRpbGVzIGlmIGFscGhhIGlzIDFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjaGlsZFRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlKHRpbGUudGlsZUNvb3JkLCB0bXBUaWxlUmFuZ2UsIHRtcEV4dGVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRUaWxlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZpbmRMb2FkZWRUaWxlcyh6ICsgMSwgY2hpbGRUaWxlUmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNvdmVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSh0aWxlLnRpbGVDb29yZCwgZmluZExvYWRlZFRpbGVzLCB0bXBUaWxlUmFuZ2UsIHRtcEV4dGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjYW52YXNTY2FsZSA9IHRpbGVSZXNvbHV0aW9uIC8gdmlld1Jlc29sdXRpb247XG4gICAgICAgIC8vIHNldCBmb3J3YXJkIGFuZCBpbnZlcnNlIHBpeGVsIHRyYW5zZm9ybXNcbiAgICAgICAgY29tcG9zZVRyYW5zZm9ybSh0aGlzLnBpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLnNpemVbMF0gLyAyLCBmcmFtZVN0YXRlLnNpemVbMV0gLyAyLCAxIC8gdGlsZVBpeGVsUmF0aW8sIDEgLyB0aWxlUGl4ZWxSYXRpbywgcm90YXRpb24sIC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyKTtcbiAgICAgICAgdmFyIGNhbnZhc1RyYW5zZm9ybSA9IHRvVHJhbnNmb3JtU3RyaW5nKHRoaXMucGl4ZWxUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLnVzZUNvbnRhaW5lcih0YXJnZXQsIGNhbnZhc1RyYW5zZm9ybSwgbGF5ZXJTdGF0ZS5vcGFjaXR5KTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIHZhciBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgbWFrZUludmVyc2UodGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIHRoaXMucGl4ZWxUcmFuc2Zvcm0pO1xuICAgICAgICAvLyBzZXQgc2NhbGUgdHJhbnNmb3JtIGZvciBjYWxjdWxhdGluZyB0aWxlIHBvc2l0aW9ucyBvbiB0aGUgY2FudmFzXG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIGNhbnZhc1NjYWxlLCBjYW52YXNTY2FsZSwgMCwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpO1xuICAgICAgICBpZiAoY2FudmFzLndpZHRoICE9IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuY29udGFpbmVyUmV1c2VkKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpcFVucm90YXRlZChjb250ZXh0LCBmcmFtZVN0YXRlLCBsYXllckV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKGNvbnRleHQsIHRpbGVTb3VyY2UuZ2V0Q29udGV4dE9wdGlvbnMoKSk7XG4gICAgICAgIHRoaXMucHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgICAgICB2YXIgenMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5WikubWFwKE51bWJlcik7XG4gICAgICAgIHpzLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgICAgIHZhciBjbGlwcywgY2xpcFpzLCBjdXJyZW50Q2xpcDtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUub3BhY2l0eSA9PT0gMSAmJlxuICAgICAgICAgICAgKCF0aGlzLmNvbnRhaW5lclJldXNlZCB8fFxuICAgICAgICAgICAgICAgIHRpbGVTb3VyY2UuZ2V0T3BhcXVlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pKSkge1xuICAgICAgICAgICAgenMgPSB6cy5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbGlwcyA9IFtdO1xuICAgICAgICAgICAgY2xpcFpzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IHpzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFogPSB6c1tpXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGlsZVBpeGVsU2l6ZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZShjdXJyZW50WiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKGN1cnJlbnRaKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIGR4XzEgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVswXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgICAgICAgdmFyIGR5XzEgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVsxXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgICAgICAgdmFyIG9yaWdpblRpbGVDb29yZCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihnZXRUb3BMZWZ0KGNhbnZhc0V4dGVudCksIGN1cnJlbnRaKTtcbiAgICAgICAgICAgIHZhciBvcmlnaW5UaWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KG9yaWdpblRpbGVDb29yZCk7XG4gICAgICAgICAgICB2YXIgb3JpZ2luXzEgPSBhcHBseVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIFtcbiAgICAgICAgICAgICAgICAodGlsZVBpeGVsUmF0aW8gKiAob3JpZ2luVGlsZUV4dGVudFswXSAtIGNhbnZhc0V4dGVudFswXSkpIC9cbiAgICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgKHRpbGVQaXhlbFJhdGlvICogKGNhbnZhc0V4dGVudFszXSAtIG9yaWdpblRpbGVFeHRlbnRbM10pKSAvXG4gICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB2YXIgdGlsZUd1dHRlciA9IHRpbGVQaXhlbFJhdGlvICogdGlsZVNvdXJjZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGVzVG9EcmF3ID0gdGlsZXNUb0RyYXdCeVpbY3VycmVudFpdO1xuICAgICAgICAgICAgZm9yICh2YXIgdGlsZUNvb3JkS2V5IGluIHRpbGVzVG9EcmF3KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZXNUb0RyYXdbdGlsZUNvb3JkS2V5XSk7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVDb29yZCA9IHRpbGUudGlsZUNvb3JkO1xuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlZ2VyIHBvc2l0aW9ucyBhbmQgc2l6ZXMgc28gdGhhdCB0aWxlcyBhbGlnblxuICAgICAgICAgICAgICAgIHZhciB4SW5kZXggPSBvcmlnaW5UaWxlQ29vcmRbMV0gLSB0aWxlQ29vcmRbMV07XG4gICAgICAgICAgICAgICAgdmFyIG5leHRYID0gTWF0aC5yb3VuZChvcmlnaW5fMVswXSAtICh4SW5kZXggLSAxKSAqIGR4XzEpO1xuICAgICAgICAgICAgICAgIHZhciB5SW5kZXggPSBvcmlnaW5UaWxlQ29vcmRbMl0gLSB0aWxlQ29vcmRbMl07XG4gICAgICAgICAgICAgICAgdmFyIG5leHRZID0gTWF0aC5yb3VuZChvcmlnaW5fMVsxXSAtICh5SW5kZXggLSAxKSAqIGR5XzEpO1xuICAgICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChvcmlnaW5fMVswXSAtIHhJbmRleCAqIGR4XzEpO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5yb3VuZChvcmlnaW5fMVsxXSAtIHlJbmRleCAqIGR5XzEpO1xuICAgICAgICAgICAgICAgIHZhciB3ID0gbmV4dFggLSB4O1xuICAgICAgICAgICAgICAgIHZhciBoID0gbmV4dFkgLSB5O1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uID0geiA9PT0gY3VycmVudFo7XG4gICAgICAgICAgICAgICAgdmFyIGluVHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gJiYgdGlsZS5nZXRBbHBoYShnZXRVaWQodGhpcyksIGZyYW1lU3RhdGUudGltZSkgIT09IDE7XG4gICAgICAgICAgICAgICAgaWYgKCFpblRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGlwIG1hc2sgZm9yIHJlZ2lvbnMgaW4gdGhpcyB0aWxlIHRoYXQgYWxyZWFkeSBmaWxsZWQgYnkgYSBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDbGlwID0gW3gsIHksIHggKyB3LCB5LCB4ICsgdywgeSArIGgsIHgsIHkgKyBoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDAsIGlpID0gY2xpcHMubGVuZ3RoOyBpXzEgPCBpaTsgKytpXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiAhPT0gY3VycmVudFogJiYgY3VycmVudFogPCBjbGlwWnNbaV8xXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IGNsaXBzW2lfMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50ZXItY2xvY2t3aXNlIChvdXRlciByaW5nKSBmb3IgY3VycmVudCB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGN1cnJlbnRDbGlwWzBdLCBjdXJyZW50Q2xpcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzJdLCBjdXJyZW50Q2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzRdLCBjdXJyZW50Q2xpcFs1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzZdLCBjdXJyZW50Q2xpcFs3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb2Nrd2lzZSAoaW5uZXIgcmluZykgZm9yIGhpZ2hlciB6IHRpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oY2xpcFs2XSwgY2xpcFs3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbNF0sIGNsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzJdLCBjbGlwWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFswXSwgY2xpcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBzLnB1c2goY3VycmVudENsaXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFpzLnB1c2goY3VycmVudFopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoeCwgeSwgdywgaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3VGlsZUltYWdlKHRpbGUsIGZyYW1lU3RhdGUsIHgsIHksIHcsIGgsIHRpbGVHdXR0ZXIsIHRyYW5zaXRpb24sIGxheWVyU3RhdGUub3BhY2l0eSk7XG4gICAgICAgICAgICAgICAgaWYgKGNsaXBzICYmICFpblRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy51bnNoaWZ0KHRpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLnB1c2godGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVXNlZFRpbGVzKGZyYW1lU3RhdGUudXNlZFRpbGVzLCB0aWxlU291cmNlLCB0aWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gPSBzb3VyY2VSZXZpc2lvbjtcbiAgICAgICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb24gPSB0aWxlUmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5leHRlbnRDaGFuZ2VkID1cbiAgICAgICAgICAgICF0aGlzLnJlbmRlcmVkRXh0ZW50XyB8fCAhZXF1YWxzKHRoaXMucmVuZGVyZWRFeHRlbnRfLCBjYW52YXNFeHRlbnQpO1xuICAgICAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGNhbnZhc0V4dGVudDtcbiAgICAgICAgdGhpcy5yZW5kZXJlZFBpeGVsUmF0aW8gPSBwaXhlbFJhdGlvO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUHJvamVjdGlvbiA9IHByb2plY3Rpb247XG4gICAgICAgIHRoaXMubWFuYWdlVGlsZVB5cmFtaWQoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSwgdGlsZUdyaWQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGV4dGVudCwgeiwgdGlsZUxheWVyLmdldFByZWxvYWQoKSk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVFeHBpcmVDYWNoZShmcmFtZVN0YXRlLCB0aWxlU291cmNlKTtcbiAgICAgICAgdGhpcy5wb3N0UmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgICAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYW52YXNUcmFuc2Zvcm0gIT09IGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBjYW52YXNUcmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggTGVmdCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUb3Agb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGggb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGggSGVpZ2h0IG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBndXR0ZXIgVGlsZSBndXR0ZXIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB0cmFuc2l0aW9uIEFwcGx5IGFuIGFscGhhIHRyYW5zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZHJhd1RpbGVJbWFnZSA9IGZ1bmN0aW9uICh0aWxlLCBmcmFtZVN0YXRlLCB4LCB5LCB3LCBoLCBndXR0ZXIsIHRyYW5zaXRpb24sIG9wYWNpdHkpIHtcbiAgICAgICAgdmFyIGltYWdlID0gdGhpcy5nZXRUaWxlSW1hZ2UodGlsZSk7XG4gICAgICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICB2YXIgdGlsZUFscGhhID0gdHJhbnNpdGlvbiA/IHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpIDogMTtcbiAgICAgICAgdmFyIGFscGhhID0gb3BhY2l0eSAqIHRpbGVBbHBoYTtcbiAgICAgICAgdmFyIGFscGhhQ2hhbmdlZCA9IGFscGhhICE9PSB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSBhbHBoYTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCBndXR0ZXIsIGd1dHRlciwgaW1hZ2Uud2lkdGggLSAyICogZ3V0dGVyLCBpbWFnZS5oZWlnaHQgLSAyICogZ3V0dGVyLCB4LCB5LCB3LCBoKTtcbiAgICAgICAgaWYgKGFscGhhQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZUFscGhhICE9PSAxKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHRpbGUuZW5kVHJhbnNpdGlvbih1aWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2VcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IGNvbnRleHQuY2FudmFzIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgZnJvbSBhIHRpbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlSW1hZ2UgPSBmdW5jdGlvbiAodGlsZSkge1xuICAgICAgICByZXR1cm4gdGlsZS5nZXRJbWFnZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5zY2hlZHVsZUV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UpIHtcbiAgICAgICAgaWYgKHRpbGVTb3VyY2UuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlU291cmNlLCBtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLnVzZWRUaWxlcykge1xuICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlLmV4cGlyZUNhY2hlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24sIGZyYW1lU3RhdGUudXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQobnVsbCwgdGlsZVNvdXJjZSk7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLlBvc3RSZW5kZXJGdW5jdGlvbn0gKi8gKHBvc3RSZW5kZXJGdW5jdGlvbikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL1RpbGUuanMnKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVVc2VkVGlsZXMgPSBmdW5jdGlvbiAodXNlZFRpbGVzLCB0aWxlU291cmNlLCB0aWxlKSB7XG4gICAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSB1c2UgdGlsZXNUb0RyYXdCeVogaW5zdGVhZD9cbiAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gdXNlZFRpbGVzKSkge1xuICAgICAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldID0gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hbmFnZSB0aWxlIHB5cmFtaWQuXG4gICAgICogVGhpcyBmdW5jdGlvbiBwZXJmb3JtcyBhIG51bWJlciBvZiBmdW5jdGlvbnMgcmVsYXRlZCB0byB0aGUgdGlsZXMgYXQgdGhlXG4gICAgICogY3VycmVudCB6b29tIGFuZCBsb3dlciB6b29tIGxldmVsczpcbiAgICAgKiAtIHJlZ2lzdGVycyBpZGxlIHRpbGVzIGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMgc28gdGhhdCB0aGV5IGFyZSBub3RcbiAgICAgKiAgIGRpc2NhcmRlZCBieSB0aGUgdGlsZSBxdWV1ZVxuICAgICAqIC0gZW5xdWV1ZXMgbWlzc2luZyB0aWxlc1xuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRaIEN1cnJlbnQgWi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBMb2FkIGxvdyByZXNvbHV0aW9uIHRpbGVzIHVwIHRvICdwcmVsb2FkJyBsZXZlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtvcHRfdGlsZUNhbGxiYWNrXSBUaWxlIGNhbGxiYWNrLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubWFuYWdlVGlsZVB5cmFtaWQgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSwgdGlsZUdyaWQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGV4dGVudCwgY3VycmVudFosIHByZWxvYWQsIG9wdF90aWxlQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2FudGVkVGlsZXMgPSBmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldO1xuICAgICAgICB2YXIgdGlsZVF1ZXVlID0gZnJhbWVTdGF0ZS50aWxlUXVldWU7XG4gICAgICAgIHZhciBtaW5ab29tID0gdGlsZUdyaWQuZ2V0TWluWm9vbSgpO1xuICAgICAgICB2YXIgdGlsZUNvdW50ID0gMDtcbiAgICAgICAgdmFyIHRpbGUsIHRpbGVSYW5nZSwgdGlsZVJlc29sdXRpb24sIHgsIHksIHo7XG4gICAgICAgIGZvciAoeiA9IG1pblpvb207IHogPD0gY3VycmVudFo7ICsreikge1xuICAgICAgICAgICAgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHosIHRpbGVSYW5nZSk7XG4gICAgICAgICAgICB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgICAgICBmb3IgKHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgZm9yICh5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFogLSB6IDw9IHByZWxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrdGlsZUNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YW50ZWRUaWxlc1t0aWxlLmdldEtleSgpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWxlUXVldWUuaXNLZXlRdWV1ZWQodGlsZS5nZXRLZXkoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVF1ZXVlLmVucXVldWUoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2VLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRfdGlsZUNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRfdGlsZUNhbGxiYWNrKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNvdXJjZS51c2VUaWxlKHosIHgsIHksIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRpbGVTb3VyY2UudXBkYXRlQ2FjaGVTaXplKHRpbGVDb3VudCwgcHJvamVjdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG59KENhbnZhc0xheWVyUmVuZGVyZXIpKTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fVxuICovXG5DYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXI7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVMYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVN0YXRlXG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIElETEU6IDAsXG4gICAgTE9BRElORzogMSxcbiAgICBMT0FERUQ6IDIsXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGlsZSBsb2FkaW5nIGZhaWxlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgRVJST1I6IDMsXG4gICAgRU1QVFk6IDQsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVN0YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVGlsZVxuICovXG5pbXBvcnQgQmFzZVRpbGVMYXllciBmcm9tICcuL0Jhc2VUaWxlLmpzJztcbmltcG9ydCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRm9yIGxheWVyIHNvdXJjZXMgdGhhdCBwcm92aWRlIHByZS1yZW5kZXJlZCwgdGlsZWQgaW1hZ2VzIGluIGdyaWRzIHRoYXQgYXJlXG4gKiBvcmdhbml6ZWQgYnkgem9vbSBsZXZlbHMgZm9yIHNwZWNpZmljIHJlc29sdXRpb25zLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZVNvdXJjZVR5cGVcbiAqIEBleHRlbmRzIHtCYXNlVGlsZUxheWVyPFRpbGVTb3VyY2VUeXBlPn1cbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9CYXNlVGlsZS5qc1wiKS5PcHRpb25zPFRpbGVTb3VyY2VUeXBlPn0gW29wdF9vcHRpb25zXSBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUxheWVyKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRfb3B0aW9ucykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gQSBsYXllciByZW5kZXJlci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZUxheWVyLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcih0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlTGF5ZXI7XG59KEJhc2VUaWxlTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdQcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBDRU5URVI6ICdjZW50ZXInLFxuICAgIFJFU09MVVRJT046ICdyZXNvbHV0aW9uJyxcbiAgICBST1RBVElPTjogJ3JvdGF0aW9uJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3UHJvcGVydHkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Nvb3JkaW5hdGVcbiAqL1xuaW1wb3J0IHsgZ2V0V2lkdGggfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgcGFkTnVtYmVyIH0gZnJvbSAnLi9zdHJpbmcuanMnO1xuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiB4eSBjb29yZGluYXRlLiBFeGFtcGxlOiBgWzE2LCA0OF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvb3JkaW5hdGVcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYW5kXG4gKiB0cmFuc2Zvcm1zIGl0IGludG8gYSBge3N0cmluZ31gLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoQ29vcmRpbmF0ZXx1bmRlZmluZWQpKTogc3RyaW5nfSBDb29yZGluYXRlRm9ybWF0XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQWRkIGBkZWx0YWAgdG8gYGNvb3JkaW5hdGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kIHJldHVybmVkXG4gKiBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHthZGR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBhZGQoY29vcmQsIFstMiwgNF0pO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbNS44NSwgNTEuOTgzMzMzXVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBkZWx0YSBEZWx0YS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBpbnB1dCBjb29yZGluYXRlIGFkanVzdGVkIGJ5XG4gKiB0aGUgZ2l2ZW4gZGVsdGEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoY29vcmRpbmF0ZSwgZGVsdGEpIHtcbiAgICBjb29yZGluYXRlWzBdICs9ICtkZWx0YVswXTtcbiAgICBjb29yZGluYXRlWzFdICs9ICtkZWx0YVsxXTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBjaXJjbGUuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBUaGUgY2lyY2xlLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludCBvbiB0aGUgY2lyY3VtZmVyZW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPbkNpcmNsZShjb29yZGluYXRlLCBjaXJjbGUpIHtcbiAgICB2YXIgciA9IGNpcmNsZS5nZXRSYWRpdXMoKTtcbiAgICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICAgIHZhciB4MCA9IGNlbnRlclswXTtcbiAgICB2YXIgeTAgPSBjZW50ZXJbMV07XG4gICAgdmFyIHgxID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeTEgPSBjb29yZGluYXRlWzFdO1xuICAgIHZhciBkeCA9IHgxIC0geDA7XG4gICAgdmFyIGR5ID0geTEgLSB5MDtcbiAgICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICAgICAgZHggPSAxO1xuICAgIH1cbiAgICB2YXIgZCA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgdmFyIHggPSB4MCArIChyICogZHgpIC8gZDtcbiAgICB2YXIgeSA9IHkwICsgKHIgKiBkeSkgLyBkO1xuICAgIHJldHVybiBbeCwgeV07XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgc2VnbWVudC5cbiAqIFRoaXMgaXMgdGhlIGZvb3Qgb2YgdGhlIHBlcnBlbmRpY3VsYXIgb2YgdGhlIGNvb3JkaW5hdGUgdG8gdGhlIHNlZ21lbnQgd2hlblxuICogdGhlIGZvb3QgaXMgb24gdGhlIHNlZ21lbnQsIG9yIHRoZSBjbG9zZXN0IHNlZ21lbnQgY29vcmRpbmF0ZSB3aGVuIHRoZSBmb290XG4gKiBpcyBvdXRzaWRlIHRoZSBzZWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7QXJyYXk8Q29vcmRpbmF0ZT59IHNlZ21lbnQgVGhlIHR3byBjb29yZGluYXRlc1xuICogb2YgdGhlIHNlZ21lbnQuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZlxuICogdGhlIGNvb3JkaW5hdGUgdG8gdGhlIHNlZ21lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgICB2YXIgeDAgPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5MCA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIHN0YXJ0ID0gc2VnbWVudFswXTtcbiAgICB2YXIgZW5kID0gc2VnbWVudFsxXTtcbiAgICB2YXIgeDEgPSBzdGFydFswXTtcbiAgICB2YXIgeTEgPSBzdGFydFsxXTtcbiAgICB2YXIgeDIgPSBlbmRbMF07XG4gICAgdmFyIHkyID0gZW5kWzFdO1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICB2YXIgYWxvbmcgPSBkeCA9PT0gMCAmJiBkeSA9PT0gMFxuICAgICAgICA/IDBcbiAgICAgICAgOiAoZHggKiAoeDAgLSB4MSkgKyBkeSAqICh5MCAtIHkxKSkgLyAoZHggKiBkeCArIGR5ICogZHkgfHwgMCk7XG4gICAgdmFyIHgsIHk7XG4gICAgaWYgKGFsb25nIDw9IDApIHtcbiAgICAgICAgeCA9IHgxO1xuICAgICAgICB5ID0geTE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFsb25nID49IDEpIHtcbiAgICAgICAgeCA9IHgyO1xuICAgICAgICB5ID0geTI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB4ID0geDEgKyBhbG9uZyAqIGR4O1xuICAgICAgICB5ID0geTEgKyBhbG9uZyAqIGR5O1xuICAgIH1cbiAgICByZXR1cm4gW3gsIHldO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGVGb3JtYXR9IGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gKiB1c2VkIHRvIGZvcm1hdFxuICogYSB7Q29vcmRpbmF0ZX0gdG8gYSBzdHJpbmcuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2NyZWF0ZVN0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHN0cmluZ2lmeUZ1bmMgPSBjcmVhdGVTdHJpbmdYWSgpO1xuICogICAgIHZhciBvdXQgPSBzdHJpbmdpZnlGdW5jKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc4LCA0OCdcbiAqXG4gKiBFeGFtcGxlIHdpdGggZXhwbGljaXRseSBzcGVjaWZ5aW5nIDIgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKDIpO1xuICogICAgIHZhciBvdXQgPSBzdHJpbmdpZnlGdW5jKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc3Ljg1LCA0Ny45OCdcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZUZvcm1hdH0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHJpbmdYWShvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nIFhZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZ1hZKGNvb3JkaW5hdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cyk7XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBoZW1pc3BoZXJlcyBIZW1pc3BoZXJlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIERlZ3JlZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVzVG9TdHJpbmdIRE1TKGhlbWlzcGhlcmVzLCBkZWdyZWVzLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICB2YXIgbm9ybWFsaXplZERlZ3JlZXMgPSBtb2R1bG8oZGVncmVlcyArIDE4MCwgMzYwKSAtIDE4MDtcbiAgICB2YXIgeCA9IE1hdGguYWJzKDM2MDAgKiBub3JtYWxpemVkRGVncmVlcyk7XG4gICAgdmFyIGRmbFByZWNpc2lvbiA9IG9wdF9mcmFjdGlvbkRpZ2l0cyB8fCAwO1xuICAgIHZhciBwcmVjaXNpb24gPSBNYXRoLnBvdygxMCwgZGZsUHJlY2lzaW9uKTtcbiAgICB2YXIgZGVnID0gTWF0aC5mbG9vcih4IC8gMzYwMCk7XG4gICAgdmFyIG1pbiA9IE1hdGguZmxvb3IoKHggLSBkZWcgKiAzNjAwKSAvIDYwKTtcbiAgICB2YXIgc2VjID0geCAtIGRlZyAqIDM2MDAgLSBtaW4gKiA2MDtcbiAgICBzZWMgPSBNYXRoLmNlaWwoc2VjICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgICBpZiAoc2VjID49IDYwKSB7XG4gICAgICAgIHNlYyA9IDA7XG4gICAgICAgIG1pbiArPSAxO1xuICAgIH1cbiAgICBpZiAobWluID49IDYwKSB7XG4gICAgICAgIG1pbiA9IDA7XG4gICAgICAgIGRlZyArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gKGRlZyArXG4gICAgICAgICdcXHUwMGIwICcgK1xuICAgICAgICBwYWROdW1iZXIobWluLCAyKSArXG4gICAgICAgICdcXHUyMDMyICcgK1xuICAgICAgICBwYWROdW1iZXIoc2VjLCAyLCBkZmxQcmVjaXNpb24pICtcbiAgICAgICAgJ1xcdTIwMzMnICtcbiAgICAgICAgKG5vcm1hbGl6ZWREZWdyZWVzID09IDBcbiAgICAgICAgICAgID8gJydcbiAgICAgICAgICAgIDogJyAnICsgaGVtaXNwaGVyZXMuY2hhckF0KG5vcm1hbGl6ZWREZWdyZWVzIDwgMCA/IDEgOiAwKSkpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gdG8gYSBzdHJpbmdcbiAqIHVzaW5nIHRoZSBnaXZlbiBzdHJpbmcgdGVtcGxhdGUuIFRoZSBzdHJpbmdzIGB7eH1gIGFuZCBge3l9YCBpbiB0aGUgdGVtcGxhdGVcbiAqIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgZmlyc3QgYW5kIHNlY29uZCBjb29yZGluYXRlIHZhbHVlcyByZXNwZWN0aXZlbHkuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2Zvcm1hdH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIHZhciBvdXQgPSBmb3JtYXQoY29vcmQsIHRlbXBsYXRlKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICdDb29yZGluYXRlIGlzICg4fDQ4KS4nXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgdGhlIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2Zvcm1hdH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIHZhciBvdXQgPSBmb3JtYXQoY29vcmQsIHRlbXBsYXRlLCAyKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICdDb29yZGluYXRlIGlzICg3Ljg1fDQ3Ljk4KS4nXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgQSB0ZW1wbGF0ZSBzdHJpbmcgd2l0aCBge3h9YCBhbmQgYHt5fWAgcGxhY2Vob2xkZXJzXG4gKiAgICAgdGhhdCB3aWxsIGJlIHJlcGxhY2VkIGJ5IGZpcnN0IGFuZCBzZWNvbmQgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBGb3JtYXR0ZWQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChjb29yZGluYXRlLCB0ZW1wbGF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAgICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpXG4gICAgICAgICAgICAucmVwbGFjZSgne3l9JywgY29vcmRpbmF0ZVsxXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICAgIHZhciBlcXVhbHMgPSB0cnVlO1xuICAgIGZvciAodmFyIGkgPSBjb29yZGluYXRlMS5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBpZiAoY29vcmRpbmF0ZTFbaV0gIT0gY29vcmRpbmF0ZTJbaV0pIHtcbiAgICAgICAgICAgIGVxdWFscyA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVxdWFscztcbn1cbi8qKlxuICogUm90YXRlIGBjb29yZGluYXRlYCBieSBgYW5nbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kXG4gKiByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtyb3RhdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgcm90YXRlUmFkaWFucyA9IE1hdGguUEkgLyAyOyAvLyA5MCBkZWdyZWVzXG4gKiAgICAgcm90YXRlKGNvb3JkLCByb3RhdGVSYWRpYW5zKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWy00Ny45ODMzMzMsIDcuODVdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFuLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShjb29yZGluYXRlLCBhbmdsZSkge1xuICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgY29vcmRpbmF0ZVswXSA9IHg7XG4gICAgY29vcmRpbmF0ZVsxXSA9IHk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIFNjYWxlIGBjb29yZGluYXRlYCBieSBgc2NhbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kIHJldHVybmVkXG4gKiBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc2NhbGUgPSAxLjI7XG4gKiAgICAgc2NhbGVDb29yZGluYXRlKGNvb3JkLCBzY2FsZSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs5LjQyLCA1Ny41Nzk5OTk2XVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNjYWxlIFNjYWxlIGZhY3Rvci5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShjb29yZGluYXRlLCBzY2FsZSkge1xuICAgIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gICAgY29vcmRpbmF0ZVsxXSAqPSBzY2FsZTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgICB2YXIgZHggPSBjb29yZDFbMF0gLSBjb29yZDJbMF07XG4gICAgdmFyIGR5ID0gY29vcmQxWzFdIC0gY29vcmQyWzFdO1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBEaXN0YW5jZSBiZXR3ZWVuIGNvb3JkMSBhbmQgY29vcmQyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZShjb29yZDEsIGNvb3JkMikpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNxdWFyZWQgZGlzdGFuY2UgZnJvbSBhIGNvb3JkaW5hdGUgdG8gYSBsaW5lIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBMaW5lIHNlZ21lbnQgKDJcbiAqIGNvb3JkaW5hdGVzKS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBwb2ludCB0byB0aGUgbGluZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKGNvb3JkaW5hdGUsIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkpO1xufVxuLyoqXG4gKiBGb3JtYXQgYSBnZW9ncmFwaGljIGNvb3JkaW5hdGUgd2l0aCB0aGUgaGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcywgYW5kXG4gKiBzZWNvbmRzLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjDigLMgTiA3wrAgNTDigLIgNjDigLMgRSdcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAxIGZyYWN0aW9uYWwgZGlnaXQ6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdIRE1TfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MC4w4oCzIE4gN8KwIDUw4oCyIDYwLjDigLMgRSdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMgYW5kIHNlY29uZHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ0hETVMoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIChkZWdyZWVzVG9TdHJpbmdIRE1TKCdOUycsIGNvb3JkaW5hdGVbMV0sIG9wdF9mcmFjdGlvbkRpZ2l0cykgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ0VXJywgY29vcmRpbmF0ZVswXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBGb3JtYXQgYSBjb29yZGluYXRlIGFzIGEgY29tbWEgZGVsaW1pdGVkIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nWFkoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIDEgZnJhY3Rpb25hbCBkaWdpdDpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nWFkoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuOCwgNDguMCdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFhZLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmdYWShjb29yZGluYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICByZXR1cm4gZm9ybWF0KGNvb3JkaW5hdGUsICd7eH0sIHt5fScsIG9wdF9mcmFjdGlvbkRpZ2l0cyk7XG59XG4vKipcbiAqIE1vZGlmaWVzIHRoZSBwcm92aWRlZCBjb29yZGluYXRlIGluLXBsYWNlIHRvIGJlIHdpdGhpbiB0aGUgcmVhbCB3b3JsZFxuICogZXh0ZW50LiBUaGUgbG93ZXIgcHJvamVjdGlvbiBleHRlbnQgYm91bmRhcnkgaXMgaW5jbHVzaXZlLCB0aGUgdXBwZXIgb25lXG4gKiBleGNsdXNpdmUuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIHdpdGhpbiB0aGUgcmVhbCB3b3JsZCBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwWChjb29yZGluYXRlLCBwcm9qZWN0aW9uKSB7XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSkge1xuICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb24uZ2V0RXh0ZW50KCkpO1xuICAgICAgICB2YXIgd29ybGRzQXdheSA9IGdldFdvcmxkc0F3YXkoY29vcmRpbmF0ZSwgcHJvamVjdGlvbiwgd29ybGRXaWR0aCk7XG4gICAgICAgIGlmICh3b3JsZHNBd2F5KSB7XG4gICAgICAgICAgICBjb29yZGluYXRlWzBdIC09IHdvcmxkc0F3YXkgKiB3b3JsZFdpZHRoO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc291cmNlRXh0ZW50V2lkdGhdIFdpZHRoIG9mIHRoZSBzb3VyY2UgZXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBPZmZzZXQgaW4gd29ybGQgd2lkdGhzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCBvcHRfc291cmNlRXh0ZW50V2lkdGgpIHtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIHdvcmxkc0F3YXkgPSAwO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgKGNvb3JkaW5hdGVbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdIHx8IGNvb3JkaW5hdGVbMF0gPiBwcm9qZWN0aW9uRXh0ZW50WzJdKSkge1xuICAgICAgICB2YXIgc291cmNlRXh0ZW50V2lkdGggPSBvcHRfc291cmNlRXh0ZW50V2lkdGggfHwgZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgIHdvcmxkc0F3YXkgPSBNYXRoLmZsb29yKChjb29yZGluYXRlWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyBzb3VyY2VFeHRlbnRXaWR0aCk7XG4gICAgfVxuICAgIHJldHVybiB3b3JsZHNBd2F5O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29vcmRpbmF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY2VudGVyY29uc3RyYWludFxuICovXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkKSwgbnVtYmVyLCBpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZSwgYm9vbGVhbj0sIEFycmF5PG51bWJlcj49KTogKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb25seUNlbnRlciBJZiB0cnVlLCB0aGUgY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyLlxuICogQHBhcmFtIHtib29sZWFufSBzbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIGdvIHNsaWdodGx5IG91dCBvZiB0aGUgZ2l2ZW4gZXh0ZW50XG4gKiAob25seSBkdXJpbmcgaW50ZXJhY3Rpb24gYW5kIGFuaW1hdGlvbikuXG4gKiBAcmV0dXJuIHtUeXBlfSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV4dGVudChleHRlbnQsIG9ubHlDZW50ZXIsIHNtb290aCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemU7IHVudXNlZCBpZiBgb25seUNlbnRlcmAgd2FzIHNwZWNpZmllZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9jZW50ZXJTaGlmdF0gU2hpZnQgYmV0d2VlbiBtYXAgY2VudGVyIGFuZCB2aWV3cG9ydCBjZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nLCBvcHRfY2VudGVyU2hpZnQpIHtcbiAgICAgICAgaWYgKGNlbnRlcikge1xuICAgICAgICAgICAgdmFyIHZpZXdXaWR0aCA9IG9ubHlDZW50ZXIgPyAwIDogc2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdmlld0hlaWdodCA9IG9ubHlDZW50ZXIgPyAwIDogc2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgc2hpZnRYID0gb3B0X2NlbnRlclNoaWZ0ID8gb3B0X2NlbnRlclNoaWZ0WzBdIDogMDtcbiAgICAgICAgICAgIHZhciBzaGlmdFkgPSBvcHRfY2VudGVyU2hpZnQgPyBvcHRfY2VudGVyU2hpZnRbMV0gOiAwO1xuICAgICAgICAgICAgdmFyIG1pblggPSBleHRlbnRbMF0gKyB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgICAgICAgdmFyIG1heFggPSBleHRlbnRbMl0gLSB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgICAgICAgdmFyIG1pblkgPSBleHRlbnRbMV0gKyB2aWV3SGVpZ2h0IC8gMiArIHNoaWZ0WTtcbiAgICAgICAgICAgIHZhciBtYXhZID0gZXh0ZW50WzNdIC0gdmlld0hlaWdodCAvIDIgKyBzaGlmdFk7XG4gICAgICAgICAgICAvLyBub3RlOiB3aGVuIHpvb21pbmcgb3V0IG9mIGJvdW5kcywgbWluIGFuZCBtYXggdmFsdWVzIGZvciB4IGFuZCB5IG1heVxuICAgICAgICAgICAgLy8gZW5kIHVwIGludmVydGVkIChtaW4gPiBtYXgpOyB0aGlzIGhhcyB0byBiZSBhY2NvdW50ZWQgZm9yXG4gICAgICAgICAgICBpZiAobWluWCA+IG1heFgpIHtcbiAgICAgICAgICAgICAgICBtaW5YID0gKG1heFggKyBtaW5YKSAvIDI7XG4gICAgICAgICAgICAgICAgbWF4WCA9IG1pblg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWluWSA+IG1heFkpIHtcbiAgICAgICAgICAgICAgICBtaW5ZID0gKG1heFkgKyBtaW5ZKSAvIDI7XG4gICAgICAgICAgICAgICAgbWF4WSA9IG1pblk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgeCA9IGNsYW1wKGNlbnRlclswXSwgbWluWCwgbWF4WCk7XG4gICAgICAgICAgICB2YXIgeSA9IGNsYW1wKGNlbnRlclsxXSwgbWluWSwgbWF4WSk7XG4gICAgICAgICAgICB2YXIgcmF0aW8gPSAzMCAqIHJlc29sdXRpb247XG4gICAgICAgICAgICAvLyBkdXJpbmcgYW4gaW50ZXJhY3Rpb24sIGFsbG93IHNvbWUgb3ZlcnNjcm9sbFxuICAgICAgICAgICAgaWYgKG9wdF9pc01vdmluZyAmJiBzbW9vdGgpIHtcbiAgICAgICAgICAgICAgICB4ICs9XG4gICAgICAgICAgICAgICAgICAgIC1yYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBtaW5YIC0gY2VudGVyWzBdKSAvIHJhdGlvKSArXG4gICAgICAgICAgICAgICAgICAgICAgICByYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBjZW50ZXJbMF0gLSBtYXhYKSAvIHJhdGlvKTtcbiAgICAgICAgICAgICAgICB5ICs9XG4gICAgICAgICAgICAgICAgICAgIC1yYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBtaW5ZIC0gY2VudGVyWzFdKSAvIHJhdGlvKSArXG4gICAgICAgICAgICAgICAgICAgICAgICByYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBjZW50ZXJbMV0gLSBtYXhZKSAvIHJhdGlvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbeCwgeV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIENlbnRlci5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9uZShjZW50ZXIpIHtcbiAgICByZXR1cm4gY2VudGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2VudGVyY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0SGVpZ2h0LCBnZXRXaWR0aCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpbmVhckZpbmROZWFyZXN0IH0gZnJvbSAnLi9hcnJheS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIG51bWJlciwgaW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemUsIGJvb2xlYW49KTogKG51bWJlcnx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIG1vZGlmaWVkIHJlc29sdXRpb24gdGFraW5nIGludG8gYWNjb3VudCB0aGUgdmlld3BvcnQgc2l6ZSBhbmQgbWF4aW11bVxuICogYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4RXh0ZW50IE1heGltdW0gYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSB2aWV3cG9ydFNpemUgVmlld3BvcnQgc2l6ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvd0Z1bGxFeHRlbnQgV2hldGhlciB0byBzaG93IHRoZSBmdWxsIGV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gQ2FwcGVkIHJlc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgbWF4RXh0ZW50LCB2aWV3cG9ydFNpemUsIHNob3dGdWxsRXh0ZW50KSB7XG4gICAgdmFyIHhSZXNvbHV0aW9uID0gZ2V0V2lkdGgobWF4RXh0ZW50KSAvIHZpZXdwb3J0U2l6ZVswXTtcbiAgICB2YXIgeVJlc29sdXRpb24gPSBnZXRIZWlnaHQobWF4RXh0ZW50KSAvIHZpZXdwb3J0U2l6ZVsxXTtcbiAgICBpZiAoc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHJlc29sdXRpb24sIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbikpO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5taW4ocmVzb2x1dGlvbiwgTWF0aC5taW4oeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKSk7XG59XG4vKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCByZXNvbHV0aW9uIHRvIGJlIGJldHdlZW4gbWF4UmVzb2x1dGlvbiBhbmQgbWluUmVzb2x1dGlvbiB3aGlsZVxuICogc3RpbGwgYWxsb3dpbmcgdGhlIHZhbHVlIHRvIGJlIHNsaWdodGx5IG91dCBvZiBib3VuZHMuXG4gKiBOb3RlOiB0aGUgY29tcHV0YXRpb24gaXMgYmFzZWQgb24gdGhlIGxvZ2FyaXRobSBmdW5jdGlvbiAobG4pOlxuICogIC0gYXQgMSwgbG4oeCkgaXMgMFxuICogIC0gYWJvdmUgMSwgbG4oeCkga2VlcHMgaW5jcmVhc2luZyBidXQgYXQgYSBtdWNoIHNsb3dlciBwYWNlIHRoYW4geFxuICogVGhlIGZpbmFsIHJlc3VsdCBpcyBjbGFtcGVkIHRvIHByZXZlbnQgZ2V0dGluZyB0b28gZmFyIGF3YXkgZnJvbSBib3VuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBNaW4gcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gU21vb3RoZWQgcmVzb2x1dGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgbWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbikge1xuICAgIHZhciByZXN1bHQgPSBNYXRoLm1pbihyZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uKTtcbiAgICB2YXIgcmF0aW8gPSA1MDtcbiAgICByZXN1bHQgKj1cbiAgICAgICAgTWF0aC5sb2coMSArIHJhdGlvICogTWF0aC5tYXgoMCwgcmVzb2x1dGlvbiAvIG1heFJlc29sdXRpb24gLSAxKSkgLyByYXRpbyArXG4gICAgICAgICAgICAxO1xuICAgIGlmIChtaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc3VsdCA9IE1hdGgubWF4KHJlc3VsdCwgbWluUmVzb2x1dGlvbik7XG4gICAgICAgIHJlc3VsdCAvPVxuICAgICAgICAgICAgTWF0aC5sb2coMSArIHJhdGlvICogTWF0aC5tYXgoMCwgbWluUmVzb2x1dGlvbiAvIHJlc29sdXRpb24gLSAxKSkgL1xuICAgICAgICAgICAgICAgIHJhdGlvICtcbiAgICAgICAgICAgICAgICAxO1xuICAgIH1cbiAgICByZXR1cm4gY2xhbXAocmVzdWx0LCBtaW5SZXNvbHV0aW9uIC8gMiwgbWF4UmVzb2x1dGlvbiAqIDIpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHJlc29sdXRpb25zIFJlc29sdXRpb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaG93RnVsbEV4dGVudF0gSWYgdHJ1ZSwgYWxsb3dzIHVzIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LiBEZWZhdWx0OiBmYWxzZS5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyhyZXNvbHV0aW9ucywgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHJlc29sdXRpb25zWzBdO1xuICAgICAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICAvLyBkdXJpbmcgaW50ZXJhY3Rpbmcgb3IgYW5pbWF0aW5nLCBhbGxvdyBpbnRlcm1lZGlhcnkgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgdmFyIHogPSBNYXRoLmZsb29yKGxpbmVhckZpbmROZWFyZXN0KHJlc29sdXRpb25zLCBjYXBwZWQsIGRpcmVjdGlvbikpO1xuICAgICAgICAgICAgaWYgKHJlc29sdXRpb25zW3pdID4gY2FwcGVkTWF4UmVzICYmIHogPCByZXNvbHV0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3ogKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uc1t6XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHBvd2VyIFBvd2VyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWluUmVzb2x1dGlvbl0gTWluaW11bSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaG93RnVsbEV4dGVudF0gSWYgdHJ1ZSwgYWxsb3dzIHVzIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LiBEZWZhdWx0OiBmYWxzZS5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9Qb3dlcihwb3dlciwgbWF4UmVzb2x1dGlvbiwgb3B0X21pblJlc29sdXRpb24sIG9wdF9zbW9vdGgsIG9wdF9tYXhFeHRlbnQsIG9wdF9zaG93RnVsbEV4dGVudCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gb3B0X21pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9taW5SZXNvbHV0aW9uIDogMDtcbiAgICAgICAgICAgIC8vIGR1cmluZyBpbnRlcmFjdGluZyBvciBhbmltYXRpbmcsIGFsbG93IGludGVybWVkaWFyeSB2YWx1ZXNcbiAgICAgICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgc21vb3RoID0gb3B0X3Ntb290aCAhPT0gdW5kZWZpbmVkID8gb3B0X3Ntb290aCA6IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFzbW9vdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRvbGVyYW5jZSA9IDFlLTk7XG4gICAgICAgICAgICB2YXIgbWluWm9vbUxldmVsID0gTWF0aC5jZWlsKE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBjYXBwZWRNYXhSZXMpIC8gTWF0aC5sb2cocG93ZXIpIC0gdG9sZXJhbmNlKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAtZGlyZWN0aW9uICogKDAuNSAtIHRvbGVyYW5jZSkgKyAwLjU7XG4gICAgICAgICAgICB2YXIgY2FwcGVkID0gTWF0aC5taW4oY2FwcGVkTWF4UmVzLCByZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIHZhciBjYXBwZWRab29tTGV2ZWwgPSBNYXRoLmZsb29yKE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBjYXBwZWQpIC8gTWF0aC5sb2cocG93ZXIpICsgb2Zmc2V0KTtcbiAgICAgICAgICAgIHZhciB6b29tTGV2ZWwgPSBNYXRoLm1heChtaW5ab29tTGV2ZWwsIGNhcHBlZFpvb21MZXZlbCk7XG4gICAgICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgem9vbUxldmVsKTtcbiAgICAgICAgICAgIHJldHVybiBjbGFtcChuZXdSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXggcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIE1pbiByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaG93RnVsbEV4dGVudF0gSWYgdHJ1ZSwgYWxsb3dzIHVzIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LiBEZWZhdWx0OiBmYWxzZS5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIG9wdF9zbW9vdGgsIG9wdF9tYXhFeHRlbnQsIG9wdF9zaG93RnVsbEV4dGVudCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBzbW9vdGggPSBvcHRfc21vb3RoICE9PSB1bmRlZmluZWQgPyBvcHRfc21vb3RoIDogdHJ1ZTtcbiAgICAgICAgICAgIGlmICghc21vb3RoIHx8ICFvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x1dGlvbmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JvdGF0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQgeyB0b1JhZGlhbnMgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBib29sZWFuPSk6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGUocm90YXRpb24pIHtcbiAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKHJvdGF0aW9uKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIE4uXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvTihuKSB7XG4gICAgdmFyIHRoZXRhID0gKDIgKiBNYXRoLlBJKSAvIG47XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJvdGF0aW9uLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKG9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByb3RhdGlvbiA9IE1hdGguZmxvb3Iocm90YXRpb24gLyB0aGV0YSArIDAuNSkgKiB0aGV0YTtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfdG9sZXJhbmNlXSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvWmVybyhvcHRfdG9sZXJhbmNlKSB7XG4gICAgdmFyIHRvbGVyYW5jZSA9IG9wdF90b2xlcmFuY2UgfHwgdG9SYWRpYW5zKDUpO1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyb3RhdGlvbiwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0aW9uKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdGF0aW9uY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZWFzaW5nXG4gKi9cbi8qKlxuICogU3RhcnQgc2xvdyBhbmQgc3BlZWQgdXAuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW4odCkge1xuICAgIHJldHVybiBNYXRoLnBvdyh0LCAzKTtcbn1cbi8qKlxuICogU3RhcnQgZmFzdCBhbmQgc2xvdyBkb3duLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dCh0KSB7XG4gICAgcmV0dXJuIDEgLSBlYXNlSW4oMSAtIHQpO1xufVxuLyoqXG4gKiBTdGFydCBzbG93LCBzcGVlZCB1cCwgYW5kIHRoZW4gc2xvdyBkb3duIGFnYWluLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5BbmRPdXQodCkge1xuICAgIHJldHVybiAzICogdCAqIHQgLSAyICogdCAqIHQgKiB0O1xufVxuLyoqXG4gKiBNYWludGFpbiBhIGNvbnN0YW50IHNwZWVkIG92ZXIgdGltZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhcih0KSB7XG4gICAgcmV0dXJuIHQ7XG59XG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgYXQgdGhlIHZlcnkgZW5kIHNsb3cgZG93biBhZ2Fpbi4gIFRoaXMgaGFzIHRoZVxuICogc2FtZSBnZW5lcmFsIGJlaGF2aW9yIGFzIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSwgYnV0IHRoZSBmaW5hbFxuICogc2xvd2Rvd24gaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwQW5kRG93bih0KSB7XG4gICAgaWYgKHQgPCAwLjUpIHtcbiAgICAgICAgcmV0dXJuIGluQW5kT3V0KDIgKiB0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAxIC0gaW5BbmRPdXQoMiAqICh0IC0gMC41KSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZWFzaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0dlb21ldHJ5TGF5b3V0XG4gKi9cbi8qKlxuICogVGhlIGNvb3JkaW5hdGUgbGF5b3V0IGZvciBnZW9tZXRyaWVzLCBpbmRpY2F0aW5nIHdoZXRoZXIgYSAzcmQgb3IgNHRoIHogKCdaJylcbiAqIG9yIG1lYXN1cmUgKCdNJykgY29vcmRpbmF0ZSBpcyBhdmFpbGFibGUuIFN1cHBvcnRlZCB2YWx1ZXMgYXJlIGAnWFknYCxcbiAqIGAnWFlaJ2AsIGAnWFlNJ2AsIGAnWFlaTSdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFhZOiAnWFknLFxuICAgIFhZWjogJ1hZWicsXG4gICAgWFlNOiAnWFlNJyxcbiAgICBYWVpNOiAnWFlaTScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnlMYXlvdXQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0dlb21ldHJ5XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGVFbXB0eSwgZ2V0SGVpZ2h0LCByZXR1cm5PclVwZGF0ZSwgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24sIGdldFRyYW5zZm9ybSB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgbWVtb2l6ZU9uZSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0yRCB9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAqL1xudmFyIHRtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBUbyBnZXQgbm90aWZpZWQgb2YgY2hhbmdlcyB0byB0aGUgZ2VvbWV0cnksIHJlZ2lzdGVyIGEgbGlzdGVuZXIgZm9yIHRoZVxuICogZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBvbiB5b3VyIGdlb21ldHJ5IGluc3RhbmNlLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgR2VvbWV0cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdlb21ldHJ5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdlb21ldHJ5KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmV2aXNpb24gVGhlIGdlb21ldHJ5IHJldmlzaW9uLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSBbb3B0X3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKHJldmlzaW9uLCBzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBpZiAoIW9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgICAgICBjbG9uZS5hcHBseVRyYW5zZm9ybShvcHRfdHJhbnNmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiBjbG9uZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIHRyYW5zZm9ybWVkIGFuZCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gW29wdF90cmFuc2Zvcm1dIE9wdGlvbmFsIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnlUcmFuc2Zvcm1lZCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCh0aGlzLmdldFJldmlzaW9uKCksIHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4geyFHZW9tZXRyeX0gQ2xvbmUuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY29udGFpbnNYWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBjb29yZCA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50KFt4LCB5XSk7XG4gICAgICAgIHJldHVybiBjb29yZFswXSA9PT0geCAmJiBjb29yZFsxXSA9PT0geTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY2xvc2VzdCBwb2ludCBvZiB0aGUgZ2VvbWV0cnkgdG8gdGhlIHBhc3NlZCBwb2ludCBhc1xuICAgICAqIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlIGNvb3JkaW5hdGV9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9jbG9zZXN0UG9pbnRdIENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q2xvc2VzdFBvaW50ID0gZnVuY3Rpb24gKHBvaW50LCBvcHRfY2xvc2VzdFBvaW50KSB7XG4gICAgICAgIHZhciBjbG9zZXN0UG9pbnQgPSBvcHRfY2xvc2VzdFBvaW50ID8gb3B0X2Nsb3Nlc3RQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgICAgIHRoaXMuY2xvc2VzdFBvaW50WFkocG9pbnRbMF0sIHBvaW50WzFdLCBjbG9zZXN0UG9pbnQsIEluZmluaXR5KTtcbiAgICAgICAgcmV0dXJuIGNsb3Nlc3RQb2ludDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGdlb21ldHJ5IGluY2x1ZGVzIHRoZSBzcGVjaWZpZWQgY29vcmRpbmF0ZS4gSWYgdGhlXG4gICAgICogY29vcmRpbmF0ZSBpcyBvbiB0aGUgYm91bmRhcnkgb2YgdGhlIGdlb21ldHJ5LCByZXR1cm5zIGZhbHNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmludGVyc2VjdHNDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbnNYWShjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAob3B0X2V4dGVudCkge1xuICAgICAgICBpZiAodGhpcy5leHRlbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5jb21wdXRlRXh0ZW50KHRoaXMuZXh0ZW50Xyk7XG4gICAgICAgICAgICBpZiAoaXNOYU4oZXh0ZW50WzBdKSB8fCBpc05hTihleHRlbnRbMV0pKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eShleHRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHRlbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHVybk9yVXBkYXRlKHRoaXMuZXh0ZW50Xywgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSb3RhdGUgdGhlIGdlb21ldHJ5IGFyb3VuZCBhIGdpdmVuIGNvb3JkaW5hdGUuIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIGFuZ2xlIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKGFuZ2xlLCBhbmNob3IpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNjYWxlIHRoZSBnZW9tZXRyeSAod2l0aCBhbiBvcHRpb25hbCBvcmlnaW4pLiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3ggVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9zeV0gVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG8gc3gpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIHNjYWxlIG9yaWdpbiAoZGVmYXVsdHMgdG8gdGhlIGNlbnRlclxuICAgICAqICAgICBvZiB0aGUgZ2VvbWV0cnkgZXh0ZW50KS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHN4LCBvcHRfc3ksIG9wdF9hbmNob3IpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5LiAgRm9yIGxpbmVzdHJpbmdzLCB0aGlzIHVzZXNcbiAgICAgKiB0aGUgW0RvdWdsYXMgUGV1Y2tlcl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobSlcbiAgICAgKiBhbGdvcml0aG0uICBGb3IgcG9seWdvbnMsIGEgcXVhbnRpemF0aW9uLWJhc2VkXG4gICAgICogc2ltcGxpZmljYXRpb24gaXMgdXNlZCB0byBwcmVzZXJ2ZSB0b3BvbG9neS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRoZSB0b2xlcmFuY2UgZGlzdGFuY2UgZm9yIHNpbXBsaWZpY2F0aW9uLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBBIG5ldywgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBvcmlnaW5hbCBnZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnNpbXBsaWZ5ID0gZnVuY3Rpb24gKHRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnkodG9sZXJhbmNlICogdG9sZXJhbmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXJcbiAgICAgKiBhbGdvcml0aG0uXG4gICAgICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JhbWVyLURvdWdsYXMtUGV1Y2tlcl9hbGdvcml0aG0uXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeSA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICogQ2FsbGVkIHdpdGggYSBmbGF0IGFycmF5IG9mIGdlb21ldHJ5IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIHRoZSBnZW9tZXRyeS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5IGNvb3JkaW5hdGVzIGluIHBsYWNlLiAgSWZcbiAgICAgKiBpbnN0ZWFkIHlvdSB3YW50IGEgbmV3IGdlb21ldHJ5LCBmaXJzdCBgY2xvbmUoKWAgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gZWFjaCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeSBmcm9tIG9uZSBjb29yZGluYXRlIHJlZmVyZW5jZVxuICAgICAqIHN5c3RlbSB0byBhbm90aGVyLiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogRm9yIGV4YW1wbGUsIGEgbGluZSB3aWxsIGJlIHRyYW5zZm9ybWVkIHRvIGEgbGluZSBhbmQgYSBjaXJjbGUgdG8gYSBjaXJjbGUuXG4gICAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBzb3VyY2UgVGhlIGN1cnJlbnQgcHJvamVjdGlvbi4gIENhbiBiZSBhXG4gICAgICogICAgIHN0cmluZyBpZGVudGlmaWVyIG9yIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gVGhlIGRlc2lyZWQgcHJvamVjdGlvbi4gIENhbiBiZSBhXG4gICAgICogICAgIHN0cmluZyBpZGVudGlmaWVyIG9yIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBUaGlzIGdlb21ldHJ5LiAgTm90ZSB0aGF0IG9yaWdpbmFsIGdlb21ldHJ5IGlzXG4gICAgICogICAgIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gKi9cbiAgICAgICAgdmFyIHNvdXJjZVByb2ogPSBnZXRQcm9qZWN0aW9uKHNvdXJjZSk7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1GbiA9IHNvdXJjZVByb2ouZ2V0VW5pdHMoKSA9PSBVbml0cy5USUxFX1BJWEVMU1xuICAgICAgICAgICAgPyBmdW5jdGlvbiAoaW5Db29yZGluYXRlcywgb3V0Q29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgICAgICAgICAgICAgIHZhciBwaXhlbEV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3RlZEV4dGVudCA9IHNvdXJjZVByb2ouZ2V0V29ybGRFeHRlbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBnZXRIZWlnaHQocHJvamVjdGVkRXh0ZW50KSAvIGdldEhlaWdodChwaXhlbEV4dGVudCk7XG4gICAgICAgICAgICAgICAgY29tcG9zZVRyYW5zZm9ybSh0bXBUcmFuc2Zvcm0sIHByb2plY3RlZEV4dGVudFswXSwgcHJvamVjdGVkRXh0ZW50WzNdLCBzY2FsZSwgLXNjYWxlLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0yRChpbkNvb3JkaW5hdGVzLCAwLCBpbkNvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCB0bXBUcmFuc2Zvcm0sIG91dENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RpbmF0aW9uKShpbkNvb3JkaW5hdGVzLCBvdXRDb29yZGluYXRlcywgc3RyaWRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogZ2V0VHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hcHBseVRyYW5zZm9ybSh0cmFuc2Zvcm1Gbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIEdlb21ldHJ5O1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBHZW9tZXRyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtMkQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0cmFuc2Zvcm0sIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2pdO1xuICAgICAgICB2YXIgeSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV07XG4gICAgICAgIGRlc3RbaSsrXSA9IHRyYW5zZm9ybVswXSAqIHggKyB0cmFuc2Zvcm1bMl0gKiB5ICsgdHJhbnNmb3JtWzRdO1xuICAgICAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIFJvdGF0aW9uIGFuY2hvciBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIGFuY2hvclggPSBhbmNob3JbMF07XG4gICAgdmFyIGFuY2hvclkgPSBhbmNob3JbMV07XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgICAgICB2YXIgZGVsdGFZID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSAtIGFuY2hvclk7XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclggKyBkZWx0YVggKiBjb3MgLSBkZWx0YVkgKiBzaW47XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBkZWx0YVggKiBzaW4gKyBkZWx0YVkgKiBjb3M7XG4gICAgICAgIGZvciAodmFyIGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG4vKipcbiAqIFNjYWxlIHRoZSBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ggU2NhbGUgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeSBTY2FsZSBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmNob3IgU2NhbGUgYW5jaG9yIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHN4LCBzeSwgYW5jaG9yLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICAgIHZhciBhbmNob3JZID0gYW5jaG9yWzFdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgZGVsdGFYID0gZmxhdENvb3JkaW5hdGVzW2pdIC0gYW5jaG9yWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gLSBhbmNob3JZO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JYICsgc3ggKiBkZWx0YVg7XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBzeSAqIGRlbHRhWTtcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZGVsdGFYLCBkZWx0YVksIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1tqXSArIGRlbHRhWDtcbiAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSArIGRlbHRhWTtcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vU2ltcGxlR2VvbWV0cnlcbiAqL1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4vR2VvbWV0cnkuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcywgZ2V0Q2VudGVyIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHJvdGF0ZSwgc2NhbGUsIHRyYW5zZm9ybTJELCB0cmFuc2xhdGUgfSBmcm9tICcuL2ZsYXQvdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzOyBkbyBub3QgaW5zdGFudGlhdGVcbiAqIGluIGFwcHMsIGFzIGNhbm5vdCBiZSByZW5kZXJlZC5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNpbXBsZUdlb21ldHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTaW1wbGVHZW9tZXRyeSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTaW1wbGVHZW9tZXRyeSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PCo+fSBDb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBmaXJzdCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEZpcnN0IGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgwLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGFzdCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IExhc3QgcG9pbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRMYXN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAtIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5TGF5b3V0IGxheW91dH0gb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0TGF5b3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeSB1c2luZyB0aGUgRG91Z2xhcyBQZXVja2VyIGFsZ29yaXRobS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5ID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgaWYgKHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gIT09IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgc3F1YXJlZFRvbGVyYW5jZSBpcyBuZWdhdGl2ZSBvciBpZiB3ZSBrbm93IHRoYXQgc2ltcGxpZmljYXRpb24gd2lsbCBub3RcbiAgICAgICAgLy8gaGF2ZSBhbnkgZWZmZWN0IHRoZW4ganVzdCByZXR1cm4gdGhpcy5cbiAgICAgICAgaWYgKHNxdWFyZWRUb2xlcmFuY2UgPCAwIHx8XG4gICAgICAgICAgICAodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlICE9PSAwICYmXG4gICAgICAgICAgICAgICAgc3F1YXJlZFRvbGVyYW5jZSA8PSB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2ltcGxpZmllZEdlb21ldHJ5ID0gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbChzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGlmaWVkR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA8IHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRHZW9tZXRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpbXBsaWZpY2F0aW9uIGRpZCBub3QgYWN0dWFsbHkgcmVtb3ZlIGFueSBjb29yZGluYXRlcy4gIFdlIG5vdyBrbm93XG4gICAgICAgICAgICAvLyB0aGF0IGFueSBjYWxscyB0byBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgd2l0aCBhIHNxdWFyZWRUb2xlcmFuY2UgbGVzc1xuICAgICAgICAgICAgLy8gdGhhbiBvciBlcXVhbCB0byB0aGUgY3VycmVudCBzcXVhcmVkVG9sZXJhbmNlIHdpbGwgYWxzbyBub3QgaGF2ZSBhbnlcbiAgICAgICAgICAgIC8vIGVmZmVjdC4gIFRoaXMgYWxsb3dzIHVzIHRvIHNob3J0IGNpcmN1aXQgc2ltcGxpZmljYXRpb24gKHNhdmluZyBDUFVcbiAgICAgICAgICAgIC8vIGN5Y2xlcykgYW5kIHByZXZlbnRzIHRoZSBjYWNoZSBvZiBzaW1wbGlmaWVkIGdlb21ldHJpZXMgZnJvbSBmaWxsaW5nXG4gICAgICAgICAgICAvLyB1cCB3aXRoIHVzZWxlc3MgaWRlbnRpY2FsIGNvcGllcyBvZiB0aGlzIGdlb21ldHJ5IChzYXZpbmcgbWVtb3J5KS5cbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IHNxdWFyZWRUb2xlcmFuY2U7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7U2ltcGxlR2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFN0cmlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaWRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0RmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGxheW91dCwgZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgIHRoaXMuc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGZsYXRDb29yZGluYXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7IUFycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gbGF5b3V0IExheW91dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbmVzdGluZyBOZXN0aW5nLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0TGF5b3V0ID0gZnVuY3Rpb24gKGxheW91dCwgY29vcmRpbmF0ZXMsIG5lc3RpbmcpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgICAgIHZhciBzdHJpZGU7XG4gICAgICAgIGlmIChsYXlvdXQpIHtcbiAgICAgICAgICAgIHN0cmlkZSA9IGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXN0aW5nOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoY29vcmRpbmF0ZXNbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmlkZSA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGxheW91dCA9IGdldExheW91dEZvclN0cmlkZShzdHJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLnN0cmlkZSA9IHN0cmlkZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBDYWxsZWQgd2l0aCBhIGZsYXQgYXJyYXkgb2YgZ2VvbWV0cnkgY29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICBpZiAodGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybUZuKHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLmZsYXRDb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGUgZ2VvbWV0cnkgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS4gVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gYW5nbGUgaW4gY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAoYW5nbGUsIGFuY2hvcikge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICByb3RhdGUoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGFuZ2xlLCBhbmNob3IsIGZsYXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2NhbGUgdGhlIGdlb21ldHJ5ICh3aXRoIGFuIG9wdGlvbmFsIG9yaWdpbikuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeCBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N5XSBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uIChkZWZhdWx0cyB0byBzeCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgc2NhbGUgb3JpZ2luIChkZWZhdWx0cyB0byB0aGUgY2VudGVyXG4gICAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgc3kgPSBvcHRfc3k7XG4gICAgICAgIGlmIChzeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzeSA9IHN4O1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yO1xuICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgYW5jaG9yID0gZ2V0Q2VudGVyKHRoaXMuZ2V0RXh0ZW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHNjYWxlKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBzeCwgc3ksIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBkZWx0YVgsIGRlbHRhWSwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2ltcGxlR2VvbWV0cnk7XG59KEdlb21ldHJ5KSk7XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBsYXlvdXQgTGF5b3V0LlxuICovXG5mdW5jdGlvbiBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKSB7XG4gICAgdmFyIGxheW91dDtcbiAgICBpZiAoc3RyaWRlID09IDIpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0cmlkZSA9PSAzKSB7XG4gICAgICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZWjtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RyaWRlID09IDQpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaTTtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSAqLyAobGF5b3V0KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFN0cmlkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpIHtcbiAgICB2YXIgc3RyaWRlO1xuICAgIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFkpIHtcbiAgICAgICAgc3RyaWRlID0gMjtcbiAgICB9XG4gICAgZWxzZSBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZWiB8fCBsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFlNKSB7XG4gICAgICAgIHN0cmlkZSA9IDM7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWVpNKSB7XG4gICAgICAgIHN0cmlkZSA9IDQ7XG4gICAgfVxuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHN0cmlkZSk7XG59XG4vKipcbiAqIEBwYXJhbSB7U2ltcGxlR2VvbWV0cnl9IHNpbXBsZUdlb21ldHJ5IFNpbXBsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1HZW9tMkQoc2ltcGxlR2VvbWV0cnksIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxlR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKCFmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgc3RyaWRlID0gc2ltcGxlR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgdHJhbnNmb3JtLCBvcHRfZGVzdCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgU2ltcGxlR2VvbWV0cnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TaW1wbGVHZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHsgbGVycCwgc3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeCB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb2ludCBvbiB0aGUgMkQgbGluZSBzZWdtZW50IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXSB0b1xuICogZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIHRoYXQgaXMgY2xvc2VzdCB0byB0aGUgcG9pbnQgKHgsIHkpLiAgRXh0cmFcbiAqIGRpbWVuc2lvbnMgYXJlIGxpbmVhcmx5IGludGVycG9sYXRlZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0MSBPZmZzZXQgMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQyIE9mZnNldCAyLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQxLCBvZmZzZXQyLCBzdHJpZGUsIHgsIHksIGNsb3Nlc3RQb2ludCkge1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIDFdO1xuICAgIHZhciBkeCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyXSAtIHgxO1xuICAgIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKHQgPiAxKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gbGVycChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIGldLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIGldLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgIH1cbiAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIHNxdWFyZWQgb2YgdGhlIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBhbnkgcGFpciBvZiBjb25zZWN1dGl2ZVxuICogY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpIHtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgdmFyIHNxdWFyZWREZWx0YSA9IHNxdWFyZWREeCh4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgIGlmIChzcXVhcmVkRGVsdGEgPiBtYXgpIHtcbiAgICAgICAgICAgIG1heCA9IHNxdWFyZWREZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gbWF4O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIG1heCA9IG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlBcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgbWF4KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBtYXggPSBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X3RtcFBvaW50XSBUZW1wb3JhcnkgcG9pbnQgb2JqZWN0LlxuICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25DbG9zZXN0UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgb3B0X3RtcFBvaW50KSB7XG4gICAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gICAgdmFyIGksIHNxdWFyZWREaXN0YW5jZTtcbiAgICBpZiAobWF4RGVsdGEgPT09IDApIHtcbiAgICAgICAgLy8gQWxsIHBvaW50cyBhcmUgaWRlbnRpY2FsLCBzbyBqdXN0IHRlc3QgdGhlIGZpcnN0IHBvaW50LlxuICAgICAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIHZhciBpbmRleCA9IG9mZnNldCArIHN0cmlkZTtcbiAgICB3aGlsZSAoaW5kZXggPCBlbmQpIHtcbiAgICAgICAgYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIGluZGV4IC0gc3RyaWRlLCBpbmRleCwgc3RyaWRlLCB4LCB5LCB0bXBQb2ludCk7XG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICBpbmRleCArPSBzdHJpZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBTa2lwIGFoZWFkIG11bHRpcGxlIHBvaW50cywgYmVjYXVzZSB3ZSBrbm93IHRoYXQgYWxsIHRoZSBza2lwcGVkXG4gICAgICAgICAgICAvLyBwb2ludHMgY2Fubm90IGJlIGFueSBjbG9zZXIgdGhhbiB0aGUgY2xvc2VzdCBwb2ludCB3ZSBoYXZlIGZvdW5kIHNvXG4gICAgICAgICAgICAvLyBmYXIuICBXZSBrbm93IHRoaXMgYmVjYXVzZSB3ZSBrbm93IGhvdyBjbG9zZSB0aGUgY3VycmVudCBwb2ludCBpcywgaG93XG4gICAgICAgICAgICAvLyBjbG9zZSB0aGUgY2xvc2VzdCBwb2ludCB3ZSBoYXZlIGZvdW5kIHNvIGZhciBpcywgYW5kIHRoZSBtYXhpbXVtXG4gICAgICAgICAgICAvLyBkaXN0YW5jZSBiZXR3ZWVuIGNvbnNlY3V0aXZlIHBvaW50cy4gIEZvciBleGFtcGxlLCBpZiB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgICAgIC8vIGF0IGRpc3RhbmNlIDEwLCB0aGUgYmVzdCB3ZSd2ZSBmb3VuZCBzbyBmYXIgaXMgMywgYW5kIHRoYXQgdGhlIG1heGltdW1cbiAgICAgICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzIGlzIDIsIHRoZW4gd2UnbGwgbmVlZCB0byBza2lwIGF0XG4gICAgICAgICAgICAvLyBsZWFzdCAoMTAgLSAzKSAvIDIgPT0gMyAocm91bmRlZCBkb3duKSBwb2ludHMgdG8gaGF2ZSBhbnkgY2hhbmNlIG9mXG4gICAgICAgICAgICAvLyBmaW5kaW5nIGEgY2xvc2VyIHBvaW50LiAgV2UgdXNlIE1hdGgubWF4KC4uLiwgMSkgdG8gZW5zdXJlIHRoYXQgd2VcbiAgICAgICAgICAgIC8vIGFsd2F5cyBhZHZhbmNlIGF0IGxlYXN0IG9uZSBwb2ludCwgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcC5cbiAgICAgICAgICAgIGluZGV4ICs9XG4gICAgICAgICAgICAgICAgc3RyaWRlICpcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoKChNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKSAtIE1hdGguc3FydChtaW5TcXVhcmVkRGlzdGFuY2UpKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhEZWx0YSkgfFxuICAgICAgICAgICAgICAgICAgICAgICAgMCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzUmluZykge1xuICAgICAgICAvLyBDaGVjayB0aGUgY2xvc2luZyBzZWdtZW50LlxuICAgICAgICBhc3NpZ25DbG9zZXN0KGZsYXRDb29yZGluYXRlcywgZW5kIC0gc3RyaWRlLCBvZmZzZXQsIHN0cmlkZSwgeCwgeSwgdG1wUG9pbnQpO1xuICAgICAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgdG1wUG9pbnRbMF0sIHRtcFBvaW50WzFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gdG1wUG9pbnRbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X3RtcFBvaW50XSBUZW1wb3JhcnkgcG9pbnQgb2JqZWN0LlxuICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgb3B0X3RtcFBvaW50KSB7XG4gICAgdmFyIHRtcFBvaW50ID0gb3B0X3RtcFBvaW50ID8gb3B0X3RtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IGFzc2lnbkNsb3Nlc3RQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCB0bXBQb2ludCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RNdWx0aUFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIHRtcFBvaW50KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvc2VzdC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2RlZmxhdGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZSwgc3RyaWRlKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2ldO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RyaWRlOyArK2opIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2pdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzcyBDb29yZGluYXRlc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9lbmRzXSBFbmRzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3MsIHN0cmlkZSwgb3B0X2VuZHMpIHtcbiAgICB2YXIgZW5kcyA9IG9wdF9lbmRzID8gb3B0X2VuZHMgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGVuZCA9IGRlZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzW2pdLCBzdHJpZGUpO1xuICAgICAgICBlbmRzW2krK10gPSBlbmQ7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgZW5kcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBlbmRzO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gY29vcmRpbmF0ZXNzcyBDb29yZGluYXRlc3NzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBbb3B0X2VuZHNzXSBFbmRzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PG51bWJlcj4+fSBFbmRzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc3MsIHN0cmlkZSwgb3B0X2VuZHNzKSB7XG4gICAgdmFyIGVuZHNzID0gb3B0X2VuZHNzID8gb3B0X2VuZHNzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGNvb3JkaW5hdGVzc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kcyA9IGRlZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3NzW2pdLCBzdHJpZGUsIGVuZHNzW2ldKTtcbiAgICAgICAgZW5kc3NbaSsrXSA9IGVuZHM7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgZW5kc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gZW5kc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2ltcGxpZnlcbiAqL1xuLy8gQmFzZWQgb24gc2ltcGxpZnktanMgaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvc2ltcGxpZnktanNcbi8vIENvcHlyaWdodCAoYykgMjAxMiwgVmxhZGltaXIgQWdhZm9ua2luXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4vL1xuLy8gICAgMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuLy8gICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vXG4vLyAgICAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuLy8gICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuLy8gSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0Vcbi8vIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkVcbi8vIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1Jcbi8vIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4vLyBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1Ncbi8vIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOXG4vLyBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuLy8gQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbi8vIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuaW1wb3J0IHsgc3F1YXJlZERpc3RhbmNlLCBzcXVhcmVkU2VnbWVudERpc3RhbmNlIH0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGlnaFF1YWxpdHkgSGlnaGVzdCBxdWFsaXR5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNdIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gU2ltcGxpZmllZCBsaW5lIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbXBsaWZ5TGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIGhpZ2hRdWFsaXR5LCBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcykge1xuICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzXG4gICAgICAgIDogW107XG4gICAgaWYgKCFoaWdoUXVhbGl0eSkge1xuICAgICAgICBlbmQgPSByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzO1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBzdHJpZGUgPSAyO1xuICAgIH1cbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIHZhciBuID0gKGVuZCAtIG9mZnNldCkgLyBzdHJpZGU7XG4gICAgaWYgKG4gPCAzKSB7XG4gICAgICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgbWFya2VycyA9IG5ldyBBcnJheShuKTtcbiAgICBtYXJrZXJzWzBdID0gMTtcbiAgICBtYXJrZXJzW24gLSAxXSA9IDE7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBzdGFjayA9IFtvZmZzZXQsIGVuZCAtIHN0cmlkZV07XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgbGFzdCA9IHN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgZmlyc3QgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgdmFyIG1heFNxdWFyZWREaXN0YW5jZSA9IDA7XG4gICAgICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdF07XG4gICAgICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdCArIDFdO1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tsYXN0ICsgMV07XG4gICAgICAgIGZvciAodmFyIGkgPSBmaXJzdCArIHN0cmlkZTsgaSA8IGxhc3Q7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB2YXIgeCA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIHZhciBzcXVhcmVkRGlzdGFuY2VfMSA9IHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZV8xID4gbWF4U3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIG1heFNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZV8xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhTcXVhcmVkRGlzdGFuY2UgPiBzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICBtYXJrZXJzWyhpbmRleCAtIG9mZnNldCkgLyBzdHJpZGVdID0gMTtcbiAgICAgICAgICAgIGlmIChmaXJzdCArIHN0cmlkZSA8IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChmaXJzdCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZGV4ICsgc3RyaWRlIDwgbGFzdCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goaW5kZXgsIGxhc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChtYXJrZXJzW2ldKSB7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpICogc3RyaWRlXTtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGkgKiBzdHJpZGUgKyAxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlck11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgICBpZiAoZW5kIDw9IG9mZnNldCArIHN0cmlkZSkge1xuICAgICAgICAvLyB6ZXJvIG9yIG9uZSBwb2ludCwgbm8gc2ltcGxpZmljYXRpb24gcG9zc2libGUsIHNvIGNvcHkgYW5kIHJldHVyblxuICAgICAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgLy8gY29weSBmaXJzdCBwb2ludFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgxO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICAgIHZhciB4MiA9IHgxO1xuICAgIHZhciB5MiA9IHkxO1xuICAgIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlKHgxLCB5MSwgeDIsIHkyKSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIC8vIGNvcHkgcG9pbnQgYXQgb2Zmc2V0XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHgyICE9IHgxIHx8IHkyICE9IHkxKSB7XG4gICAgICAgIC8vIGNvcHkgbGFzdCBwb2ludFxuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEByZXR1cm4ge251bWJlcn0gUm91bmRlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNuYXAodmFsdWUsIHRvbGVyYW5jZSkge1xuICAgIHJldHVybiB0b2xlcmFuY2UgKiBNYXRoLnJvdW5kKHZhbHVlIC8gdG9sZXJhbmNlKTtcbn1cbi8qKlxuICogU2ltcGxpZmllcyBhIGxpbmUgc3RyaW5nIHVzaW5nIGFuIGFsZ29yaXRobSBkZXNpZ25lZCBieSBUaW0gU2NoYXViLlxuICogQ29vcmRpbmF0ZXMgYXJlIHNuYXBwZWQgdG8gdGhlIG5lYXJlc3QgdmFsdWUgaW4gYSB2aXJ0dWFsIGdyaWQgYW5kXG4gKiBjb25zZWN1dGl2ZSBkdXBsaWNhdGUgY29vcmRpbmF0ZXMgYXJlIGRpc2NhcmRlZC4gIFRoaXMgZWZmZWN0aXZlbHkgcHJlc2VydmVzXG4gKiB0b3BvbG9neSBhcyB0aGUgc2ltcGxpZmljYXRpb24gb2YgYW55IHN1YnNlY3Rpb24gb2YgYSBsaW5lIHN0cmluZyBpc1xuICogaW5kZXBlbmRlbnQgb2YgdGhlIHJlc3Qgb2YgdGhlIGxpbmUgc3RyaW5nLiAgVGhpcyBtZWFucyB0aGF0LCBmb3IgZXhhbXBsZXMsXG4gKiB0aGUgY29tbW9uIGVkZ2UgYmV0d2VlbiB0d28gcG9seWdvbnMgd2lsbCBiZSBzaW1wbGlmaWVkIHRvIHRoZSBzYW1lIGxpbmVcbiAqIHN0cmluZyBpbmRlcGVuZGVudGx5IGluIGJvdGggcG9seWdvbnMuICBUaGlzIGltcGxlbWVudGF0aW9uIHVzZXMgYSBzaW5nbGVcbiAqIHBhc3Mgb3ZlciB0aGUgY29vcmRpbmF0ZXMgYW5kIGVsaW1pbmF0ZXMgaW50ZXJtZWRpYXRlIGNvbGxpbmVhciBwb2ludHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIC8vIGRvIG5vdGhpbmcgaWYgdGhlIGxpbmUgaXMgZW1wdHlcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gICAgLy8gc25hcCB0aGUgZmlyc3QgY29vcmRpbmF0ZSAoUDEpXG4gICAgdmFyIHgxID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICB2YXIgeTEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgIC8vIGFkZCB0aGUgZmlyc3QgY29vcmRpbmF0ZSB0byB0aGUgb3V0cHV0XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gICAgLy8gZmluZCB0aGUgbmV4dCBjb29yZGluYXRlIHRoYXQgZG9lcyBub3Qgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSBhcyB0aGUgZmlyc3RcbiAgICAvLyBjb29yZGluYXRlIChQMilcbiAgICB2YXIgeDIsIHkyO1xuICAgIGRvIHtcbiAgICAgICAgeDIgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgICAgICB5MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICAgICAgLy8gYWxsIGNvb3JkaW5hdGVzIHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUsIHRoZSBsaW5lIGNvbGxhcHNlcyB0byBhIHBvaW50XG4gICAgICAgICAgICAvLyBwdXNoIHRoZSBsYXN0IHNuYXBwZWQgdmFsdWUgYW55d2F5IHRvIGVuc3VyZSB0aGF0IHRoZSBvdXRwdXQgY29udGFpbnNcbiAgICAgICAgICAgIC8vIGF0IGxlYXN0IHR3byBwb2ludHNcbiAgICAgICAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSByZWFsbHkgcmV0dXJuIGF0IGxlYXN0IHR3byBwb2ludHMgYW55d2F5P1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgICAgICB9XG4gICAgfSB3aGlsZSAoeDIgPT0geDEgJiYgeTIgPT0geTEpO1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQpIHtcbiAgICAgICAgLy8gc25hcCB0aGUgbmV4dCBjb29yZGluYXRlIChQMylcbiAgICAgICAgdmFyIHgzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIHkzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIC8vIHNraXAgUDMgaWYgaXQgaXMgZXF1YWwgdG8gUDJcbiAgICAgICAgaWYgKHgzID09IHgyICYmIHkzID09IHkyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDEgYW5kIFAyXG4gICAgICAgIHZhciBkeDEgPSB4MiAtIHgxO1xuICAgICAgICB2YXIgZHkxID0geTIgLSB5MTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIFAzIGFuZCBQMVxuICAgICAgICB2YXIgZHgyID0geDMgLSB4MTtcbiAgICAgICAgdmFyIGR5MiA9IHkzIC0geTE7XG4gICAgICAgIC8vIGlmIFAxLCBQMiwgYW5kIFAzIGFyZSBjb2xpbmVhciBhbmQgUDMgaXMgZnVydGhlciBmcm9tIFAxIHRoYW4gUDIgaXMgZnJvbVxuICAgICAgICAvLyBQMSBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gdGhlbiBQMiBpcyBvbiB0aGUgc3RyYWlnaHQgbGluZSBiZXR3ZWVuIFAxIGFuZFxuICAgICAgICAvLyBQM1xuICAgICAgICBpZiAoZHgxICogZHkyID09IGR5MSAqIGR4MiAmJlxuICAgICAgICAgICAgKChkeDEgPCAwICYmIGR4MiA8IGR4MSkgfHwgZHgxID09IGR4MiB8fCAoZHgxID4gMCAmJiBkeDIgPiBkeDEpKSAmJlxuICAgICAgICAgICAgKChkeTEgPCAwICYmIGR5MiA8IGR5MSkgfHwgZHkxID09IGR5MiB8fCAoZHkxID4gMCAmJiBkeTIgPiBkeTEpKSkge1xuICAgICAgICAgICAgLy8gZGlzY2FyZCBQMiBhbmQgc2V0IFAyID0gUDNcbiAgICAgICAgICAgIHgyID0geDM7XG4gICAgICAgICAgICB5MiA9IHkzO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWl0aGVyIFAxLCBQMiwgYW5kIFAzIGFyZSBub3QgY29saW5lYXIsIG9yIHRoZXkgYXJlIGNvbGluZWFyIGJ1dCBQMyBpc1xuICAgICAgICAvLyBiZXR3ZWVuIFAzIGFuZCBQMSBvciBvbiB0aGUgb3Bwb3NpdGUgaGFsZiBvZiB0aGUgbGluZSB0byBQMi4gIGFkZCBQMixcbiAgICAgICAgLy8gYW5kIGNvbnRpbnVlIHdpdGggUDEgPSBQMiBhbmQgUDIgPSBQM1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgICAgIHgyID0geDM7XG4gICAgICAgIHkyID0geTM7XG4gICAgfVxuICAgIC8vIGFkZCB0aGUgbGFzdCBwb2ludCAoUDIpXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRW5kcyBTaW1wbGlmaWVkIGVuZHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kcy5wdXNoKHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kc3MpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemVBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2ltcGxpZnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbmZsYXRlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gW29wdF9jb29yZGluYXRlc10gQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBDb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG9wdF9jb29yZGluYXRlcykge1xuICAgIHZhciBjb29yZGluYXRlcyA9IG9wdF9jb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzW2krK10gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaiwgaiArIHN0cmlkZSk7XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gW29wdF9jb29yZGluYXRlc3NdIENvb3JkaW5hdGVzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXNzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzcyA9IG9wdF9jb29yZGluYXRlc3MgIT09IHVuZGVmaW5lZCA/IG9wdF9jb29yZGluYXRlc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2pdO1xuICAgICAgICBjb29yZGluYXRlc3NbaSsrXSA9IGluZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVzc1tpXSk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXNzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBbb3B0X2Nvb3JkaW5hdGVzc3NdXG4gKiAgICAgQ29vcmRpbmF0ZXNzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gQ29vcmRpbmF0ZXNzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9jb29yZGluYXRlc3NzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzc3MgPSBvcHRfY29vcmRpbmF0ZXNzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2pdO1xuICAgICAgICBjb29yZGluYXRlc3NzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBjb29yZGluYXRlc3NzW2ldKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBjb29yZGluYXRlc3NzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvYXJlYVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHZhciB0d2ljZUFyZWEgPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIHR3aWNlQXJlYSArPSB5MSAqIHgyIC0geDEgKiB5MjtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHR3aWNlQXJlYSAvIDI7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgYXJlYSArPSBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBhcmVhICs9IGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJlYS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vTGluZWFyUmluZ1xuICovXG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGFzc2lnbkNsb3Nlc3RQb2ludCwgbWF4U3F1YXJlZERlbHRhIH0gZnJvbSAnLi9mbGF0L2Nsb3Nlc3QuanMnO1xuaW1wb3J0IHsgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlcyB9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7IGRvdWdsYXNQZXVja2VyIH0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7IGluZmxhdGVDb29yZGluYXRlcyB9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmcgYXMgbGluZWFyUmluZ0FyZWEgfSBmcm9tICcuL2ZsYXQvYXJlYS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExpbmVhciByaW5nIGdlb21ldHJ5LiBPbmx5IHVzZWQgYXMgcGFydCBvZiBwb2x5Z29uOyBjYW5ub3QgYmUgcmVuZGVyZWRcbiAqIG9uIGl0cyBvd24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTGluZWFyUmluZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGluZWFyUmluZywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT58QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogICAgIEZvciBpbnRlcm5hbCB1c2UsIGZsYXQgY29vcmRpbmF0ZXMgaW4gY29tYmluYXRpb24gd2l0aCBgb3B0X2xheW91dGAgYXJlIGFsc28gYWNjZXB0ZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGluZWFyUmluZyhjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhUmV2aXNpb25fID0gLTE7XG4gICAgICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXNbMF0pKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMob3B0X2xheW91dCwgXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChjb29yZGluYXRlcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59ICovIChjb29yZGluYXRlcyksIG9wdF9sYXlvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFMaW5lYXJSaW5nfSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluZWFyUmluZyh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIGlmIChtaW5TcXVhcmVkRGlzdGFuY2UgPCBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkodGhpcy5nZXRFeHRlbnQoKSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChtYXhTcXVhcmVkRGVsdGEodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RQb2ludCh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgdGhpcy5tYXhEZWx0YV8sIHRydWUsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgbGluZWFyIHJpbmcgb24gcHJvamVjdGVkIHBsYW5lLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdBcmVhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxpbmVhciByaW5nLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGluZmxhdGVDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtMaW5lYXJSaW5nfSBTaW1wbGlmaWVkIExpbmVhclJpbmcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkb3VnbGFzUGV1Y2tlcih0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgICAgIHJldHVybiBuZXcgTGluZWFyUmluZyhzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxpbmVhciByaW5nLlxuICAgICAqIEBwYXJhbSB7IUFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMSk7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBMaW5lYXJSaW5nO1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgTGluZWFyUmluZztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpbmVhclJpbmcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlUeXBlXG4gKi9cbi8qKlxuICogVGhlIGdlb21ldHJ5IHR5cGUuIE9uZSBvZiBgJ1BvaW50J2AsIGAnTGluZVN0cmluZydgLCBgJ0xpbmVhclJpbmcnYCxcbiAqIGAnUG9seWdvbidgLCBgJ011bHRpUG9pbnQnYCwgYCdNdWx0aUxpbmVTdHJpbmcnYCwgYCdNdWx0aVBvbHlnb24nYCxcbiAqIGAnR2VvbWV0cnlDb2xsZWN0aW9uJ2AsIGAnQ2lyY2xlJ2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUE9JTlQ6ICdQb2ludCcsXG4gICAgTElORV9TVFJJTkc6ICdMaW5lU3RyaW5nJyxcbiAgICBMSU5FQVJfUklORzogJ0xpbmVhclJpbmcnLFxuICAgIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgICBNVUxUSV9QT0lOVDogJ011bHRpUG9pbnQnLFxuICAgIE1VTFRJX0xJTkVfU1RSSU5HOiAnTXVsdGlMaW5lU3RyaW5nJyxcbiAgICBNVUxUSV9QT0xZR09OOiAnTXVsdGlQb2x5Z29uJyxcbiAgICBHRU9NRVRSWV9DT0xMRUNUSU9OOiAnR2VvbWV0cnlDb2xsZWN0aW9uJyxcbiAgICBDSVJDTEU6ICdDaXJjbGUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vUG9pbnRcbiAqL1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgeyBjb250YWluc1hZLCBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlIH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgc3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQb2ludCBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQb2ludCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9pbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBvaW50KGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7IVBvaW50fSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9pbnQgPSBuZXcgUG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICAgICAgICBwb2ludC5hcHBseVByb3BlcnRpZXModGhpcyk7XG4gICAgICAgIHJldHVybiBwb2ludDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLnN0cmlkZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZmxhdENvb3JkaW5hdGVzID8gW10gOiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZSh0aGlzLmZsYXRDb29yZGluYXRlcywgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gR2VvbWV0cnlUeXBlLlBPSU5UO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIHRoaXMuZmxhdENvb3JkaW5hdGVzWzBdLCB0aGlzLmZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMCk7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIFBvaW50O1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2NvbnRhaW5zXG4gKi9cbmltcG9ydCB7IGZvckVhY2hDb3JuZXIgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgdmFyIG91dHNpZGUgPSBmb3JFYWNoQ29ybmVyKGV4dGVudCwgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuICFsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xuICAgIH0pO1xuICAgIHJldHVybiAhb3V0c2lkZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB4LCB5KSB7XG4gICAgLy8gaHR0cHM6Ly9nZW9tYWxnb3JpdGhtcy5jb20vYTAzLV9pbmNsdXNpb24uaHRtbFxuICAgIC8vIENvcHlyaWdodCAyMDAwIHNvZnRTdXJmZXIsIDIwMTIgRGFuIFN1bmRheVxuICAgIC8vIFRoaXMgY29kZSBtYXkgYmUgZnJlZWx5IHVzZWQgYW5kIG1vZGlmaWVkIGZvciBhbnkgcHVycG9zZVxuICAgIC8vIHByb3ZpZGluZyB0aGF0IHRoaXMgY29weXJpZ2h0IG5vdGljZSBpcyBpbmNsdWRlZCB3aXRoIGl0LlxuICAgIC8vIFNvZnRTdXJmZXIgbWFrZXMgbm8gd2FycmFudHkgZm9yIHRoaXMgY29kZSwgYW5kIGNhbm5vdCBiZSBoZWxkXG4gICAgLy8gbGlhYmxlIGZvciBhbnkgcmVhbCBvciBpbWFnaW5lZCBkYW1hZ2UgcmVzdWx0aW5nIGZyb20gaXRzIHVzZS5cbiAgICAvLyBVc2VycyBvZiB0aGlzIGNvZGUgbXVzdCB2ZXJpZnkgY29ycmVjdG5lc3MgZm9yIHRoZWlyIGFwcGxpY2F0aW9uLlxuICAgIHZhciB3biA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgaWYgKHkxIDw9IHkpIHtcbiAgICAgICAgICAgIGlmICh5MiA+IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA+IDApIHtcbiAgICAgICAgICAgICAgICB3bisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHkyIDw9IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA8IDApIHtcbiAgICAgICAgICAgIHduLS07XG4gICAgICAgIH1cbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHduICE9PSAwO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkge1xuICAgIGlmIChlbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgeCwgeSkge1xuICAgIGlmIChlbmRzcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGFpbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50XG4gKi9cbmltcG9ydCB7IGNvbnRhaW5zRXh0ZW50LCBjcmVhdGVFbXB0eSwgZXh0ZW5kRmxhdENvb3JkaW5hdGVzLCBpbnRlcnNlY3RzLCBpbnRlcnNlY3RzU2VnbWVudCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZm9yRWFjaCBhcyBmb3JFYWNoU2VnbWVudCB9IGZyb20gJy4vc2VnbWVudHMuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50LCBsaW5lYXJSaW5nQ29udGFpbnNYWSB9IGZyb20gJy4vY29udGFpbnMuanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNFeHRlbnQgPSBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoY3JlYXRlRW1wdHkoKSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICBpZiAoIWludGVyc2VjdHMoZXh0ZW50LCBjb29yZGluYXRlc0V4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoY29udGFpbnNFeHRlbnQoZXh0ZW50LCBjb29yZGluYXRlc0V4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlc0V4dGVudFswXSA+PSBleHRlbnRbMF0gJiYgY29vcmRpbmF0ZXNFeHRlbnRbMl0gPD0gZXh0ZW50WzJdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNFeHRlbnRbMV0gPj0gZXh0ZW50WzFdICYmIGNvb3JkaW5hdGVzRXh0ZW50WzNdIDw9IGV4dGVudFszXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZvckVhY2hTZWdtZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MSBTdGFydCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQyIEVuZCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHNlZ21lbnQgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LFxuICAgICAqICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocG9pbnQxLCBwb2ludDIpIHtcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgcG9pbnQxLCBwb2ludDIpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbaV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgaWYgKGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbMV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMF0sIGV4dGVudFszXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFsyXSwgZXh0ZW50WzFdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbM10pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGlmICghaW50ZXJzZWN0c0xpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlbmRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDEsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICBpZiAoIWludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpZiAoaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyc2VjdHNleHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9zZWdtZW50c1xuICovXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBzZWdtZW50IG9mIHRoZSBmbGF0IGNvb3JkaW5hdGVzXG4gKiBhcnJheS4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdFxuICogdmFsdWUgaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBUfSBjYWxsYmFjayBGdW5jdGlvblxuICogICAgIGNhbGxlZCBmb3IgZWFjaCBzZWdtZW50LlxuICogQHJldHVybiB7VHxib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgcG9pbnQxID0gW2ZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV1dO1xuICAgIHZhciBwb2ludDIgPSBbXTtcbiAgICB2YXIgcmV0O1xuICAgIGZvciAoOyBvZmZzZXQgKyBzdHJpZGUgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgcG9pbnQyWzBdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZV07XG4gICAgICAgIHBvaW50MlsxXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBzdHJpZGUgKyAxXTtcbiAgICAgICAgcmV0ID0gY2FsbGJhY2socG9pbnQxLCBwb2ludDIpO1xuICAgICAgICBpZiAocmV0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIHBvaW50MVswXSA9IHBvaW50MlswXTtcbiAgICAgICAgcG9pbnQxWzFdID0gcG9pbnQyWzFdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWdtZW50cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3JldmVyc2VcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgdG1wID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldID0gdG1wO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIGVuZCAtPSBzdHJpZGU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV2ZXJzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L29yaWVudFxuICovXG5pbXBvcnQgeyBjb29yZGluYXRlcyBhcyByZXZlcnNlQ29vcmRpbmF0ZXMgfSBmcm9tICcuL3JldmVyc2UuanMnO1xuLyoqXG4gKiBJcyB0aGUgbGluZWFyIHJpbmcgb3JpZW50ZWQgY2xvY2t3aXNlIGluIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIGJvdHRvbS1sZWZ0XG4gKiBjb29yZGluYXRlIG9yaWdpbj8gRm9yIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIHRvcC1sZWZ0IGNvb3JkaW5hdGUgb3JpZ2luLFxuICogdGhlIHJpbmcncyBvcmllbnRhdGlvbiBpcyBjbG9ja3dpc2Ugd2hlbiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gSXMgY2xvY2t3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xMTY1NjQ3L2Nsb2Nrd2lzZS1tZXRob2QjMTE2NTk0M1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9PU0dlby9nZGFsL2Jsb2IvbWFzdGVyL2dkYWwvb2dyL29ncmxpbmVhcnJpbmcuY3BwXG4gICAgdmFyIGVkZ2UgPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIGVkZ2UgKz0gKHgyIC0geDEpICogKHkyICsgeTEpO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gZWRnZSA9PT0gMCA/IHVuZGVmaW5lZCA6IGVkZ2UgPiAwO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIFRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb25cbiAqICAgICAoY291bnRlci1jbG9ja3dpc2UgZXh0ZXJpb3IgcmluZyBhbmQgY2xvY2t3aXNlIGludGVyaW9yIHJpbmdzKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJpbmdzIGFyZSBjb3JyZWN0bHkgb3JpZW50ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIGlmICgocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gVGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvblxuICogICAgIChjb3VudGVyLWNsb2Nrd2lzZSBleHRlcmlvciByaW5nIGFuZCBjbG9ja3dpc2UgaW50ZXJpb3IgcmluZ3MpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmluZ3MgYXJlIGNvcnJlY3RseSBvcmllbnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmICghbGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gRm9sbG93IHRoZSByaWdodC1oYW5kIHJ1bGUgZm9yIG9yaWVudGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICB2YXIgcmlnaHQgPSBvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCA/IG9wdF9yaWdodCA6IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgdmFyIGlzQ2xvY2t3aXNlID0gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIHZhciByZXZlcnNlID0gaSA9PT0gMFxuICAgICAgICAgICAgPyAocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKVxuICAgICAgICAgICAgOiAocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKTtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICAgIHJldmVyc2VDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgb2Zmc2V0ID0gb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzW2ldLCBzdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcmllbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvbHlnb25cbiAqL1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgTGluZWFyUmluZyBmcm9tICcuL0xpbmVhclJpbmcuanMnO1xuaW1wb3J0IFBvaW50IGZyb20gJy4vUG9pbnQuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgYXJyYXlNYXhTcXVhcmVkRGVsdGEsIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50IH0gZnJvbSAnLi9mbGF0L2Nsb3Nlc3QuanMnO1xuaW1wb3J0IHsgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZLCBnZXRDZW50ZXIgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkgfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQgeyBleHRlbmQgfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgeyBnZXRJbnRlcmlvclBvaW50T2ZBcnJheSB9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7IGluZmxhdGVDb29yZGluYXRlc0FycmF5IH0gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHsgaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSB9IGZyb20gJy4vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdzQXJlT3JpZW50ZWQsIG9yaWVudExpbmVhclJpbmdzIH0gZnJvbSAnLi9mbGF0L29yaWVudC5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5ncyBhcyBsaW5lYXJSaW5nc0FyZWEgfSBmcm9tICcuL2ZsYXQvYXJlYS5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nc0NvbnRhaW5zWFkgfSBmcm9tICcuL2ZsYXQvY29udGFpbnMuanMnO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBxdWFudGl6ZUFycmF5IH0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7IG9mZnNldCBhcyBzcGhlcmVPZmZzZXQgfSBmcm9tICcuLi9zcGhlcmUuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQb2x5Z29uIGdlb21ldHJ5LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFBvbHlnb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvbHlnb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshQXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj58IUFycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzXG4gICAgICogICAgIEFycmF5IG9mIGxpbmVhciByaW5ncyB0aGF0IGRlZmluZSB0aGUgcG9seWdvbi4gVGhlIGZpcnN0IGxpbmVhciByaW5nIG9mIHRoZVxuICAgICAqICAgICBhcnJheSBkZWZpbmVzIHRoZSBvdXRlci1ib3VuZGFyeSBvciBzdXJmYWNlIG9mIHRoZSBwb2x5Z29uLiBFYWNoIHN1YnNlcXVlbnRcbiAgICAgKiAgICAgbGluZWFyIHJpbmcgZGVmaW5lcyBhIGhvbGUgaW4gdGhlIHN1cmZhY2Ugb2YgdGhlIHBvbHlnb24uIEEgbGluZWFyIHJpbmcgaXNcbiAgICAgKiAgICAgYW4gYXJyYXkgb2YgdmVydGljZXMnIGNvb3JkaW5hdGVzIHdoZXJlIHRoZSBmaXJzdCBjb29yZGluYXRlIGFuZCB0aGUgbGFzdCBhcmVcbiAgICAgKiAgICAgZXF1aXZhbGVudC4gKEZvciBpbnRlcm5hbCB1c2UsIGZsYXQgY29vcmRpbmF0ZXMgaW4gY29tYmluYXRpb24gd2l0aFxuICAgICAqICAgICBgb3B0X2xheW91dGAgYW5kIGBvcHRfZW5kc2AgYXJlIGFsc28gYWNjZXB0ZWQuKVxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9lbmRzXSBFbmRzIChmb3IgaW50ZXJuYWwgdXNlIHdpdGggZmxhdCBjb29yZGluYXRlcykuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9seWdvbihjb29yZGluYXRlcywgb3B0X2xheW91dCwgb3B0X2VuZHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZW5kc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRJbnRlcmlvclBvaW50XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFfID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmllbnRlZFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBudWxsO1xuICAgICAgICBpZiAob3B0X2xheW91dCAhPT0gdW5kZWZpbmVkICYmIG9wdF9lbmRzKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMob3B0X2xheW91dCwgXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChjb29yZGluYXRlcykpO1xuICAgICAgICAgICAgX3RoaXMuZW5kc18gPSBvcHRfZW5kcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVzKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgdGhlIHBhc3NlZCBsaW5lYXIgcmluZyB0byB0aGlzIHBvbHlnb24uXG4gICAgICogQHBhcmFtIHtMaW5lYXJSaW5nfSBsaW5lYXJSaW5nIExpbmVhciByaW5nLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5hcHBlbmRMaW5lYXJSaW5nID0gZnVuY3Rpb24gKGxpbmVhclJpbmcpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRlbmQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5kc18ucHVzaCh0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHshUG9seWdvbn0gQ2xvbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0LCB0aGlzLmVuZHNfLnNsaWNlKCkpO1xuICAgICAgICBwb2x5Z29uLmFwcGx5UHJvcGVydGllcyh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHBvbHlnb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIGlmIChtaW5TcXVhcmVkRGlzdGFuY2UgPCBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkodGhpcy5nZXRFeHRlbnQoKSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChhcnJheU1heFNxdWFyZWREZWx0YSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgdGhpcy5tYXhEZWx0YV8sIHRydWUsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY29udGFpbnNYWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgeCwgeSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGFyZWEgb2YgdGhlIHBvbHlnb24gb24gcHJvamVjdGVkIHBsYW5lLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzQXJlYSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29vcmRpbmF0ZSBhcnJheSBmb3IgdGhpcyBnZW9tZXRyeS4gIFRoaXMgYXJyYXkgaGFzIHRoZSBzdHJ1Y3R1cmVcbiAgICAgKiBvZiBhIEdlb0pTT04gY29vcmRpbmF0ZSBhcnJheSBmb3IgcG9seWdvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIE9yaWVudCBjb29yZGluYXRlcyBhY2NvcmRpbmcgdG8gdGhlIHJpZ2h0LWhhbmRcbiAgICAgKiAgICAgcnVsZSAoY291bnRlci1jbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZCBjbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICAgKiAgICAgSWYgYGZhbHNlYCwgY29vcmRpbmF0ZXMgd2lsbCBiZSBvcmllbnRlZCBhY2NvcmRpbmcgdG8gdGhlIGxlZnQtaGFuZCBydWxlXG4gICAgICogICAgIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZCBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLlxuICAgICAqICAgICBCeSBkZWZhdWx0LCBjb29yZGluYXRlIG9yaWVudGF0aW9uIHdpbGwgZGVwZW5kIG9uIGhvdyB0aGUgZ2VvbWV0cnkgd2FzXG4gICAgICogICAgIGNvbnN0cnVjdGVkLlxuICAgICAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAob3B0X3JpZ2h0KSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIGlmIChvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgICAgICAgICBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBvcHRfcmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRW5kcy5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRFbmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEludGVyaW9yIHBvaW50LlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEZsYXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHZhciBmbGF0Q2VudGVyID0gZ2V0Q2VudGVyKHRoaXMuZ2V0RXh0ZW50KCkpO1xuICAgICAgICAgICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludF8gPSBnZXRJbnRlcmlvclBvaW50T2ZBcnJheSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBmbGF0Q2VudGVyLCAwKTtcbiAgICAgICAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGludGVyaW9yIHBvaW50IG9mIHRoZSBwb2x5Z29uLlxuICAgICAqIEByZXR1cm4ge1BvaW50fSBJbnRlcmlvciBwb2ludCBhcyBYWU0gY29vcmRpbmF0ZSwgd2hlcmUgTSBpcyB0aGVcbiAgICAgKiBsZW5ndGggb2YgdGhlIGhvcml6b250YWwgaW50ZXJzZWN0aW9uIHRoYXQgdGhlIHBvaW50IGJlbG9uZ3MgdG8uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEludGVyaW9yUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy5nZXRGbGF0SW50ZXJpb3JQb2ludCgpLCBHZW9tZXRyeUxheW91dC5YWU0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBudW1iZXIgb2YgcmluZ3Mgb2YgdGhlIHBvbHlnb24sICB0aGlzIGluY2x1ZGVzIHRoZSBleHRlcmlvclxuICAgICAqIHJpbmcgYW5kIGFueSBpbnRlcmlvciByaW5ncy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTnVtYmVyIG9mIHJpbmdzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZHNfLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgTnRoIGxpbmVhciByaW5nIG9mIHRoZSBwb2x5Z29uIGdlb21ldHJ5LiBSZXR1cm4gYG51bGxgIGlmIHRoZVxuICAgICAqIGdpdmVuIGluZGV4IGlzIG91dCBvZiByYW5nZS5cbiAgICAgKiBUaGUgZXh0ZXJpb3IgbGluZWFyIHJpbmcgaXMgYXZhaWxhYmxlIGF0IGluZGV4IGAwYCBhbmQgdGhlIGludGVyaW9yIHJpbmdzXG4gICAgICogYXQgaW5kZXggYDFgIGFuZCBiZXlvbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHJldHVybiB7TGluZWFyUmluZ30gTGluZWFyIHJpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmcgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLmVuZHNfLmxlbmd0aCA8PSBpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKGluZGV4ID09PSAwID8gMCA6IHRoaXMuZW5kc19baW5kZXggLSAxXSwgdGhpcy5lbmRzX1tpbmRleF0pLCB0aGlzLmxheW91dCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGxpbmVhciByaW5ncyBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxMaW5lYXJSaW5nPn0gTGluZWFyIHJpbmdzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheW91dCA9IHRoaXMubGF5b3V0O1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIHZhciBlbmRzID0gdGhpcy5lbmRzXztcbiAgICAgICAgdmFyIGxpbmVhclJpbmdzID0gW107XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICAgICAgdmFyIGxpbmVhclJpbmcgPSBuZXcgTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0LCBlbmQpLCBsYXlvdXQpO1xuICAgICAgICAgICAgbGluZWFyUmluZ3MucHVzaChsaW5lYXJSaW5nKTtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGluZWFyUmluZ3M7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPcmllbnRlZCBmbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5vcmllbnRlZFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgICAgIGlmIChsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLmxlbmd0aCA9IG9yaWVudExpbmVhclJpbmdzKHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1BvbHlnb259IFNpbXBsaWZpZWQgUG9seWdvbi5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBxdWFudGl6ZUFycmF5KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgTWF0aC5zcXJ0KHNxdWFyZWRUb2xlcmFuY2UpLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwLCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIHJldHVybiBuZXcgUG9seWdvbihzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSwgc2ltcGxpZmllZEVuZHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5QT0xZR09OO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBwb2x5Z29uLlxuICAgICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDIpO1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbmRzID0gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSwgdGhpcy5lbmRzXyk7XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9seWdvbjtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcbmV4cG9ydCBkZWZhdWx0IFBvbHlnb247XG4vKipcbiAqIENyZWF0ZSBhbiBhcHByb3hpbWF0aW9uIG9mIGEgY2lyY2xlIG9uIHRoZSBzdXJmYWNlIG9mIGEgc3BoZXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIGdyZWF0LWNpcmNsZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgdG9cbiAqICAgICB0aGUgcG9seWdvbiB2ZXJ0aWNlcyBpbiBtZXRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9uXSBPcHRpb25hbCBudW1iZXIgb2YgdmVydGljZXMgZm9yIHRoZSByZXN1bHRpbmdcbiAqICAgICBwb2x5Z29uLiBEZWZhdWx0IGlzIGAzMmAuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zcGhlcmVSYWRpdXNdIE9wdGlvbmFsIHJhZGl1cyBmb3IgdGhlIHNwaGVyZSAoZGVmYXVsdHMgdG9cbiAqICAgICB0aGUgRWFydGgncyBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkKS5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBcImNpcmN1bGFyXCIgcG9seWdvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNpcmN1bGFyKGNlbnRlciwgcmFkaXVzLCBvcHRfbiwgb3B0X3NwaGVyZVJhZGl1cykge1xuICAgIHZhciBuID0gb3B0X24gPyBvcHRfbiA6IDMyO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kKGZsYXRDb29yZGluYXRlcywgc3BoZXJlT2Zmc2V0KGNlbnRlciwgcmFkaXVzLCAoMiAqIE1hdGguUEkgKiBpKSAvIG4sIG9wdF9zcGhlcmVSYWRpdXMpKTtcbiAgICB9XG4gICAgZmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbXG4gICAgICAgIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgXSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHBvbHlnb24gZnJvbSBhbiBleHRlbnQuIFRoZSBsYXlvdXQgdXNlZCBpcyBgWFlgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV4dGVudChleHRlbnQpIHtcbiAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW1xuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgIF07XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIFtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICBdKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zaWRlc10gTnVtYmVyIG9mIHNpZGVzIG9mIHRoZSBwb2x5Z29uLiBEZWZhdWx0IGlzIDMyLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfYW5nbGVdIFN0YXJ0IGFuZ2xlIGZvciB0aGUgZmlyc3QgdmVydGV4IG9mIHRoZSBwb2x5Z29uIGluXG4gKiAgICAgY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy4gMCBtZWFucyBFYXN0LiBEZWZhdWx0IGlzIDAuXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBQb2x5Z29uIGdlb21ldHJ5LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUNpcmNsZShjaXJjbGUsIG9wdF9zaWRlcywgb3B0X2FuZ2xlKSB7XG4gICAgdmFyIHNpZGVzID0gb3B0X3NpZGVzID8gb3B0X3NpZGVzIDogMzI7XG4gICAgdmFyIHN0cmlkZSA9IGNpcmNsZS5nZXRTdHJpZGUoKTtcbiAgICB2YXIgbGF5b3V0ID0gY2lyY2xlLmdldExheW91dCgpO1xuICAgIHZhciBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIGFycmF5TGVuZ3RoID0gc3RyaWRlICogKHNpZGVzICsgMSk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheShhcnJheUxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW2ldID0gMDtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW2kgKyAxXSA9IDA7XG4gICAgICAgIGZvciAodmFyIGogPSAyOyBqIDwgc3RyaWRlOyBqKyspIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tpICsgal0gPSBjZW50ZXJbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGVuZHMgPSBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF07XG4gICAgdmFyIHBvbHlnb24gPSBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIGxheW91dCwgZW5kcyk7XG4gICAgbWFrZVJlZ3VsYXIocG9seWdvbiwgY2VudGVyLCBjaXJjbGUuZ2V0UmFkaXVzKCksIG9wdF9hbmdsZSk7XG4gICAgcmV0dXJuIHBvbHlnb247XG59XG4vKipcbiAqIE1vZGlmeSB0aGUgY29vcmRpbmF0ZXMgb2YgYSBwb2x5Z29uIHRvIG1ha2UgaXQgYSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge1BvbHlnb259IHBvbHlnb24gUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cyBvZiB0aGUgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfYW5nbGVdIFN0YXJ0IGFuZ2xlIGZvciB0aGUgZmlyc3QgdmVydGV4IG9mIHRoZSBwb2x5Z29uIGluXG4gKiAgICAgY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy4gMCBtZWFucyBFYXN0LiBEZWZhdWx0IGlzIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIHJhZGl1cywgb3B0X2FuZ2xlKSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb24uZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IHBvbHlnb24uZ2V0U3RyaWRlKCk7XG4gICAgdmFyIHNpZGVzID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAvIHN0cmlkZSAtIDE7XG4gICAgdmFyIHN0YXJ0QW5nbGUgPSBvcHRfYW5nbGUgPyBvcHRfYW5nbGUgOiAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHNpZGVzOyArK2kpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IGkgKiBzdHJpZGU7XG4gICAgICAgIHZhciBhbmdsZSA9IHN0YXJ0QW5nbGUgKyAobW9kdWxvKGksIHNpZGVzKSAqIDIgKiBNYXRoLlBJKSAvIHNpZGVzO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSA9IGNlbnRlclswXSArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdID0gY2VudGVyWzFdICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUpO1xuICAgIH1cbiAgICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvbHlnb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbnRlcmlvcnBvaW50XG4gKi9cbmltcG9ydCB7IGxpbmVhclJpbmdzQ29udGFpbnNYWSB9IGZyb20gJy4vY29udGFpbnMuanMnO1xuaW1wb3J0IHsgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbi8qKlxuICogQ2FsY3VsYXRlcyBhIHBvaW50IHRoYXQgaXMgbGlrZWx5IHRvIGxpZSBpbiB0aGUgaW50ZXJpb3Igb2YgdGhlIGxpbmVhciByaW5ncy5cbiAqIEluc3BpcmVkIGJ5IEpUUydzIGNvbS52aXZpZHNvbHV0aW9ucy5qdHMuZ2VvbS5HZW9tZXRyeSNnZXRJbnRlcmlvclBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHBhcmFtIHtudW1iZXJ9IGZsYXRDZW50ZXJzT2Zmc2V0IEZsYXQgY2VudGVyIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IERlc3RpbmF0aW9uIHBvaW50IGFzIFhZTSBjb29yZGluYXRlLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZmxhdENlbnRlcnMsIGZsYXRDZW50ZXJzT2Zmc2V0LCBvcHRfZGVzdCkge1xuICAgIHZhciBpLCBpaSwgeCwgeDEsIHgyLCB5MSwgeTI7XG4gICAgdmFyIHkgPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldCArIDFdO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgaW50ZXJzZWN0aW9ucyA9IFtdO1xuICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb25zIHdpdGggdGhlIGhvcml6b250YWwgbGluZVxuICAgIGZvciAodmFyIHIgPSAwLCByciA9IGVuZHMubGVuZ3RoOyByIDwgcnI7ICsrcikge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tyXTtcbiAgICAgICAgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICAgICAgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGVuZDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgaWYgKCh5IDw9IHkxICYmIHkyIDw9IHkpIHx8ICh5MSA8PSB5ICYmIHkgPD0geTIpKSB7XG4gICAgICAgICAgICAgICAgeCA9ICgoeSAtIHkxKSAvICh5MiAtIHkxKSkgKiAoeDIgLSB4MSkgKyB4MTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25zLnB1c2goeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBGaW5kIHRoZSBsb25nZXN0IHNlZ21lbnQgb2YgdGhlIGhvcml6b250YWwgbGluZSB0aGF0IGhhcyBpdHMgY2VudGVyIHBvaW50XG4gICAgLy8gaW5zaWRlIHRoZSBsaW5lYXIgcmluZy5cbiAgICB2YXIgcG9pbnRYID0gTmFOO1xuICAgIHZhciBtYXhTZWdtZW50TGVuZ3RoID0gLUluZmluaXR5O1xuICAgIGludGVyc2VjdGlvbnMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcbiAgICB4MSA9IGludGVyc2VjdGlvbnNbMF07XG4gICAgZm9yIChpID0gMSwgaWkgPSBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgeDIgPSBpbnRlcnNlY3Rpb25zW2ldO1xuICAgICAgICB2YXIgc2VnbWVudExlbmd0aCA9IE1hdGguYWJzKHgyIC0geDEpO1xuICAgICAgICBpZiAoc2VnbWVudExlbmd0aCA+IG1heFNlZ21lbnRMZW5ndGgpIHtcbiAgICAgICAgICAgIHggPSAoeDEgKyB4MikgLyAyO1xuICAgICAgICAgICAgaWYgKGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICAgICAgICAgIHBvaW50WCA9IHg7XG4gICAgICAgICAgICAgICAgbWF4U2VnbWVudExlbmd0aCA9IHNlZ21lbnRMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeDEgPSB4MjtcbiAgICB9XG4gICAgaWYgKGlzTmFOKHBvaW50WCkpIHtcbiAgICAgICAgLy8gVGhlcmUgaXMgbm8gaG9yaXpvbnRhbCBsaW5lIHRoYXQgaGFzIGl0cyBjZW50ZXIgcG9pbnQgaW5zaWRlIHRoZSBsaW5lYXJcbiAgICAgICAgLy8gcmluZy4gIFVzZSB0aGUgY2VudGVyIG9mIHRoZSB0aGUgbGluZWFyIHJpbmcncyBleHRlbnQuXG4gICAgICAgIHBvaW50WCA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0XTtcbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0KSB7XG4gICAgICAgIG9wdF9kZXN0LnB1c2gocG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIG9wdF9kZXN0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtwb2ludFgsIHksIG1heFNlZ21lbnRMZW5ndGhdO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnRzIGFzIFhZTSBjb29yZGluYXRlcywgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRzT2ZNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBmbGF0Q2VudGVycykge1xuICAgIHZhciBpbnRlcmlvclBvaW50cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaW50ZXJpb3JQb2ludHMgPSBnZXRJbnRlcmlvclBvaW50T2ZBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBmbGF0Q2VudGVycywgMiAqIGksIGludGVyaW9yUG9pbnRzKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gaW50ZXJpb3JQb2ludHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmlvcnBvaW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVmlld1xuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi9WaWV3SGludC5qcyc7XG5pbXBvcnQgVmlld1Byb3BlcnR5IGZyb20gJy4vVmlld1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IERFRkFVTFRfVElMRV9TSVpFIH0gZnJvbSAnLi90aWxlZ3JpZC9jb21tb24uanMnO1xuaW1wb3J0IHsgTUVURVJTX1BFUl9VTklULCBjcmVhdGVQcm9qZWN0aW9uLCBmcm9tVXNlckNvb3JkaW5hdGUsIGZyb21Vc2VyRXh0ZW50LCBnZXRVc2VyUHJvamVjdGlvbiwgdG9Vc2VyQ29vcmRpbmF0ZSwgdG9Vc2VyRXh0ZW50LCB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWRkIGFzIGFkZENvb3JkaW5hdGUsIGVxdWFscyBhcyBjb29yZGluYXRlc0VxdWFsLCByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSwgfSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7IG5vbmUgYXMgY2VudGVyTm9uZSwgY3JlYXRlRXh0ZW50IH0gZnJvbSAnLi9jZW50ZXJjb25zdHJhaW50LmpzJztcbmltcG9ydCB7IGNsYW1wLCBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgY3JlYXRlTWluTWF4UmVzb2x1dGlvbiB9IGZyb20gJy4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlU25hcFRvTiwgY3JlYXRlU25hcFRvWmVybywgZGlzYWJsZSwgbm9uZSBhcyByb3RhdGlvbk5vbmUsIH0gZnJvbSAnLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlU25hcFRvUG93ZXIsIGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zLCB9IGZyb20gJy4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgeyBnZXRDZW50ZXIsIGdldEZvclZpZXdBbmRTaXplLCBnZXRIZWlnaHQsIGdldFdpZHRoLCBpc0VtcHR5LCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGluQW5kT3V0IH0gZnJvbSAnLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgbGluZWFyRmluZE5lYXJlc3QgfSBmcm9tICcuL2FycmF5LmpzJztcbmltcG9ydCB7IGZyb21FeHRlbnQgYXMgcG9seWdvbkZyb21FeHRlbnQgfSBmcm9tICcuL2dlb20vUG9seWdvbi5qcyc7XG4vKipcbiAqIEFuIGFuaW1hdGlvbiBjb25maWd1cmF0aW9uXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gQW5pbWF0aW9uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbc291cmNlQ2VudGVyXSBTb3VyY2UgY2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3RhcmdldENlbnRlcl0gVGFyZ2V0IGNlbnRlci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc291cmNlUmVzb2x1dGlvbl0gU291cmNlIHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJlc29sdXRpb25dIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSb3RhdGlvbl0gU291cmNlIHJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSb3RhdGlvbl0gVGFyZ2V0IHJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gQW5jaG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0IFN0YXJ0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBjb21wbGV0ZSBDb21wbGV0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IGVhc2luZyBFYXNpbmcuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOnZvaWR9IGNhbGxiYWNrIENhbGxiYWNrLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENvbnN0cmFpbnRzXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBjZW50ZXIgQ2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcm90YXRpb24gUm90YXRpb24uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRml0T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgYm94IHRvIGZpdFxuICogdGhlIGV4dGVudCBpbnRvLiBEZWZhdWx0IGlzIHRoZSBjdXJyZW50IHNpemUgb2YgdGhlIGZpcnN0IG1hcCBpbiB0aGUgRE9NIHRoYXRcbiAqIHVzZXMgdGhpcyB2aWV3LCBvciBgWzEwMCwgMTAwXWAgaWYgbm8gc3VjaCBtYXAgaXMgZm91bmQuXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSBbcGFkZGluZz1bMCwgMCwgMCwgMF1dIFBhZGRpbmcgKGluIHBpeGVscykgdG8gYmVcbiAqIGNsZWFyZWQgaW5zaWRlIHRoZSB2aWV3LiBWYWx1ZXMgaW4gdGhlIGFycmF5IGFyZSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnRcbiAqIHBhZGRpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtuZWFyZXN0PWZhbHNlXSBJZiB0aGUgdmlldyBgY29uc3RyYWluUmVzb2x1dGlvbmAgb3B0aW9uIGlzIGB0cnVlYCxcbiAqIGdldCB0aGUgbmVhcmVzdCBleHRlbnQgaW5zdGVhZCBvZiB0aGUgY2xvc2VzdCB0aGF0IGFjdHVhbGx5IGZpdHMgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb249MF0gTWluaW11bSByZXNvbHV0aW9uIHRoYXQgd2Ugem9vbSB0by5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIHRoYXQgd2Ugem9vbSB0by4gSWZcbiAqIGBtaW5SZXNvbHV0aW9uYCBpcyBnaXZlbiwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQnkgZGVmYXVsdCwgdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRvIHRoZSB0YXJnZXQgZXh0ZW50LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkIGR1cmluZ1xuICogdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmcuaW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6dm9pZH0gW2NhbGxiYWNrXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgdmlldyBpcyBpblxuICogaXRzIGZpbmFsIHBvc2l0aW9uLiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBgdHJ1ZWAgaWYgdGhlIGFuaW1hdGlvblxuICogc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWAgaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWaWV3T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gVGhlIGluaXRpYWwgY2VudGVyIGZvclxuICogdGhlIHZpZXcuIElmIGEgdXNlciBwcm9qZWN0aW9uIGlzIG5vdCBzZXQsIHRoZSBjb29yZGluYXRlIHN5c3RlbSBmb3IgdGhlIGNlbnRlciBpc1xuICogc3BlY2lmaWVkIHdpdGggdGhlIGBwcm9qZWN0aW9uYCBvcHRpb24uIExheWVyIHNvdXJjZXMgd2lsbCBub3QgYmUgZmV0Y2hlZCBpZiB0aGlzXG4gKiBpcyBub3Qgc2V0LCBidXQgdGhlIGNlbnRlciBjYW4gYmUgc2V0IGxhdGVyIHdpdGgge0BsaW5rICNzZXRDZW50ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufG51bWJlcn0gW2NvbnN0cmFpblJvdGF0aW9uPXRydWVdIFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKiBgZmFsc2VgIG1lYW5zIG5vIGNvbnN0cmFpbnQuIGB0cnVlYCBtZWFucyBubyBjb25zdHJhaW50LCBidXQgc25hcCB0byB6ZXJvXG4gKiBuZWFyIHplcm8uIEEgbnVtYmVyIGNvbnN0cmFpbnMgdGhlIHJvdGF0aW9uIHRvIHRoYXQgbnVtYmVyIG9mIHZhbHVlcy4gRm9yXG4gKiBleGFtcGxlLCBgNGAgd2lsbCBjb25zdHJhaW4gdGhlIHJvdGF0aW9uIHRvIDAsIDkwLCAxODAsIGFuZCAyNzAgZGVncmVlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVJvdGF0aW9uPXRydWVdIEVuYWJsZSByb3RhdGlvbi5cbiAqIElmIGBmYWxzZWAsIGEgcm90YXRpb24gY29uc3RyYWludCB0aGF0IGFsd2F5cyBzZXRzIHRoZSByb3RhdGlvbiB0byB6ZXJvIGlzXG4gKiB1c2VkLiBUaGUgYGNvbnN0cmFpblJvdGF0aW9uYCBvcHRpb24gaGFzIG5vIGVmZmVjdCBpZiBgZW5hYmxlUm90YXRpb25gIGlzXG4gKiBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBleHRlbnQgdGhhdCBjb25zdHJhaW5zIHRoZVxuICogdmlldywgaW4gb3RoZXIgd29yZHMsIG5vdGhpbmcgb3V0c2lkZSBvZiB0aGlzIGV4dGVudCBjYW4gYmUgdmlzaWJsZSBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluT25seUNlbnRlcj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyIGFuZCBub3QgdGhlIHdob2xlIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Ntb290aEV4dGVudENvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIGJlIGFwcGxpZWQgc21vb3RobHksIGkuZS4gYWxsb3cgdGhlIHZpZXcgdG8gZ28gc2xpZ2h0bHkgb3V0c2lkZVxuICogb2YgdGhlIGdpdmVuIGBleHRlbnRgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGlXb3JsZD1mYWxzZV0gSWYgYGZhbHNlYCB0aGUgdmlldyBpcyBjb25zdHJhaW5lZCBzb1xuICogb25seSBvbmUgd29ybGQgaXMgdmlzaWJsZSwgYW5kIHlvdSBjYW5ub3QgcGFuIG9mZiB0aGUgZWRnZS4gIElmIGB0cnVlYCB0aGUgbWFwXG4gKiBtYXkgc2hvdyBtdWx0aXBsZSB3b3JsZHMgYXQgbG93IHpvb20gbGV2ZWxzLiAgT25seSB1c2VkIGlmIHRoZSBgcHJvamVjdGlvbmAgaXNcbiAqIGdsb2JhbC4gIE5vdGUgdGhhdCBpZiBgZXh0ZW50YCBpcyBhbHNvIHByb3ZpZGVkIGl0IGlzIGdpdmVuIHByZWNlZGVuY2UuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGFsd2F5c1xuICogYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uOyBmYWxzZSBtZWFuc1xuICogaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIHJlc29sdXRpb25cbiAqIG1pbi9tYXggdmFsdWVzIHdpbGwgYmUgYXBwbGllZCBzbW9vdGhseSwgaS4gZS4gYWxsb3cgdGhlIHZpZXcgdG8gZXhjZWVkIHNsaWdodGx5XG4gKiB0aGUgZ2l2ZW4gcmVzb2x1dGlvbiBvciB6b29tIGJvdW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50PWZhbHNlXSBBbGxvdyB0aGUgdmlldyB0byBiZSB6b29tZWQgb3V0IHRvXG4gKiBzaG93IHRoZSBmdWxsIGNvbmZpZ3VyZWQgZXh0ZW50LiBCeSBkZWZhdWx0LCB3aGVuIGEgdmlldyBpcyBjb25maWd1cmVkIHdpdGggYW5cbiAqIGV4dGVudCwgdXNlcnMgd2lsbCBub3QgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGUgdmlld3BvcnQgZXhjZWVkcyB0aGUgZXh0ZW50IGluXG4gKiBlaXRoZXIgZGltZW5zaW9uLiBUaGlzIG1lYW5zIHRoZSBmdWxsIGV4dGVudCBtYXkgbm90IGJlIHZpc2libGUgaWYgdGhlIHZpZXdwb3J0XG4gKiBpcyB0YWxsZXIgb3Igd2lkZXIgdGhhbiB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudC4gSWZcbiAqIHNob3dGdWxsRXh0ZW50IGlzIHRydWUsIHRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGF0IHRoZSB2aWV3cG9ydFxuICogZXhjZWVkcyB0aGUgaGVpZ2h0IG9yIHdpZHRoIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudCwgYnV0IG5vdCBib3RoLCBhbGxvd2luZyB0aGVcbiAqIGZ1bGwgZXh0ZW50IHRvIGJlIHNob3duLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdGhhdCBkZXRlcm1pbmUgdGhlXG4gKiB6b29tIGxldmVscyBpZiBzcGVjaWZpZWQuIFRoZSBpbmRleCBpbiB0aGUgYXJyYXkgY29ycmVzcG9uZHMgdG8gdGhlIHpvb20gbGV2ZWwsXG4gKiB0aGVyZWZvcmUgdGhlIHJlc29sdXRpb24gdmFsdWVzIGhhdmUgdG8gYmUgaW4gZGVzY2VuZGluZyBvcmRlci4gSXQgYWxzbyBjb25zdHJhaW5zXG4gKiB0aGUgcmVzb2x1dGlvbiBieSB0aGUgbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZS4gSWYgc2V0IHRoZSBgbWF4UmVzb2x1dGlvbmAsXG4gKiBgbWluUmVzb2x1dGlvbmAsIGBtaW5ab29tYCwgYG1heFpvb21gLCBhbmQgYHpvb21GYWN0b3JgIG9wdGlvbnMgYXJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uPTBdIFRoZSBpbml0aWFsIHJvdGF0aW9uIGZvciB0aGUgdmlldyBpbiByYWRpYW5zXG4gKiAocG9zaXRpdmUgcm90YXRpb24gY2xvY2t3aXNlLCAwIG1lYW5zIE5vcnRoKS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gT25seSB1c2VkIGlmIGByZXNvbHV0aW9uYCBpcyBub3QgZGVmaW5lZC4gWm9vbVxuICogbGV2ZWwgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21GYWN0b3I9Ml0gVGhlIHpvb20gZmFjdG9yIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAqIGNvcnJlc3BvbmRpbmcgcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gY3NzIHBpeGVscykuXG4gKiBJZiB0aGUgbWFwIHZpZXdwb3J0IGlzIHBhcnRpYWxseSBjb3ZlcmVkIHdpdGggb3RoZXIgY29udGVudCAob3ZlcmxheXMpIGFsb25nXG4gKiBpdHMgZWRnZXMsIHRoaXMgc2V0dGluZyBhbGxvd3MgdG8gc2hpZnQgdGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnQgYXdheSBmcm9tXG4gKiB0aGF0IGNvbnRlbnQuIFRoZSBvcmRlciBvZiB0aGUgdmFsdWVzIGlzIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2ZcbiAqIHRoZSBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIFRoZSB6b29tIGxldmVsIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2YgdGhlXG4gKiBhbmltYXRpb24uIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGByZXNvbHV0aW9uYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZFxuICogb2YgdGhlIGFuaW1hdGlvbi4gIElmIGB6b29tYCBpcyBhbHNvIHByb3ZpZGVkLCB0aGlzIG9wdGlvbiB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIE9wdGlvbmFsIGFuY2hvciB0byByZW1haW4gZml4ZWRcbiAqIGR1cmluZyBhIHJvdGF0aW9uIG9yIHJlc29sdXRpb24gYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDAwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBbZWFzaW5nXSBUaGUgZWFzaW5nIGZ1bmN0aW9uIHVzZWRcbiAqIGR1cmluZyB0aGUgYW5pbWF0aW9uIChkZWZhdWx0cyB0byB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZy5pbkFuZE91dH0pLlxuICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIGZyYW1lIHdpdGggYSBudW1iZXIgcmVwcmVzZW50aW5nIGFcbiAqIGZyYWN0aW9uIG9mIHRoZSBhbmltYXRpb24ncyBkdXJhdGlvbi4gIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyXG4gKiBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0b3dhcmQgdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpvb20gWm9vbS5cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IG1pbiB6b29tIGxldmVsIGZvciB0aGUgbWFwIHZpZXcuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgREVGQVVMVF9NSU5fWk9PTSA9IDA7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmNlbnRlcid8J2NoYW5nZTpyZXNvbHV0aW9uJ3wnY2hhbmdlOnJvdGF0aW9uJ30gVmlld09iamVjdEV2ZW50VHlwZXNcbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxWaWV3T2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xWaWV3T2JqZWN0RXZlbnRUeXBlcywgUmV0dXJuPn0gVmlld09uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBWaWV3IG9iamVjdCByZXByZXNlbnRzIGEgc2ltcGxlIDJEIHZpZXcgb2YgdGhlIG1hcC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBvYmplY3QgdG8gYWN0IHVwb24gdG8gY2hhbmdlIHRoZSBjZW50ZXIsIHJlc29sdXRpb24sXG4gKiBhbmQgcm90YXRpb24gb2YgdGhlIG1hcC5cbiAqXG4gKiBBIFZpZXcgaGFzIGEgYHByb2plY3Rpb25gLiBUaGUgcHJvamVjdGlvbiBkZXRlcm1pbmVzIHRoZVxuICogY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhlIGNlbnRlciwgYW5kIGl0cyB1bml0cyBkZXRlcm1pbmUgdGhlIHVuaXRzIG9mIHRoZVxuICogcmVzb2x1dGlvbiAocHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwpLiBUaGUgZGVmYXVsdCBwcm9qZWN0aW9uIGlzXG4gKiBTcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKlxuICogIyMjIFRoZSB2aWV3IHN0YXRlc1xuICpcbiAqIEEgVmlldyBpcyBkZXRlcm1pbmVkIGJ5IHRocmVlIHN0YXRlczogYGNlbnRlcmAsIGByZXNvbHV0aW9uYCxcbiAqIGFuZCBgcm90YXRpb25gLiBFYWNoIHN0YXRlIGhhcyBhIGNvcnJlc3BvbmRpbmcgZ2V0dGVyIGFuZCBzZXR0ZXIsIGUuZy5cbiAqIGBnZXRDZW50ZXJgIGFuZCBgc2V0Q2VudGVyYCBmb3IgdGhlIGBjZW50ZXJgIHN0YXRlLlxuICpcbiAqIFRoZSBgem9vbWAgc3RhdGUgaXMgYWN0dWFsbHkgbm90IHNhdmVkIG9uIHRoZSB2aWV3OiBhbGwgY29tcHV0YXRpb25zXG4gKiBpbnRlcm5hbGx5IHVzZSB0aGUgYHJlc29sdXRpb25gIHN0YXRlLiBTdGlsbCwgdGhlIGBzZXRab29tYCBhbmQgYGdldFpvb21gXG4gKiBtZXRob2RzIGFyZSBhdmFpbGFibGUsIGFzIHdlbGwgYXMgYGdldFJlc29sdXRpb25Gb3Jab29tYCBhbmRcbiAqIGBnZXRab29tRm9yUmVzb2x1dGlvbmAgdG8gc3dpdGNoIGZyb20gb25lIHN5c3RlbSB0byB0aGUgb3RoZXIuXG4gKlxuICogIyMjIFRoZSBjb25zdHJhaW50c1xuICpcbiAqIGBzZXRDZW50ZXJgLCBgc2V0UmVzb2x1dGlvbmAgYW5kIGBzZXRSb3RhdGlvbmAgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHRoZVxuICogc3RhdGVzIG9mIHRoZSB2aWV3LCBidXQgYW55IGNvbnN0cmFpbnQgZGVmaW5lZCBpbiB0aGUgY29uc3RydWN0b3Igd2lsbFxuICogYmUgYXBwbGllZCBhbG9uZyB0aGUgd2F5LlxuICpcbiAqIEEgVmlldyBvYmplY3QgY2FuIGhhdmUgYSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiwgYSAqcm90YXRpb24gY29uc3RyYWludCpcbiAqIGFuZCBhICpjZW50ZXIgY29uc3RyYWludCouXG4gKlxuICogVGhlICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqIHR5cGljYWxseSByZXN0cmljdHMgbWluL21heCB2YWx1ZXMgYW5kXG4gKiBzbmFwcyB0byBzcGVjaWZpYyByZXNvbHV0aW9ucy4gSXQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgZm9sbG93aW5nXG4gKiBvcHRpb25zOiBgcmVzb2x1dGlvbnNgLCBgbWF4UmVzb2x1dGlvbmAsIGBtYXhab29tYCBhbmQgYHpvb21GYWN0b3JgLlxuICogSWYgYHJlc29sdXRpb25zYCBpcyBzZXQsIHRoZSBvdGhlciB0aHJlZSBvcHRpb25zIGFyZSBpZ25vcmVkLiBTZWVcbiAqIGRvY3VtZW50YXRpb24gZm9yIGVhY2ggb3B0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgdmlld1xuICogb25seSBoYXMgYSBtaW4vbWF4IHJlc3RyaWN0aW9uIGFuZCBhbGxvdyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgd2hlblxuICogcGluY2gtem9vbWluZyBmb3IgZXhhbXBsZS5cbiAqXG4gKiBUaGUgKnJvdGF0aW9uIGNvbnN0cmFpbnQqIHNuYXBzIHRvIHNwZWNpZmljIGFuZ2xlcy4gSXQgaXMgZGV0ZXJtaW5lZFxuICogYnkgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBgZW5hYmxlUm90YXRpb25gIGFuZCBgY29uc3RyYWluUm90YXRpb25gLlxuICogQnkgZGVmYXVsdCByb3RhdGlvbiBpcyBhbGxvd2VkIGFuZCBpdHMgdmFsdWUgaXMgc25hcHBlZCB0byB6ZXJvIHdoZW4gYXBwcm9hY2hpbmcgdGhlXG4gKiBob3Jpem9udGFsLlxuICpcbiAqIFRoZSAqY2VudGVyIGNvbnN0cmFpbnQqIGlzIGRldGVybWluZWQgYnkgdGhlIGBleHRlbnRgIG9wdGlvbi4gQnlcbiAqIGRlZmF1bHQgdGhlIHZpZXcgY2VudGVyIGlzIG5vdCBjb25zdHJhaW5lZCBhdCBhbGwuXG4gKlxuICogIyMjIENoYW5naW5nIHRoZSB2aWV3IHN0YXRlXG4gKlxuICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBgc2V0Wm9vbWAsIGBzZXRSZXNvbHV0aW9uYCwgYHNldENlbnRlcmAgYW5kXG4gKiBgc2V0Um90YXRpb25gIGFyZSBzdWJqZWN0IHRvIHRoZSBhYm92ZSBtZW50aW9uZWQgY29uc3RyYWludHMuIEFzIHN1Y2gsIGl0XG4gKiBtYXkgc29tZXRpbWVzIG5vdCBiZSBwb3NzaWJsZSB0byBrbm93IGluIGFkdmFuY2UgdGhlIHJlc3VsdGluZyBzdGF0ZSBvZiB0aGVcbiAqIFZpZXcuIEZvciBleGFtcGxlLCBjYWxsaW5nIGBzZXRSZXNvbHV0aW9uKDEwKWAgZG9lcyBub3QgZ3VhcmFudGVlIHRoYXRcbiAqIGBnZXRSZXNvbHV0aW9uKClgIHdpbGwgcmV0dXJuIGAxMGAuXG4gKlxuICogQSBjb25zZXF1ZW5jZSBvZiB0aGlzIGlzIHRoYXQsIHdoZW4gYXBwbHlpbmcgYSBkZWx0YSBvbiB0aGUgdmlldyBzdGF0ZSwgb25lXG4gKiBzaG91bGQgdXNlIGBhZGp1c3RDZW50ZXJgLCBgYWRqdXN0Um90YXRpb25gLCBgYWRqdXN0Wm9vbWAgYW5kIGBhZGp1c3RSZXNvbHV0aW9uYFxuICogcmF0aGVyIHRoYW4gdGhlIGNvcnJlc3BvbmRpbmcgc2V0dGVycy4gVGhpcyB3aWxsIGxldCB2aWV3IGRvIGl0cyBpbnRlcm5hbFxuICogY29tcHV0YXRpb25zLiBCZXNpZGVzLCB0aGUgYGFkanVzdCpgIG1ldGhvZHMgYWxzbyB0YWtlIGFuIGBvcHRfYW5jaG9yYFxuICogYXJndW1lbnQgd2hpY2ggYWxsb3dzIHNwZWNpZnlpbmcgYW4gb3JpZ2luIGZvciB0aGUgdHJhbnNmb3JtYXRpb24uXG4gKlxuICogIyMjIEludGVyYWN0aW5nIHdpdGggdGhlIHZpZXdcbiAqXG4gKiBWaWV3IGNvbnN0cmFpbnRzIGFyZSB1c3VhbGx5IG9ubHkgYXBwbGllZCB3aGVuIHRoZSB2aWV3IGlzICphdCByZXN0KiwgbWVhbmluZyB0aGF0XG4gKiBubyBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgb25nb2luZy4gQXMgc3VjaCwgaWYgdGhlIHVzZXIgcHV0cyB0aGUgdmlldyBpbiBhXG4gKiBzdGF0ZSB0aGF0IGlzIG5vdCBlcXVpdmFsZW50IHRvIGEgY29uc3RyYWluZWQgb25lIChlLmcuIHJvdGF0aW5nIHRoZSB2aWV3IHdoZW5cbiAqIHRoZSBzbmFwIGFuZ2xlIGlzIDApLCBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgYXQgdGhlIGludGVyYWN0aW9uIGVuZCB0b1xuICogcHV0IGJhY2sgdGhlIHZpZXcgdG8gYSBzdGFibGUgc3RhdGU7XG4gKlxuICogQGFwaVxuICovXG52YXIgVmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmlldywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBbb3B0X29wdGlvbnNdIFZpZXcgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBWaWV3KG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1ZpZXdPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1ZpZXdPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Vmlld09uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIHZhciBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRfb3B0aW9ucyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhpbnRzXyA9IFswLCAwXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxBcnJheTxBbmltYXRpb24+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuaW1hdGlvbnNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVwZGF0ZUFuaW1hdGlvbktleV87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wcm9qZWN0aW9uXyA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3cG9ydFNpemVfID0gWzEwMCwgMTAwXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRDZW50ZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0UmVzb2x1dGlvbl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFJvdGF0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAob3B0aW9ucy5jZW50ZXIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY2VudGVyID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdGlvbnMuY2VudGVyLCBfdGhpcy5wcm9qZWN0aW9uXyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZXh0ZW50KSB7XG4gICAgICAgICAgICBvcHRpb25zLmV4dGVudCA9IGZyb21Vc2VyRXh0ZW50KG9wdGlvbnMuZXh0ZW50LCBfdGhpcy5wcm9qZWN0aW9uXyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuYXBwbHlPcHRpb25zXyhvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdXAgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseU9wdGlvbnNfID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludEluZm8gPSBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1heFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5SZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuem9vbUZhY3Rvcl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uem9vbUZhY3RvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbnNfID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFkZGluZ18gPSBvcHRpb25zLnBhZGRpbmc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5ab29tXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5ab29tO1xuICAgICAgICB2YXIgY2VudGVyQ29uc3RyYWludCA9IGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludCA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5jb25zdHJhaW50O1xuICAgICAgICB2YXIgcm90YXRpb25Db25zdHJhaW50ID0gY3JlYXRlUm90YXRpb25Db25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0NvbnN0cmFpbnRzfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb25zdHJhaW50c18gPSB7XG4gICAgICAgICAgICBjZW50ZXI6IGNlbnRlckNvbnN0cmFpbnQsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uQ29uc3RyYWludCxcbiAgICAgICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbkNvbnN0cmFpbnQsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0Um90YXRpb24ob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGlvbiA6IDApO1xuICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKG9wdGlvbnMuY2VudGVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNlbnRlciA6IG51bGwpO1xuICAgICAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihvcHRpb25zLnJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFpvb20ob3B0aW9ucy56b29tKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Vmlld09wdGlvbnN9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wdGlvbnNfID0gb3B0aW9ucztcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWV3LnByb3RvdHlwZSwgXCJwYWRkaW5nXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhZGRpbmcgKGluIGNzcyBwaXhlbHMpLlxuICAgICAgICAgKiBJZiB0aGUgbWFwIHZpZXdwb3J0IGlzIHBhcnRpYWxseSBjb3ZlcmVkIHdpdGggb3RoZXIgY29udGVudCAob3ZlcmxheXMpIGFsb25nXG4gICAgICAgICAqIGl0cyBlZGdlcywgdGhpcyBzZXR0aW5nIGFsbG93cyB0byBzaGlmdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydCBhd2F5IGZyb20gdGhhdFxuICAgICAgICAgKiBjb250ZW50LiBUaGUgb3JkZXIgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgaXMgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LlxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBpcyBubyBwYWRkaW5nLCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIGBbMCwgMCwgMCwgMF1gLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFkZGluZ187XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHBhZGRpbmcpIHtcbiAgICAgICAgICAgIHZhciBvbGRQYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ18gPSBwYWRkaW5nO1xuICAgICAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgICBpZiAoY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1BhZGRpbmcgPSBwYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgICAgICAgICAgICBvbGRQYWRkaW5nID0gb2xkUGFkZGluZyB8fCBbMCwgMCwgMCwgMF07XG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WCA9IChyZXNvbHV0aW9uIC8gMikgKlxuICAgICAgICAgICAgICAgICAgICAobmV3UGFkZGluZ1szXSAtIG9sZFBhZGRpbmdbM10gKyBvbGRQYWRkaW5nWzFdIC0gbmV3UGFkZGluZ1sxXSk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFkgPSAocmVzb2x1dGlvbiAvIDIpICpcbiAgICAgICAgICAgICAgICAgICAgKG5ld1BhZGRpbmdbMF0gLSBvbGRQYWRkaW5nWzBdICsgb2xkUGFkZGluZ1syXSAtIG5ld1BhZGRpbmdbMl0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoW2NlbnRlclswXSArIG9mZnNldFgsIGNlbnRlclsxXSAtIG9mZnNldFldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEdldCBhbiB1cGRhdGVkIHZlcnNpb24gb2YgdGhlIHZpZXcgb3B0aW9ucyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmlldy4gIFRoZVxuICAgICAqIGN1cnJlbnQgcmVzb2x1dGlvbiAob3Igem9vbSksIGNlbnRlciwgYW5kIHJvdGF0aW9uIGFyZSBhcHBsaWVkIHRvIGFueSBzdG9yZWRcbiAgICAgKiBvcHRpb25zLiAgVGhlIHByb3ZpZGVkIG9wdGlvbnMgY2FuIGJlIHVzZWQgdG8gYXBwbHkgbmV3IG1pbi9tYXggem9vbSBvclxuICAgICAqIHJlc29sdXRpb24gbGltaXRzLlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG5ld09wdGlvbnMgTmV3IG9wdGlvbnMgdG8gYmUgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJuIHtWaWV3T3B0aW9uc30gTmV3IG9wdGlvbnMgdXBkYXRlZCB3aXRoIHRoZSBjdXJyZW50IHZpZXcgc3RhdGUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0VXBkYXRlZE9wdGlvbnNfID0gZnVuY3Rpb24gKG5ld09wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMub3B0aW9uc18pO1xuICAgICAgICAvLyBwcmVzZXJ2ZSByZXNvbHV0aW9uIChvciB6b29tKVxuICAgICAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy56b29tID0gdGhpcy5nZXRab29tKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJlc2VydmUgY2VudGVyXG4gICAgICAgIG9wdGlvbnMuY2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICAvLyBwcmVzZXJ2ZSByb3RhdGlvblxuICAgICAgICBvcHRpb25zLnJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICByZXR1cm4gYXNzaWduKHt9LCBvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFuaW1hdGUgdGhlIHZpZXcuICBUaGUgdmlldydzIGNlbnRlciwgem9vbSAob3IgcmVzb2x1dGlvbiksIGFuZCByb3RhdGlvblxuICAgICAqIGNhbiBiZSBhbmltYXRlZCBmb3Igc21vb3RoIHRyYW5zaXRpb25zIGJldHdlZW4gdmlldyBzdGF0ZXMuICBGb3IgZXhhbXBsZSxcbiAgICAgKiB0byBhbmltYXRlIHRoZSB2aWV3IHRvIGEgbmV3IHpvb20gbGV2ZWw6XG4gICAgICpcbiAgICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiB2aWV3LmdldFpvb20oKSArIDF9KTtcbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBhbmltYXRpb24gbGFzdHMgb25lIHNlY29uZCBhbmQgdXNlcyBpbi1hbmQtb3V0IGVhc2luZy4gIFlvdVxuICAgICAqIGNhbiBjdXN0b21pemUgdGhpcyBiZWhhdmlvciBieSBpbmNsdWRpbmcgYGR1cmF0aW9uYCAoaW4gbWlsbGlzZWNvbmRzKSBhbmRcbiAgICAgKiBgZWFzaW5nYCBvcHRpb25zIChzZWUge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd9KS5cbiAgICAgKlxuICAgICAqIFRvIGNoYWluIHRvZ2V0aGVyIG11bHRpcGxlIGFuaW1hdGlvbnMsIGNhbGwgdGhlIG1ldGhvZCB3aXRoIG11bHRpcGxlXG4gICAgICogYW5pbWF0aW9uIG9iamVjdHMuICBGb3IgZXhhbXBsZSwgdG8gZmlyc3Qgem9vbSBhbmQgdGhlbiBwYW46XG4gICAgICpcbiAgICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiAxMH0sIHtjZW50ZXI6IFswLCAwXX0pO1xuICAgICAqXG4gICAgICogSWYgeW91IHByb3ZpZGUgYSBmdW5jdGlvbiBhcyB0aGUgbGFzdCBhcmd1bWVudCB0byB0aGUgYW5pbWF0ZSBtZXRob2QsIGl0XG4gICAgICogd2lsbCBnZXQgY2FsbGVkIGF0IHRoZSBlbmQgb2YgYW4gYW5pbWF0aW9uIHNlcmllcy4gIFRoZSBjYWxsYmFjayB3aWxsIGJlXG4gICAgICogY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb24gc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWBcbiAgICAgKiBpZiBpdCB3YXMgY2FuY2VsbGVkLlxuICAgICAqXG4gICAgICogQW5pbWF0aW9ucyBhcmUgY2FuY2VsbGVkIGJ5IHVzZXIgaW50ZXJhY3Rpb25zIChlLmcuIGRyYWdnaW5nIHRoZSBtYXApIG9yIGJ5XG4gICAgICogY2FsbGluZyBgdmlldy5zZXRDZW50ZXIoKWAsIGB2aWV3LnNldFJlc29sdXRpb24oKWAsIG9yIGB2aWV3LnNldFJvdGF0aW9uKClgXG4gICAgICogKG9yIGFub3RoZXIgbWV0aG9kIHRoYXQgY2FsbHMgb25lIG9mIHRoZXNlKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uKEFuaW1hdGlvbk9wdGlvbnN8ZnVuY3Rpb24oYm9vbGVhbik6IHZvaWQpfSB2YXJfYXJncyBBbmltYXRpb25cbiAgICAgKiAgICAgb3B0aW9ucy4gIE11bHRpcGxlIGFuaW1hdGlvbnMgY2FuIGJlIHJ1biBpbiBzZXJpZXMgYnkgcGFzc2luZyBtdWx0aXBsZVxuICAgICAqICAgICBvcHRpb25zIG9iamVjdHMuICBUbyBydW4gbXVsdGlwbGUgYW5pbWF0aW9ucyBpbiBwYXJhbGxlbCwgY2FsbCB0aGUgbWV0aG9kXG4gICAgICogICAgIG11bHRpcGxlIHRpbWVzLiAgQW4gb3B0aW9uYWwgY2FsbGJhY2sgY2FuIGJlIHByb3ZpZGVkIGFzIGEgZmluYWxcbiAgICAgKiAgICAgYXJndW1lbnQuICBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyXG4gICAgICogICAgIHRoZSBhbmltYXRpb24gY29tcGxldGVkIHdpdGhvdXQgYmVpbmcgY2FuY2VsbGVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKHZhcl9hcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVmKCkgJiYgIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFuY2hvcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYW5jaG9yID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdGlvbnMuYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzW2ldID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Li4uKEFuaW1hdGlvbk9wdGlvbnN8ZnVuY3Rpb24oYm9vbGVhbik6IHZvaWQpfSB2YXJfYXJncyBBbmltYXRpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hbmltYXRlSW50ZXJuYWwgPSBmdW5jdGlvbiAodmFyX2FyZ3MpIHtcbiAgICAgICAgdmFyIGFuaW1hdGlvbkNvdW50ID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNhbGxiYWNrO1xuICAgICAgICBpZiAoYW5pbWF0aW9uQ291bnQgPiAxICYmXG4gICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XG4gICAgICAgICAgICAtLWFuaW1hdGlvbkNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc0RlZigpKSB7XG4gICAgICAgICAgICAvLyBpZiB2aWV3IHByb3BlcnRpZXMgYXJlIG5vdCB5ZXQgc2V0LCBzaG9ydGN1dCB0byB0aGUgZmluYWwgc3RhdGVcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xuICAgICAgICAgICAgaWYgKHN0YXRlLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoc3RhdGUuY2VudGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFpvb20oc3RhdGUuem9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Um90YXRpb24oc3RhdGUucm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLnRhcmdldENlbnRlcl8uc2xpY2UoKTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLnRhcmdldFJlc29sdXRpb25fO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLnRhcmdldFJvdGF0aW9uXztcbiAgICAgICAgdmFyIHNlcmllcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hdGlvbkNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gLyoqIEB0eXBlIHtBbmltYXRpb25PcHRpb25zfSAqLyAoYXJndW1lbnRzW2ldKTtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhbmNob3I6IG9wdGlvbnMuYW5jaG9yLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMCxcbiAgICAgICAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nIHx8IGluQW5kT3V0LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uc291cmNlQ2VudGVyID0gY2VudGVyO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIgPSBvcHRpb25zLmNlbnRlci5zbGljZSgpO1xuICAgICAgICAgICAgICAgIGNlbnRlciA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKG9wdGlvbnMuem9vbSk7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5yZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gb3B0aW9ucy5yZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uc291cmNlUm90YXRpb24gPSByb3RhdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBtb2R1bG8ob3B0aW9ucy5yb3RhdGlvbiAtIHJvdGF0aW9uICsgTWF0aC5QSSwgMiAqIE1hdGguUEkpIC0gTWF0aC5QSTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0Um90YXRpb24gPSByb3RhdGlvbiArIGRlbHRhO1xuICAgICAgICAgICAgICAgIHJvdGF0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgYW5pbWF0aW9uIGlzIGEgbm8tb3BcbiAgICAgICAgICAgIGlmIChpc05vb3BBbmltYXRpb24oYW5pbWF0aW9uKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gd2Ugc3RpbGwgcHVzaCBpdCBvbnRvIHRoZSBzZXJpZXMgZm9yIGNhbGxiYWNrIGhhbmRsaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGFydCArPSBhbmltYXRpb24uZHVyYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJpZXMucHVzaChhbmltYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18ucHVzaChzZXJpZXMpO1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25zXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSB2aWV3IGlzIGJlaW5nIGFuaW1hdGVkLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aWV3IGlzIGJlaW5nIGFuaW1hdGVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRBbmltYXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpbnRzX1tWaWV3SGludC5BTklNQVRJTkddID4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB0aGUgdXNlciBpcyBpbnRlcmFjdGluZyB3aXRoIHRoZSB2aWV3LCBzdWNoIGFzIHBhbm5pbmcgb3Igem9vbWluZy5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlldyBpcyBiZWluZyBpbnRlcmFjdGVkIHdpdGguXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldEludGVyYWN0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaW50c19bVmlld0hpbnQuSU5URVJBQ1RJTkddID4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbmNlbCBhbnkgb25nb2luZyBhbmltYXRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYW5jZWxBbmltYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAtdGhpcy5oaW50c19bVmlld0hpbnQuQU5JTUFUSU5HXSk7XG4gICAgICAgIHZhciBhbmNob3I7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICAgICAgICBpZiAoc2VyaWVzWzBdLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soc2VyaWVzWzBdLmNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHNlcmllcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmICghYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNob3IgPSBhbmltYXRpb24uYW5jaG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpb25zXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmNhbmNlbEFuY2hvcl8gPSBhbmNob3I7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYWxsIGFuaW1hdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUudXBkYXRlQW5pbWF0aW9uc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25LZXlfKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdmFyIG1vcmUgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgICAgICAgdmFyIHNlcmllc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHNlcmllcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHNlcmllc1tqXTtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIGFuaW1hdGlvbi5zdGFydDtcbiAgICAgICAgICAgICAgICB2YXIgZnJhY3Rpb24gPSBhbmltYXRpb24uZHVyYXRpb24gPiAwID8gZWxhcHNlZCAvIGFuaW1hdGlvbi5kdXJhdGlvbiA6IDE7XG4gICAgICAgICAgICAgICAgaWYgKGZyYWN0aW9uID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZnJhY3Rpb24gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gYW5pbWF0aW9uLmVhc2luZyhmcmFjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSB4MCArIHByb2dyZXNzICogKHgxIC0geDApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHkwICsgcHJvZ3Jlc3MgKiAoeTEgLSB5MCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IFt4LCB5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICYmIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIDogYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25zdHJhaW5lZFJlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHJlc29sdXRpb24sIDAsIHNpemUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJab29tKGNvbnN0cmFpbmVkUmVzb2x1dGlvbiwgYW5pbWF0aW9uLmFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8odHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0Um90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSBwcm9ncmVzcyA9PT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBtb2R1bG8oYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICsgTWF0aC5QSSwgMiAqIE1hdGguUEkpIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLlBJXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25zdHJhaW5lZFJvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24ocm90YXRpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUoY29uc3RyYWluZWRSb3RhdGlvbiwgYW5pbWF0aW9uLmFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXyh0cnVlKTtcbiAgICAgICAgICAgICAgICBtb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VyaWVzQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNfW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAtMSk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gc2VyaWVzWzBdLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHBydW5lIGNvbXBsZXRlZCBzZXJpZXNcbiAgICAgICAgdGhpcy5hbmltYXRpb25zXyA9IHRoaXMuYW5pbWF0aW9uc18uZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBpZiAobW9yZSAmJiB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uc18uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBUYXJnZXQgcm90YXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFJvdGF0aW9uIGFuY2hvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3Igcm90YXRpb24gYW5kIGFuY2hvci5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVDZW50ZXJSb3RhdGUgPSBmdW5jdGlvbiAocm90YXRpb24sIGFuY2hvcikge1xuICAgICAgICB2YXIgY2VudGVyO1xuICAgICAgICB2YXIgY3VycmVudENlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgaWYgKGN1cnJlbnRDZW50ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2VudGVyID0gW2N1cnJlbnRDZW50ZXJbMF0gLSBhbmNob3JbMF0sIGN1cnJlbnRDZW50ZXJbMV0gLSBhbmNob3JbMV1dO1xuICAgICAgICAgICAgcm90YXRlQ29vcmRpbmF0ZShjZW50ZXIsIHJvdGF0aW9uIC0gdGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgICAgIGFkZENvb3JkaW5hdGUoY2VudGVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgWm9vbSBhbmNob3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJlc29sdXRpb24gYW5kIGFuY2hvci5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVDZW50ZXJab29tID0gZnVuY3Rpb24gKHJlc29sdXRpb24sIGFuY2hvcikge1xuICAgICAgICB2YXIgY2VudGVyO1xuICAgICAgICB2YXIgY3VycmVudENlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHggPSBhbmNob3JbMF0gLVxuICAgICAgICAgICAgICAgIChyZXNvbHV0aW9uICogKGFuY2hvclswXSAtIGN1cnJlbnRDZW50ZXJbMF0pKSAvIGN1cnJlbnRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHkgPSBhbmNob3JbMV0gLVxuICAgICAgICAgICAgICAgIChyZXNvbHV0aW9uICogKGFuY2hvclsxXSAtIGN1cnJlbnRDZW50ZXJbMV0pKSAvIGN1cnJlbnRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgY2VudGVyID0gW3gsIHldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHZpZXdwb3J0IHNpemUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yb3RhdGlvbl0gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIG9yIGBbMTAwLCAxMDBdYCB3aGVuIG5vIHZpZXdwb3J0IGlzIGZvdW5kLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFZpZXdwb3J0U2l6ZV8gPSBmdW5jdGlvbiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy52aWV3cG9ydFNpemVfO1xuICAgICAgICBpZiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdyA9IHNpemVbMF07XG4gICAgICAgICAgICB2YXIgaCA9IHNpemVbMV07XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIE1hdGguYWJzKHcgKiBNYXRoLmNvcyhvcHRfcm90YXRpb24pKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGggKiBNYXRoLnNpbihvcHRfcm90YXRpb24pKSxcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5zaW4ob3B0X3JvdGF0aW9uKSkgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhoICogTWF0aC5jb3Mob3B0X3JvdGF0aW9uKSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0b3JlcyB0aGUgdmlld3BvcnQgc2l6ZSBvbiB0aGUgdmlldy4gVGhlIHZpZXdwb3J0IHNpemUgaXMgbm90IHJlYWQgZXZlcnkgdGltZSBmcm9tIHRoZSBET01cbiAgICAgKiB0byBhdm9pZCBwZXJmb3JtYW5jZSBoaXQgYW5kIGxheW91dCByZWZsb3cuXG4gICAgICogVGhpcyBzaG91bGQgYmUgZG9uZSBvbiBtYXAgc2l6ZSBjaGFuZ2UuXG4gICAgICogTm90ZTogdGhlIGNvbnN0cmFpbnRzIGFyZSBub3QgcmVzb2x2ZWQgZHVyaW5nIGFuIGFuaW1hdGlvbiB0byBhdm9pZCBzdG9wcGluZyBpdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gVmlld3BvcnQgc2l6ZTsgaWYgdW5kZWZpbmVkLCBbMTAwLCAxMDBdIGlzIGFzc3VtZWRcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRWaWV3cG9ydFNpemUgPSBmdW5jdGlvbiAob3B0X3NpemUpIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydFNpemVfID0gQXJyYXkuaXNBcnJheShvcHRfc2l6ZSlcbiAgICAgICAgICAgID8gb3B0X3NpemUuc2xpY2UoKVxuICAgICAgICAgICAgOiBbMTAwLCAxMDBdO1xuICAgICAgICBpZiAoIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDZW50ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIGlmICghY2VudGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b1VzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGNlbnRlciB3aXRob3V0IHRyYW5zZm9ybWluZyB0byB1c2VyIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENlbnRlckludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9ICovICh0aGlzLmdldChWaWV3UHJvcGVydHkuQ0VOVEVSKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtDb25zdHJhaW50c30gQ29uc3RyYWludHMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWludHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFJlc29sdXRpb24gY29uc3RyYWludCBpcyBzZXRcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zXy5jb25zdHJhaW5SZXNvbHV0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2hpbnRzXSBEZXN0aW5hdGlvbiBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBIaW50LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldEhpbnRzID0gZnVuY3Rpb24gKG9wdF9oaW50cykge1xuICAgICAgICBpZiAob3B0X2hpbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdF9oaW50c1swXSA9IHRoaXMuaGludHNfWzBdO1xuICAgICAgICAgICAgb3B0X2hpbnRzWzFdID0gdGhpcy5oaW50c19bMV07XG4gICAgICAgICAgICByZXR1cm4gb3B0X2hpbnRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgZXh0ZW50IGZvciB0aGUgY3VycmVudCB2aWV3IHN0YXRlIGFuZCB0aGUgcGFzc2VkIHNpemUuXG4gICAgICogVGhlIHNpemUgaXMgdGhlIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCBpbnRvIHdoaWNoIHRoZSBjYWxjdWxhdGVkIGV4dGVudFxuICAgICAqIHNob3VsZCBmaXQuIEluIG1vc3QgY2FzZXMgeW91IHdhbnQgdG8gZ2V0IHRoZSBleHRlbnQgb2YgdGhlIGVudGlyZSBtYXAsXG4gICAgICogdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgc2l6ZVxuICAgICAqIG9mIHRoZSBtYXAgdGhhdCB1c2VzIHRoaXMgdmlldyB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUV4dGVudCA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5jYWxjdWxhdGVFeHRlbnRJbnRlcm5hbChvcHRfc2l6ZSk7XG4gICAgICAgIHJldHVybiB0b1VzZXJFeHRlbnQoZXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3NpemVdIEJveCBwaXhlbCBzaXplLiBJZiBub3QgcHJvdmlkZWQsXG4gICAgICogdGhlIG1hcCdzIGxhc3Qga25vd24gdmlld3BvcnQgc2l6ZSB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwgPSBmdW5jdGlvbiAob3B0X3NpemUpIHtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRfc2l6ZSB8fCB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAodGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpKTtcbiAgICAgICAgYXNzZXJ0KGNlbnRlciwgMSk7IC8vIFRoZSB2aWV3IGNlbnRlciBpcyBub3QgZGVmaW5lZFxuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICAgICAgYXNzZXJ0KHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCwgMik7IC8vIFRoZSB2aWV3IHJlc29sdXRpb24gaXMgbm90IGRlZmluZWRcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gLyoqIEB0eXBlIHshbnVtYmVyfSAqLyAodGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgYXNzZXJ0KHJvdGF0aW9uICE9PSB1bmRlZmluZWQsIDMpOyAvLyBUaGUgdmlldyByb3RhdGlvbiBpcyBub3QgZGVmaW5lZFxuICAgICAgICByZXR1cm4gZ2V0Rm9yVmlld0FuZFNpemUoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1heFJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFJlc29sdXRpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5taW5SZXNvbHV0aW9uXykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGEgbmV3IG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1heGltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0TWF4Wm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7IG1heFpvb206IHpvb20gfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSBuZXcgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBUaGUgbWluaW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRNaW5ab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHsgbWluWm9vbTogem9vbSB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGUgdmlldyBzaG91bGQgYWxsb3cgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBXaGV0aGVyIHRoZSByZXNvbHV0aW9uIGlzIGNvbnN0cmFpbmVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRDb25zdHJhaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHsgY29uc3RyYWluUmVzb2x1dGlvbjogZW5hYmxlZCB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbnMgZm9yIHRoZSB2aWV3LiBUaGlzIHJldHVybnMgdGhlIGFycmF5IG9mIHJlc29sdXRpb25zXG4gICAgICogcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgVmlldywgb3IgdW5kZWZpbmVkIGlmIG5vbmUgd2VyZSBnaXZlbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb25zIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHByb3ZpZGVkIGV4dGVudCAoaW4gbWFwIHVuaXRzKSBhbmQgc2l6ZSAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3NpemVdIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIHByb3ZpZGVkIGV4dGVudCB3aWxsIHJlbmRlciBhdFxuICAgICAqICAgICB0aGUgZ2l2ZW4gc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvckV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQsIG9wdF9zaXplKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChmcm9tVXNlckV4dGVudChleHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKSwgb3B0X3NpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHByb3ZpZGVkIGV4dGVudCAoaW4gbWFwIHVuaXRzKSBhbmQgc2l6ZSAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3NpemVdIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIHByb3ZpZGVkIGV4dGVudCB3aWxsIHJlbmRlciBhdFxuICAgICAqICAgICB0aGUgZ2l2ZW4gc2l6ZS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwgPSBmdW5jdGlvbiAoZXh0ZW50LCBvcHRfc2l6ZSkge1xuICAgICAgICB2YXIgc2l6ZSA9IG9wdF9zaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICB2YXIgeFJlc29sdXRpb24gPSBnZXRXaWR0aChleHRlbnQpIC8gc2l6ZVswXTtcbiAgICAgICAgdmFyIHlSZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KGV4dGVudCkgLyBzaXplWzFdO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHZhbHVlIGJldHdlZW4gMCBhbmQgMSBmb3IgYVxuICAgICAqIHJlc29sdXRpb24uIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9wb3dlcl0gUG93ZXIuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBSZXNvbHV0aW9uIGZvciB2YWx1ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiA9IGZ1bmN0aW9uIChvcHRfcG93ZXIpIHtcbiAgICAgICAgdmFyIHBvd2VyID0gb3B0X3Bvd2VyIHx8IDI7XG4gICAgICAgIHZhciBtYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXyk7XG4gICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIG1heCA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHBvd2VyKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgdmFsdWUgKiBtYXgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb247XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHJvdGF0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Um90YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcmVzb2x1dGlvbiBmb3IgYSB2YWx1ZSBiZXR3ZWVuXG4gICAgICogMCBhbmQgMS4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Bvd2VyXSBQb3dlci5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIpOiBudW1iZXJ9IFZhbHVlIGZvciByZXNvbHV0aW9uIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uID0gZnVuY3Rpb24gKG9wdF9wb3dlcikge1xuICAgICAgICB2YXIgbG9nUG93ZXIgPSBNYXRoLmxvZyhvcHRfcG93ZXIgfHwgMik7XG4gICAgICAgIHZhciBtYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXyk7XG4gICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIG1heCA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIGxvZ1Bvd2VyO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBWYWx1ZS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gcmVzb2x1dGlvbikgLyBsb2dQb3dlciAvIG1heDtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzaXplIG9mIHRoZSB2aWV3cG9ydCBtaW51cyBwYWRkaW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcm90YXRpb25dIFRha2UgaW50byBhY2NvdW50IHRoZSByb3RhdGlvbiBvZiB0aGUgdmlld3BvcnQgd2hlbiBnaXZpbmcgdGhlIHNpemVcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVmlld3BvcnQgc2l6ZSByZWR1Y2VkIGJ5IHRoZSBwYWRkaW5nLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18gPSBmdW5jdGlvbiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG9wdF9yb3RhdGlvbik7XG4gICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgICAgICAgIHNpemUgPSBbXG4gICAgICAgICAgICAgICAgc2l6ZVswXSAtIHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdLFxuICAgICAgICAgICAgICAgIHNpemVbMV0gLSBwYWRkaW5nWzBdIC0gcGFkZGluZ1syXSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtTdGF0ZX0gVmlldyBzdGF0ZS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICB2YXIgY2VudGVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSk7XG4gICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgICAgICAgIHZhciByZWR1Y2VkU2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICAgICAgY2VudGVyID0gY2FsY3VsYXRlQ2VudGVyT24oY2VudGVyLCB0aGlzLmdldFZpZXdwb3J0U2l6ZV8oKSwgW3JlZHVjZWRTaXplWzBdIC8gMiArIHBhZGRpbmdbM10sIHJlZHVjZWRTaXplWzFdIC8gMiArIHBhZGRpbmdbMF1dLCByZXNvbHV0aW9uLCByb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNlbnRlcjogY2VudGVyLnNsaWNlKDApLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgICAgICAgem9vbTogdGhpcy5nZXRab29tKCksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgem9vbSBsZXZlbC4gVGhpcyBtZXRob2QgbWF5IHJldHVybiBub24taW50ZWdlciB6b29tIGxldmVsc1xuICAgICAqIGlmIHRoZSB2aWV3IGRvZXMgbm90IGNvbnN0cmFpbiB0aGUgcmVzb2x1dGlvbiwgb3IgaWYgYW4gaW50ZXJhY3Rpb24gb3JcbiAgICAgKiBhbmltYXRpb24gaXMgdW5kZXJ3YXkuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gWm9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHpvb207XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHpvb20gPSB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB6b29tO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB6b29tIGxldmVsIGZvciBhIHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHpvb20gbGV2ZWwgZm9yIHRoZSBwcm92aWRlZCByZXNvbHV0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRab29tRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLm1pblpvb21fIHx8IDA7XG4gICAgICAgIHZhciBtYXgsIHpvb21GYWN0b3I7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgICAgICAgdmFyIG5lYXJlc3QgPSBsaW5lYXJGaW5kTmVhcmVzdCh0aGlzLnJlc29sdXRpb25zXywgcmVzb2x1dGlvbiwgMSk7XG4gICAgICAgICAgICBvZmZzZXQgPSBuZWFyZXN0O1xuICAgICAgICAgICAgbWF4ID0gdGhpcy5yZXNvbHV0aW9uc19bbmVhcmVzdF07XG4gICAgICAgICAgICBpZiAobmVhcmVzdCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gbWF4IC8gdGhpcy5yZXNvbHV0aW9uc19bbmVhcmVzdCArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF4ID0gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnpvb21GYWN0b3JfO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQgKyBNYXRoLmxvZyhtYXggLyByZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB2aWV3IHJlc29sdXRpb24gZm9yIHRoZSBwcm92aWRlZCB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yWm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmFzZUxldmVsID0gY2xhbXAoTWF0aC5mbG9vcih6b29tKSwgMCwgdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICB2YXIgem9vbUZhY3RvciA9IHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbF0gLyB0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWwgKyAxXTtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsXSAvXG4gICAgICAgICAgICAgICAgTWF0aC5wb3coem9vbUZhY3RvciwgY2xhbXAoem9vbSAtIGJhc2VMZXZlbCwgMCwgMSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5tYXhSZXNvbHV0aW9uXyAvIE1hdGgucG93KHRoaXMuem9vbUZhY3Rvcl8sIHpvb20gLSB0aGlzLm1pblpvb21fKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpdCB0aGUgZ2l2ZW4gZ2VvbWV0cnkgb3IgZXh0ZW50IGJhc2VkIG9uIHRoZSBnaXZlbiBtYXAgc2l6ZSBhbmQgYm9yZGVyLlxuICAgICAqIFRoZSBzaXplIGlzIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCB0byBmaXQgdGhlIGV4dGVudCBpbnRvLlxuICAgICAqIEluIG1vc3QgY2FzZXMgeW91IHdpbGwgd2FudCB0byB1c2UgdGhlIG1hcCBzaXplLCB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICAgKiBUYWtlcyBjYXJlIG9mIHRoZSBtYXAgYW5nbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGdlb21ldHJ5T3JFeHRlbnQgVGhlIGdlb21ldHJ5IG9yXG4gICAgICogICAgIGV4dGVudCB0byBmaXQgdGhlIHZpZXcgdG8uXG4gICAgICogQHBhcmFtIHtGaXRPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmZpdCA9IGZ1bmN0aW9uIChnZW9tZXRyeU9yRXh0ZW50LCBvcHRfb3B0aW9ucykge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqL1xuICAgICAgICB2YXIgZ2VvbWV0cnk7XG4gICAgICAgIGFzc2VydChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpIHx8XG4gICAgICAgICAgICB0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKGdlb21ldHJ5T3JFeHRlbnQpLmdldFNpbXBsaWZpZWRHZW9tZXRyeSkgPT09XG4gICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJywgMjQpOyAvLyBJbnZhbGlkIGV4dGVudCBvciBnZW9tZXRyeSBwcm92aWRlZCBhcyBgZ2VvbWV0cnlgXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpKSB7XG4gICAgICAgICAgICBhc3NlcnQoIWlzRW1wdHkoZ2VvbWV0cnlPckV4dGVudCksIDI1KTsgLy8gQ2Fubm90IGZpdCBlbXB0eSBleHRlbnQgcHJvdmlkZWQgYXMgYGdlb21ldHJ5YFxuICAgICAgICAgICAgdmFyIGV4dGVudCA9IGZyb21Vc2VyRXh0ZW50KGdlb21ldHJ5T3JFeHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnZW9tZXRyeU9yRXh0ZW50LmdldFR5cGUoKSA9PT0gR2VvbWV0cnlUeXBlLkNJUkNMRSkge1xuICAgICAgICAgICAgdmFyIGV4dGVudCA9IGZyb21Vc2VyRXh0ZW50KGdlb21ldHJ5T3JFeHRlbnQuZ2V0RXh0ZW50KCksIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZXh0ZW50KTtcbiAgICAgICAgICAgIGdlb21ldHJ5LnJvdGF0ZSh0aGlzLmdldFJvdGF0aW9uKCksIGdldENlbnRlcihleHRlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1c2VyUHJvamVjdGlvbiA9IGdldFVzZXJQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAodXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeU9yRXh0ZW50XG4gICAgICAgICAgICAgICAgICAgIC5jbG9uZSgpXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2Zvcm0odXNlclByb2plY3Rpb24sIHRoaXMuZ2V0UHJvamVjdGlvbigpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5T3JFeHRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maXRJbnRlcm5hbChnZW9tZXRyeSwgb3B0X29wdGlvbnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHJvdGF0ZWQgZXh0ZW50XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50XCIpLkV4dGVudH0gVGhlIHJvdGF0ZWQgZXh0ZW50IGZvciB0aGUgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUucm90YXRlZEV4dGVudEZvckdlb21ldHJ5ID0gZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgICAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgICAgICB2YXIgY29vcmRzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgdmFyIG1pblJvdFggPSArSW5maW5pdHk7XG4gICAgICAgIHZhciBtaW5Sb3RZID0gK0luZmluaXR5O1xuICAgICAgICB2YXIgbWF4Um90WCA9IC1JbmZpbml0eTtcbiAgICAgICAgdmFyIG1heFJvdFkgPSAtSW5maW5pdHk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3Jkcy5sZW5ndGg7IGkgPCBpaTsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHZhciByb3RYID0gY29vcmRzW2ldICogY29zQW5nbGUgLSBjb29yZHNbaSArIDFdICogc2luQW5nbGU7XG4gICAgICAgICAgICB2YXIgcm90WSA9IGNvb3Jkc1tpXSAqIHNpbkFuZ2xlICsgY29vcmRzW2kgKyAxXSAqIGNvc0FuZ2xlO1xuICAgICAgICAgICAgbWluUm90WCA9IE1hdGgubWluKG1pblJvdFgsIHJvdFgpO1xuICAgICAgICAgICAgbWluUm90WSA9IE1hdGgubWluKG1pblJvdFksIHJvdFkpO1xuICAgICAgICAgICAgbWF4Um90WCA9IE1hdGgubWF4KG1heFJvdFgsIHJvdFgpO1xuICAgICAgICAgICAgbWF4Um90WSA9IE1hdGgubWF4KG1heFJvdFksIHJvdFkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbbWluUm90WCwgbWluUm90WSwgbWF4Um90WCwgbWF4Um90WV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtGaXRPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZml0SW50ZXJuYWwgPSBmdW5jdGlvbiAoZ2VvbWV0cnksIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBzaXplID0gb3B0aW9ucy5zaXplO1xuICAgICAgICBpZiAoIXNpemUpIHtcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wYWRkaW5nIDogWzAsIDAsIDAsIDBdO1xuICAgICAgICB2YXIgbmVhcmVzdCA9IG9wdGlvbnMubmVhcmVzdCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uZWFyZXN0IDogZmFsc2U7XG4gICAgICAgIHZhciBtaW5SZXNvbHV0aW9uO1xuICAgICAgICBpZiAob3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKG9wdGlvbnMubWF4Wm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm90YXRlZEV4dGVudCA9IHRoaXMucm90YXRlZEV4dGVudEZvckdlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHJlc29sdXRpb25cbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChyb3RhdGVkRXh0ZW50LCBbXG4gICAgICAgICAgICBzaXplWzBdIC0gcGFkZGluZ1sxXSAtIHBhZGRpbmdbM10sXG4gICAgICAgICAgICBzaXplWzFdIC0gcGFkZGluZ1swXSAtIHBhZGRpbmdbMl0sXG4gICAgICAgIF0pO1xuICAgICAgICByZXNvbHV0aW9uID0gaXNOYU4ocmVzb2x1dGlvbilcbiAgICAgICAgICAgID8gbWluUmVzb2x1dGlvblxuICAgICAgICAgICAgOiBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG5lYXJlc3QgPyAwIDogMSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBjZW50ZXJcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbihyb3RhdGlvbik7XG4gICAgICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKHJvdGF0aW9uKTtcbiAgICAgICAgdmFyIGNlbnRlclJvdCA9IGdldENlbnRlcihyb3RhdGVkRXh0ZW50KTtcbiAgICAgICAgY2VudGVyUm90WzBdICs9ICgocGFkZGluZ1sxXSAtIHBhZGRpbmdbM10pIC8gMikgKiByZXNvbHV0aW9uO1xuICAgICAgICBjZW50ZXJSb3RbMV0gKz0gKChwYWRkaW5nWzBdIC0gcGFkZGluZ1syXSkgLyAyKSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBjZW50ZXJYID0gY2VudGVyUm90WzBdICogY29zQW5nbGUgLSBjZW50ZXJSb3RbMV0gKiBzaW5BbmdsZTtcbiAgICAgICAgdmFyIGNlbnRlclkgPSBjZW50ZXJSb3RbMV0gKiBjb3NBbmdsZSArIGNlbnRlclJvdFswXSAqIHNpbkFuZ2xlO1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5nZXRDb25zdHJhaW5lZENlbnRlcihbY2VudGVyWCwgY2VudGVyWV0sIHJlc29sdXRpb24pO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrID8gb3B0aW9ucy5jYWxsYmFjayA6IFZPSUQ7XG4gICAgICAgIGlmIChvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogY2VudGVyLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcsXG4gICAgICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDZW50ZXIgb24gY29vcmRpbmF0ZSBhbmQgdmlldyBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2VudGVyT24gPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5jZW50ZXJPbkludGVybmFsKGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmdldFByb2plY3Rpb24oKSksIHNpemUsIHBvc2l0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNlbnRlck9uSW50ZXJuYWwgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChjYWxjdWxhdGVDZW50ZXJPbihjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbiwgdGhpcy5nZXRSZXNvbHV0aW9uKCksIHRoaXMuZ2V0Um90YXRpb24oKSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgc2hpZnQgYmV0d2VlbiBtYXAgYW5kIHZpZXdwb3J0IGNlbnRlci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH0gQ2VudGVyIHNoaWZ0LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclNoaWZ0ID0gZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpIHtcbiAgICAgICAgdmFyIGNlbnRlclNoaWZ0O1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgICAgIGlmIChwYWRkaW5nICYmIGNlbnRlcikge1xuICAgICAgICAgICAgdmFyIHJlZHVjZWRTaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKC1yb3RhdGlvbik7XG4gICAgICAgICAgICB2YXIgc2hpZnRlZENlbnRlciA9IGNhbGN1bGF0ZUNlbnRlck9uKGNlbnRlciwgc2l6ZSwgW3JlZHVjZWRTaXplWzBdIC8gMiArIHBhZGRpbmdbM10sIHJlZHVjZWRTaXplWzFdIC8gMiArIHBhZGRpbmdbMF1dLCByZXNvbHV0aW9uLCByb3RhdGlvbik7XG4gICAgICAgICAgICBjZW50ZXJTaGlmdCA9IFtcbiAgICAgICAgICAgICAgICBjZW50ZXJbMF0gLSBzaGlmdGVkQ2VudGVyWzBdLFxuICAgICAgICAgICAgICAgIGNlbnRlclsxXSAtIHNoaWZ0ZWRDZW50ZXJbMV0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjZW50ZXJTaGlmdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGRlZmluZWQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuaXNEZWYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSAmJiB0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyByZWxhdGl2ZSBjb29yZGluYXRlcyB0byB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YUNvb3JkaW5hdGVzIFJlbGF0aXZlIHZhbHVlIHRvIGFkZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Q2VudGVyID0gZnVuY3Rpb24gKGRlbHRhQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRvVXNlckNvb3JkaW5hdGUodGhpcy50YXJnZXRDZW50ZXJfLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVyKFtcbiAgICAgICAgICAgIGNlbnRlclswXSArIGRlbHRhQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICBjZW50ZXJbMV0gKyBkZWx0YUNvb3JkaW5hdGVzWzFdLFxuICAgICAgICBdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgcmVsYXRpdmUgY29vcmRpbmF0ZXMgdG8gdGhlIGNlbnRlciBvZiB0aGUgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGFDb29yZGluYXRlcyBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Q2VudGVySW50ZXJuYWwgPSBmdW5jdGlvbiAoZGVsdGFDb29yZGluYXRlcykge1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfO1xuICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKFtcbiAgICAgICAgICAgIGNlbnRlclswXSArIGRlbHRhQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICBjZW50ZXJbMV0gKyBkZWx0YUNvb3JkaW5hdGVzWzFdLFxuICAgICAgICBdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoZSB2aWV3IHJlc29sdXRpb24gYnkgYSByYXRpbywgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyBUaGUgcmF0aW8gdG8gYXBwbHkgb24gdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFJlc29sdXRpb24gPSBmdW5jdGlvbiAocmF0aW8sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3IgJiYgZnJvbVVzZXJDb29yZGluYXRlKG9wdF9hbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5hZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwocmF0aW8sIGFuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGUgdmlldyByZXNvbHV0aW9uIGJ5IGEgcmF0aW8sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcmVzb2x1dGlvblxuICAgICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gVGhlIHJhdGlvIHRvIGFwcGx5IG9uIHRoZSB2aWV3IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFJlc29sdXRpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChyYXRpbywgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gKiByYXRpbywgMCwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJab29tKG5ld1Jlc29sdXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gKj0gcmF0aW87XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB2YWx1ZSB0byB0aGUgdmlldyB6b29tIGxldmVsLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFpvb20gPSBmdW5jdGlvbiAoZGVsdGEsIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdGhpcy5hZGp1c3RSZXNvbHV0aW9uKE1hdGgucG93KHRoaXMuem9vbUZhY3Rvcl8sIC1kZWx0YSksIG9wdF9hbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHZhbHVlIHRvIHRoZSB2aWV3IHJvdGF0aW9uLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJvdGF0aW9uXG4gICAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gcm90YXRpb24sIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFJvdGF0aW9uID0gZnVuY3Rpb24gKGRlbHRhLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIGlmIChvcHRfYW5jaG9yKSB7XG4gICAgICAgICAgICBvcHRfYW5jaG9yID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdF9hbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkanVzdFJvdGF0aW9uSW50ZXJuYWwoZGVsdGEsIG9wdF9hbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSByb3RhdGlvbiwgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSb3RhdGlvbkludGVybmFsID0gZnVuY3Rpb24gKGRlbHRhLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBpc01vdmluZyA9IHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpO1xuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyArIGRlbHRhLCBpc01vdmluZyk7XG4gICAgICAgIGlmIChvcHRfYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZShuZXdSb3RhdGlvbiwgb3B0X2FuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gKz0gZGVsdGE7XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2VudGVyIG9mIHRoZSBjdXJyZW50IHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRDZW50ZXIgPSBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoZnJvbVVzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2VudGVyIHVzaW5nIHRoZSB2aWV3IHByb2plY3Rpb24gKG5vdCB0aGUgdXNlciBwcm9qZWN0aW9uKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVySW50ZXJuYWwgPSBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1ZpZXdIaW50LmpzXCIpLmRlZmF1bHR9IGhpbnQgSGludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgdmFsdWUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0SGludCA9IGZ1bmN0aW9uIChoaW50LCBkZWx0YSkge1xuICAgICAgICB0aGlzLmhpbnRzX1toaW50XSArPSBkZWx0YTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmhpbnRzX1toaW50XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmVzb2x1dGlvbiBmb3IgdGhpcyB2aWV3LiBBbnkgcmVzb2x1dGlvbiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFRoZSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFJlc29sdXRpb24gPSBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByb3RhdGlvbiBmb3IgdGhpcyB2aWV3LiBBbnkgcm90YXRpb24gY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgaW4gcmFkaWFucy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChyb3RhdGlvbikge1xuICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBab29tIHRvIGEgc3BlY2lmaWMgem9vbSBsZXZlbC4gQW55IHJlc29sdXRpb24gY29uc3RyYWluIHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Wm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKHpvb20pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlY29tcHV0ZSByb3RhdGlvbi9yZXNvbHV0aW9uL2NlbnRlciBiYXNlZCBvbiB0YXJnZXQgdmFsdWVzLlxuICAgICAqIE5vdGU6IHdlIGhhdmUgdG8gY29tcHV0ZSByb3RhdGlvbiBmaXJzdCwgdGhlbiByZXNvbHV0aW9uIGFuZCBjZW50ZXIgY29uc2lkZXJpbmcgdGhhdFxuICAgICAqIHBhcmFtZXRlcnMgY2FuIGluZmx1ZW5jZSBvbmUgYW5vdGhlciBpbiBjYXNlIGEgdmlldyBleHRlbnQgY29uc3RyYWludCBpcyBwcmVzZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9kb05vdENhbmNlbEFuaW1zXSBEbyBub3QgY2FuY2VsIGFuaW1hdGlvbnMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2ZvcmNlTW92aW5nXSBBcHBseSBjb25zdHJhaW50cyBhcyBpZiB0aGUgdmlldyBpcyBtb3ZpbmcuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hcHBseVRhcmdldFN0YXRlXyA9IGZ1bmN0aW9uIChvcHRfZG9Ob3RDYW5jZWxBbmltcywgb3B0X2ZvcmNlTW92aW5nKSB7XG4gICAgICAgIHZhciBpc01vdmluZyA9IHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpIHx8IG9wdF9mb3JjZU1vdmluZztcbiAgICAgICAgLy8gY29tcHV0ZSByb3RhdGlvblxuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXywgaXNNb3ZpbmcpO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyhuZXdSb3RhdGlvbik7XG4gICAgICAgIHZhciBuZXdSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbih0aGlzLnRhcmdldFJlc29sdXRpb25fLCAwLCBzaXplLCBpc01vdmluZyk7XG4gICAgICAgIHZhciBuZXdDZW50ZXIgPSB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBzaXplLCBpc01vdmluZywgdGhpcy5jYWxjdWxhdGVDZW50ZXJTaGlmdCh0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIG5ld1JvdGF0aW9uLCBzaXplKSk7XG4gICAgICAgIGlmICh0aGlzLmdldChWaWV3UHJvcGVydHkuUk9UQVRJT04pICE9PSBuZXdSb3RhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OLCBuZXdSb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OKSAhPT0gbmV3UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04sIG5ld1Jlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUikgfHxcbiAgICAgICAgICAgICFlcXVhbHModGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUiksIG5ld0NlbnRlcikpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIsIG5ld0NlbnRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkgJiYgIW9wdF9kb05vdENhbmNlbEFuaW1zKSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJZiBhbnkgY29uc3RyYWludHMgbmVlZCB0byBiZSBhcHBsaWVkLCBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQuXG4gICAgICogVGhpcyBpcyB0eXBpY2FsbHkgZG9uZSBvbiBpbnRlcmFjdGlvbiBlbmQuXG4gICAgICogTm90ZTogY2FsbGluZyB0aGlzIHdpdGggYSBkdXJhdGlvbiBvZiAwIHdpbGwgYXBwbHkgdGhlIGNvbnN0cmFpbmVkIHZhbHVlcyBzdHJhaWdodCBhd2F5LFxuICAgICAqIHdpdGhvdXQgYW5pbWF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBUaGUgYW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Jlc29sdXRpb25EaXJlY3Rpb25dIFdoaWNoIGRpcmVjdGlvbiB0byB6b29tLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5yZXNvbHZlQ29uc3RyYWludHMgPSBmdW5jdGlvbiAob3B0X2R1cmF0aW9uLCBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgZHVyYXRpb24gPSBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDIwMDtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uIHx8IDA7XG4gICAgICAgIHZhciBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHRoaXMudGFyZ2V0Um90YXRpb25fKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8obmV3Um90YXRpb24pO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXywgZGlyZWN0aW9uLCBzaXplKTtcbiAgICAgICAgdmFyIG5ld0NlbnRlciA9IHRoaXMuY29uc3RyYWludHNfLmNlbnRlcih0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIHNpemUsIGZhbHNlLCB0aGlzLmNhbGN1bGF0ZUNlbnRlclNoaWZ0KHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgbmV3Um90YXRpb24sIHNpemUpKTtcbiAgICAgICAgaWYgKGR1cmF0aW9uID09PSAwICYmICF0aGlzLmNhbmNlbEFuY2hvcl8pIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSBuZXdSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSBuZXdSb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IG5ld0NlbnRlcjtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvciB8fCAoZHVyYXRpb24gPT09IDAgPyB0aGlzLmNhbmNlbEFuY2hvcl8gOiB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gbmV3UmVzb2x1dGlvbiB8fFxuICAgICAgICAgICAgdGhpcy5nZXRSb3RhdGlvbigpICE9PSBuZXdSb3RhdGlvbiB8fFxuICAgICAgICAgICAgIXRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSB8fFxuICAgICAgICAgICAgIWVxdWFscyh0aGlzLmdldENlbnRlckludGVybmFsKCksIG5ld0NlbnRlcikpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgcm90YXRpb246IG5ld1JvdGF0aW9uLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogbmV3Q2VudGVyLFxuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICBhbmNob3I6IGFuY2hvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWRcbiAgICAgKiAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmJlZ2luSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmVuZEludGVyYWN0aW9uID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3IgJiYgZnJvbVVzZXJDb29yZGluYXRlKG9wdF9hbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5lbmRJbnRlcmFjdGlvbkludGVybmFsKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIGFuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgZW5kZWQuIFRoZSB2aWV3IHN0YXRlIHdpbGwgYmUgcmVzb2x2ZWRcbiAgICAgKiB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkIChkZXBlbmRpbmcgb24gaXRzIGNvbnN0cmFpbnRzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Jlc29sdXRpb25EaXJlY3Rpb25dIFdoaWNoIGRpcmVjdGlvbiB0byB6b29tLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5lbmRJbnRlcmFjdGlvbkludGVybmFsID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgcG9zaXRpb24gZm9yIHRoZSB2aWV3IGNlbnRlciBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgY29uc3RyYWludHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3RhcmdldFJlc29sdXRpb25dIFRhcmdldCByZXNvbHV0aW9uLiBJZiBub3Qgc3VwcGxpZWQsIHRoZSBjdXJyZW50IG9uZSB3aWxsIGJlIHVzZWQuXG4gICAgICogVGhpcyBpcyB1c2VmdWwgdG8gZ3Vlc3MgYSB2YWxpZCBjZW50ZXIgcG9zaXRpb24gYXQgYSBkaWZmZXJlbnQgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFZhbGlkIGNlbnRlciBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZENlbnRlciA9IGZ1bmN0aW9uICh0YXJnZXRDZW50ZXIsIG9wdF90YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGFyZ2V0Q2VudGVyLCBvcHRfdGFyZ2V0UmVzb2x1dGlvbiB8fCB0aGlzLmdldFJlc29sdXRpb24oKSwgc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB2YWxpZCB6b29tIGxldmVsIGFjY29yZGluZyB0byB0aGUgY3VycmVudCB2aWV3IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdGFyZ2V0Wm9vbSBUYXJnZXQgem9vbS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVmFsaWQgem9vbSBsZXZlbC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZFpvb20gPSBmdW5jdGlvbiAodGFyZ2V0Wm9vbSwgb3B0X2RpcmVjdGlvbikge1xuICAgICAgICB2YXIgdGFyZ2V0UmVzID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh0YXJnZXRab29tKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGFyZ2V0UmVzLCBvcHRfZGlyZWN0aW9uKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB2YWxpZCByZXNvbHV0aW9uIGFjY29yZGluZyB0byB0aGUgY3VycmVudCB2aWV3IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVmFsaWQgcmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24gPSBmdW5jdGlvbiAodGFyZ2V0UmVzb2x1dGlvbiwgb3B0X2RpcmVjdGlvbikge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gb3B0X2RpcmVjdGlvbiB8fCAwO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbih0YXJnZXRSZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUpO1xuICAgIH07XG4gICAgcmV0dXJuIFZpZXc7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcGFyYW0geyp9IHJldHVyblZhbHVlIFJldHVybiB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHJldHVyblZhbHVlKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKHJldHVyblZhbHVlKTtcbiAgICB9LCAwKTtcbn1cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgc21vb3RoID0gb3B0aW9ucy5zbW9vdGhFeHRlbnRDb25zdHJhaW50ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5zbW9vdGhFeHRlbnRDb25zdHJhaW50XG4gICAgICAgICAgICA6IHRydWU7XG4gICAgICAgIHJldHVybiBjcmVhdGVFeHRlbnQob3B0aW9ucy5leHRlbnQsIG9wdGlvbnMuY29uc3RyYWluT25seUNlbnRlciwgc21vb3RoKTtcbiAgICB9XG4gICAgdmFyIHByb2plY3Rpb24gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICAgIGlmIChvcHRpb25zLm11bHRpV29ybGQgIT09IHRydWUgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgICAgIHZhciBleHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpLnNsaWNlKCk7XG4gICAgICAgIGV4dGVudFswXSA9IC1JbmZpbml0eTtcbiAgICAgICAgZXh0ZW50WzJdID0gSW5maW5pdHk7XG4gICAgICAgIHJldHVybiBjcmVhdGVFeHRlbnQoZXh0ZW50LCBmYWxzZSwgZmFsc2UpO1xuICAgIH1cbiAgICByZXR1cm4gY2VudGVyTm9uZTtcbn1cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHt7Y29uc3RyYWludDogaW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlLCBtYXhSZXNvbHV0aW9uOiBudW1iZXIsXG4gKiAgICAgbWluUmVzb2x1dGlvbjogbnVtYmVyLCBtaW5ab29tOiBudW1iZXIsIHpvb21GYWN0b3I6IG51bWJlcn19IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludDtcbiAgICB2YXIgbWF4UmVzb2x1dGlvbjtcbiAgICB2YXIgbWluUmVzb2x1dGlvbjtcbiAgICAvLyBUT0RPOiBtb3ZlIHRoZXNlIHRvIGJlIG9sIGNvbnN0YW50c1xuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vb3BlbmxheWVycy9vcGVubGF5ZXJzL2lzc3Vlcy8yMDc2XG4gICAgdmFyIGRlZmF1bHRNYXhab29tID0gMjg7XG4gICAgdmFyIGRlZmF1bHRab29tRmFjdG9yID0gMjtcbiAgICB2YXIgbWluWm9vbSA9IG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5ab29tIDogREVGQVVMVF9NSU5fWk9PTTtcbiAgICB2YXIgbWF4Wm9vbSA9IG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhab29tIDogZGVmYXVsdE1heFpvb207XG4gICAgdmFyIHpvb21GYWN0b3IgPSBvcHRpb25zLnpvb21GYWN0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbUZhY3RvciA6IGRlZmF1bHRab29tRmFjdG9yO1xuICAgIHZhciBtdWx0aVdvcmxkID0gb3B0aW9ucy5tdWx0aVdvcmxkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm11bHRpV29ybGQgOiBmYWxzZTtcbiAgICB2YXIgc21vb3RoID0gb3B0aW9ucy5zbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludCAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5zbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludFxuICAgICAgICA6IHRydWU7XG4gICAgdmFyIHNob3dGdWxsRXh0ZW50ID0gb3B0aW9ucy5zaG93RnVsbEV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaG93RnVsbEV4dGVudCA6IGZhbHNlO1xuICAgIHZhciBwcm9qZWN0aW9uID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICB2YXIgcHJvakV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGNvbnN0cmFpbk9ubHlDZW50ZXIgPSBvcHRpb25zLmNvbnN0cmFpbk9ubHlDZW50ZXI7XG4gICAgdmFyIGV4dGVudCA9IG9wdGlvbnMuZXh0ZW50O1xuICAgIGlmICghbXVsdGlXb3JsZCAmJiAhZXh0ZW50ICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgICBjb25zdHJhaW5Pbmx5Q2VudGVyID0gZmFsc2U7XG4gICAgICAgIGV4dGVudCA9IHByb2pFeHRlbnQ7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHJlc29sdXRpb25zID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcbiAgICAgICAgbWF4UmVzb2x1dGlvbiA9IHJlc29sdXRpb25zW21pblpvb21dO1xuICAgICAgICBtaW5SZXNvbHV0aW9uID1cbiAgICAgICAgICAgIHJlc29sdXRpb25zW21heFpvb21dICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHJlc29sdXRpb25zW21heFpvb21dXG4gICAgICAgICAgICAgICAgOiByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyhyZXNvbHV0aW9ucywgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlZmF1bHQgbWluIGFuZCBtYXggcmVzb2x1dGlvblxuICAgICAgICB2YXIgc2l6ZSA9ICFwcm9qRXh0ZW50XG4gICAgICAgICAgICA/IC8vIHVzZSBhbiBleHRlbnQgdGhhdCBjYW4gZml0IHRoZSB3aG9sZSB3b3JsZCBpZiBuZWVkIGJlXG4gICAgICAgICAgICAgICAgKDM2MCAqIE1FVEVSU19QRVJfVU5JVFtVbml0cy5ERUdSRUVTXSkgLyBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKVxuICAgICAgICAgICAgOiBNYXRoLm1heChnZXRXaWR0aChwcm9qRXh0ZW50KSwgZ2V0SGVpZ2h0KHByb2pFeHRlbnQpKTtcbiAgICAgICAgdmFyIGRlZmF1bHRNYXhSZXNvbHV0aW9uID0gc2l6ZSAvIERFRkFVTFRfVElMRV9TSVpFIC8gTWF0aC5wb3coZGVmYXVsdFpvb21GYWN0b3IsIERFRkFVTFRfTUlOX1pPT00pO1xuICAgICAgICB2YXIgZGVmYXVsdE1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvXG4gICAgICAgICAgICBNYXRoLnBvdyhkZWZhdWx0Wm9vbUZhY3RvciwgZGVmYXVsdE1heFpvb20gLSBERUZBVUxUX01JTl9aT09NKTtcbiAgICAgICAgLy8gdXNlciBwcm92aWRlZCBtYXhSZXNvbHV0aW9uIHRha2VzIHByZWNlZGVuY2VcbiAgICAgICAgbWF4UmVzb2x1dGlvbiA9IG9wdGlvbnMubWF4UmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKG1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluWm9vbSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXhSZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtaW5ab29tKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1c2VyIHByb3ZpZGVkIG1pblJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgICAgICBtaW5SZXNvbHV0aW9uID0gb3B0aW9ucy5taW5SZXNvbHV0aW9uO1xuICAgICAgICBpZiAobWluUmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBkZWZhdWx0TWluUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBnaXZlbiBkaXNjcmV0ZSB6b29tIGxldmVscywgbWluUmVzb2x1dGlvbiBtYXkgYmUgZGlmZmVyZW50IHRoYW4gcHJvdmlkZWRcbiAgICAgICAgbWF4Wm9vbSA9XG4gICAgICAgICAgICBtaW5ab29tICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpKTtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tIC0gbWluWm9vbSk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUG93ZXIoem9vbUZhY3RvciwgbWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0cmFpbnQ6IHJlc29sdXRpb25Db25zdHJhaW50LFxuICAgICAgICBtYXhSZXNvbHV0aW9uOiBtYXhSZXNvbHV0aW9uLFxuICAgICAgICBtaW5SZXNvbHV0aW9uOiBtaW5SZXNvbHV0aW9uLFxuICAgICAgICBtaW5ab29tOiBtaW5ab29tLFxuICAgICAgICB6b29tRmFjdG9yOiB6b29tRmFjdG9yLFxuICAgIH07XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gICAgdmFyIGVuYWJsZVJvdGF0aW9uID0gb3B0aW9ucy5lbmFibGVSb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5lbmFibGVSb3RhdGlvbiA6IHRydWU7XG4gICAgaWYgKGVuYWJsZVJvdGF0aW9uKSB7XG4gICAgICAgIHZhciBjb25zdHJhaW5Sb3RhdGlvbiA9IG9wdGlvbnMuY29uc3RyYWluUm90YXRpb247XG4gICAgICAgIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGNvbnN0cmFpblJvdGF0aW9uID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlU25hcFRvWmVybygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uTm9uZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29uc3RyYWluUm90YXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlU25hcFRvTihjb25zdHJhaW5Sb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb25Ob25lO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGlzYWJsZTtcbiAgICB9XG59XG4vKipcbiAqIERldGVybWluZSBpZiBhbiBhbmltYXRpb24gaW52b2x2ZXMgbm8gdmlldyBjaGFuZ2UuXG4gKiBAcGFyYW0ge0FuaW1hdGlvbn0gYW5pbWF0aW9uIFRoZSBhbmltYXRpb24uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikge1xuICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyICYmIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIpIHtcbiAgICAgICAgaWYgKCFjb29yZGluYXRlc0VxdWFsKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIsIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICE9PSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwb3NpdGlvbiBQb3NpdGlvbiBvbiB0aGUgdmlldyB0byBjZW50ZXIgb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFNoaWZ0ZWQgY2VudGVyLlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVDZW50ZXJPbihjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbiwgcmVzb2x1dGlvbiwgcm90YXRpb24pIHtcbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBwb3NpdGlvblxuICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKC1yb3RhdGlvbik7XG4gICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgICB2YXIgcm90WCA9IGNvb3JkaW5hdGVbMF0gKiBjb3NBbmdsZSAtIGNvb3JkaW5hdGVbMV0gKiBzaW5BbmdsZTtcbiAgICB2YXIgcm90WSA9IGNvb3JkaW5hdGVbMV0gKiBjb3NBbmdsZSArIGNvb3JkaW5hdGVbMF0gKiBzaW5BbmdsZTtcbiAgICByb3RYICs9IChzaXplWzBdIC8gMiAtIHBvc2l0aW9uWzBdKSAqIHJlc29sdXRpb247XG4gICAgcm90WSArPSAocG9zaXRpb25bMV0gLSBzaXplWzFdIC8gMikgKiByZXNvbHV0aW9uO1xuICAgIC8vIGdvIGJhY2sgdG8gb3JpZ2luYWwgYW5nbGVcbiAgICBzaW5BbmdsZSA9IC1zaW5BbmdsZTsgLy8gZ28gYmFjayB0byBvcmlnaW5hbCByb3RhdGlvblxuICAgIHZhciBjZW50ZXJYID0gcm90WCAqIGNvc0FuZ2xlIC0gcm90WSAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXJZID0gcm90WSAqIGNvc0FuZ2xlICsgcm90WCAqIHNpbkFuZ2xlO1xuICAgIHJldHVybiBbY2VudGVyWCwgY2VudGVyWV07XG59XG5leHBvcnQgZGVmYXVsdCBWaWV3O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlldy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtYXhpbXVtIHpvb20gZm9yIGRlZmF1bHQgdGlsZSBncmlkcy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9NQVhfWk9PTSA9IDQyO1xuLyoqXG4gKiBEZWZhdWx0IHRpbGUgc2l6ZS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9USUxFX1NJWkUgPSAyNTY7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdIaW50XG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIEFOSU1BVElORzogMCxcbiAgICBJTlRFUkFDVElORzogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3SGludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGVcbiAqL1xuaW1wb3J0IHsgYXNTdHJpbmcgfSBmcm9tICcuLi9jb2xvci5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNpbmdsZXRvbiBjbGFzcy4gQXZhaWxhYmxlIHRocm91Z2gge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZX5zaGFyZWR9LlxuICovXG52YXIgSWNvbkltYWdlQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSWNvbkltYWdlQ2FjaGUoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZV8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4Q2FjaGVTaXplXyA9IDMyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgICAgIHRoaXMuY2FjaGVTaXplXyA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVTaXplXyA+IHRoaXMubWF4Q2FjaGVTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5leHBpcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlXykge1xuICAgICAgICAgICAgICAgIHZhciBpY29uSW1hZ2UgPSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAgICAgICAgIGlmICgoaSsrICYgMykgPT09IDAgJiYgIWljb25JbWFnZS5oYXNMaXN0ZW5lcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAgICAgICAgICAgICAtLXRoaXMuY2FjaGVTaXplXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9IEljb24gaW1hZ2UuXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcikge1xuICAgICAgICB2YXIga2V5ID0gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICAgICAgcmV0dXJuIGtleSBpbiB0aGlzLmNhY2hlXyA/IHRoaXMuY2FjaGVfW2tleV0gOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBpY29uSW1hZ2UgSWNvbiBpbWFnZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yLCBpY29uSW1hZ2UpIHtcbiAgICAgICAgdmFyIGtleSA9IGdldEtleShzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcik7XG4gICAgICAgIHRoaXMuY2FjaGVfW2tleV0gPSBpY29uSW1hZ2U7XG4gICAgICAgICsrdGhpcy5jYWNoZVNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjYWNoZSBzaXplIG9mIHRoZSBpY29uIGNhY2hlLiBEZWZhdWx0IGlzIGAzMmAuIENoYW5nZSB0aGlzIHZhbHVlIHdoZW5cbiAgICAgKiB5b3VyIG1hcCB1c2VzIG1vcmUgdGhhbiAzMiBkaWZmZXJlbnQgaWNvbiBpbWFnZXMgYW5kIHlvdSBhcmUgbm90IGNhY2hpbmcgaWNvblxuICAgICAqIHN0eWxlcyBvbiB0aGUgYXBwbGljYXRpb24gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heENhY2hlU2l6ZSBDYWNoZSBtYXggc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAobWF4Q2FjaGVTaXplKSB7XG4gICAgICAgIHRoaXMubWF4Q2FjaGVTaXplXyA9IG1heENhY2hlU2l6ZTtcbiAgICAgICAgdGhpcy5leHBpcmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBJY29uSW1hZ2VDYWNoZTtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FjaGUga2V5LlxuICovXG5mdW5jdGlvbiBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgICB2YXIgY29sb3JTdHJpbmcgPSBjb2xvciA/IGFzU3RyaW5nKGNvbG9yKSA6ICdudWxsJztcbiAgICByZXR1cm4gY3Jvc3NPcmlnaW4gKyAnOicgKyBzcmMgKyAnOicgKyBjb2xvclN0cmluZztcbn1cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZUNhY2hlO1xuLyoqXG4gKiBUaGUge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZX5JY29uSW1hZ2VDYWNoZX0gZm9yXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25+SWNvbn0gaW1hZ2VzLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHNoYXJlZCA9IG5ldyBJY29uSW1hZ2VDYWNoZSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWNvbkltYWdlQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbG9yXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEEgY29sb3IgcmVwcmVzZW50ZWQgYXMgYSBzaG9ydCBhcnJheSBbcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGFdLlxuICogcmVkLCBncmVlbiwgYW5kIGJsdWUgc2hvdWxkIGJlIGludGVnZXJzIGluIHRoZSByYW5nZSAwLi4yNTUgaW5jbHVzaXZlLlxuICogYWxwaGEgc2hvdWxkIGJlIGEgZmxvYXQgaW4gdGhlIHJhbmdlIDAuLjEgaW5jbHVzaXZlLiBJZiBubyBhbHBoYSB2YWx1ZSBpc1xuICogZ2l2ZW4gdGhlbiBgMWAgd2lsbCBiZSB1c2VkLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvbG9yXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogVGhpcyBSZWdFeHAgbWF0Y2hlcyAjIGZvbGxvd2VkIGJ5IDMsIDQsIDYsIG9yIDggaGV4IGRpZ2l0cy5cbiAqIEBjb25zdFxuICogQHR5cGUge1JlZ0V4cH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBIRVhfQ09MT1JfUkVfID0gL14jKFthLWYwLTldezN9fFthLWYwLTldezR9KD86W2EtZjAtOV17Mn0pezAsMn0pJC9pO1xuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIHBvdGVudGlhbCBuYW1lZCBjb2xvciBzdHlsZSBzdHJpbmdzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIE5BTUVEX0NPTE9SX1JFXyA9IC9eKFthLXpdKikkfF5oc2xhP1xcKC4qXFwpJC9pO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2JhIHN0cmluZy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzU3RyaW5nKGNvbG9yKSB7XG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nKGNvbG9yKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybiBuYW1lZCBjb2xvciBhcyBhbiByZ2JhIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBOYW1lZCBjb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gUmdiIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZnJvbU5hbWVkKGNvbG9yKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWwuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgICBpZiAoZWwuc3R5bGUuY29sb3IgIT09ICcnKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmdiID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCkuY29sb3I7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICByZXR1cm4gcmdiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICovXG5leHBvcnQgdmFyIGZyb21TdHJpbmcgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdlIG1haW50YWluIGEgc21hbGwgY2FjaGUgb2YgcGFyc2VkIHN0cmluZ3MuICBUbyBwcm92aWRlIGNoZWFwIExSVS1saWtlXG4gICAgLy8gc2VtYW50aWNzLCB3aGVuZXZlciB0aGUgY2FjaGUgZ3Jvd3MgdG9vIGxhcmdlIHdlIHNpbXBseSBkZWxldGUgYW5cbiAgICAvLyBhcmJpdHJhcnkgMjUlIG9mIHRoZSBlbnRyaWVzLlxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdmFyIE1BWF9DQUNIRV9TSVpFID0gMTAyNDtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQ29sb3I+fVxuICAgICAqL1xuICAgIHZhciBjYWNoZSA9IHt9O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdmFyIGNhY2hlU2l6ZSA9IDA7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gICAgICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBjb2xvcjtcbiAgICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KHMpKSB7XG4gICAgICAgICAgICBjb2xvciA9IGNhY2hlW3NdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNhY2hlU2l6ZSA+PSBNQVhfQ0FDSEVfU0laRSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChpKysgJiAzKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAtLWNhY2hlU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbG9yID0gZnJvbVN0cmluZ0ludGVybmFsXyhzKTtcbiAgICAgICAgICAgIGNhY2hlW3NdID0gY29sb3I7XG4gICAgICAgICAgICArK2NhY2hlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfSk7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIGFycmF5LiBUaGlzIGZ1bmN0aW9uIG1haW50YWlucyBhIGNhY2hlIG9mIGNhbGN1bGF0ZWRcbiAqIGFycmF5cyB3aGljaCBtZWFucyB0aGUgcmVzdWx0IHNob3VsZCBub3QgYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0ge0NvbG9yfHN0cmluZ30gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0FycmF5KGNvbG9yKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3IpKSB7XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmcm9tU3RyaW5nKGNvbG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmZ1bmN0aW9uIGZyb21TdHJpbmdJbnRlcm5hbF8ocykge1xuICAgIHZhciByLCBnLCBiLCBhLCBjb2xvcjtcbiAgICBpZiAoTkFNRURfQ09MT1JfUkVfLmV4ZWMocykpIHtcbiAgICAgICAgcyA9IGZyb21OYW1lZChzKTtcbiAgICB9XG4gICAgaWYgKEhFWF9DT0xPUl9SRV8uZXhlYyhzKSkge1xuICAgICAgICAvLyBoZXhcbiAgICAgICAgdmFyIG4gPSBzLmxlbmd0aCAtIDE7IC8vIG51bWJlciBvZiBoZXggZGlnaXRzXG4gICAgICAgIHZhciBkID0gLy8gbnVtYmVyIG9mIGRpZ2l0cyBwZXIgY2hhbm5lbFxuICAgICAgICAgdm9pZCAwOyAvLyBudW1iZXIgb2YgZGlnaXRzIHBlciBjaGFubmVsXG4gICAgICAgIGlmIChuIDw9IDQpIHtcbiAgICAgICAgICAgIGQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZCA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhc0FscGhhID0gbiA9PT0gNCB8fCBuID09PSA4O1xuICAgICAgICByID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDAgKiBkLCBkKSwgMTYpO1xuICAgICAgICBnID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDEgKiBkLCBkKSwgMTYpO1xuICAgICAgICBiID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDIgKiBkLCBkKSwgMTYpO1xuICAgICAgICBpZiAoaGFzQWxwaGEpIHtcbiAgICAgICAgICAgIGEgPSBwYXJzZUludChzLnN1YnN0cigxICsgMyAqIGQsIGQpLCAxNik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhID0gMjU1O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID09IDEpIHtcbiAgICAgICAgICAgIHIgPSAociA8PCA0KSArIHI7XG4gICAgICAgICAgICBnID0gKGcgPDwgNCkgKyBnO1xuICAgICAgICAgICAgYiA9IChiIDw8IDQpICsgYjtcbiAgICAgICAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICAgICAgICAgIGEgPSAoYSA8PCA0KSArIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29sb3IgPSBbciwgZywgYiwgYSAvIDI1NV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHMuaW5kZXhPZigncmdiYSgnKSA9PSAwKSB7XG4gICAgICAgIC8vIHJnYmEoKVxuICAgICAgICBjb2xvciA9IHMuc2xpY2UoNSwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgICAgIG5vcm1hbGl6ZShjb2xvcik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHMuaW5kZXhPZigncmdiKCcpID09IDApIHtcbiAgICAgICAgLy8gcmdiKClcbiAgICAgICAgY29sb3IgPSBzLnNsaWNlKDQsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgICAgICBjb2xvci5wdXNoKDEpO1xuICAgICAgICBub3JtYWxpemUoY29sb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAxNCk7IC8vIEludmFsaWQgY29sb3JcbiAgICB9XG4gICAgcmV0dXJuIGNvbG9yO1xufVxuLyoqXG4gKiBUT0RPIHRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIGluIHRoZSB0ZXN0LCB3ZSBwcm9iYWJseSBzaG91bGRuJ3QgZXhwb3J0IGl0XG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDbGFtcGVkIGNvbG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKGNvbG9yKSB7XG4gICAgY29sb3JbMF0gPSBjbGFtcCgoY29sb3JbMF0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgICBjb2xvclsxXSA9IGNsYW1wKChjb2xvclsxXSArIDAuNSkgfCAwLCAwLCAyNTUpO1xuICAgIGNvbG9yWzJdID0gY2xhbXAoKGNvbG9yWzJdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gICAgY29sb3JbM10gPSBjbGFtcChjb2xvclszXSwgMCwgMSk7XG4gICAgcmV0dXJuIGNvbG9yO1xufVxuLyoqXG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcoY29sb3IpIHtcbiAgICB2YXIgciA9IGNvbG9yWzBdO1xuICAgIGlmIChyICE9IChyIHwgMCkpIHtcbiAgICAgICAgciA9IChyICsgMC41KSB8IDA7XG4gICAgfVxuICAgIHZhciBnID0gY29sb3JbMV07XG4gICAgaWYgKGcgIT0gKGcgfCAwKSkge1xuICAgICAgICBnID0gKGcgKyAwLjUpIHwgMDtcbiAgICB9XG4gICAgdmFyIGIgPSBjb2xvclsyXTtcbiAgICBpZiAoYiAhPSAoYiB8IDApKSB7XG4gICAgICAgIGIgPSAoYiArIDAuNSkgfCAwO1xuICAgIH1cbiAgICB2YXIgYSA9IGNvbG9yWzNdID09PSB1bmRlZmluZWQgPyAxIDogY29sb3JbM107XG4gICAgcmV0dXJuICdyZ2JhKCcgKyByICsgJywnICsgZyArICcsJyArIGIgKyAnLCcgKyBhICsgJyknO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBzdHJpbmcgaXMgYWN0dWFsbHkgYSB2YWxpZCBjb2xvclxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmdDb2xvcihzKSB7XG4gICAgaWYgKE5BTUVEX0NPTE9SX1JFXy50ZXN0KHMpKSB7XG4gICAgICAgIHMgPSBmcm9tTmFtZWQocyk7XG4gICAgfVxuICAgIHJldHVybiAoSEVYX0NPTE9SX1JFXy50ZXN0KHMpIHx8IHMuaW5kZXhPZigncmdiYSgnKSA9PT0gMCB8fCBzLmluZGV4T2YoJ3JnYignKSA9PT0gMCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xvci5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL01hcFxuICovXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCB7IFRSVUUgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgbWFrZUludmVyc2UgfSBmcm9tICcuLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgZ2V0V2lkdGggfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgc2hhcmVkIGFzIGljb25JbWFnZUNhY2hlIH0gZnJvbSAnLi4vc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMnO1xuaW1wb3J0IHsgaW5WaWV3IH0gZnJvbSAnLi4vbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IHsgd3JhcFggfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYgSGl0TWF0Y2hcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkaXN0YW5jZVNxIFNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAdGVtcGxhdGUgVFxuICovXG4vKipcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgTWFwUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwUmVuZGVyZXIobWFwKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbWFwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudCA9IGZ1bmN0aW9uICh0eXBlLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5jYWxjdWxhdGVNYXRyaWNlczJEID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB2YXIgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtO1xuICAgICAgICB2YXIgcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtO1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLnNpemVbMF0gLyAyLCBmcmFtZVN0YXRlLnNpemVbMV0gLyAyLCAxIC8gdmlld1N0YXRlLnJlc29sdXRpb24sIC0xIC8gdmlld1N0YXRlLnJlc29sdXRpb24sIC12aWV3U3RhdGUucm90YXRpb24sIC12aWV3U3RhdGUuY2VudGVyWzBdLCAtdmlld1N0YXRlLmNlbnRlclsxXSk7XG4gICAgICAgIG1ha2VJbnZlcnNlKHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2hlY2tXcmFwcGVkIENoZWNrIGZvciB3cmFwcGVkIGdlb21ldHJpZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtTfSB0aGlzQXJnIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGNhbGxiYWNrYC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFUsIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHBhcmFtIHtVfSB0aGlzQXJnMiBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBsYXllckZpbHRlcmAuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgUyxULFVcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGNhbGxiYWNrLCB0aGlzQXJnLCBsYXllckZpbHRlciwgdGhpc0FyZzIpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBtYW5hZ2VkIE1hbmFnZWQgbGF5ZXIuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAgICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShtYW5hZ2VkLCBmZWF0dXJlLCBsYXllciwgZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGZlYXR1cmUsIG1hbmFnZWQgPyBsYXllciA6IG51bGwsIGdlb21ldHJ5KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB2YXIgdHJhbnNsYXRlZENvb3JkaW5hdGUgPSB3cmFwWChjb29yZGluYXRlLnNsaWNlKCksIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgb2Zmc2V0cyA9IFtbMCwgMF1dO1xuICAgICAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpICYmIGNoZWNrV3JhcHBlZCkge1xuICAgICAgICAgICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgICAgIG9mZnNldHMucHVzaChbLXdvcmxkV2lkdGgsIDBdLCBbd29ybGRXaWR0aCwgMF0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgdmFyIG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIG1hdGNoZXMgPSAvKiogQHR5cGUge0FycmF5PEhpdE1hdGNoPFQ+Pn0gKi8gKFtdKTtcbiAgICAgICAgdmFyIHRtcENvb3JkID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2Zmc2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IG51bUxheWVycyAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc1tqXTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgICAgICAgICAgIGlmIChsYXllci5oYXNSZW5kZXJlcigpICYmXG4gICAgICAgICAgICAgICAgICAgIGluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpICYmXG4gICAgICAgICAgICAgICAgICAgIGxheWVyRmlsdGVyLmNhbGwodGhpc0FyZzIsIGxheWVyKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IGxheWVyLmdldFJlbmRlcmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBsYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyUmVuZGVyZXIgJiYgc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBzb3VyY2UuZ2V0V3JhcFgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJhbnNsYXRlZENvb3JkaW5hdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvb3JkaW5hdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2tfMSA9IGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlLmJpbmQobnVsbCwgbGF5ZXJTdGF0ZS5tYW5hZ2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcENvb3JkWzBdID0gY29vcmRpbmF0ZXNbMF0gKyBvZmZzZXRzW2ldWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQ29vcmRbMV0gPSBjb29yZGluYXRlc1sxXSArIG9mZnNldHNbaV1bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBsYXllclJlbmRlcmVyLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKHRtcENvb3JkLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrXzEsIG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcmRlciA9IDEgLyBtYXRjaGVzLmxlbmd0aDtcbiAgICAgICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChtLCBpKSB7IHJldHVybiAobS5kaXN0YW5jZVNxICs9IGkgKiBvcmRlcik7IH0pO1xuICAgICAgICBtYXRjaGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuZGlzdGFuY2VTcSAtIGIuZGlzdGFuY2VTcTsgfSk7XG4gICAgICAgIG1hdGNoZXMuc29tZShmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSBtLmNhbGxiYWNrKG0uZmVhdHVyZSwgbS5sYXllciwgbS5nZW9tZXRyeSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2sgTGF5ZXJcbiAgICAgKiAgICAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbGF5ZXJGaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2hlY2tXcmFwcGVkIENoZWNrIGZvciB3cmFwcGVkIGdlb21ldHJpZXMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBVLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEBwYXJhbSB7VX0gdGhpc0FyZyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBsYXllckZpbHRlcmAuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBjb29yZGluYXRlP1xuICAgICAqIEB0ZW1wbGF0ZSBVXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmhhc0ZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGxheWVyRmlsdGVyLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBoYXNGZWF0dXJlID0gdGhpcy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgVFJVRSwgdGhpcywgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcpO1xuICAgICAgICByZXR1cm4gaGFzRmVhdHVyZSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoaWNvbkltYWdlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goZXhwaXJlSWNvbkNhY2hlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1hcFJlbmRlcmVyO1xufShEaXNwb3NhYmxlKSk7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICovXG5mdW5jdGlvbiBleHBpcmVJY29uQ2FjaGUobWFwLCBmcmFtZVN0YXRlKSB7XG4gICAgaWNvbkltYWdlQ2FjaGUuZXhwaXJlKCk7XG59XG5leHBvcnQgZGVmYXVsdCBNYXBSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY3NzXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRm9udFBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzdHlsZSBTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB2YXJpYW50IFZhcmlhbnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gd2VpZ2h0IFdlaWdodC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzaXplIFNpemUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbGluZUhlaWdodCBMaW5lSGVpZ2h0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZhbWlseSBGYW1pbHkuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IGZhbWlsaWVzIEZhbWlsaWVzLlxuICovXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGhpZGRlbiBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19ISURERU4gPSAnb2wtaGlkZGVuJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0byBoYXZlIHRoZW0gc2VsZWN0YWJsZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfU0VMRUNUQUJMRSA9ICdvbC1zZWxlY3RhYmxlJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0byBoYXZlIHRoZW0gdW5zZWxlY3RhYmxlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19VTlNFTEVDVEFCTEUgPSAnb2wtdW5zZWxlY3RhYmxlJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgdW5zdXBwb3J0ZWQgZmVhdHVyZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfVU5TVVBQT1JURUQgPSAnb2wtdW5zdXBwb3J0ZWQnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciBjb250cm9scy5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfQ09OVFJPTCA9ICdvbC1jb250cm9sJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0aGF0IGFyZSBjb2xsYXBzZWQsIGkuZS5cbiAqIHRvIHRob3NlIGVsZW1lbnRzIHdoaWNoIHVzdWFsbHkgY2FuIGJlIGV4cGFuZGVkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19DT0xMQVBTRUQgPSAnb2wtY29sbGFwc2VkJztcbi8qKlxuICogRnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDEzNTY5Ny9yZWdleC10by1wYXJzZS1hbnktY3NzLWZvbnRcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbnZhciBmb250UmVnRXggPSBuZXcgUmVnRXhwKFtcbiAgICAnXlxcXFxzKig/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oaXRhbGljfG9ibGlxdWUpKT8pJyxcbiAgICAnKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShzbWFsbC1jYXBzKSk/KScsXG4gICAgJyg/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oYm9sZCg/OmVyKT98bGlnaHRlcnxbMS05XTAwICkpPyknLFxuICAgICcoPzooPzpub3JtYWx8XFxcXDF8XFxcXDJ8XFxcXDMpXFxcXHMqKXswLDN9KCg/Onh4Py0pPycsXG4gICAgJyg/OnNtYWxsfGxhcmdlKXxtZWRpdW18c21hbGxlcnxsYXJnZXJ8W1xcXFwuXFxcXGRdKyg/OlxcXFwlfGlufFtjZW1dbXxleHxwW2N0eF0pKScsXG4gICAgJyg/OlxcXFxzKlxcXFwvXFxcXHMqKG5vcm1hbHxbXFxcXC5cXFxcZF0rKD86XFxcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSk/KSknLFxuICAgICc/XFxcXHMqKFstLFxcXFxcIlxcXFxcXCdcXFxcc2Etel0rPylcXFxccyokJyxcbl0uam9pbignJyksICdpJyk7XG52YXIgZm9udFJlZ0V4TWF0Y2hJbmRleCA9IFtcbiAgICAnc3R5bGUnLFxuICAgICd2YXJpYW50JyxcbiAgICAnd2VpZ2h0JyxcbiAgICAnc2l6ZScsXG4gICAgJ2xpbmVIZWlnaHQnLFxuICAgICdmYW1pbHknLFxuXTtcbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIGZvbnQgZmFtaWxpZXMgZnJvbSBhIGZvbnQgc3BlYy4gIE5vdGUgdGhhdCB0aGlzIGRvZXNuJ3Qgd29ya1xuICogZm9yIGZvbnQgZmFtaWxpZXMgdGhhdCBoYXZlIGNvbW1hcyBpbiB0aGVtLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTcGVjIFRoZSBDU1MgZm9udCBwcm9wZXJ0eS5cbiAqIEByZXR1cm4ge0ZvbnRQYXJhbWV0ZXJzfSBUaGUgZm9udCBwYXJhbWV0ZXJzIChvciBudWxsIGlmIHRoZSBpbnB1dCBzcGVjIGlzIGludmFsaWQpLlxuICovXG5leHBvcnQgdmFyIGdldEZvbnRQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgdmFyIG1hdGNoID0gZm9udFNwZWMubWF0Y2goZm9udFJlZ0V4KTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgc3R5bGUgPSAvKiogQHR5cGUge0ZvbnRQYXJhbWV0ZXJzfSAqLyAoe1xuICAgICAgICBsaW5lSGVpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgc2l6ZTogJzEuMmVtJyxcbiAgICAgICAgc3R5bGU6ICdub3JtYWwnLFxuICAgICAgICB3ZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICB2YXJpYW50OiAnbm9ybWFsJyxcbiAgICB9KTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmb250UmVnRXhNYXRjaEluZGV4Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbaSArIDFdO1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3R5bGVbZm9udFJlZ0V4TWF0Y2hJbmRleFtpXV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHlsZS5mYW1pbGllcyA9IHN0eWxlLmZhbWlseS5zcGxpdCgvLFxccz8vKTtcbiAgICByZXR1cm4gc3R5bGU7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3NzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgeyBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyB9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuLi9kb20uanMnO1xuaW1wb3J0IHsgZ2V0Rm9udFBhcmFtZXRlcnMgfSBmcm9tICcuLi9jc3MuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gZmlsbFN0eWxlIEZpbGxTdHlsZS5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiBMYWJlbFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoIFdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodCBIZWlnaHQuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZ3xudW1iZXI+fSBjb250ZXh0SW5zdHJ1Y3Rpb25zIENvbnRleHRJbnN0cnVjdGlvbnMuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmlsbFN0cm9rZVN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtjdXJyZW50RmlsbFN0eWxlXSBDdXJyZW50IEZpbGxTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRTdHJva2VTdHlsZV0gQ3VycmVudCBTdHJva2VTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUNhcH0gW2N1cnJlbnRMaW5lQ2FwXSBDdXJyZW50IExpbmVDYXAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGN1cnJlbnRMaW5lRGFzaCBDdXJyZW50IExpbmVEYXNoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TGluZURhc2hPZmZzZXRdIEN1cnJlbnQgTGluZURhc2hPZmZzZXQuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVKb2lufSBbY3VycmVudExpbmVKb2luXSBDdXJyZW50IExpbmVKb2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TGluZVdpZHRoXSBDdXJyZW50IExpbmVXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudE1pdGVyTGltaXRdIEN1cnJlbnQgTWl0ZXJMaW1pdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGFzdFN0cm9rZV0gTGFzdCBzdHJva2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtmaWxsU3R5bGVdIEZpbGxTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW3N0cm9rZVN0eWxlXSBTdHJva2VTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUNhcH0gW2xpbmVDYXBdIExpbmVDYXAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGxpbmVEYXNoIExpbmVEYXNoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lRGFzaE9mZnNldF0gTGluZURhc2hPZmZzZXQuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVKb2lufSBbbGluZUpvaW5dIExpbmVKb2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lV2lkdGhdIExpbmVXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWl0ZXJMaW1pdF0gTWl0ZXJMaW1pdC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBsaW5lQ2FwIExpbmVDYXAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGxpbmVEYXNoIExpbmVEYXNoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVEYXNoT2Zmc2V0IExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gbGluZUpvaW4gTGluZUpvaW4uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGluZVdpZHRoIExpbmVXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0IE1pdGVyTGltaXQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IHN0cm9rZVN0eWxlIFN0cm9rZVN0eWxlLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRTdGF0ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGV4dEFsaWduXSBUZXh0QWxpZ24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGV4dEJhc2VsaW5lIFRleHRCYXNlbGluZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGxhY2VtZW50XSBQbGFjZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heEFuZ2xlXSBNYXhBbmdsZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW292ZXJmbG93XSBPdmVyZmxvdy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZEZpbGxdIEJhY2tncm91bmRGaWxsLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRTdHJva2VdIEJhY2tncm91bmRTdHJva2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3NjYWxlXSBTY2FsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW3BhZGRpbmddIFBhZGRpbmcuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBpbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBoaXQgZGV0ZWN0aW9uIGluc3RydWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgVGhlIGFycmF5IG9mIGFsbCBjb29yZGluYXRlcy5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIFRleHRTdGF0ZT59IFt0ZXh0U3RhdGVzXSBUaGUgdGV4dCBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBGaWxsU3RhdGU+fSBbZmlsbFN0YXRlc10gVGhlIGZpbGwgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgU3Ryb2tlU3RhdGU+fSBbc3Ryb2tlU3RhdGVzXSBUaGUgc3Ryb2tlIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0PG51bWJlciwgaW1wb3J0KFwiLi9jYW52YXMvRXhlY3V0b3IuanNcIikuUmVwbGF5SW1hZ2VPckxhYmVsQXJncz59IERlY2x1dHRlckltYWdlV2l0aFRleHRcbiAqL1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdEZvbnQgPSAnMTBweCBzYW5zLXNlcmlmJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0RmlsbFN0eWxlID0gJyMwMDAnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lQ2FwID0gJ3JvdW5kJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZURhc2ggPSBbXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lRGFzaE9mZnNldCA9IDA7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0NhbnZhc0xpbmVKb2lufVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lSm9pbiA9ICdyb3VuZCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TWl0ZXJMaW1pdCA9IDEwO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRTdHJva2VTdHlsZSA9ICcjMDAwJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRUZXh0QWxpZ24gPSAnY2VudGVyJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRUZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0UGFkZGluZyA9IFswLCAwLCAwLCAwXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lV2lkdGggPSAxO1xuLyoqXG4gKiBAdHlwZSB7QmFzZU9iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBjaGVja2VkRm9udHMgPSBuZXcgQmFzZU9iamVjdCgpO1xuLyoqXG4gKiBUaGUgbGFiZWwgY2FjaGUgZm9yIHRleHQgcmVuZGVyaW5nLiBUbyBjaGFuZ2UgdGhlIGRlZmF1bHQgY2FjaGUgc2l6ZSBvZiAyMDQ4XG4gKiBlbnRyaWVzLCB1c2Uge0BsaW5rIG1vZHVsZTpvbC9zdHJ1Y3RzL0xSVUNhY2hlfkxSVUNhY2hlI3NldFNpemUgY2FjaGUuc2V0U2l6ZSgpfS5cbiAqIERlcHJlY2F0ZWQgLSB0aGVyZSBpcyBubyBsYWJlbCBjYWNoZSBhbnkgbW9yZS5cbiAqIEB0eXBlIHs/fVxuICogQGFwaVxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBsYWJlbENhY2hlID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG5sYWJlbENhY2hlLnNldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS53YXJuKCdsYWJlbENhY2hlIGlzIGRlcHJlY2F0ZWQuJyk7IC8vZXNsaW50LWRpc2FibGUtbGluZVxufTtcbi8qKlxuICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAqL1xudmFyIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIG1lYXN1cmVGb250O1xuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgdGV4dEhlaWdodHMgPSB7fTtcbi8qKlxuICogQ2xlYXJzIHRoZSBsYWJlbCBjYWNoZSB3aGVuIGEgZm9udCBiZWNvbWVzIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBDU1MgZm9udCBzcGVjLlxuICovXG5leHBvcnQgdmFyIHJlZ2lzdGVyRm9udCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldHJpZXMgPSAxMDA7XG4gICAgdmFyIHNpemUgPSAnMzJweCAnO1xuICAgIHZhciByZWZlcmVuY2VGb250cyA9IFsnbW9ub3NwYWNlJywgJ3NlcmlmJ107XG4gICAgdmFyIGxlbiA9IHJlZmVyZW5jZUZvbnRzLmxlbmd0aDtcbiAgICB2YXIgdGV4dCA9ICd3bXl0emlsV01ZVFpJTEAjLyY/JCUxMFxcdUYwMTMnO1xuICAgIHZhciBpbnRlcnZhbCwgcmVmZXJlbmNlV2lkdGg7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTdHlsZSBDc3MgZm9udC1zdHlsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb250V2VpZ2h0IENzcyBmb250LXdlaWdodFxuICAgICAqIEBwYXJhbSB7Kn0gZm9udEZhbWlseSBDc3MgZm9udC1mYW1pbHlcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBGb250IHdpdGggc3R5bGUgYW5kIHdlaWdodCBpcyBhdmFpbGFibGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F2YWlsYWJsZShmb250U3R5bGUsIGZvbnRXZWlnaHQsIGZvbnRGYW1pbHkpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZWZlcmVuY2VGb250ID0gcmVmZXJlbmNlRm9udHNbaV07XG4gICAgICAgICAgICByZWZlcmVuY2VXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udFN0eWxlICsgJyAnICsgZm9udFdlaWdodCArICcgJyArIHNpemUgKyByZWZlcmVuY2VGb250LCB0ZXh0KTtcbiAgICAgICAgICAgIGlmIChmb250RmFtaWx5ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnRTdHlsZSArXG4gICAgICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICBzaXplICtcbiAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseSArXG4gICAgICAgICAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUZvbnQsIHRleHQpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdpZHRoIGFuZCByZWZlcmVuY2VXaWR0aCBhcmUgdGhlIHNhbWUsIHRoZW4gdGhlIGZhbGxiYWNrIHdhcyB1c2VkXG4gICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgZm9udCB3ZSB3YW50ZWQsIHNvIHRoZSBmb250IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gYXZhaWxhYmxlICYmIHdpZHRoICE9IHJlZmVyZW5jZVdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdmFpbGFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICAgIHZhciBkb25lID0gdHJ1ZTtcbiAgICAgICAgdmFyIGZvbnRzID0gY2hlY2tlZEZvbnRzLmdldEtleXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZm9udHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSBmb250c1tpXTtcbiAgICAgICAgICAgIGlmIChjaGVja2VkRm9udHMuZ2V0KGZvbnQpIDwgcmV0cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChpc0F2YWlsYWJsZS5hcHBseSh0aGlzLCBmb250LnNwbGl0KCdcXG4nKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXIodGV4dEhlaWdodHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBsb2FkZWQgZm9udHMgYXJlIHBpY2tlZCB1cCBieSBTYWZhcmlcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRm9udCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChmb250LCByZXRyaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgY2hlY2tlZEZvbnRzLmdldChmb250KSArIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgIGludGVydmFsID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICAgICAgdmFyIGZvbnQgPSBnZXRGb250UGFyYW1ldGVycyhmb250U3BlYyk7XG4gICAgICAgIGlmICghZm9udCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmYW1pbGllcyA9IGZvbnQuZmFtaWxpZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZhbWlsaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmYW1pbHkgPSBmYW1pbGllc1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBmb250LnN0eWxlICsgJ1xcbicgKyBmb250LndlaWdodCArICdcXG4nICsgZmFtaWx5O1xuICAgICAgICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIHJldHJpZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICghaXNBdmFpbGFibGUoZm9udC5zdHlsZSwgZm9udC53ZWlnaHQsIGZhbWlseSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjaywgMzIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQgdG8gdXNlIGZvciBtZWFzdXJpbmcuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IE1lYXN1cmVtZW50LlxuICovXG5leHBvcnQgdmFyIG1lYXN1cmVUZXh0SGVpZ2h0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICovXG4gICAgdmFyIG1lYXN1cmVFbGVtZW50O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IHRleHRIZWlnaHRzW2ZvbnRTcGVjXTtcbiAgICAgICAgaWYgKGhlaWdodCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUykge1xuICAgICAgICAgICAgICAgIHZhciBmb250ID0gZ2V0Rm9udFBhcmFtZXRlcnMoZm9udFNwZWMpO1xuICAgICAgICAgICAgICAgIHZhciBtZXRyaWNzID0gbWVhc3VyZVRleHQoZm9udFNwZWMsICfFvWcnKTtcbiAgICAgICAgICAgICAgICB2YXIgbGluZUhlaWdodCA9IGlzTmFOKE51bWJlcihmb250LmxpbmVIZWlnaHQpKVxuICAgICAgICAgICAgICAgICAgICA/IDEuMlxuICAgICAgICAgICAgICAgICAgICA6IE51bWJlcihmb250LmxpbmVIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQgKlxuICAgICAgICAgICAgICAgICAgICAgICAgKG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQgKyBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1lYXN1cmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LmlubmVySFRNTCA9ICdNJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gJzAnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5sZWZ0ID0gJy05OTk5OXB4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUuZm9udCA9IGZvbnRTcGVjO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWVhc3VyZUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IG1lYXN1cmVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1lYXN1cmVFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHRIZWlnaHRzW2ZvbnRTcGVjXSA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVpZ2h0O1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dC5cbiAqIEByZXR1cm4ge1RleHRNZXRyaWNzfSBUZXh0IG1ldHJpY3MuXG4gKi9cbmZ1bmN0aW9uIG1lYXN1cmVUZXh0KGZvbnQsIHRleHQpIHtcbiAgICBpZiAoIW1lYXN1cmVDb250ZXh0KSB7XG4gICAgICAgIG1lYXN1cmVDb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgIH1cbiAgICBpZiAoZm9udCAhPSBtZWFzdXJlRm9udCkge1xuICAgICAgICBtZWFzdXJlQ29udGV4dC5mb250ID0gZm9udDtcbiAgICAgICAgbWVhc3VyZUZvbnQgPSBtZWFzdXJlQ29udGV4dC5mb250O1xuICAgIH1cbiAgICByZXR1cm4gbWVhc3VyZUNvbnRleHQubWVhc3VyZVRleHQodGV4dCk7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCkge1xuICAgIHJldHVybiBtZWFzdXJlVGV4dChmb250LCB0ZXh0KS53aWR0aDtcbn1cbi8qKlxuICogTWVhc3VyZSB0ZXh0IHdpZHRoIHVzaW5nIGEgY2FjaGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBUaGUgZm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIG1lYXN1cmUuXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIG51bWJlcj59IGNhY2hlIEEgbG9va3VwIG9mIGNhY2hlZCB3aWR0aHMgYnkgdGV4dC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHRleHQgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGUpIHtcbiAgICBpZiAodGV4dCBpbiBjYWNoZSkge1xuICAgICAgICByZXR1cm4gY2FjaGVbdGV4dF07XG4gICAgfVxuICAgIHZhciB3aWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCk7XG4gICAgY2FjaGVbdGV4dF0gPSB3aWR0aDtcbiAgICByZXR1cm4gd2lkdGg7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQgdG8gdXNlIGZvciBtZWFzdXJpbmcuXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGxpbmVzIExpbmVzIHRvIG1lYXN1cmUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHdpZHRocyBBcnJheSB3aWxsIGJlIHBvcHVsYXRlZCB3aXRoIHRoZSB3aWR0aHMgb2ZcbiAqIGVhY2ggbGluZS5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGggb2YgdGhlIHdob2xlIHRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRocyhmb250LCBsaW5lcywgd2lkdGhzKSB7XG4gICAgdmFyIG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xuICAgIHZhciB3aWR0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XG4gICAgICAgIHZhciBjdXJyZW50V2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIGxpbmVzW2ldKTtcbiAgICAgICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgY3VycmVudFdpZHRoKTtcbiAgICAgICAgd2lkdGhzLnB1c2goY3VycmVudFdpZHRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpZHRoO1xufVxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggWCBvZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBZIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIHJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgICBjb250ZXh0LnJvdGF0ZShyb3RhdGlvbik7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfG51bGx9IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICogQHBhcmFtIHtMYWJlbHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGxhYmVsT3JJbWFnZSBMYWJlbC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5YIE9yaWdpbiBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblkgT3JpZ2luIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gdyBXaWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IHNjYWxlIFNjYWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd0ltYWdlT3JMYWJlbChjb250ZXh0LCB0cmFuc2Zvcm0sIG9wYWNpdHksIGxhYmVsT3JJbWFnZSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgeCwgeSwgc2NhbGUpIHtcbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBpZiAob3BhY2l0eSAhPT0gMSkge1xuICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhICo9IG9wYWNpdHk7XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0uYXBwbHkoY29udGV4dCwgdHJhbnNmb3JtKTtcbiAgICB9XG4gICAgaWYgKCAvKiogQHR5cGUgeyp9ICovKGxhYmVsT3JJbWFnZSkuY29udGV4dEluc3RydWN0aW9ucykge1xuICAgICAgICAvLyBsYWJlbFxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pO1xuICAgICAgICBleGVjdXRlTGFiZWxJbnN0cnVjdGlvbnMoLyoqIEB0eXBlIHtMYWJlbH0gKi8gKGxhYmVsT3JJbWFnZSksIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2FsZVswXSA8IDAgfHwgc2NhbGVbMV0gPCAwKSB7XG4gICAgICAgIC8vIGZsaXBwZWQgaW1hZ2VcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGVbMF0sIHNjYWxlWzFdKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAobGFiZWxPckltYWdlKSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgMCwgMCwgdywgaCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBpZiBpbWFnZSBub3QgZmxpcHBlZCB0cmFuc2xhdGUgYW5kIHNjYWxlIGNhbiBiZSBhdm9pZGVkXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGxhYmVsT3JJbWFnZSksIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHcgKiBzY2FsZVswXSwgaCAqIHNjYWxlWzFdKTtcbiAgICB9XG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7TGFiZWx9IGxhYmVsIExhYmVsLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zKGxhYmVsLCBjb250ZXh0KSB7XG4gICAgdmFyIGNvbnRleHRJbnN0cnVjdGlvbnMgPSBsYWJlbC5jb250ZXh0SW5zdHJ1Y3Rpb25zO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvbnRleHRJbnN0cnVjdGlvbnMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXSkpIHtcbiAgICAgICAgICAgIGNvbnRleHRbY29udGV4dEluc3RydWN0aW9uc1tpXV0uYXBwbHkoY29udGV4dCwgY29udGV4dEluc3RydWN0aW9uc1tpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dFtjb250ZXh0SW5zdHJ1Y3Rpb25zW2ldXSA9IGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FudmFzLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvQ29tcG9zaXRlXG4gKi9cbmltcG9ydCBNYXBSZW5kZXJlciBmcm9tICcuL01hcC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBjaGVja2VkRm9udHMgfSBmcm9tICcuLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZXBsYWNlQ2hpbGRyZW4gfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgbWFwIHJlbmRlcmVyLlxuICogQGFwaVxuICovXG52YXIgQ29tcG9zaXRlTWFwUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbXBvc2l0ZU1hcFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29tcG9zaXRlTWFwUmVuZGVyZXIobWFwKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1hcCkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZm9udENoYW5nZUxpc3RlbmVyS2V5XyA9IGxpc3RlbihjaGVja2VkRm9udHMsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgbWFwLnJlZHJhd1RleHQuYmluZChtYXApKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZhciBzdHlsZSA9IF90aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIHN0eWxlLnpJbmRleCA9ICcwJztcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uY2xhc3NOYW1lID0gQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyBvbC1sYXllcnMnO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoX3RoaXMuZWxlbWVudF8sIGNvbnRhaW5lci5maXJzdENoaWxkIHx8IG51bGwpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PEhUTUxFbGVtZW50Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNoaWxkcmVuXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAodHlwZSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgaWYgKG1hcC5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBuZXcgUmVuZGVyRXZlbnQodHlwZSwgdW5kZWZpbmVkLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgIG1hcC5kaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuZm9udENoYW5nZUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgIHRoaXMuZWxlbWVudF8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlci5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxjdWxhdGVNYXRyaWNlczJEKGZyYW1lU3RhdGUpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsIGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS56SW5kZXggLSBiLnpJbmRleDtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl8ubGVuZ3RoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9sYXllci9CYXNlVmVjdG9yLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGRlY2x1dHRlckxheWVycyA9IFtdO1xuICAgICAgICB2YXIgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzQXJyYXlbaV07XG4gICAgICAgICAgICBmcmFtZVN0YXRlLmxheWVySW5kZXggPSBpO1xuICAgICAgICAgICAgaWYgKCFpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSB8fFxuICAgICAgICAgICAgICAgIChsYXllclN0YXRlLnNvdXJjZVN0YXRlICE9IFNvdXJjZVN0YXRlLlJFQURZICYmXG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuc291cmNlU3RhdGUgIT0gU291cmNlU3RhdGUuVU5ERUZJTkVEKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbGF5ZXIucmVuZGVyKGZyYW1lU3RhdGUsIHByZXZpb3VzRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ2dldERlY2x1dHRlcicgaW4gbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXJMYXllcnMucHVzaChcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL2xheWVyL0Jhc2VWZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IGRlY2x1dHRlckxheWVycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgZGVjbHV0dGVyTGF5ZXJzW2ldLnJlbmRlckRlY2x1dHRlcihmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlQ2hpbGRyZW4odGhpcy5lbGVtZW50XywgdGhpcy5jaGlsZHJlbl8pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBPU1RDT01QT1NFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFjayBMYXllclxuICAgICAqICAgICBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBsYXllckZpbHRlcikge1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgdmFyIG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IG51bUxheWVycyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2ldO1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgIGlmIChsYXllci5oYXNSZW5kZXJlcigpICYmXG4gICAgICAgICAgICAgICAgaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgJiZcbiAgICAgICAgICAgICAgICBsYXllckZpbHRlcihsYXllcikpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IGxheWVyLmdldFJlbmRlcmVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBsYXllclJlbmRlcmVyLmdldERhdGFBdFBpeGVsKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhsYXllciwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBDb21wb3NpdGVNYXBSZW5kZXJlcjtcbn0oTWFwUmVuZGVyZXIpKTtcbmV4cG9ydCBkZWZhdWx0IENvbXBvc2l0ZU1hcFJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29tcG9zaXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9Db2xsZWN0aW9uRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGFuIGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNhZGRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQUREOiAnYWRkJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL0NvbGxlY3Rpb24uQ29sbGVjdGlvbkV2ZW50I3JlbW92ZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSRU1PVkU6ICdyZW1vdmUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbGxlY3Rpb25FdmVudFR5cGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9Db2xsZWN0aW9uXG4gKi9cbmltcG9ydCBBc3NlcnRpb25FcnJvciBmcm9tICcuL0Fzc2VydGlvbkVycm9yLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICAgIExFTkdUSDogJ2xlbmd0aCcsXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqL1xudmFyIENvbGxlY3Rpb25FdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29sbGVjdGlvbkV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRfZWxlbWVudF0gRWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9pbmRleF0gVGhlIGluZGV4IG9mIHRoZSBhZGRlZCBvciByZW1vdmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbkV2ZW50KHR5cGUsIG9wdF9lbGVtZW50LCBvcHRfaW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlbGVtZW50IHRoYXQgaXMgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudCA9IG9wdF9lbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGluZGV4IG9mIHRoZSBhZGRlZCBvciByZW1vdmVkIGVsZW1lbnQuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmluZGV4ID0gb3B0X2luZGV4O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBDb2xsZWN0aW9uRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBDb2xsZWN0aW9uRXZlbnQgfTtcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpsZW5ndGgnLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTwnYWRkJ3wncmVtb3ZlJywgQ29sbGVjdGlvbkV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpsZW5ndGgnfCdhZGQnfCdyZW1vdmUnLFJldHVybj59IENvbGxlY3Rpb25PblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VuaXF1ZT1mYWxzZV0gRGlzYWxsb3cgdGhlIHNhbWUgaXRlbSBmcm9tIGJlaW5nIGFkZGVkIHRvXG4gKiB0aGUgY29sbGVjdGlvbiB0d2ljZS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbiBleHBhbmRlZCB2ZXJzaW9uIG9mIHN0YW5kYXJkIEpTIEFycmF5LCBhZGRpbmcgY29udmVuaWVuY2UgbWV0aG9kcyBmb3JcbiAqIG1hbmlwdWxhdGlvbi4gQWRkIGFuZCByZW1vdmUgY2hhbmdlcyB0byB0aGUgQ29sbGVjdGlvbiB0cmlnZ2VyIGEgQ29sbGVjdGlvblxuICogZXZlbnQuIE5vdGUgdGhhdCB0aGlzIGRvZXMgbm90IGNvdmVyIGNoYW5nZXMgdG8gdGhlIG9iamVjdHMgX3dpdGhpbl8gdGhlXG4gKiBDb2xsZWN0aW9uOyB0aGV5IHRyaWdnZXIgZXZlbnRzIG9uIHRoZSBhcHByb3ByaWF0ZSBvYmplY3QsIG5vdCBvbiB0aGVcbiAqIENvbGxlY3Rpb24gYXMgYSB3aG9sZS5cbiAqXG4gKiBAZmlyZXMgQ29sbGVjdGlvbkV2ZW50XG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBhcGlcbiAqL1xudmFyIENvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbGxlY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxUPn0gW29wdF9hcnJheV0gQXJyYXkuXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIENvbGxlY3Rpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKG9wdF9hcnJheSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW5pcXVlXyA9ICEhb3B0aW9ucy51bmlxdWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PFQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXJyYXlfID0gb3B0X2FycmF5ID8gb3B0X2FycmF5IDogW107XG4gICAgICAgIGlmIChfdGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBfdGhpcy5hcnJheV8ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmFzc2VydFVuaXF1ZV8oX3RoaXMuYXJyYXlfW2ldLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBlbGVtZW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuZ2V0TGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgZWxlbWVudHMgdG8gdGhlIGNvbGxlY3Rpb24uICBUaGlzIHB1c2hlcyBlYWNoIGl0ZW0gaW4gdGhlIHByb3ZpZGVkIGFycmF5XG4gICAgICogdG8gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyIEFycmF5LlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb248VD59IFRoaXMgY29sbGVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKGFycikge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5wdXNoKGFycltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJdGVyYXRlIG92ZXIgZWFjaCBlbGVtZW50LCBjYWxsaW5nIHRoZSBwcm92aWRlZCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlciwgQXJyYXk8VD4pOiAqfSBmIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gICAgICogICAgIGZvciBldmVyeSBlbGVtZW50LiBUaGlzIGZ1bmN0aW9uIHRha2VzIDMgYXJndW1lbnRzICh0aGUgZWxlbWVudCwgdGhlXG4gICAgICogICAgIGluZGV4IGFuZCB0aGUgYXJyYXkpLiBUaGUgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5XztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgZihhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSByZWZlcmVuY2UgdG8gdGhlIHVuZGVybHlpbmcgQXJyYXkgb2JqZWN0LiBXYXJuaW5nOiBpZiB0aGUgYXJyYXlcbiAgICAgKiBpcyBtdXRhdGVkLCBubyBldmVudHMgd2lsbCBiZSBkaXNwYXRjaGVkIGJ5IHRoZSBjb2xsZWN0aW9uLCBhbmQgdGhlXG4gICAgICogY29sbGVjdGlvbidzIFwibGVuZ3RoXCIgcHJvcGVydHkgd29uJ3QgYmUgaW4gc3luYyB3aXRoIHRoZSBhY3R1YWwgbGVuZ3RoXG4gICAgICogb2YgdGhlIGFycmF5LlxuICAgICAqIEByZXR1cm4geyFBcnJheTxUPn0gQXJyYXkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmdldEFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcmV0dXJuIHtUfSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5pdGVtID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxlbmd0aCBvZiB0aGlzIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldChQcm9wZXJ0eS5MRU5HVEgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5zZXJ0IGFuIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJyYXlfLnNwbGljZShpbmRleCwgMCwgZWxlbSk7XG4gICAgICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgZWxlbSwgaW5kZXgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uIGFuZCByZXR1cm4gaXQuXG4gICAgICogUmV0dXJuIGB1bmRlZmluZWRgIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KHRoaXMuZ2V0TGVuZ3RoKCkgLSAxKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluc2VydCB0aGUgcHJvdmlkZWQgZWxlbWVudCBhdCB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTmV3IGxlbmd0aCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHRoaXMuaW5zZXJ0QXQobiwgZWxlbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExlbmd0aCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgZWxlbWVudCBvciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgdmFyIGFyciA9IHRoaXMuYXJyYXlfO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKGFycltpXSA9PT0gZWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4IGFuZCByZXR1cm4gaXQuXG4gICAgICogUmV0dXJuIGB1bmRlZmluZWRgIGlmIHRoZSBjb2xsZWN0aW9uIGRvZXMgbm90IGNvbnRhaW4gdGhpcyBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFZhbHVlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICAgICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2LCBpbmRleCkpO1xuICAgICAgICByZXR1cm4gcHJldjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5zZXRBdCA9IGZ1bmN0aW9uIChpbmRleCwgZWxlbSkge1xuICAgICAgICB2YXIgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIGlmIChpbmRleCA8IG4pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgICAgICAgICB0aGlzLmFycmF5X1tpbmRleF0gPSBlbGVtO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYsIGluZGV4KSk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgZWxlbSwgaW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBuOyBqIDwgaW5kZXg7ICsraikge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0QXQoaiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0QXQoaW5kZXgsIGVsZW0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUxlbmd0aF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkxFTkdUSCwgdGhpcy5hcnJheV8ubGVuZ3RoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZXhjZXB0XSBPcHRpb25hbCBpbmRleCB0byBpZ25vcmUuXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlXyA9IGZ1bmN0aW9uIChlbGVtLCBvcHRfZXhjZXB0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuYXJyYXlfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFycmF5X1tpXSA9PT0gZWxlbSAmJiBpICE9PSBvcHRfZXhjZXB0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKDU4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIENvbGxlY3Rpb247XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IENvbGxlY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvR3JvdXBcbiAqL1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduLCBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBnZXRJbnRlcnNlY3Rpb24gfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fGltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IFtsYXllcnNdIENoaWxkIGxheWVycy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBMQVlFUlM6ICdsYXllcnMnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gb2YgbGF5ZXJzIHRoYXQgYXJlIGhhbmRsZWQgdG9nZXRoZXIuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBncm91cC9Db2xsZWN0aW9uIGNoYW5nZXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgTGF5ZXJHcm91cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXJHcm91cCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gTGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMYXllckdyb3VwKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBiYXNlT3B0aW9ucyA9IC8qKiBAdHlwZSB7T3B0aW9uc30gKi8gKGFzc2lnbih7fSwgb3B0aW9ucykpO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMubGF5ZXJzO1xuICAgICAgICB2YXIgbGF5ZXJzID0gb3B0aW9ucy5sYXllcnM7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGlzdGVuZXJLZXlzXyA9IHt9O1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihQcm9wZXJ0eS5MQVlFUlMsIF90aGlzLmhhbmRsZUxheWVyc0NoYW5nZWRfKTtcbiAgICAgICAgaWYgKGxheWVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGF5ZXJzKSkge1xuICAgICAgICAgICAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKGxheWVycy5zbGljZSgpLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKGxheWVycykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0Myk7IC8vIEV4cGVjdGVkIGBsYXllcnNgIHRvIGJlIGFuIGFycmF5IG9yIGEgYENvbGxlY3Rpb25gXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbih1bmRlZmluZWQsIHsgdW5pcXVlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNldExheWVycyhsYXllcnMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5wdXNoKGxpc3RlbihsYXllcnMsIENvbGxlY3Rpb25FdmVudFR5cGUuQURELCB0aGlzLmhhbmRsZUxheWVyc0FkZF8sIHRoaXMpLCBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgdGhpcy5oYW5kbGVMYXllcnNSZW1vdmVfLCB0aGlzKSk7XG4gICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubGlzdGVuZXJLZXlzXykge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2lkXS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyKHRoaXMubGlzdGVuZXJLZXlzXyk7XG4gICAgICAgIHZhciBsYXllcnNBcnJheSA9IGxheWVycy5nZXRBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllcnNBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllcnNBcnJheVtpXTtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tnZXRVaWQobGF5ZXIpXSA9IFtcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGNvbGxlY3Rpb25FdmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNBZGRfID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25FdmVudCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19bZ2V0VWlkKGxheWVyKV0gPSBbXG4gICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgbGlzdGVuKGxheWVyLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc1JlbW92ZV8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9ICovIChjb2xsZWN0aW9uRXZlbnQuZWxlbWVudCk7XG4gICAgICAgIHZhciBrZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcktleXNfW2tleV07XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgICAqIGluIHRoaXMgZ3JvdXAuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IENvbGxlY3Rpb24gb2ZcbiAgICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZSBsYXllcnN9IHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBncm91cC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSAqLyAodGhpcy5nZXQoUHJvcGVydHkuTEFZRVJTKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbiBjb2xsZWN0aW9ufSBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyc31cbiAgICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBDb2xsZWN0aW9uIG9mXG4gICAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2UgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuc2V0TGF5ZXJzID0gZnVuY3Rpb24gKGxheWVycykge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5MQVlFUlMsIGxheWVycyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IFtvcHRfYXJyYXldIEFycmF5IG9mIGxheWVycyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IEFycmF5IG9mIGxheWVycy5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllcnNBcnJheSA9IGZ1bmN0aW9uIChvcHRfYXJyYXkpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gb3B0X2FycmF5ICE9PSB1bmRlZmluZWQgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgdGhpcy5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgbGF5ZXIuZ2V0TGF5ZXJzQXJyYXkoYXJyYXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsYXllciBzdGF0ZXMgbGlzdCBhbmQgdXNlIHRoaXMgZ3JvdXBzIHotaW5kZXggYXMgdGhlIGRlZmF1bHRcbiAgICAgKiBmb3IgYWxsIGxheWVycyBpbiB0aGlzIGFuZCBuZXN0ZWQgZ3JvdXBzLCBpZiBpdCBpcyB1bnNldCBhdCB0aGlzIHBvaW50LlxuICAgICAqIElmIG9wdF9zdGF0ZXMgaXMgbm90IHByb3ZpZGVkIGFuZCB0aGlzIGdyb3VwJ3Mgei1pbmRleCBpcyB1bmRlZmluZWRcbiAgICAgKiAwIGlzIHVzZWQgYSB0aGUgZGVmYXVsdCB6LWluZGV4LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IFtvcHRfc3RhdGVzXSBPcHRpb25hbCBsaXN0XG4gICAgICogb2YgbGF5ZXIgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IExpc3Qgb2YgbGF5ZXIgc3RhdGVzLlxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiAob3B0X3N0YXRlcykge1xuICAgICAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyAhPT0gdW5kZWZpbmVkID8gb3B0X3N0YXRlcyA6IFtdO1xuICAgICAgICB2YXIgcG9zID0gc3RhdGVzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgbGF5ZXIuZ2V0TGF5ZXJTdGF0ZXNBcnJheShzdGF0ZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG93bkxheWVyU3RhdGUgPSB0aGlzLmdldExheWVyU3RhdGUoKTtcbiAgICAgICAgdmFyIGRlZmF1bHRaSW5kZXggPSBvd25MYXllclN0YXRlLnpJbmRleDtcbiAgICAgICAgaWYgKCFvcHRfc3RhdGVzICYmIG93bkxheWVyU3RhdGUuekluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlZmF1bHRaSW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSBwb3MsIGlpID0gc3RhdGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5vcGFjaXR5ICo9IG93bkxheWVyU3RhdGUub3BhY2l0eTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUudmlzaWJsZSA9IGxheWVyU3RhdGUudmlzaWJsZSAmJiBvd25MYXllclN0YXRlLnZpc2libGU7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1heFJlc29sdXRpb24gPSBNYXRoLm1pbihsYXllclN0YXRlLm1heFJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWF4UmVzb2x1dGlvbik7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heChsYXllclN0YXRlLm1pblJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWluUmVzb2x1dGlvbik7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1pblpvb20gPSBNYXRoLm1heChsYXllclN0YXRlLm1pblpvb20sIG93bkxheWVyU3RhdGUubWluWm9vbSk7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1heFpvb20gPSBNYXRoLm1pbihsYXllclN0YXRlLm1heFpvb20sIG93bkxheWVyU3RhdGUubWF4Wm9vbSk7XG4gICAgICAgICAgICBpZiAob3duTGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXllclN0YXRlLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKGxheWVyU3RhdGUuZXh0ZW50LCBvd25MYXllclN0YXRlLmV4dGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IG93bkxheWVyU3RhdGUuZXh0ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXllclN0YXRlLnpJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZS56SW5kZXggPSBkZWZhdWx0WkluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gU291cmNlIHN0YXRlLlxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmdldFNvdXJjZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU291cmNlU3RhdGUuUkVBRFk7XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXJHcm91cDtcbn0oQmFzZUxheWVyKSk7XG5leHBvcnQgZGVmYXVsdCBMYXllckdyb3VwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3JvdXAuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBhcyBtYXAgZXZlbnRzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvUGx1Z2dhYmxlTWFwflBsdWdnYWJsZU1hcH0gZm9yIHdoaWNoIGV2ZW50cyB0cmlnZ2VyIGEgbWFwIGV2ZW50LlxuICovXG52YXIgTWFwRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcEV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IFtvcHRfZnJhbWVTdGF0ZV0gRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwRXZlbnQodHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCB3aGVyZSB0aGUgZXZlbnQgb2NjdXJyZWQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZnJhbWUgc3RhdGUgYXQgdGhlIHRpbWUgb2YgdGhlIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZyYW1lU3RhdGUgPSBvcHRfZnJhbWVTdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0X2ZyYW1lU3RhdGUgOiBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBNYXBFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCBkZWZhdWx0IE1hcEV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwRXZlbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRcbiAqL1xuaW1wb3J0IE1hcEV2ZW50IGZyb20gJy4vTWFwRXZlbnQuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBhcyBtYXAgYnJvd3NlciBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgYnJvd3NlciBldmVudC5cbiAqIEB0ZW1wbGF0ZSB7VUlFdmVudH0gRVZFTlRcbiAqL1xudmFyIE1hcEJyb3dzZXJFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwQnJvd3NlckV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBwYXJhbSB7RVZFTlR9IG9yaWdpbmFsRXZlbnQgT3JpZ2luYWwgZXZlbnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2RyYWdnaW5nXSBJcyB0aGUgbWFwIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkP1xuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IFtvcHRfZnJhbWVTdGF0ZV0gRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwQnJvd3NlckV2ZW50KHR5cGUsIG1hcCwgb3JpZ2luYWxFdmVudCwgb3B0X2RyYWdnaW5nLCBvcHRfZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlLCBtYXAsIG9wdF9mcmFtZVN0YXRlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7RVZFTlR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24gY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvb3JkaW5hdGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyBpZiB0aGUgbWFwIGlzIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkLiBPbmx5IHNldCBmb3JcbiAgICAgICAgICogYFBPSU5URVJEUkFHYCBhbmQgYFBPSU5URVJNT1ZFYCBldmVudHMuIERlZmF1bHQgaXMgYGZhbHNlYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRyYWdnaW5nID0gb3B0X2RyYWdnaW5nICE9PSB1bmRlZmluZWQgPyBvcHRfZHJhZ2dpbmcgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZSwgXCJwaXhlbFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIHBpeGVsIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBldmVudC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBpeGVsXykge1xuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxfID0gdGhpcy5tYXAuZ2V0RXZlbnRQaXhlbCh0aGlzLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGl4ZWxfO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICAgICAgdGhpcy5waXhlbF8gPSBwaXhlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLCBcImNvb3JkaW5hdGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC4gIFRoaXMgd2lsbCBiZSBpbiB0aGUgdXNlclxuICAgICAgICAgKiBwcm9qZWN0aW9uIGlmIG9uZSBpcyBzZXQuICBPdGhlcndpc2UgaXQgd2lsbCBiZSBpbiB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvb3JkaW5hdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlXyA9IHRoaXMubWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwodGhpcy5waXhlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb29yZGluYXRlXztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlXyA9IGNvb3JkaW5hdGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyB0aGUgZGVmYXVsdCBicm93c2VyIGFjdGlvbi5cbiAgICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnByZXZlbnREZWZhdWx0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnByZXZlbnREZWZhdWx0LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICgncHJldmVudERlZmF1bHQnIGluIHRoaXMub3JpZ2luYWxFdmVudCkge1xuICAgICAgICAgICAgLyoqIEB0eXBlIHtVSUV2ZW50fSAqLyAodGhpcy5vcmlnaW5hbEV2ZW50KS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyBmdXJ0aGVyIHByb3BhZ2F0aW9uIG9mIHRoZSBjdXJyZW50IGV2ZW50LlxuICAgICAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvZXZlbnQuc3RvcFByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24uY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCdzdG9wUHJvcGFnYXRpb24nIGluIHRoaXMub3JpZ2luYWxFdmVudCkge1xuICAgICAgICAgICAgLyoqIEB0eXBlIHtVSUV2ZW50fSAqLyAodGhpcy5vcmlnaW5hbEV2ZW50KS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1hcEJyb3dzZXJFdmVudDtcbn0oTWFwRXZlbnQpKTtcbmV4cG9ydCBkZWZhdWx0IE1hcEJyb3dzZXJFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50VHlwZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG4vKipcbiAqIENvbnN0YW50cyBmb3IgZXZlbnQgbmFtZXMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogQSB0cnVlIHNpbmdsZSBjbGljayB3aXRoIG5vIGRyYWdnaW5nIGFuZCBubyBkb3VibGUgY2xpY2suIE5vdGUgdGhhdCB0aGlzXG4gICAgICogZXZlbnQgaXMgZGVsYXllZCBieSAyNTAgbXMgdG8gZW5zdXJlIHRoYXQgaXQgaXMgbm90IGEgZG91YmxlIGNsaWNrLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNzaW5nbGVjbGlja1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTSU5HTEVDTElDSzogJ3NpbmdsZWNsaWNrJyxcbiAgICAvKipcbiAgICAgKiBBIGNsaWNrIHdpdGggbm8gZHJhZ2dpbmcuIEEgZG91YmxlIGNsaWNrIHdpbGwgZmlyZSB0d28gb2YgdGhpcy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjY2xpY2tcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ0xJQ0s6IEV2ZW50VHlwZS5DTElDSyxcbiAgICAvKipcbiAgICAgKiBBIHRydWUgZG91YmxlIGNsaWNrLCB3aXRoIG5vIGRyYWdnaW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNkYmxjbGlja1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBEQkxDTElDSzogRXZlbnRUeXBlLkRCTENMSUNLLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBkcmFnZ2VkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNwb2ludGVyZHJhZ1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT0lOVEVSRFJBRzogJ3BvaW50ZXJkcmFnJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHBvaW50ZXIgaXMgbW92ZWQuIE5vdGUgdGhhdCBvbiB0b3VjaCBkZXZpY2VzIHRoaXMgaXNcbiAgICAgKiB0cmlnZ2VyZWQgd2hlbiB0aGUgbWFwIGlzIHBhbm5lZCwgc28gaXMgbm90IHRoZSBzYW1lIGFzIG1vdXNlbW92ZS5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcm1vdmVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9JTlRFUk1PVkU6ICdwb2ludGVybW92ZScsXG4gICAgUE9JTlRFUkRPV046ICdwb2ludGVyZG93bicsXG4gICAgUE9JTlRFUlVQOiAncG9pbnRlcnVwJyxcbiAgICBQT0lOVEVST1ZFUjogJ3BvaW50ZXJvdmVyJyxcbiAgICBQT0lOVEVST1VUOiAncG9pbnRlcm91dCcsXG4gICAgUE9JTlRFUkVOVEVSOiAncG9pbnRlcmVudGVyJyxcbiAgICBQT0lOVEVSTEVBVkU6ICdwb2ludGVybGVhdmUnLFxuICAgIFBPSU5URVJDQU5DRUw6ICdwb2ludGVyY2FuY2VsJyxcbn07XG4vKioqXG4gKiBAdHlwZWRlZiB7J3NpbmdsZWNsaWNrJ3wnY2xpY2snfCdkYmxjbGljayd8J3BvaW50ZXJkcmFnJ3wncG9pbnRlcm1vdmUnfSBUeXBlc1xuICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wb2ludGVyL0V2ZW50VHlwZVxuICovXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZXZlbnQgbmFtZXMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUE9JTlRFUk1PVkU6ICdwb2ludGVybW92ZScsXG4gICAgUE9JTlRFUkRPV046ICdwb2ludGVyZG93bicsXG4gICAgUE9JTlRFUlVQOiAncG9pbnRlcnVwJyxcbiAgICBQT0lOVEVST1ZFUjogJ3BvaW50ZXJvdmVyJyxcbiAgICBQT0lOVEVST1VUOiAncG9pbnRlcm91dCcsXG4gICAgUE9JTlRFUkVOVEVSOiAncG9pbnRlcmVudGVyJyxcbiAgICBQT0lOVEVSTEVBVkU6ICdwb2ludGVybGVhdmUnLFxuICAgIFBPSU5URVJDQU5DRUw6ICdwb2ludGVyY2FuY2VsJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudEhhbmRsZXJcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnQgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnQuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBQb2ludGVyRXZlbnRUeXBlIGZyb20gJy4vcG9pbnRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IHsgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xudmFyIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcEJyb3dzZXJFdmVudEhhbmRsZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgVGhlIG1hcCB3aXRoIHRoZSB2aWV3cG9ydCB0byBsaXN0ZW4gdG8gZXZlbnRzIG9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbW92ZVRvbGVyYW5jZV0gVGhlIG1pbmltYWwgZGlzdGFuY2UgdGhlIHBvaW50ZXIgbXVzdCB0cmF2ZWwgdG8gdHJpZ2dlciBhIG1vdmUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwQnJvd3NlckV2ZW50SGFuZGxlcihtYXAsIG1vdmVUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWFwKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyB0aGUgZWxlbWVudCB0aGF0IHdlIHdpbGwgbGlzdGVuIHRvIHRoZSByZWFsIGV2ZW50cyBvbi5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbWFwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2FueX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNsaWNrVGltZW91dElkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtdWxhdGUgZGJsY2xpY2sgYW5kIHNpbmdsZWNsaWNrLiBXaWxsIGJlIHRydWUgd2hlbiBvbmx5IG9uZSBwb2ludGVyIGlzIGFjdGl2ZS5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbXVsYXRlQ2xpY2tzXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kcmFnZ2luZ18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRyYWdMaXN0ZW5lcktleXNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubW92ZVRvbGVyYW5jZV8gPSBtb3ZlVG9sZXJhbmNlID09PSB1bmRlZmluZWQgPyAxIDogbW92ZVRvbGVyYW5jZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtb3N0IHJlY2VudCBcImRvd25cIiB0eXBlIGV2ZW50IChvciBudWxsIGlmIG5vbmUgaGF2ZSBvY2N1cnJlZCkuXG4gICAgICAgICAqIFNldCBvbiBwb2ludGVyZG93bi5cbiAgICAgICAgICogQHR5cGUge1BvaW50ZXJFdmVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRvd25fID0gbnVsbDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5tYXBfLmdldFZpZXdwb3J0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYWN0aXZlUG9pbnRlcnNfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PG51bWJlciwgYm9vbGVhbj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFja2VkVG91Y2hlc18gPSB7fTtcbiAgICAgICAgX3RoaXMuZWxlbWVudF8gPSBlbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5XyA9IGxpc3RlbihlbGVtZW50LCBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJET1dOLCBfdGhpcy5oYW5kbGVQb2ludGVyRG93bl8sIF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfID0gbGlzdGVuKGVsZW1lbnQsIFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUsIF90aGlzLnJlbGF5RXZlbnRfLCBfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfID0gX3RoaXMuaGFuZGxlVG91Y2hNb3ZlXy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuVE9VQ0hNT1ZFLCBfdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8sIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZW11bGF0ZUNsaWNrXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIGlmICh0aGlzLmNsaWNrVGltZW91dElkXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBkb3VibGUtY2xpY2tcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZW91dElkXyk7XG4gICAgICAgICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gY2xpY2tcbiAgICAgICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gc2V0VGltZW91dChcbiAgICAgICAgICAgIC8qKiBAdGhpcyB7TWFwQnJvd3NlckV2ZW50SGFuZGxlcn0gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCAyNTApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBLZWVwcyB0cmFjayBvbiBob3cgbWFueSBwb2ludGVycyBhcmUgY3VycmVudGx5IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUudXBkYXRlQWN0aXZlUG9pbnRlcnNfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB2YXIgZXZlbnQgPSBwb2ludGVyRXZlbnQ7XG4gICAgICAgIGlmIChldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQIHx8XG4gICAgICAgICAgICBldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudHJhY2tlZFRvdWNoZXNfW2V2ZW50LnBvaW50ZXJJZF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrZWRUb3VjaGVzX1tldmVudC5wb2ludGVySWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IE9iamVjdC5rZXlzKHRoaXMudHJhY2tlZFRvdWNoZXNfKS5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJVcF8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgLy8gV2UgZW11bGF0ZSBjbGljayBldmVudHMgb24gbGVmdCBtb3VzZSBidXR0b24gY2xpY2ssIHRvdWNoIGNvbnRhY3QsIGFuZCBwZW5cbiAgICAgICAgLy8gY29udGFjdC4gaXNNb3VzZUFjdGlvbkJ1dHRvbiByZXR1cm5zIHRydWUgaW4gdGhlc2UgY2FzZXMgKGV2dC5idXR0b24gaXMgc2V0XG4gICAgICAgIC8vIHRvIDApLlxuICAgICAgICAvLyBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jYnV0dG9uLXN0YXRlc1xuICAgICAgICAvLyBXZSBvbmx5IGZpcmUgY2xpY2ssIHNpbmdsZWNsaWNrLCBhbmQgZG91YmxlY2xpY2sgaWYgbm9ib2R5IGhhcyBjYWxsZWRcbiAgICAgICAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKS5cbiAgICAgICAgaWYgKHRoaXMuZW11bGF0ZUNsaWNrc18gJiZcbiAgICAgICAgICAgICFuZXdFdmVudC5kZWZhdWx0UHJldmVudGVkICYmXG4gICAgICAgICAgICAhdGhpcy5kcmFnZ2luZ18gJiZcbiAgICAgICAgICAgIHRoaXMuaXNNb3VzZUFjdGlvbkJ1dHRvbl8ocG9pbnRlckV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5lbXVsYXRlQ2xpY2tfKHRoaXMuZG93bl8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2luZ18gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZG93bl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgbGVmdCBtb3VzZSBidXR0b24gd2FzIHByZXNzZWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5pc01vdXNlQWN0aW9uQnV0dG9uXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHBvaW50ZXJFdmVudC5idXR0b24gPT09IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJEb3duXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5lbXVsYXRlQ2xpY2tzXyA9IHRoaXMuYWN0aXZlUG9pbnRlcnNfID09PSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgLy8gU3RvcmUgYSBjb3B5IG9mIHRoZSBkb3duIGV2ZW50XG4gICAgICAgIHRoaXMuZG93bl8gPSAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi8gKHt9KTtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gcG9pbnRlckV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBwb2ludGVyRXZlbnRbcHJvcGVydHldO1xuICAgICAgICAgICAgdGhpcy5kb3duX1twcm9wZXJ0eV0gPSB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgPyBWT0lEIDogdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5tYXBfLmdldE93bmVyRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4oZG9jLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXywgdGhpcyksIGxpc3Rlbihkb2MsIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpLCBcbiAgICAgICAgICAgIC8qIE5vdGUgdGhhdCB0aGUgbGlzdGVuZXIgZm9yIGBwb2ludGVyY2FuY2VsIGlzIHNldCB1cCBvblxuICAgICAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYCBhbmQgbm90IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBsaWtlXG4gICAgICAgICAgICAgKiB0aGUgYHBvaW50ZXJ1cGAgYW5kIGBwb2ludGVybW92ZWAgbGlzdGVuZXJzLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgdGhlIGZvbGxvd2luZzogYFRvdWNoU291cmNlLnZhY3V1bVRvdWNoZXNfKClgXG4gICAgICAgICAgICAgKiBpc3N1ZXMgYHBvaW50ZXJjYW5jZWxgIGV2ZW50cywgd2hlbiB0aGVyZSB3YXMgbm8gYHRvdWNoZW5kYCBmb3IgYVxuICAgICAgICAgICAgICogYHRvdWNoc3RhcnRgLiBOb3csIGxldCdzIHNheSBhIGZpcnN0IGB0b3VjaHN0YXJ0YCBpcyByZWdpc3RlcmVkIG9uXG4gICAgICAgICAgICAgKiBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLiBUaGUgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGlzIHNldCB1cC5cbiAgICAgICAgICAgICAqIEJ1dCBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgZG9lc24ndCBrbm93IGFib3V0IHRoZSBmaXJzdFxuICAgICAgICAgICAgICogYHRvdWNoc3RhcnRgLiBJZiB0aGVyZSBpcyBubyBgdG91Y2hlbmRgIGZvciB0aGUgYHRvdWNoc3RhcnRgLCB3ZSBjYW5cbiAgICAgICAgICAgICAqIG9ubHkgcmVjZWl2ZSBhIGB0b3VjaGNhbmNlbGAgZnJvbSBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLCBiZWNhdXNlIGl0IGlzXG4gICAgICAgICAgICAgKiBvbmx5IHJlZ2lzdGVyZWQgdGhlcmUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxpc3Rlbih0aGlzLmVsZW1lbnRfLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUwsIHRoaXMuaGFuZGxlUG9pbnRlclVwXywgdGhpcykpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUgJiYgdGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpICE9PSBkb2MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUoKSwgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsIHRoaXMuaGFuZGxlUG9pbnRlclVwXywgdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJNb3ZlXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgLy8gQmV0d2VlbiBwb2ludGVyZG93biBhbmQgcG9pbnRlcnVwLCBwb2ludGVybW92ZSBldmVudHMgYXJlIHRyaWdnZXJlZC5cbiAgICAgICAgLy8gVG8gYXZvaWQgYSAnZmFsc2UnIHRvdWNobW92ZSBldmVudCB0byBiZSBkaXNwYXRjaGVkLCB3ZSB0ZXN0IGlmIHRoZSBwb2ludGVyXG4gICAgICAgIC8vIG1vdmVkIGEgc2lnbmlmaWNhbnQgZGlzdGFuY2UuXG4gICAgICAgIGlmICh0aGlzLmlzTW92aW5nXyhwb2ludGVyRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nXyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcsIHRoaXMubWFwXywgcG9pbnRlckV2ZW50LCB0aGlzLmRyYWdnaW5nXyk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXcmFwIGFuZCByZWxheSBhIHBvaW50ZXIgZXZlbnQuICBOb3RlIHRoYXQgdGhpcyByZXF1aXJlcyB0aGF0IHRoZSB0eXBlXG4gICAgICogc3RyaW5nIGZvciB0aGUgTWFwQnJvd3NlckV2ZW50IG1hdGNoZXMgdGhlIFBvaW50ZXJFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUucmVsYXlFdmVudF8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyA9IHBvaW50ZXJFdmVudDtcbiAgICAgICAgdmFyIGRyYWdnaW5nID0gISEodGhpcy5kb3duXyAmJiB0aGlzLmlzTW92aW5nXyhwb2ludGVyRXZlbnQpKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBCcm93c2VyRXZlbnQocG9pbnRlckV2ZW50LnR5cGUsIHRoaXMubWFwXywgcG9pbnRlckV2ZW50LCBkcmFnZ2luZykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmxleGlibGUgaGFuZGxpbmcgb2YgYSBgdG91Y2gtYWN0aW9uOiBub25lYCBjc3MgZXF1aXZhbGVudDogYmVjYXVzZSBjYWxsaW5nXG4gICAgICogYHByZXZlbnREZWZhdWx0KClgIG9uIGEgYHBvaW50ZXJtb3ZlYCBldmVudCBkb2VzIG5vdCBzdG9wIG5hdGl2ZSBwYWdlIHNjcm9sbGluZ1xuICAgICAqIGFuZCB6b29taW5nLCB3ZSBhbHNvIGxpc3RlbiBmb3IgYHRvdWNobW92ZWAgYW5kIGNhbGwgYHByZXZlbnREZWZhdWx0KClgIG9uIGl0XG4gICAgICogd2hlbiBhbiBpbnRlcmFjdGlvbiAoY3VycmVudGx5IGBEcmFnUGFuYCBoYW5kbGVzIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlVG91Y2hNb3ZlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBEdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21waXplbmJlcmcvZWxtLXBlcC9pc3N1ZXMvMiwgYHRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50X2BcbiAgICAgICAgLy8gbWF5IG5vdCBiZSBpbml0aWFsaXplZCB5ZXQgd2hlbiB3ZSBnZXQgaGVyZSBvbiBhIHBsYXRmb3JtIHdpdGhvdXQgbmF0aXZlIHBvaW50ZXIgZXZlbnRzLlxuICAgICAgICB2YXIgb3JpZ2luYWxFdmVudCA9IHRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XztcbiAgICAgICAgaWYgKCghb3JpZ2luYWxFdmVudCB8fCBvcmlnaW5hbEV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpICYmXG4gICAgICAgICAgICAodHlwZW9mIGV2ZW50LmNhbmNlbGFibGUgIT09ICdib29sZWFuJyB8fCBldmVudC5jYW5jZWxhYmxlID09PSB0cnVlKSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgbW92aW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaXNNb3ZpbmdfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZHJhZ2dpbmdfIHx8XG4gICAgICAgICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WCAtIHRoaXMuZG93bl8uY2xpZW50WCkgPlxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVRvbGVyYW5jZV8gfHxcbiAgICAgICAgICAgIE1hdGguYWJzKHBvaW50ZXJFdmVudC5jbGllbnRZIC0gdGhpcy5kb3duXy5jbGllbnRZKSA+IHRoaXMubW92ZVRvbGVyYW5jZV8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuVE9VQ0hNT1ZFLCB0aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXyk7XG4gICAgICAgIGlmICh0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuZWxlbWVudF8gPSBudWxsO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcEJyb3dzZXJFdmVudEhhbmRsZXI7XG59KFRhcmdldCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgYSBtYXAgZnJhbWUgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNwb3N0cmVuZGVyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPU1RSRU5ERVI6ICdwb3N0cmVuZGVyJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgbWFwIHN0YXJ0cyBtb3ZpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3Zlc3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTU9WRVNUQVJUOiAnbW92ZXN0YXJ0JyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1hcCBpcyBtb3ZlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I21vdmVlbmRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTU9WRUVORDogJ21vdmVlbmQnLFxufTtcbi8qKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J21vdmVzdGFydCd8J21vdmVlbmQnfSBUeXBlc1xuICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcFByb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIExBWUVSR1JPVVA6ICdsYXllcmdyb3VwJyxcbiAgICBTSVpFOiAnc2l6ZScsXG4gICAgVEFSR0VUOiAndGFyZ2V0JyxcbiAgICBWSUVXOiAndmlldycsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwUHJvcGVydHkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZVxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsZWFyIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBEUk9QID0gSW5maW5pdHk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByaW9yaXR5IHF1ZXVlLlxuICpcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBpcyBpbnNwaXJlZCBmcm9tIHRoZSBDbG9zdXJlIExpYnJhcnkncyBIZWFwIGNsYXNzIGFuZFxuICogUHl0aG9uJ3MgaGVhcHEgbW9kdWxlLlxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvc3RydWN0cy9oZWFwLmpzXG4gKiBhbmQgaHR0cHM6Ly9oZy5weXRob24ub3JnL2NweXRob24vZmlsZS8yLjcvTGliL2hlYXBxLnB5LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbnZhciBQcmlvcml0eVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6IG51bWJlcn0gcHJpb3JpdHlGdW5jdGlvbiBQcmlvcml0eSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiBzdHJpbmd9IGtleUZ1bmN0aW9uIEtleSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQcmlvcml0eVF1ZXVlKHByaW9yaXR5RnVuY3Rpb24sIGtleUZ1bmN0aW9uKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IG51bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJpb3JpdHlGdW5jdGlvbl8gPSBwcmlvcml0eUZ1bmN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKFQpOiBzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtleUZ1bmN0aW9uXyA9IGtleUZ1bmN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbGVtZW50c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmlvcml0aWVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucXVldWVkRWxlbWVudHNfID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnByaW9yaXRpZXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIGNsZWFyKHRoaXMucXVldWVkRWxlbWVudHNfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbmQgcmV0dXJuIHRoZSBoaWdoZXN0LXByaW9yaXR5IGVsZW1lbnQuIE8obG9nIE4pLlxuICAgICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1swXTtcbiAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBlbGVtZW50cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgcHJpb3JpdGllcy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudHNbMF0gPSBlbGVtZW50cy5wb3AoKTtcbiAgICAgICAgICAgIHByaW9yaXRpZXNbMF0gPSBwcmlvcml0aWVzLnBvcCgpO1xuICAgICAgICAgICAgdGhpcy5zaWZ0VXBfKDApO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtZW50S2V5ID0gdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1tlbGVtZW50S2V5XTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbnF1ZXVlIGFuIGVsZW1lbnQuIE8obG9nIE4pLlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbGVtZW50IHdhcyBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGFzc2VydCghKHRoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpIGluIHRoaXMucXVldWVkRWxlbWVudHNfKSwgMzEpOyAvLyBUcmllZCB0byBlbnF1ZXVlIGFuIGBlbGVtZW50YCB0aGF0IHdhcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBxdWV1ZVxuICAgICAgICB2YXIgcHJpb3JpdHkgPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICAgICAgICBpZiAocHJpb3JpdHkgIT0gRFJPUCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50c18ucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucHJpb3JpdGllc18ucHVzaChwcmlvcml0eSk7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KV0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaWZ0RG93bl8oMCwgdGhpcy5lbGVtZW50c18ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENvdW50LlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c18ubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSBsZWZ0IGNoaWxkIGZvci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgbGVmdCBjaGlsZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldExlZnRDaGlsZEluZGV4XyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gaW5kZXggKiAyICsgMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSByaWdodCBjaGlsZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIHJpZ2h0IGNoaWxkIGZvci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgcmlnaHQgY2hpbGQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRSaWdodENoaWxkSW5kZXhfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpbmRleCAqIDIgKyAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHBhcmVudCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIHBhcmVudCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHBhcmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldFBhcmVudEluZGV4XyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gKGluZGV4IC0gMSkgPj4gMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1ha2UgdGhpcyBhIGhlYXAuIE8oTikuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5oZWFwaWZ5XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGZvciAoaSA9ICh0aGlzLmVsZW1lbnRzXy5sZW5ndGggPj4gMSkgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdGhpcy5zaWZ0VXBfKGkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c18ubGVuZ3RoID09PSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMga2V5IHF1ZXVlZC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc0tleVF1ZXVlZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGtleSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHF1ZXVlZC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc1F1ZXVlZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzS2V5UXVldWVkKHRoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSBkb3duLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuc2lmdFVwXyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgY291bnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaW5kZXhdO1xuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0aWVzW2luZGV4XTtcbiAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgd2hpbGUgKGluZGV4IDwgY291bnQgPj4gMSkge1xuICAgICAgICAgICAgdmFyIGxJbmRleCA9IHRoaXMuZ2V0TGVmdENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICAgICAgICAgIHZhciBySW5kZXggPSB0aGlzLmdldFJpZ2h0Q2hpbGRJbmRleF8oaW5kZXgpO1xuICAgICAgICAgICAgdmFyIHNtYWxsZXJDaGlsZEluZGV4ID0gckluZGV4IDwgY291bnQgJiYgcHJpb3JpdGllc1tySW5kZXhdIDwgcHJpb3JpdGllc1tsSW5kZXhdXG4gICAgICAgICAgICAgICAgPyBySW5kZXhcbiAgICAgICAgICAgICAgICA6IGxJbmRleDtcbiAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnRzW3NtYWxsZXJDaGlsZEluZGV4XTtcbiAgICAgICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1tzbWFsbGVyQ2hpbGRJbmRleF07XG4gICAgICAgICAgICBpbmRleCA9IHNtYWxsZXJDaGlsZEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnQ7XG4gICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuc2lmdERvd25fKHN0YXJ0SW5kZXgsIGluZGV4KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IFRoZSBpbmRleCBvZiB0aGUgcm9vdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIG1vdmUgdXAuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5zaWZ0RG93bl8gPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpbmRleF07XG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuICAgICAgICB3aGlsZSAoaW5kZXggPiBzdGFydEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50SW5kZXggPSB0aGlzLmdldFBhcmVudEluZGV4XyhpbmRleCk7XG4gICAgICAgICAgICBpZiAocHJpb3JpdGllc1twYXJlbnRJbmRleF0gPiBwcmlvcml0eSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnRzW3BhcmVudEluZGV4XTtcbiAgICAgICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXRpZXNbcGFyZW50SW5kZXhdO1xuICAgICAgICAgICAgICAgIGluZGV4ID0gcGFyZW50SW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50O1xuICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucmVwcmlvcml0aXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJpb3JpdHlGdW5jdGlvbiA9IHRoaXMucHJpb3JpdHlGdW5jdGlvbl87XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBuID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgZWxlbWVudCwgaSwgcHJpb3JpdHk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgICAgICAgIHByaW9yaXR5ID0gcHJpb3JpdHlGdW5jdGlvbihlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChwcmlvcml0eSA9PSBEUk9QKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW3RoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaW5kZXgrK10gPSBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzLmxlbmd0aCA9IGluZGV4O1xuICAgICAgICBwcmlvcml0aWVzLmxlbmd0aCA9IGluZGV4O1xuICAgICAgICB0aGlzLmhlYXBpZnlfKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUHJpb3JpdHlRdWV1ZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBQcmlvcml0eVF1ZXVlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJpb3JpdHlRdWV1ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVRdWV1ZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUHJpb3JpdHlRdWV1ZSwgeyBEUk9QIH0gZnJvbSAnLi9zdHJ1Y3RzL1ByaW9yaXR5UXVldWUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuL1RpbGVTdGF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdCwgc3RyaW5nLCBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSwgbnVtYmVyKTogbnVtYmVyfSBQcmlvcml0eUZ1bmN0aW9uXG4gKi9cbnZhciBUaWxlUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVRdWV1ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1ByaW9yaXR5RnVuY3Rpb259IHRpbGVQcmlvcml0eUZ1bmN0aW9uIFRpbGUgcHJpb3JpdHkgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiA/fSB0aWxlQ2hhbmdlQ2FsbGJhY2sgRnVuY3Rpb24gY2FsbGVkIG9uIGVhY2ggdGlsZSBjaGFuZ2UgZXZlbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVF1ZXVlKHRpbGVQcmlvcml0eUZ1bmN0aW9uLCB0aWxlQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUHJpb3JpdHkuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpbGVQcmlvcml0eUZ1bmN0aW9uLmFwcGx5KG51bGwsIGVsZW1lbnQpO1xuICAgICAgICB9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChlbGVtZW50WzBdKS5nZXRLZXkoKTtcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlVGlsZUNoYW5nZV8gPSBfdGhpcy5oYW5kbGVUaWxlQ2hhbmdlLmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKCk6ID99XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfID0gdGlsZUNoYW5nZUNhbGxiYWNrO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVzTG9hZGluZ18gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLGJvb2xlYW4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZXNMb2FkaW5nS2V5c18gPSB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgYWRkZWQgPSBfc3VwZXIucHJvdG90eXBlLmVucXVldWUuY2FsbCh0aGlzLCBlbGVtZW50KTtcbiAgICAgICAgaWYgKGFkZGVkKSB7XG4gICAgICAgICAgICB2YXIgdGlsZSA9IGVsZW1lbnRbMF07XG4gICAgICAgICAgICB0aWxlLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWRkZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiB0aWxlcyBsb2FkaW5nLlxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUuZ2V0VGlsZXNMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlc0xvYWRpbmdfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKHN0YXRlID09PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICBzdGF0ZSA9PT0gVGlsZVN0YXRlLkVSUk9SIHx8XG4gICAgICAgICAgICBzdGF0ZSA9PT0gVGlsZVN0YXRlLkVNUFRZKSB7XG4gICAgICAgICAgICB0aWxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfKTtcbiAgICAgICAgICAgIHZhciB0aWxlS2V5ID0gdGlsZS5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50aWxlc0xvYWRpbmdLZXlzX1t0aWxlS2V5XTtcbiAgICAgICAgICAgICAgICAtLXRoaXMudGlsZXNMb2FkaW5nXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGlsZUNoYW5nZUNhbGxiYWNrXygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4VG90YWxMb2FkaW5nIE1heGltdW0gbnVtYmVyIHRpbGVzIHRvIGxvYWQgc2ltdWx0YW5lb3VzbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heE5ld0xvYWRzIE1heGltdW0gbnVtYmVyIG9mIG5ldyB0aWxlcyB0byBsb2FkLlxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUubG9hZE1vcmVUaWxlcyA9IGZ1bmN0aW9uIChtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKSB7XG4gICAgICAgIHZhciBuZXdMb2FkcyA9IDA7XG4gICAgICAgIHZhciBzdGF0ZSwgdGlsZSwgdGlsZUtleTtcbiAgICAgICAgd2hpbGUgKHRoaXMudGlsZXNMb2FkaW5nXyA8IG1heFRvdGFsTG9hZGluZyAmJlxuICAgICAgICAgICAgbmV3TG9hZHMgPCBtYXhOZXdMb2FkcyAmJlxuICAgICAgICAgICAgdGhpcy5nZXRDb3VudCgpID4gMCkge1xuICAgICAgICAgICAgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmRlcXVldWUoKVswXSk7XG4gICAgICAgICAgICB0aWxlS2V5ID0gdGlsZS5nZXRLZXkoKTtcbiAgICAgICAgICAgIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBUaWxlU3RhdGUuSURMRSAmJiAhKHRpbGVLZXkgaW4gdGhpcy50aWxlc0xvYWRpbmdLZXlzXykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICArK3RoaXMudGlsZXNMb2FkaW5nXztcbiAgICAgICAgICAgICAgICArK25ld0xvYWRzO1xuICAgICAgICAgICAgICAgIHRpbGUubG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZVF1ZXVlO1xufShQcmlvcml0eVF1ZXVlKSk7XG5leHBvcnQgZGVmYXVsdCBUaWxlUXVldWU7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL1BsdWdnYWJsZU1hcC5qcycpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGlsZVNvdXJjZUtleSBUaWxlIHNvdXJjZSBrZXkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0aWxlQ2VudGVyIFRpbGUgY2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRpbGVSZXNvbHV0aW9uIFRpbGUgcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwcmlvcml0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbGVQcmlvcml0eShmcmFtZVN0YXRlLCB0aWxlLCB0aWxlU291cmNlS2V5LCB0aWxlQ2VudGVyLCB0aWxlUmVzb2x1dGlvbikge1xuICAgIC8vIEZpbHRlciBvdXQgdGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIHRoYW4gdGhlIGN1cnJlbnQgem9vbSBsZXZlbCwgb3IgdGhhdFxuICAgIC8vIGFyZSBvdXRzaWRlIHRoZSB2aXNpYmxlIGV4dGVudC5cbiAgICBpZiAoIWZyYW1lU3RhdGUgfHwgISh0aWxlU291cmNlS2V5IGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMpKSB7XG4gICAgICAgIHJldHVybiBEUk9QO1xuICAgIH1cbiAgICBpZiAoIWZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV1bdGlsZS5nZXRLZXkoKV0pIHtcbiAgICAgICAgcmV0dXJuIERST1A7XG4gICAgfVxuICAgIC8vIFByaW9yaXRpemUgdGhlIGhpZ2hlc3Qgem9vbSBsZXZlbCB0aWxlcyBjbG9zZXN0IHRvIHRoZSBmb2N1cy5cbiAgICAvLyBUaWxlcyBhdCBoaWdoZXIgem9vbSBsZXZlbHMgYXJlIHByaW9yaXRpemVkIHVzaW5nIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKS5cbiAgICAvLyBXaXRoaW4gYSB6b29tIGxldmVsLCB0aWxlcyBhcmUgcHJpb3JpdGl6ZWQgYnkgdGhlIGRpc3RhbmNlIGluIHBpeGVscyBiZXR3ZWVuXG4gICAgLy8gdGhlIGNlbnRlciBvZiB0aGUgdGlsZSBhbmQgdGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnQuICBUaGUgZmFjdG9yIG9mIDY1NTM2XG4gICAgLy8gbWVhbnMgdGhhdCB0aGUgcHJpb3JpdGl6YXRpb24gc2hvdWxkIGJlaGF2ZSBhcyBkZXNpcmVkIGZvciB0aWxlcyB1cCB0b1xuICAgIC8vIDY1NTM2ICogTWF0aC5sb2coMikgPSA0NTQyNiBwaXhlbHMgZnJvbSB0aGUgZm9jdXMuXG4gICAgdmFyIGNlbnRlciA9IGZyYW1lU3RhdGUudmlld1N0YXRlLmNlbnRlcjtcbiAgICB2YXIgZGVsdGFYID0gdGlsZUNlbnRlclswXSAtIGNlbnRlclswXTtcbiAgICB2YXIgZGVsdGFZID0gdGlsZUNlbnRlclsxXSAtIGNlbnRlclsxXTtcbiAgICByZXR1cm4gKDY1NTM2ICogTWF0aC5sb2codGlsZVJlc29sdXRpb24pICtcbiAgICAgICAgTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSkgLyB0aWxlUmVzb2x1dGlvbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUXVldWUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NpemVcbiAqL1xuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhIHNpemU6IGBbd2lkdGgsIGhlaWdodF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IFNpemVcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgYnVmZmVyZWQgc2l6ZS5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IG51bSBUaGUgYW1vdW50IGJ5IHdoaWNoIHRvIGJ1ZmZlci5cbiAqIEBwYXJhbSB7U2l6ZX0gW29wdF9zaXplXSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIGJ1ZmZlcmVkIHNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXIoc2l6ZSwgbnVtLCBvcHRfc2l6ZSkge1xuICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF9zaXplID0gWzAsIDBdO1xuICAgIH1cbiAgICBvcHRfc2l6ZVswXSA9IHNpemVbMF0gKyAyICogbnVtO1xuICAgIG9wdF9zaXplWzFdID0gc2l6ZVsxXSArIDIgKiBudW07XG4gICAgcmV0dXJuIG9wdF9zaXplO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgc2l6ZSBoYXMgYSBwb3NpdGl2ZSBhcmVhLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFRoZSBzaXplIHRvIHRlc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2l6ZSBoYXMgYSBwb3NpdGl2ZSBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzQXJlYShzaXplKSB7XG4gICAgcmV0dXJuIHNpemVbMF0gPiAwICYmIHNpemVbMV0gPiAwO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc2l6ZSBzY2FsZWQgYnkgYSByYXRpby4gVGhlIHJlc3VsdCB3aWxsIGJlIGFuIGFycmF5IG9mIGludGVnZXJzLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gUmF0aW8uXG4gKiBAcGFyYW0ge1NpemV9IFtvcHRfc2l6ZV0gT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFRoZSBzY2FsZWQgc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHNpemUsIHJhdGlvLCBvcHRfc2l6ZSkge1xuICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF9zaXplID0gWzAsIDBdO1xuICAgIH1cbiAgICBvcHRfc2l6ZVswXSA9IChzaXplWzBdICogcmF0aW8gKyAwLjUpIHwgMDtcbiAgICBvcHRfc2l6ZVsxXSA9IChzaXplWzFdICogcmF0aW8gKyAwLjUpIHwgMDtcbiAgICByZXR1cm4gb3B0X3NpemU7XG59XG4vKipcbiAqIFJldHVybnMgYW4gYFNpemVgIGFycmF5IGZvciB0aGUgcGFzc2VkIGluIG51bWJlciAobWVhbmluZzogc3F1YXJlKSBvclxuICogYFNpemVgIGFycmF5LlxuICogKG1lYW5pbmc6IG5vbi1zcXVhcmUpLFxuICogQHBhcmFtIHtudW1iZXJ8U2l6ZX0gc2l6ZSBXaWR0aCBhbmQgaGVpZ2h0LlxuICogQHBhcmFtIHtTaXplfSBbb3B0X3NpemVdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBTaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TaXplKHNpemUsIG9wdF9zaXplKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc2l6ZSkpIHtcbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0X3NpemUgPSBbc2l6ZSwgc2l6ZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRfc2l6ZVswXSA9IHNpemU7XG4gICAgICAgICAgICBvcHRfc2l6ZVsxXSA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdF9zaXplO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpemUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9QbHVnZ2FibGVNYXBcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTGF5ZXJHcm91cCBmcm9tICcuL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnQgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnQuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRIYW5kbGVyLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG5pbXBvcnQgTWFwRXZlbnRUeXBlIGZyb20gJy4vTWFwRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBQcm9wZXJ0eSBmcm9tICcuL01hcFByb3BlcnR5LmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVF1ZXVlLCB7IGdldFRpbGVQcmlvcml0eSB9IGZyb20gJy4vVGlsZVF1ZXVlLmpzJztcbmltcG9ydCBWaWV3IGZyb20gJy4vVmlldy5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi9WaWV3SGludC5qcyc7XG5pbXBvcnQgeyBERVZJQ0VfUElYRUxfUkFUSU8sIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTIH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHsgVFJVRSB9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjbG9uZSwgY3JlYXRlT3JVcGRhdGVFbXB0eSwgZXF1YWxzLCBnZXRGb3JWaWV3QW5kU2l6ZSwgaXNFbXB0eSwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBmcm9tVXNlckNvb3JkaW5hdGUsIHRvVXNlckNvb3JkaW5hdGUgfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IHsgaGFzQXJlYSB9IGZyb20gJy4vc2l6ZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZW1vdmVOb2RlIH0gZnJvbSAnLi9kb20uanMnO1xuLyoqXG4gKiBTdGF0ZSBvZiB0aGUgY3VycmVudCBmcmFtZS4gT25seSBgcGl4ZWxSYXRpb2AsIGB0aW1lYCBhbmQgYHZpZXdTdGF0ZWAgc2hvdWxkXG4gKiBiZSB1c2VkIGluIGFwcGxpY2F0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZyYW1lU3RhdGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwaXhlbFJhdGlvIFRoZSBwaXhlbCByYXRpbyBvZiB0aGUgZnJhbWUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gdGltZSBUaGUgdGltZSB3aGVuIHJlbmRlcmluZyBvZiB0aGUgZnJhbWUgd2FzIHJlcXVlc3RlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9WaWV3LmpzXCIpLlN0YXRlfSB2aWV3U3RhdGUgVGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGUgQW5pbWF0ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSBDb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwicmJ1c2hcIikuZGVmYXVsdH0gZGVjbHV0dGVyVHJlZSBEZWNsdXR0ZXJUcmVlLlxuICogQHByb3BlcnR5IHtudWxsfGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5TdGF0ZT59IGxheWVyU3RhdGVzQXJyYXkgTGF5ZXJTdGF0ZXNBcnJheS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsYXllckluZGV4IExheWVySW5kZXguXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0gUGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0uXG4gKiBAcHJvcGVydHkge0FycmF5PFBvc3RSZW5kZXJGdW5jdGlvbj59IHBvc3RSZW5kZXJGdW5jdGlvbnMgUG9zdFJlbmRlckZ1bmN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAqIEBwcm9wZXJ0eSB7VGlsZVF1ZXVlfSB0aWxlUXVldWUgVGlsZVF1ZXVlLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB1c2VkVGlsZXMgVXNlZFRpbGVzLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSB2aWV3SGludHMgVmlld0hpbnRzLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB3YW50ZWRUaWxlcyBXYW50ZWRUaWxlcy5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oUGx1Z2dhYmxlTWFwLCA/RnJhbWVTdGF0ZSk6IGFueX0gUG9zdFJlbmRlckZ1bmN0aW9uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQXRQaXhlbE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7dW5kZWZpbmVkfGZ1bmN0aW9uKGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IFtsYXllckZpbHRlcl0gTGF5ZXIgZmlsdGVyXG4gKiBmdW5jdGlvbi4gVGhlIGZpbHRlciBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgb25lIGFyZ3VtZW50LCB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXItY2FuZGlkYXRlfSBhbmQgaXQgc2hvdWxkIHJldHVybiBhIGJvb2xlYW4gdmFsdWUuXG4gKiBPbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWBcbiAqIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gQnkgZGVmYXVsdCwgYWxsIHZpc2libGUgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtoaXRUb2xlcmFuY2U9MF0gSGl0LWRldGVjdGlvbiB0b2xlcmFuY2UgaW4gY3NzIHBpeGVscy4gUGl4ZWxzXG4gKiBpbnNpZGUgdGhlIHJhZGl1cyBhcm91bmQgdGhlIGdpdmVuIHBvc2l0aW9uIHdpbGwgYmUgY2hlY2tlZCBmb3IgZmVhdHVyZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjaGVja1dyYXBwZWQ9dHJ1ZV0gQ2hlY2stV3JhcHBlZCBXaWxsIGNoZWNrIGZvciBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzIGluc2lkZSB0aGUgcmFuZ2Ugb2ZcbiAqICAgKy8tIDEgd29ybGQgd2lkdGguIFdvcmtzIG9ubHkgaWYgYSBwcm9qZWN0aW9uIGlzIHVzZWQgdGhhdCBjYW4gYmUgd3JhcHBlZC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zSW50ZXJuYWxcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gW2NvbnRyb2xzXSBDb250cm9scy5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXSBJbnRlcmFjdGlvbnMuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fSBrZXlib2FyZEV2ZW50VGFyZ2V0IEtleWJvYXJkRXZlbnRUYXJnZXQuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBvdmVybGF5cyBPdmVybGF5cy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IHZhbHVlcyBWYWx1ZXMuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6bGF5ZXJncm91cCd8J2NoYW5nZTpzaXplJ3wnY2hhbmdlOnRhcmdldCd8J2NoYW5nZTp2aWV3J30gTWFwT2JqZWN0RXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxNYXBPYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL01hcEV2ZW50VHlwZVwiKS5UeXBlcywgaW1wb3J0KFwiLi9NYXBFdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL3JlbmRlci9FdmVudFR5cGVcIikuTWFwUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xNYXBPYmplY3RFdmVudFR5cGVzfFxuICogICAgICBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFR5cGVcIikuVHlwZXN8aW1wb3J0KFwiLi9NYXBFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5NYXBSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBQbHVnZ2FibGVNYXBPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIHRoZSBtYXAuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIENvbnRyb2xzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sLmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXSBUaGUgcmF0aW8gYmV0d2VlblxuICogcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzIChkaXBzKSBvbiB0aGUgZGV2aWNlLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc11cbiAqIEludGVyYWN0aW9ucyB0aGF0IGFyZSBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24uZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fHN0cmluZ30gW2tleWJvYXJkRXZlbnRUYXJnZXRdIFRoZSBlbGVtZW50IHRvXG4gKiBsaXN0ZW4gdG8ga2V5Ym9hcmQgZXZlbnRzIG9uLiBUaGlzIGRldGVybWluZXMgd2hlbiB0aGUgYEtleWJvYXJkUGFuYCBhbmRcbiAqIGBLZXlib2FyZFpvb21gIGludGVyYWN0aW9ucyB0cmlnZ2VyLiBGb3IgZXhhbXBsZSwgaWYgdGhpcyBvcHRpb24gaXMgc2V0IHRvXG4gKiBgZG9jdW1lbnRgIHRoZSBrZXlib2FyZCBpbnRlcmFjdGlvbnMgd2lsbCBhbHdheXMgdHJpZ2dlci4gSWYgdGhpcyBvcHRpb24gaXNcbiAqIG5vdCBzcGVjaWZpZWQsIHRoZSBlbGVtZW50IHRoZSBsaWJyYXJ5IGxpc3RlbnMgdG8ga2V5Ym9hcmQgZXZlbnRzIG9uIGlzIHRoZVxuICogbWFwIHRhcmdldCAoaS5lLiB0aGUgdXNlci1wcm92aWRlZCBkaXYgZm9yIHRoZSBtYXApLiBJZiB0aGlzIGlzIG5vdFxuICogYGRvY3VtZW50YCwgdGhlIHRhcmdldCBlbGVtZW50IG5lZWRzIHRvIGJlIGZvY3VzZWQgZm9yIGtleSBldmVudHMgdG8gYmVcbiAqIGVtaXR0ZWQsIHJlcXVpcmluZyB0aGF0IHRoZSB0YXJnZXQgZWxlbWVudCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fExheWVyR3JvdXB9IFtsYXllcnNdXG4gKiBMYXllcnMuIElmIHRoaXMgaXMgbm90IGRlZmluZWQsIGEgbWFwIHdpdGggbm8gbGF5ZXJzIHdpbGwgYmUgcmVuZGVyZWQuIE5vdGVcbiAqIHRoYXQgbGF5ZXJzIGFyZSByZW5kZXJlZCBpbiB0aGUgb3JkZXIgc3VwcGxpZWQsIHNvIGlmIHlvdSB3YW50LCBmb3IgZXhhbXBsZSxcbiAqIGEgdmVjdG9yIGxheWVyIHRvIGFwcGVhciBvbiB0b3Agb2YgYSB0aWxlIGxheWVyLCBpdCBtdXN0IGNvbWUgYWZ0ZXIgdGhlIHRpbGVcbiAqIGxheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhUaWxlc0xvYWRpbmc9MTZdIE1heGltdW0gbnVtYmVyIHRpbGVzIHRvIGxvYWRcbiAqIHNpbXVsdGFuZW91c2x5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlPTFdIFRoZSBtaW5pbXVtIGRpc3RhbmNlIGluIHBpeGVscyB0aGVcbiAqIGN1cnNvciBtdXN0IG1vdmUgdG8gYmUgZGV0ZWN0ZWQgYXMgYSBtYXAgbW92ZSBldmVudCBpbnN0ZWFkIG9mIGEgY2xpY2suXG4gKiBJbmNyZWFzaW5nIHRoaXMgdmFsdWUgY2FuIG1ha2UgaXQgZWFzaWVyIHRvIGNsaWNrIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gW292ZXJsYXlzXVxuICogT3ZlcmxheXMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIEJ5IGRlZmF1bHQsIG5vIG92ZXJsYXlzIGFyZSBhZGRlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgY29udGFpbmVyIGZvciB0aGUgbWFwLCBlaXRoZXIgdGhlXG4gKiBlbGVtZW50IGl0c2VsZiBvciB0aGUgYGlkYCBvZiB0aGUgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb25cbiAqIHRpbWUsIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRUYXJnZXR9IG11c3QgYmUgY2FsbGVkIGZvciB0aGUgbWFwIHRvIGJlXG4gKiByZW5kZXJlZC4gSWYgcGFzc2VkIGJ5IGVsZW1lbnQsIHRoZSBjb250YWluZXIgY2FuIGJlIGluIGEgc2Vjb25kYXJ5IGRvY3VtZW50LlxuICogQHByb3BlcnR5IHtWaWV3fSBbdmlld10gVGhlIG1hcCdzIHZpZXcuICBObyBsYXllciBzb3VyY2VzIHdpbGwgYmVcbiAqIGZldGNoZWQgdW5sZXNzIHRoaXMgaXMgc3BlY2lmaWVkIGF0IGNvbnN0cnVjdGlvbiB0aW1lIG9yIHRocm91Z2hcbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRWaWV3fS5cbiAqL1xuLyoqXG4gKiBAYXBpXG4gKi9cbnZhciBQbHVnZ2FibGVNYXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBsdWdnYWJsZU1hcCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGx1Z2dhYmxlTWFwKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7UGx1Z2dhYmxlTWFwT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtQbHVnZ2FibGVNYXBPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7UGx1Z2dhYmxlTWFwT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnNJbnRlcm5hbCA9IGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKTtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XyA9IF90aGlzLmhhbmRsZUJyb3dzZXJFdmVudC5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhUaWxlc0xvYWRpbmdfID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFRpbGVzTG9hZGluZyA6IDE2O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID1cbiAgICAgICAgICAgIG9wdGlvbnMucGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnBpeGVsUmF0aW9cbiAgICAgICAgICAgICAgICA6IERFVklDRV9QSVhFTF9SQVRJTztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpb25EZWxheUtleV87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uRGVsYXlfID0gLyoqIEB0aGlzIHtQbHVnZ2FibGVNYXB9ICovIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGcmFtZV8oRGF0ZS5ub3coKSk7XG4gICAgICAgIH0uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVJbmRleF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9GcmFtZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV4dGVudCBhdCB0aGUgcHJldmlvdXMgJ21vdmVlbmQnIGV2ZW50LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucHJldmlvdXNFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmNsYXNzTmFtZSA9XG4gICAgICAgICAgICAnb2wtdmlld3BvcnQnICsgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyA/ICcgb2wtdG91Y2gnIDogJycpO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lcic7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TWFwQnJvd3NlckV2ZW50SGFuZGxlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG9wdGlvbnMubW92ZVRvbGVyYW5jZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID0gb3B0aW9uc0ludGVybmFsLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXlIYW5kbGVyS2V5c18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRyb2xzID0gb3B0aW9uc0ludGVybmFsLmNvbnRyb2xzIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGlvbnMgPSBvcHRpb25zSW50ZXJuYWwuaW50ZXJhY3Rpb25zIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5c18gPSBvcHRpb25zSW50ZXJuYWwub3ZlcmxheXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxvb2t1cCBvZiBvdmVybGF5cyBieSBpZC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlJZEluZGV4XyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3VuZGVmaW5lZHxmdW5jdGlvbihFdmVudCk6IHZvaWR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oYW5kbGVSZXNpemVfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtUaWxlUXVldWV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUXVldWVfID0gbmV3IFRpbGVRdWV1ZShfdGhpcy5nZXRUaWxlUHJpb3JpdHkuYmluZChfdGhpcyksIF90aGlzLmhhbmRsZVRpbGVDaGFuZ2VfLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCwgX3RoaXMuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuVklFVywgX3RoaXMuaGFuZGxlVmlld0NoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuU0laRSwgX3RoaXMuaGFuZGxlU2l6ZUNoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuVEFSR0VULCBfdGhpcy5oYW5kbGVUYXJnZXRDaGFuZ2VkXyk7XG4gICAgICAgIC8vIHNldFByb3BlcnRpZXMgd2lsbCB0cmlnZ2VyIHRoZSByZW5kZXJpbmcgb2YgdGhlIG1hcCBpZiB0aGUgbWFwXG4gICAgICAgIC8vIGlzIFwiZGVmaW5lZFwiIGFscmVhZHkuXG4gICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMob3B0aW9uc0ludGVybmFsLnZhbHVlcyk7XG4gICAgICAgIF90aGlzLmNvbnRyb2xzLmZvckVhY2goXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgICAgICogQHRoaXMge1BsdWdnYWJsZU1hcH1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChjb250cm9sKSB7XG4gICAgICAgICAgICBjb250cm9sLnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKHRoaXMpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGlvbnMuZm9yRWFjaChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbi5cbiAgICAgICAgICogQHRoaXMge1BsdWdnYWJsZU1hcH1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgICAgICAgaW50ZXJhY3Rpb24uc2V0TWFwKHRoaXMpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKHRoaXMpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheXNfLmZvckVhY2goX3RoaXMuYWRkT3ZlcmxheUludGVybmFsXy5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8oXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQuZWxlbWVudCkpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheXNfLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBvdmVybGF5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgICAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH0gVGhlIG1hcCByZW5kZXJlclxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlIGEgbWFwIHR5cGUgdGhhdCBoYXMgYSBjcmVhdGVSZW5kZXJlciBtZXRob2QnKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgZ2l2ZW4gY29udHJvbCB0byB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZENvbnRyb2wgPSBmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICB0aGlzLmdldENvbnRyb2xzKCkucHVzaChjb250cm9sKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gdG8gdGhlIG1hcC4gSWYgeW91IHdhbnQgdG8gYWRkIGFuIGludGVyYWN0aW9uXG4gICAgICogYXQgYW5vdGhlciBwb2ludCBvZiB0aGUgY29sbGVjdGlvbiB1c2UgYGdldEludGVyYWN0aW9uKClgIGFuZCB0aGUgbWV0aG9kc1xuICAgICAqIGF2YWlsYWJsZSBvbiB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0uIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiBzdG9wIHRoZSBldmVudCBwcm9wYWdhdGlvbiBmcm9tIHRoZSBoYW5kbGVFdmVudCBmdW5jdGlvbi4gVGhlIGludGVyYWN0aW9uc1xuICAgICAqIGdldCB0byBoYW5kbGUgdGhlIGV2ZW50cyBpbiB0aGUgcmV2ZXJzZSBvcmRlciBvZiB0aGlzIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uIHRvIGFkZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgICB0aGlzLmdldEludGVyYWN0aW9ucygpLnB1c2goaW50ZXJhY3Rpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gbGF5ZXIgdG8gdGhlIHRvcCBvZiB0aGlzIG1hcC4gSWYgeW91IHdhbnQgdG8gYWRkIGEgbGF5ZXJcbiAgICAgKiBlbHNld2hlcmUgaW4gdGhlIHN0YWNrLCB1c2UgYGdldExheWVycygpYCBhbmQgdGhlIG1ldGhvZHMgYXZhaWxhYmxlIG9uXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZExheWVyID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBnaXZlbiBvdmVybGF5IHRvIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZE92ZXJsYXkgPSBmdW5jdGlvbiAob3ZlcmxheSkge1xuICAgICAgICB0aGlzLmdldE92ZXJsYXlzKCkucHVzaChvdmVybGF5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgZGVhbHMgd2l0aCBtYXAncyBvdmVybGF5IGNvbGxlY3Rpb24gY2hhbmdlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZE92ZXJsYXlJbnRlcm5hbF8gPSBmdW5jdGlvbiAob3ZlcmxheSkge1xuICAgICAgICB2YXIgaWQgPSBvdmVybGF5LmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXSA9IG92ZXJsYXk7XG4gICAgICAgIH1cbiAgICAgICAgb3ZlcmxheS5zZXRNYXAodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRhcmdldChudWxsKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kIGV4ZWN1dGUgYVxuICAgICAqIGNhbGxiYWNrIHdpdGggZWFjaCBpbnRlcnNlY3RpbmcgZmVhdHVyZS4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZSBkZXRlY3Rpb24gY2FuXG4gICAgICogYmUgY29uZmlndXJlZCB0aHJvdWdoIHRoZSBgbGF5ZXJGaWx0ZXJgIG9wdGlvbiBpbiBgb3B0X29wdGlvbnNgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHQpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgICAqICAgICBjYWxsZWQgd2l0aCB0d28gYXJndW1lbnRzLiBUaGUgZmlyc3QgYXJndW1lbnQgaXMgb25lXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZSBmZWF0dXJlfSBvclxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9GZWF0dXJlIHJlbmRlciBmZWF0dXJlfSBhdCB0aGUgcGl4ZWwsIHRoZSBzZWNvbmQgaXNcbiAgICAgKiAgICAgdGhlIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXJ9IG9mIHRoZSBmZWF0dXJlIGFuZCB3aWxsIGJlIG51bGwgZm9yXG4gICAgICogICAgIHVubWFuYWdlZCBsYXllcnMuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFjayBmdW5jdGlvbnMgY2FuIHJldHVybiBhXG4gICAgICogICAgIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICAgKiBjYWxsYmFjayBleGVjdXRpb24sIG9yIHRoZSBmaXJzdCB0cnV0aHkgY2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqIEB0ZW1wbGF0ZSBTLFRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGNhbGxiYWNrLCBvcHRfb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKTtcbiAgICAgICAgb3B0X29wdGlvbnMgPSBvcHRfb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGhpdFRvbGVyYW5jZSA9IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcbiAgICAgICAgdmFyIGxheWVyRmlsdGVyID0gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyIDogVFJVRTtcbiAgICAgICAgdmFyIGNoZWNrV3JhcHBlZCA9IG9wdF9vcHRpb25zLmNoZWNrV3JhcHBlZCAhPT0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgY2FsbGJhY2ssIG51bGwsIGxheWVyRmlsdGVyLCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbGwgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlPn0gVGhlIGRldGVjdGVkIGZlYXR1cmVzIG9yXG4gICAgICogYW4gZW1wdHkgYXJyYXkgaWYgbm9uZSB3ZXJlIGZvdW5kLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEZlYXR1cmVzQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgICAgIHRoaXMuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLCBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgfSwgb3B0X29wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgbGF5ZXJzIHRoYXQgaGF2ZSBhIGNvbG9yIHZhbHVlIGF0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LCBhbmRcbiAgICAgKiBleGVjdXRlIGEgY2FsbGJhY2sgd2l0aCBlYWNoIG1hdGNoaW5nIGxheWVyLiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlXG4gICAgICogZGV0ZWN0aW9uIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggYG9wdF9sYXllckZpbHRlcmAuXG4gICAgICpcbiAgICAgKiBOb3RlOiB0aGlzIG1heSBnaXZlIGZhbHNlIHBvc2l0aXZlcyB1bmxlc3MgdGhlIG1hcCBsYXllcnMgaGF2ZSBoYWQgZGlmZmVyZW50IGBjbGFzc05hbWVgXG4gICAgICogcHJvcGVydGllcyBhc3NpZ25lZCB0byB0aGVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFMsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2tcbiAgICAgKiAgICAgTGF5ZXIgY2FsbGJhY2suIFRoaXMgY2FsbGJhY2sgd2lsbCByZWNlaXZlIHR3byBhcmd1bWVudHM6IGZpcnN0IGlzIHRoZVxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSwgc2Vjb25kIGFyZ3VtZW50IGlzIGFuIGFycmF5IHJlcHJlc2VudGluZ1xuICAgICAqICAgICBbUiwgRywgQiwgQV0gcGl4ZWwgdmFsdWVzICgwIC0gMjU1KSBhbmQgd2lsbCBiZSBgbnVsbGAgZm9yIGxheWVyIHR5cGVzXG4gICAgICogICAgIHRoYXQgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IHRoaXMgYXJndW1lbnQuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFja1xuICAgICAqICAgICBmdW5jdGlvbnMgY2FuIHJldHVybiBhIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0X29wdGlvbnNdIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LCBpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgbGFzdFxuICAgICAqIGNhbGxiYWNrIGV4ZWN1dGlvbiwgb3IgdGhlIGZpcnN0IHRydXRoeSBjYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAgICogQHRlbXBsYXRlIFMsVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGNhbGxiYWNrLCBvcHRfb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcbiAgICAgICAgdmFyIGxheWVyRmlsdGVyID0gb3B0aW9ucy5sYXllckZpbHRlciB8fCBUUlVFO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaExheWVyQXRQaXhlbChwaXhlbCwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbGF5ZXJGaWx0ZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGlmIGZlYXR1cmVzIGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZVxuICAgICAqIGRldGVjdGlvbiBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIGBvcHRfbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHRoZXJlIGEgZmVhdHVyZSBhdCB0aGUgZ2l2ZW4gcGl4ZWw/XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFzRmVhdHVyZUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRfb3B0aW9ucy5sYXllckZpbHRlciAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgY2hlY2tXcmFwcGVkID0gb3B0X29wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmhhc0ZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGxheWVyRmlsdGVyLCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgaW4gdXNlciBwcm9qZWN0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRFdmVudENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgaW4gdmlldyBwcm9qZWN0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hcCBwaXhlbCBwb3NpdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IFBpeGVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50UGl4ZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSB0aGlzLnZpZXdwb3J0Xy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGV2ZW50UG9zaXRpb24gPSBcbiAgICAgICAgLy9GSVhNRSBBcmUgd2UgcmVhbGx5IGNhbGxpbmcgdGhpcyB3aXRoIGEgVG91Y2hFdmVudCBhbnl3aGVyZT9cbiAgICAgICAgJ2NoYW5nZWRUb3VjaGVzJyBpbiBldmVudFxuICAgICAgICAgICAgPyAvKiogQHR5cGUge1RvdWNoRXZlbnR9ICovIChldmVudCkuY2hhbmdlZFRvdWNoZXNbMF1cbiAgICAgICAgICAgIDogLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAoZXZlbnQpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZXZlbnRQb3NpdGlvbi5jbGllbnRYIC0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0LFxuICAgICAgICAgICAgZXZlbnRQb3NpdGlvbi5jbGllbnRZIC0gdmlld3BvcnRQb3NpdGlvbi50b3AsXG4gICAgICAgIF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRhcmdldCBpbiB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC5cbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXR1cm5zIHdoYXQgaXMgZW50ZXJlZCBhcyBhbiBvcHRpb24gb3IgaW4gc2V0VGFyZ2V0OlxuICAgICAqIGlmIHRoYXQgd2FzIGFuIGVsZW1lbnQsIGl0IHJldHVybnMgYW4gZWxlbWVudDsgaWYgYSBzdHJpbmcsIGl0IHJldHVybnMgdGhhdC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudCB0aGF0IHRoZVxuICAgICAqICAgICBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5UQVJHRVQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgaW50byB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC4gSW4gY29udHJhc3QgdG9cbiAgICAgKiBgZ2V0VGFyZ2V0YCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJuIGFuIGBFbGVtZW50YCwgb3IgYG51bGxgIGlmIHRoZVxuICAgICAqIG1hcCBoYXMgbm8gdGFyZ2V0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgZWxlbWVudCB0aGF0IHRoZSBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VGFyZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgICAgIGlmICh0YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpXG4gICAgICAgICAgICAgICAgOiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICAgKiB1c2VyIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSBmb3IgdGhlIHBpeGVsIHBvc2l0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIHRvVXNlckNvb3JkaW5hdGUodGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpLCB0aGlzLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICAgKiBtYXAgdmlldyBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgZm9yIHRoZSBwaXhlbCBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGNvbnRyb2xzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGNvbnRyb2xzXG4gICAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gQ29udHJvbHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29udHJvbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgb3ZlcmxheXMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgb3ZlcmxheXNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gT3ZlcmxheXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbiBvdmVybGF5IGJ5IGl0cyBpZGVudGlmaWVyICh0aGUgdmFsdWUgcmV0dXJuZWQgYnkgb3ZlcmxheS5nZXRJZCgpKS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIGluZGV4IHRyZWF0cyBzdHJpbmcgYW5kIG51bWVyaWMgaWRlbnRpZmllcnMgYXMgdGhlIHNhbWUuIFNvXG4gICAgICogYG1hcC5nZXRPdmVybGF5QnlJZCgyKWAgd2lsbCByZXR1cm4gYW4gb3ZlcmxheSB3aXRoIGlkIGAnMidgIG9yIGAyYC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGlkIE92ZXJsYXkgaWRlbnRpZmllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gT3ZlcmxheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5QnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgb3ZlcmxheSA9IHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICByZXR1cm4gb3ZlcmxheSAhPT0gdW5kZWZpbmVkID8gb3ZlcmxheSA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBpbnRlcmFjdGlvbnMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgaW50ZXJhY3Rpb25zXG4gICAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAgICpcbiAgICAgKiBJbnRlcmFjdGlvbnMgYXJlIHVzZWQgZm9yIGUuZy4gcGFuLCB6b29tIGFuZCByb3RhdGUuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBJbnRlcmFjdGlvbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0SW50ZXJhY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyZ3JvdXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLlxuICAgICAqIEByZXR1cm4ge0xheWVyR3JvdXB9IEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7TGF5ZXJHcm91cH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LkxBWUVSR1JPVVApKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29sbGVjdGlvbiBvZiBsYXllcnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLlxuICAgICAqIEByZXR1cm4geyFDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0Pn0gTGF5ZXJzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldExheWVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICAgICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXJzIGhhdmUgc291cmNlcyB0aGF0IGFyZSBzdGlsbCBsb2FkaW5nLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TG9hZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZXNBcnJheVtpXS5sYXllcjtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyKS5nZXRTb3VyY2UoKTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgJiYgc291cmNlLmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBpeGVsIGZvciBhIGNvb3JkaW5hdGUuICBUaGlzIHRha2VzIGEgY29vcmRpbmF0ZSBpbiB0aGUgdXNlclxuICAgICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBBIG1hcCBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IEEgcGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRQaXhlbEZyb21Db29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgdmFyIHZpZXdDb29yZGluYXRlID0gZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHRoaXMuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCh2aWV3Q29vcmRpbmF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBpeGVsIGZvciBhIGNvb3JkaW5hdGUuICBUaGlzIHRha2VzIGEgY29vcmRpbmF0ZSBpbiB0aGUgbWFwIHZpZXdcbiAgICAgKiBwcm9qZWN0aW9uIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBBIHBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgY29vcmRpbmF0ZS5zbGljZSgwLCAyKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIHJlbmRlcmVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9IFJlbmRlcmVyXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzaXplIG9mIHRoaXMgbWFwLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBtYXAgaW4gdGhlIERPTS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlNJWkUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuIEEgdmlldyBtYW5hZ2VzIHByb3BlcnRpZXMgc3VjaCBhc1xuICAgICAqIGNlbnRlciBhbmQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtWaWV3fSBUaGUgdmlldyB0aGF0IGNvbnRyb2xzIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Vmlld30gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlZJRVcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBWaWV3cG9ydC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRWaWV3cG9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBjb250YWluZXIgZm9yIG92ZXJsYXlzLiAgRWxlbWVudHMgYWRkZWQgdG9cbiAgICAgKiB0aGlzIGNvbnRhaW5lciB3aWxsIGxldCBtb3VzZWRvd24gYW5kIHRvdWNoc3RhcnQgZXZlbnRzIHRocm91Z2ggdG8gdGhlIG1hcCxcbiAgICAgKiBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXkgd2lsbCB0cmlnZ2VyIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH1cbiAgICAgKiBldmVudHMuXG4gICAgICogQHJldHVybiB7IUhUTUxFbGVtZW50fSBUaGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5Q29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5Q29udGFpbmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyBhIGNvbnRhaW5lciBmb3Igb3ZlcmxheXMgdGhhdCBkb24ndCBhbGxvd1xuICAgICAqIGV2ZW50IHByb3BhZ2F0aW9uLiBFbGVtZW50cyBhZGRlZCB0byB0aGlzIGNvbnRhaW5lciB3b24ndCBsZXQgbW91c2Vkb3duIGFuZFxuICAgICAqIHRvdWNoc3RhcnQgZXZlbnRzIHRocm91Z2ggdG8gdGhlIG1hcCwgc28gY2xpY2tzIGFuZCBnZXN0dXJlcyBvbiBhbiBvdmVybGF5XG4gICAgICogZG9uJ3QgdHJpZ2dlciBhbnkge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fS5cbiAgICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lciB0aGF0IHN0b3BzIGV2ZW50cy5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7IURvY3VtZW50fSBUaGUgZG9jdW1lbnQgd2hlcmUgdGhlIG1hcCBpcyBkaXNwbGF5ZWQuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPd25lckRvY3VtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0RWxlbWVudCA/IHRhcmdldEVsZW1lbnQub3duZXJEb2N1bWVudCA6IGRvY3VtZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlU291cmNlS2V5IFRpbGUgc291cmNlIGtleS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0aWxlQ2VudGVyIFRpbGUgY2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlUmVzb2x1dGlvbiBUaWxlIHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHByaW9yaXR5LlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VGlsZVByaW9yaXR5ID0gZnVuY3Rpb24gKHRpbGUsIHRpbGVTb3VyY2VLZXksIHRpbGVDZW50ZXIsIHRpbGVSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJldHVybiBnZXRUaWxlUHJpb3JpdHkodGhpcy5mcmFtZVN0YXRlXywgdGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtVSUV2ZW50fSBicm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdF90eXBlXSBUeXBlLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlQnJvd3NlckV2ZW50ID0gZnVuY3Rpb24gKGJyb3dzZXJFdmVudCwgb3B0X3R5cGUpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBvcHRfdHlwZSB8fCBicm93c2VyRXZlbnQudHlwZTtcbiAgICAgICAgdmFyIG1hcEJyb3dzZXJFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQodHlwZSwgdGhpcywgYnJvd3NlckV2ZW50KTtcbiAgICAgICAgdGhpcy5oYW5kbGVNYXBCcm93c2VyRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TWFwQnJvd3NlckV2ZW50fSBtYXBCcm93c2VyRXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZU1hcEJyb3dzZXJFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICAvLyBXaXRoIG5vIHZpZXcgZGVmaW5lZCwgd2UgY2Fubm90IHRyYW5zbGF0ZSBwaXhlbHMgaW50byBnZW9ncmFwaGljYWxcbiAgICAgICAgICAgIC8vIGNvb3JkaW5hdGVzIHNvIGludGVyYWN0aW9ucyBjYW5ub3QgYmUgdXNlZC5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7UG9pbnRlckV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gb3JpZ2luYWxFdmVudC50eXBlO1xuICAgICAgICBpZiAoZXZlbnRUeXBlID09PSBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJET1dOIHx8XG4gICAgICAgICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5XSEVFTCB8fFxuICAgICAgICAgICAgZXZlbnRUeXBlID09PSBFdmVudFR5cGUuS0VZRE9XTikge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMuZ2V0T3duZXJEb2N1bWVudCgpO1xuICAgICAgICAgICAgdmFyIHJvb3ROb2RlID0gdGhpcy52aWV3cG9ydF8uZ2V0Um9vdE5vZGVcbiAgICAgICAgICAgICAgICA/IHRoaXMudmlld3BvcnRfLmdldFJvb3ROb2RlKClcbiAgICAgICAgICAgICAgICA6IGRvYztcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAvKiogQHR5cGUge05vZGV9ICovIChvcmlnaW5hbEV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBBYm9ydCBpZiB0aGUgdGFyZ2V0IGlzIGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lciBmb3IgZWxlbWVudHMgd2hvc2UgZXZlbnRzIGFyZSBub3QgbWVhbnRcbiAgICAgICAgICAgIC8vIHRvIGJlIGhhbmRsZWQgYnkgbWFwIGludGVyYWN0aW9ucy5cbiAgICAgICAgICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uY29udGFpbnModGFyZ2V0KSB8fFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IGlmIHRoZSBldmVudCB0YXJnZXQgaXMgYSBjaGlsZCBvZiB0aGUgY29udGFpbmVyIHRoYXQgaXMgbm8gbG9uZ2VyIGluIHRoZSBwYWdlLlxuICAgICAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgZm9yIHRoZSB0YXJnZXQgdG8gbm8gbG9uZ2VyIGJlIGluIHRoZSBwYWdlIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWQgaW4gYW5cbiAgICAgICAgICAgICAgICAvLyBldmVudCBsaXN0ZW5lciwgdGhpcyBtaWdodCBoYXBwZW4gaW4gYSBDb250cm9sIHRoYXQgcmVjcmVhdGVzIGl0J3MgY29udGVudCBiYXNlZCBvblxuICAgICAgICAgICAgICAgIC8vIHVzZXIgaW50ZXJhY3Rpb24gZWl0aGVyIG1hbnVhbGx5IG9yIHZpYSBhIHJlbmRlciBpbiBzb21ldGhpbmcgbGlrZSBodHRwczovL3JlYWN0anMub3JnL1xuICAgICAgICAgICAgICAgICEocm9vdE5vZGUgPT09IGRvYyA/IGRvYy5kb2N1bWVudEVsZW1lbnQgOiByb290Tm9kZSkuY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXBCcm93c2VyRXZlbnQuZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIGlmICh0aGlzLmRpc3BhdGNoRXZlbnQobWFwQnJvd3NlckV2ZW50KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbnNBcnJheSA9IHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkuZ2V0QXJyYXkoKS5zbGljZSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGludGVyYWN0aW9uc0FycmF5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIGludGVyYWN0aW9uID0gaW50ZXJhY3Rpb25zQXJyYXlbaV07XG4gICAgICAgICAgICAgICAgaWYgKGludGVyYWN0aW9uLmdldE1hcCgpICE9PSB0aGlzIHx8XG4gICAgICAgICAgICAgICAgICAgICFpbnRlcmFjdGlvbi5nZXRBY3RpdmUoKSB8fFxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5nZXRUYXJnZXRFbGVtZW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjb250ID0gaW50ZXJhY3Rpb24uaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnQgfHwgbWFwQnJvd3NlckV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVBvc3RSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgLy8gTWFuYWdlIHRoZSB0aWxlIHF1ZXVlXG4gICAgICAgIC8vIEltYWdlIGxvYWRzIGFyZSBleHBlbnNpdmUgYW5kIGEgbGltaXRlZCByZXNvdXJjZSwgc28gdHJ5IHRvIHVzZSB0aGVtXG4gICAgICAgIC8vIGVmZmljaWVudGx5OlxuICAgICAgICAvLyAqIFdoZW4gdGhlIHZpZXcgaXMgc3RhdGljIHdlIGFsbG93IGEgbGFyZ2UgbnVtYmVyIG9mIHBhcmFsbGVsIHRpbGUgbG9hZHNcbiAgICAgICAgLy8gICB0byBjb21wbGV0ZSB0aGUgZnJhbWUgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS5cbiAgICAgICAgLy8gKiBXaGVuIGFuaW1hdGluZyBvciBpbnRlcmFjdGluZywgaW1hZ2UgbG9hZHMgY2FuIGNhdXNlIGphbmtzLCBzbyB3ZSByZWR1Y2VcbiAgICAgICAgLy8gICB0aGUgbWF4aW11bSBudW1iZXIgb2YgbG9hZHMgcGVyIGZyYW1lIGFuZCBsaW1pdCB0aGUgbnVtYmVyIG9mIHBhcmFsbGVsXG4gICAgICAgIC8vICAgdGlsZSBsb2FkcyB0byByZW1haW4gcmVhY3RpdmUgdG8gdmlldyBjaGFuZ2VzIGFuZCB0byByZWR1Y2UgdGhlIGNoYW5jZSBvZlxuICAgICAgICAvLyAgIGxvYWRpbmcgdGlsZXMgdGhhdCB3aWxsIHF1aWNrbHkgZGlzYXBwZWFyIGZyb20gdmlldy5cbiAgICAgICAgdmFyIHRpbGVRdWV1ZSA9IHRoaXMudGlsZVF1ZXVlXztcbiAgICAgICAgaWYgKCF0aWxlUXVldWUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB2YXIgbWF4VG90YWxMb2FkaW5nID0gdGhpcy5tYXhUaWxlc0xvYWRpbmdfO1xuICAgICAgICAgICAgdmFyIG1heE5ld0xvYWRzID0gbWF4VG90YWxMb2FkaW5nO1xuICAgICAgICAgICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgICAgICAgICBpZiAoaGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSB8fCBoaW50c1tWaWV3SGludC5JTlRFUkFDVElOR10pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvd09uRnJhbWVCdWRnZXQgPSBEYXRlLm5vdygpIC0gZnJhbWVTdGF0ZS50aW1lID4gODtcbiAgICAgICAgICAgICAgICAgICAgbWF4VG90YWxMb2FkaW5nID0gbG93T25GcmFtZUJ1ZGdldCA/IDAgOiA4O1xuICAgICAgICAgICAgICAgICAgICBtYXhOZXdMb2FkcyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGlsZVF1ZXVlLmdldFRpbGVzTG9hZGluZygpIDwgbWF4VG90YWxMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgdGlsZVF1ZXVlLnJlcHJpb3JpdGl6ZSgpOyAvLyBGSVhNRSBvbmx5IGNhbGwgaWYgdmlldyBoYXMgY2hhbmdlZFxuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5sb2FkTW9yZVRpbGVzKG1heFRvdGFsTG9hZGluZywgbWF4TmV3TG9hZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmcmFtZVN0YXRlICYmXG4gICAgICAgICAgICB0aGlzLmhhc0xpc3RlbmVyKFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSkgJiZcbiAgICAgICAgICAgICFmcmFtZVN0YXRlLmFuaW1hdGUgJiZcbiAgICAgICAgICAgICF0aGlzLnRpbGVRdWV1ZV8uZ2V0VGlsZXNMb2FkaW5nKCkgJiZcbiAgICAgICAgICAgICF0aGlzLmdldExvYWRpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUsIGZyYW1lU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwb3N0UmVuZGVyRnVuY3Rpb25zID0gdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcG9zdFJlbmRlckZ1bmN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zW2ldKHRoaXMsIGZyYW1lU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVTaXplQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmdldFZpZXcoKSAmJiAhdGhpcy5nZXRWaWV3KCkuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVRhcmdldENoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB0YXJnZXQgbWF5IGJlIHVuZGVmaW5lZCwgbnVsbCwgYSBzdHJpbmcgb3IgYW4gRWxlbWVudC5cbiAgICAgICAgLy8gSWYgaXQncyBhIHN0cmluZyB3ZSBjb252ZXJ0IGl0IHRvIGFuIEVsZW1lbnQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIC8vIElmIGl0J3Mgbm90IG5vdyBhbiBFbGVtZW50IHdlIHJlbW92ZSB0aGUgdmlld3BvcnQgZnJvbSB0aGUgRE9NLlxuICAgICAgICAvLyBJZiBpdCdzIGFuIEVsZW1lbnQgd2UgYXBwZW5kIHRoZSB2aWV3cG9ydCBlbGVtZW50IHRvIGl0LlxuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuZ2V0VGFyZ2V0KCkpIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5rZXlIYW5kbGVyS2V5c18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5rZXlIYW5kbGVyS2V5c19baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5rZXlIYW5kbGVyS2V5c18gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ09OVEVYVE1FTlUsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLldIRUVMLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50Xyk7XG4gICAgICAgICAgICBpZiAodGhpcy5oYW5kbGVSZXNpemVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5SRVNJWkUsIHRoaXMuaGFuZGxlUmVzaXplXywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzaXplXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8uZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXyA9IG51bGw7XG4gICAgICAgICAgICByZW1vdmVOb2RlKHRoaXMudmlld3BvcnRfKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudmlld3BvcnRfKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBuZXcgTWFwQnJvd3NlckV2ZW50SGFuZGxlcih0aGlzLCB0aGlzLm1vdmVUb2xlcmFuY2VfKTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBNYXBCcm93c2VyRXZlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXy5hZGRFdmVudExpc3RlbmVyKE1hcEJyb3dzZXJFdmVudFR5cGVba2V5XSwgdGhpcy5oYW5kbGVNYXBCcm93c2VyRXZlbnQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DT05URVhUTUVOVSwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLldIRUVMLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XywgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgPyB7IHBhc3NpdmU6IGZhbHNlIH0gOiBmYWxzZSk7XG4gICAgICAgICAgICB2YXIga2V5Ym9hcmRFdmVudFRhcmdldCA9ICF0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfXG4gICAgICAgICAgICAgICAgPyB0YXJnZXRFbGVtZW50XG4gICAgICAgICAgICAgICAgOiB0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfO1xuICAgICAgICAgICAgdGhpcy5rZXlIYW5kbGVyS2V5c18gPSBbXG4gICAgICAgICAgICAgICAgbGlzdGVuKGtleWJvYXJkRXZlbnRUYXJnZXQsIEV2ZW50VHlwZS5LRVlET1dOLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyksXG4gICAgICAgICAgICAgICAgbGlzdGVuKGtleWJvYXJkRXZlbnRUYXJnZXQsIEV2ZW50VHlwZS5LRVlQUkVTUywgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYW5kbGVSZXNpemVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXNpemVfID0gdGhpcy51cGRhdGVTaXplLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlJFU0laRSwgdGhpcy5oYW5kbGVSZXNpemVfLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgICAgIC8vIHVwZGF0ZVNpemUgY2FsbHMgc2V0U2l6ZSwgc28gbm8gbmVlZCB0byBjYWxsIHRoaXMucmVuZGVyXG4gICAgICAgIC8vIG91cnNlbHZlcyBoZXJlLlxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVRpbGVDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVZpZXdDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0U2l6ZV8oKTtcbiAgICAgICAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbGlzdGVuKHZpZXcsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4odmlldywgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXywgdGhpcyk7XG4gICAgICAgICAgICB2aWV3LnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXykge1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXllckdyb3VwID0gdGhpcy5nZXRMYXllckdyb3VwKCk7XG4gICAgICAgIGlmIChsYXllckdyb3VwKSB7XG4gICAgICAgICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18gPSBbXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyR3JvdXAsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5yZW5kZXIsIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllckdyb3VwLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLnJlbmRlciwgdGhpcyksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmlzUmVuZGVyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZnJhbWVTdGF0ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0cyBhbiBpbW1lZGlhdGUgcmVuZGVyIGluIGEgc3luY2hyb25vdXMgbWFubmVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlclN5bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xykge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheUtleV8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWRyYXdzIGFsbCB0ZXh0IGFmdGVyIG5ldyBmb250cyBoYXZlIGxvYWRlZFxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVkcmF3VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJTdGF0ZXNBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlc1tpXS5sYXllcjtcbiAgICAgICAgICAgIGlmIChsYXllci5oYXNSZW5kZXJlcigpKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIuZ2V0UmVuZGVyZXIoKS5oYW5kbGVGb250c0NoYW5nZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVxdWVzdCBhIG1hcCByZW5kZXJpbmcgKGF0IHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZSkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlcl8gJiYgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheV8pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNvbnRyb2wgZnJvbSB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBjb250cm9sIChvciB1bmRlZmluZWRcbiAgICAgKiAgICAgaWYgdGhlIGNvbnRyb2wgd2FzIG5vdCBmb3VuZCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlQ29udHJvbCA9IGZ1bmN0aW9uIChjb250cm9sKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbnRyb2xzKCkucmVtb3ZlKGNvbnRyb2wpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBnaXZlbiBpbnRlcmFjdGlvbiBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBpbnRlcmFjdGlvbiAob3JcbiAgICAgKiAgICAgdW5kZWZpbmVkIGlmIHRoZSBpbnRlcmFjdGlvbiB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5yZW1vdmUoaW50ZXJhY3Rpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gbGF5ZXIgZnJvbSB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgbGF5ZXIgKG9yIHVuZGVmaW5lZCBpZiB0aGVcbiAgICAgKiAgICAgbGF5ZXIgd2FzIG5vdCBmb3VuZCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICAgICAgICByZXR1cm4gbGF5ZXJzLnJlbW92ZShsYXllcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIG92ZXJsYXkgZnJvbSB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIG92ZXJsYXkgKG9yIHVuZGVmaW5lZFxuICAgICAqICAgICBpZiB0aGUgb3ZlcmxheSB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVPdmVybGF5ID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3ZlcmxheXMoKS5yZW1vdmUob3ZlcmxheSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBUaW1lLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXJGcmFtZV8gPSBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICB2YXIgcHJldmlvdXNGcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgLyoqIEB0eXBlIHs/RnJhbWVTdGF0ZX0gKi9cbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBudWxsO1xuICAgICAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkICYmIGhhc0FyZWEoc2l6ZSkgJiYgdmlldyAmJiB2aWV3LmlzRGVmKCkpIHtcbiAgICAgICAgICAgIHZhciB2aWV3SGludHMgPSB2aWV3LmdldEhpbnRzKHRoaXMuZnJhbWVTdGF0ZV8gPyB0aGlzLmZyYW1lU3RhdGVfLnZpZXdIaW50cyA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB2YXIgdmlld1N0YXRlID0gdmlldy5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgZnJhbWVTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBhbmltYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTogdGhpcy5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8sXG4gICAgICAgICAgICAgICAgZGVjbHV0dGVyVHJlZTogbnVsbCxcbiAgICAgICAgICAgICAgICBleHRlbnQ6IGdldEZvclZpZXdBbmRTaXplKHZpZXdTdGF0ZS5jZW50ZXIsIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCB2aWV3U3RhdGUucm90YXRpb24sIHNpemUpLFxuICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmZyYW1lSW5kZXhfKyssXG4gICAgICAgICAgICAgICAgbGF5ZXJJbmRleDogMCxcbiAgICAgICAgICAgICAgICBsYXllclN0YXRlc0FycmF5OiB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCksXG4gICAgICAgICAgICAgICAgcGl4ZWxSYXRpbzogdGhpcy5waXhlbFJhdGlvXyxcbiAgICAgICAgICAgICAgICBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTogdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8sXG4gICAgICAgICAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uczogW10sXG4gICAgICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgICAgICB0aWxlUXVldWU6IHRoaXMudGlsZVF1ZXVlXyxcbiAgICAgICAgICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICAgICAgICAgIHVzZWRUaWxlczoge30sXG4gICAgICAgICAgICAgICAgdmlld1N0YXRlOiB2aWV3U3RhdGUsXG4gICAgICAgICAgICAgICAgdmlld0hpbnRzOiB2aWV3SGludHMsXG4gICAgICAgICAgICAgICAgd2FudGVkVGlsZXM6IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lU3RhdGVfID0gZnJhbWVTdGF0ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlcl8ucmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZS5hbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18sIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucyk7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNGcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vdmVTdGFydCA9ICF0aGlzLnByZXZpb3VzRXh0ZW50XyB8fFxuICAgICAgICAgICAgICAgICAgICAoIWlzRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhZXF1YWxzKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50XykpO1xuICAgICAgICAgICAgICAgIGlmIChtb3ZlU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRVNUQVJULCB0aGlzLCBwcmV2aW91c0ZyYW1lU3RhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0V4dGVudF8gPSBjcmVhdGVPclVwZGF0ZUVtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWRsZSA9IHRoaXMucHJldmlvdXNFeHRlbnRfICYmXG4gICAgICAgICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gJiZcbiAgICAgICAgICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddICYmXG4gICAgICAgICAgICAgICAgIWVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICAgICAgaWYgKGlkbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFRU5ELCB0aGlzLCBmcmFtZVN0YXRlKSk7XG4gICAgICAgICAgICAgICAgY2xvbmUoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLCBmcmFtZVN0YXRlKSk7XG4gICAgICAgIGlmICghdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8pIHtcbiAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZVBvc3RSZW5kZXIoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsYXllcmdyb3VwIG9mIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7TGF5ZXJHcm91cH0gbGF5ZXJHcm91cCBBIGxheWVyIGdyb3VwIGNvbnRhaW5pbmcgdGhlIGxheWVycyBpbiB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldExheWVyR3JvdXAgPSBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5MQVlFUkdST1VQLCBsYXllckdyb3VwKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2l6ZSBvZiB0aGlzIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gc2l6ZSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlNJWkUsIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0YXJnZXQgZWxlbWVudCB0byByZW5kZXIgdGhpcyBtYXAgaW50by5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gVGhlIEVsZW1lbnQgb3IgaWQgb2YgdGhlIEVsZW1lbnRcbiAgICAgKiAgICAgdGhhdCB0aGUgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5UQVJHRVQsIHRhcmdldCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZpZXcgZm9yIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7Vmlld30gdmlldyBUaGUgdmlldyB0aGF0IGNvbnRyb2xzIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0VmlldyA9IGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlZJRVcsIHZpZXcpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRm9yY2UgYSByZWNhbGN1bGF0aW9uIG9mIHRoZSBtYXAgdmlld3BvcnQgc2l6ZS4gIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCB3aGVuXG4gICAgICogdGhpcmQtcGFydHkgY29kZSBjaGFuZ2VzIHRoZSBzaXplIG9mIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUudXBkYXRlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICAgICAgdmFyIHNpemUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0RWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckxlZnRXaWR0aCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nTGVmdCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nUmlnaHQnXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyUmlnaHRXaWR0aCddKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJUb3BXaWR0aCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nVG9wJ10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdCb3R0b20nXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyQm90dG9tV2lkdGgnXSk7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHdpZHRoKSAmJiAhaXNOYU4oaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSBbd2lkdGgsIGhlaWdodF07XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNBcmVhKHNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyBtYXAgdmlzaWJsZSBiZWNhdXNlIHRoZSBtYXAgY29udGFpbmVyJ3Mgd2lkdGggb3IgaGVpZ2h0IGFyZSAwLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTaXplKHNpemUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0U2l6ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlY29tcHV0ZXMgdGhlIHZpZXdwb3J0IHNpemUgYW5kIHNhdmUgaXQgb24gdGhlIHZpZXcgb2JqZWN0IChpZiBhbnkpXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnVwZGF0ZVZpZXdwb3J0U2l6ZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZS53aWR0aCAmJiBjb21wdXRlZFN0eWxlLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNpemUgPSBbXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGNvbXB1dGVkU3R5bGUud2lkdGgsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5oZWlnaHQsIDEwKSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmlldy5zZXRWaWV3cG9ydFNpemUoc2l6ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQbHVnZ2FibGVNYXA7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogQHBhcmFtIHtNYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICogQHJldHVybiB7TWFwT3B0aW9uc0ludGVybmFsfSBJbnRlcm5hbCBtYXAgb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlT3B0aW9uc0ludGVybmFsKG9wdGlvbnMpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9XG4gICAgICovXG4gICAgdmFyIGtleWJvYXJkRXZlbnRUYXJnZXQgPSBudWxsO1xuICAgIGlmIChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBrZXlib2FyZEV2ZW50VGFyZ2V0ID1cbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQpXG4gICAgICAgICAgICAgICAgOiBvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgKi9cbiAgICB2YXIgdmFsdWVzID0ge307XG4gICAgdmFyIGxheWVyR3JvdXAgPSBvcHRpb25zLmxheWVycyAmJlxuICAgICAgICB0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMubGF5ZXJzKS5nZXRMYXllcnMpID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAob3B0aW9ucy5sYXllcnMpXG4gICAgICAgIDogbmV3IExheWVyR3JvdXAoeyBsYXllcnM6IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMubGF5ZXJzKSB9KTtcbiAgICB2YWx1ZXNbTWFwUHJvcGVydHkuTEFZRVJHUk9VUF0gPSBsYXllckdyb3VwO1xuICAgIHZhbHVlc1tNYXBQcm9wZXJ0eS5UQVJHRVRdID0gb3B0aW9ucy50YXJnZXQ7XG4gICAgdmFsdWVzW01hcFByb3BlcnR5LlZJRVddID1cbiAgICAgICAgb3B0aW9ucy52aWV3ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnZpZXcgOiBuZXcgVmlldygpO1xuICAgIHZhciBjb250cm9scztcbiAgICBpZiAob3B0aW9ucy5jb250cm9scyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuY29udHJvbHMpKSB7XG4gICAgICAgICAgICBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMuY29udHJvbHMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLmNvbnRyb2xzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsIDQ3KTsgLy8gRXhwZWN0ZWQgYGNvbnRyb2xzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICAgICAgICBjb250cm9scyA9IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMuY29udHJvbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBpbnRlcmFjdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMuaW50ZXJhY3Rpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5pbnRlcmFjdGlvbnMpKSB7XG4gICAgICAgICAgICBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmludGVyYWN0aW9ucy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMuaW50ZXJhY3Rpb25zKS5nZXRBcnJheSkgPT09XG4gICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJywgNDgpOyAvLyBFeHBlY3RlZCBgaW50ZXJhY3Rpb25zYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICAgICAgICBpbnRlcmFjdGlvbnMgPSAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmludGVyYWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIG92ZXJsYXlzO1xuICAgIGlmIChvcHRpb25zLm92ZXJsYXlzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5vdmVybGF5cykpIHtcbiAgICAgICAgICAgIG92ZXJsYXlzID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5vdmVybGF5cy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMub3ZlcmxheXMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJywgNDkpOyAvLyBFeHBlY3RlZCBgb3ZlcmxheXNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIG92ZXJsYXlzID0gb3B0aW9ucy5vdmVybGF5cztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb250cm9sczogY29udHJvbHMsXG4gICAgICAgIGludGVyYWN0aW9uczogaW50ZXJhY3Rpb25zLFxuICAgICAgICBrZXlib2FyZEV2ZW50VGFyZ2V0OiBrZXlib2FyZEV2ZW50VGFyZ2V0LFxuICAgICAgICBvdmVybGF5czogb3ZlcmxheXMsXG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgIH07XG59XG5leHBvcnQgZGVmYXVsdCBQbHVnZ2FibGVNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QbHVnZ2FibGVNYXAuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0NvbnRyb2xcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi4vTWFwRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHJlbW92ZU5vZGUgfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBbZWxlbWVudF0gVGhlIGVsZW1lbnQgaXMgdGhlIGNvbnRyb2wnc1xuICogY29udGFpbmVyIGVsZW1lbnQuIFRoaXMgb25seSBuZWVkcyB0byBiZSBzcGVjaWZpZWQgaWYgeW91J3JlIGRldmVsb3BpbmdcbiAqIGEgY3VzdG9tIGNvbnRyb2wuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuXG4gKiB0aGUgY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnRcbiAqIHRoZSBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCBpcyBhIHZpc2libGUgd2lkZ2V0IHdpdGggYSBET00gZWxlbWVudCBpbiBhIGZpeGVkIHBvc2l0aW9uIG9uIHRoZVxuICogc2NyZWVuLiBUaGV5IGNhbiBpbnZvbHZlIHVzZXIgaW5wdXQgKGJ1dHRvbnMpLCBvciBiZSBpbmZvcm1hdGlvbmFsIG9ubHk7XG4gKiB0aGUgcG9zaXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyBDU1MuIEJ5IGRlZmF1bHQgdGhlc2UgYXJlIHBsYWNlZCBpbiB0aGVcbiAqIGNvbnRhaW5lciB3aXRoIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAsIGJ1dCBjYW4gdXNlXG4gKiBhbnkgb3V0c2lkZSBET00gZWxlbWVudC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBjb250cm9scy4gWW91IGNhbiB1c2UgaXQgZm9yIHNpbXBsZSBjdXN0b21cbiAqIGNvbnRyb2xzIGJ5IGNyZWF0aW5nIHRoZSBlbGVtZW50IHdpdGggbGlzdGVuZXJzLCBjcmVhdGluZyBhbiBpbnN0YW5jZTpcbiAqIGBgYGpzXG4gKiB2YXIgbXlDb250cm9sID0gbmV3IENvbnRyb2woe2VsZW1lbnQ6IG15RWxlbWVudH0pO1xuICogYGBgXG4gKiBhbmQgdGhlbiBhZGRpbmcgdGhpcyB0byB0aGUgbWFwLlxuICpcbiAqIFRoZSBtYWluIGFkdmFudGFnZSBvZiBoYXZpbmcgdGhpcyBhcyBhIGNvbnRyb2wgcmF0aGVyIHRoYW4gYSBzaW1wbGUgc2VwYXJhdGVcbiAqIERPTSBlbGVtZW50IGlzIHRoYXQgcHJldmVudGluZyBwcm9wYWdhdGlvbiBpcyBoYW5kbGVkIGZvciB5b3UuIENvbnRyb2xzXG4gKiB3aWxsIGFsc28gYmUgb2JqZWN0cyBpbiBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSwgc28geW91IGNhbiB1c2UgdGhlaXIgbWV0aG9kcy5cbiAqXG4gKiBZb3UgY2FuIGFsc28gZXh0ZW5kIHRoaXMgYmFzZSBmb3IgeW91ciBvd24gY29udHJvbCBjbGFzcy4gU2VlXG4gKiBleGFtcGxlcy9jdXN0b20tY29udHJvbHMgZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGRvIHRoaXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQ29udHJvbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29udHJvbCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgQ29udHJvbCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbnRyb2wob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgIW9wdGlvbnMudGFyZ2V0ICYmICFlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudCA/IGVsZW1lbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyS2V5cyA9IFtdO1xuICAgICAgICBpZiAob3B0aW9ucy5yZW5kZXIpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0VGFyZ2V0KG9wdGlvbnMudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY29udHJvbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICAgKiB0aGUgbWFwIGhlcmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmxpc3RlbmVyS2V5c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXRfXG4gICAgICAgICAgICAgICAgPyB0aGlzLnRhcmdldF9cbiAgICAgICAgICAgICAgICA6IG1hcC5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50KCk7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlciAhPT0gVk9JRCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzLnB1c2gobGlzdGVuKG1hcCwgTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMucmVuZGVyLCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIGNvbnRyb2wuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtYXBFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBzZXQgYSB0YXJnZXQgZWxlbWVudCBmb3IgdGhlIGNvbnRyb2wuIEl0IGhhcyBub1xuICAgICAqIGVmZmVjdCBpZiBpdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGNvbnRyb2wgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIG1hcCAoaS5lLlxuICAgICAqIGFmdGVyIGBzZXRNYXBgIGlzIGNhbGxlZCBvbiB0aGUgY29udHJvbCkuIElmIG5vIGB0YXJnZXRgIGlzIHNldCBpbiB0aGVcbiAgICAgKiBvcHRpb25zIHBhc3NlZCB0byB0aGUgY29udHJvbCBjb25zdHJ1Y3RvciBhbmQgaWYgYHNldFRhcmdldGAgaXMgbm90IGNhbGxlZFxuICAgICAqIHRoZW4gdGhlIGNvbnRyb2wgaXMgYWRkZWQgdG8gdGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSB0YXJnZXQgVGFyZ2V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0XyA9XG4gICAgICAgICAgICB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29udHJvbDtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQ29udHJvbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnRyb2wuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0F0dHJpYnV0aW9uXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfQ09MTEFQU0VELCBDTEFTU19DT05UUk9MLCBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgaW5WaWV3IH0gZnJvbSAnLi4vbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IHsgcmVtb3ZlQ2hpbGRyZW4sIHJlcGxhY2VOb2RlIH0gZnJvbSAnLi4vZG9tLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWF0dHJpYnV0aW9uJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3VcbiAqIHdhbnQgdGhlIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3NcbiAqIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29sbGFwc2libGVdIFNwZWNpZnkgaWYgYXR0cmlidXRpb25zIGNhblxuICogYmUgY29sbGFwc2VkLiBJZiBub3Qgc3BlY2lmaWVkLCBzb3VyY2VzIGNvbnRyb2wgdGhpcyBiZWhhdmlvciB3aXRoIHRoZWlyXG4gKiBgYXR0cmlidXRpb25zQ29sbGFwc2libGVgIHNldHRpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb2xsYXBzZWQ9dHJ1ZV0gU3BlY2lmeSBpZiBhdHRyaWJ1dGlvbnMgc2hvdWxkXG4gKiBiZSBjb2xsYXBzZWQgYXQgc3RhcnR1cC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J0F0dHJpYnV0aW9ucyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbGFiZWw9J2knXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlXG4gKiBjb2xsYXBzZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtleHBhbmRDbGFzc05hbWU9Y2xhc3NOYW1lICsgJy1leHBhbmQnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlXG4gKiBjb2xsYXBzZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbY29sbGFwc2VMYWJlbD0nwrsnXSBUZXh0IGxhYmVsIHRvIHVzZVxuICogZm9yIHRoZSBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NvbGxhcHNlQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctY29sbGFwc2UnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlXG4gKiBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDb250cm9sIHRvIHNob3cgYWxsIHRoZSBhdHRyaWJ1dGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBsYXllciBzb3VyY2VzXG4gKiBpbiB0aGUgbWFwLiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIGluY2x1ZGVkIGluIG1hcHMuXG4gKiBCeSBkZWZhdWx0IGl0IHdpbGwgc2hvdyBpbiB0aGUgYm90dG9tIHJpZ2h0IHBvcnRpb24gb2YgdGhlIG1hcCwgYnV0IHRoaXMgY2FuXG4gKiBiZSBjaGFuZ2VkIGJ5IHVzaW5nIGEgY3NzIHNlbGVjdG9yIGZvciBgLm9sLWF0dHJpYnV0aW9uYC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBBdHRyaWJ1dGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXR0cmlidXRpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIEF0dHJpYnV0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXR0cmlidXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVsRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2xsYXBzZWRfID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29sbGFwc2VkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlZCA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVzZXJDb2xsYXBzZWRfID0gX3RoaXMuY29sbGFwc2VkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcnJpZGVDb2xsYXBzaWJsZV8gPSBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbGxhcHNpYmxlXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNpYmxlIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFfdGhpcy5jb2xsYXBzaWJsZV8pIHtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlZF8gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLWF0dHJpYnV0aW9uJztcbiAgICAgICAgdmFyIHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aXBMYWJlbCA6ICdBdHRyaWJ1dGlvbnMnO1xuICAgICAgICB2YXIgZXhwYW5kQ2xhc3NOYW1lID0gb3B0aW9ucy5leHBhbmRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmV4cGFuZENsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWV4cGFuZCc7XG4gICAgICAgIHZhciBjb2xsYXBzZUxhYmVsID0gb3B0aW9ucy5jb2xsYXBzZUxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlTGFiZWwgOiAnXFx1MDBCQic7XG4gICAgICAgIHZhciBjb2xsYXBzZUNsYXNzTmFtZSA9IG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbGxhcHNlQ2xhc3NOYW1lXG4gICAgICAgICAgICA6IGNsYXNzTmFtZSArICctY29sbHBhc2UnO1xuICAgICAgICBpZiAodHlwZW9mIGNvbGxhcHNlTGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8udGV4dENvbnRlbnQgPSBjb2xsYXBzZUxhYmVsO1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8uY2xhc3NOYW1lID0gY29sbGFwc2VDbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGNvbGxhcHNlTGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdpJztcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gZXhwYW5kQ2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFjdGl2ZUxhYmVsID0gX3RoaXMuY29sbGFwc2libGVfICYmICFfdGhpcy5jb2xsYXBzZWRfID8gX3RoaXMuY29sbGFwc2VMYWJlbF8gOiBfdGhpcy5sYWJlbF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFN0cmluZyghX3RoaXMuY29sbGFwc2VkXykpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8uYXBwZW5kQ2hpbGQoYWN0aXZlTGFiZWwpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcyksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIENMQVNTX1VOU0VMRUNUQUJMRSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgQ0xBU1NfQ09OVFJPTCArXG4gICAgICAgICAgICAoX3RoaXMuY29sbGFwc2VkXyAmJiBfdGhpcy5jb2xsYXBzaWJsZV8gPyAnICcgKyBDTEFTU19DT0xMQVBTRUQgOiAnJykgK1xuICAgICAgICAgICAgKF90aGlzLmNvbGxhcHNpYmxlXyA/ICcnIDogJyBvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnRvZ2dsZUJ1dHRvbl8pO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnVsRWxlbWVudF8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIGN1cnJlbnRseSByZW5kZXJlZCByZXNvbHV0aW9ucy5cbiAgICAgICAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29sbGVjdCBhIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMgYW5kIHNldCB0aGUgY29sbGFwc2libGUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBdHRyaWJ1dGlvbnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18gPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBkZXRlcm1pbmUgaWYgYW4gYXR0cmlidXRpb24gYWxyZWFkeSBleGlzdHMuXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgbG9va3VwID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHZpc2libGVBdHRyaWJ1dGlvbnMgPSBbXTtcbiAgICAgICAgdmFyIGNvbGxhcHNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgICAgICAgaWYgKCFpblZpZXcobGF5ZXJTdGF0ZSwgZnJhbWVTdGF0ZS52aWV3U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXJTdGF0ZS5sYXllcikuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF0dHJpYnV0aW9uR2V0dGVyID0gc291cmNlLmdldEF0dHJpYnV0aW9ucygpO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGlvbkdldHRlcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF0dHJpYnV0aW9ucyA9IGF0dHJpYnV0aW9uR2V0dGVyKGZyYW1lU3RhdGUpO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbGxhcHNpYmxlID1cbiAgICAgICAgICAgICAgICBjb2xsYXBzaWJsZSAmJiBzb3VyY2UuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUoKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zW2pdIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwW2F0dHJpYnV0aW9uc1tqXV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUF0dHJpYnV0aW9ucy5wdXNoKGF0dHJpYnV0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFthdHRyaWJ1dGlvbnNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbGxhcHNpYmxlKGNvbGxhcHNpYmxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlzaWJsZUF0dHJpYnV0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnVwZGF0ZUVsZW1lbnRfID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGF0dHJpYnV0aW9ucyA9IHRoaXMuY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18oZnJhbWVTdGF0ZSk7XG4gICAgICAgIHZhciB2aXNpYmxlID0gYXR0cmlidXRpb25zLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8gIT0gdmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB2aXNpYmxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcXVhbHMoYXR0cmlidXRpb25zLCB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZW1vdmVDaGlsZHJlbih0aGlzLnVsRWxlbWVudF8pO1xuICAgICAgICAvLyBhcHBlbmQgdGhlIGF0dHJpYnV0aW9uc1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBhdHRyaWJ1dGlvbnNbaV07XG4gICAgICAgICAgICB0aGlzLnVsRWxlbWVudF8uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBhdHRyaWJ1dGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgICAgIHRoaXMudXNlckNvbGxhcHNlZF8gPSB0aGlzLmNvbGxhcHNlZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVUb2dnbGVfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShDTEFTU19DT0xMQVBTRUQpO1xuICAgICAgICBpZiAodGhpcy5jb2xsYXBzZWRfKSB7XG4gICAgICAgICAgICByZXBsYWNlTm9kZSh0aGlzLmNvbGxhcHNlTGFiZWxfLCB0aGlzLmxhYmVsXyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXBsYWNlTm9kZSh0aGlzLmxhYmVsXywgdGhpcy5jb2xsYXBzZUxhYmVsXyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2xsYXBzZWRfID0gIXRoaXMuY29sbGFwc2VkXztcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25fLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFN0cmluZyghdGhpcy5jb2xsYXBzZWRfKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBhdHRyaWJ1dGlvbiBpcyBjb2xsYXBzaWJsZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuZ2V0Q29sbGFwc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxhcHNpYmxlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSBhdHRyaWJ1dGlvbiBzaG91bGQgYmUgY29sbGFwc2libGUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzaWJsZSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5zZXRDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uIChjb2xsYXBzaWJsZSkge1xuICAgICAgICBpZiAodGhpcy5jb2xsYXBzaWJsZV8gPT09IGNvbGxhcHNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2xsYXBzaWJsZV8gPSBjb2xsYXBzaWJsZTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ29sLXVuY29sbGFwc2libGUnKTtcbiAgICAgICAgaWYgKHRoaXMudXNlckNvbGxhcHNlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb2xsYXBzZSBvciBleHBhbmQgdGhlIGF0dHJpYnV0aW9uIGFjY29yZGluZyB0byB0aGUgcGFzc2VkIHBhcmFtZXRlci4gV2lsbFxuICAgICAqIG5vdCBkbyBhbnl0aGluZyBpZiB0aGUgYXR0cmlidXRpb24gaXNuJ3QgY29sbGFwc2libGUgb3IgaWYgdGhlIGN1cnJlbnRcbiAgICAgKiBjb2xsYXBzZWQgc3RhdGUgaXMgYWxyZWFkeSB0aGUgb25lIHJlcXVlc3RlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNlZCBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuc2V0Q29sbGFwc2VkID0gZnVuY3Rpb24gKGNvbGxhcHNlZCkge1xuICAgICAgICB0aGlzLnVzZXJDb2xsYXBzZWRfID0gY29sbGFwc2VkO1xuICAgICAgICBpZiAoIXRoaXMuY29sbGFwc2libGVfIHx8IHRoaXMuY29sbGFwc2VkXyA9PT0gY29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYHRydWVgIHdoZW4gdGhlIGF0dHJpYnV0aW9uIGlzIGN1cnJlbnRseSBjb2xsYXBzZWQgb3IgYGZhbHNlYFxuICAgICAqIG90aGVyd2lzZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuZ2V0Q29sbGFwc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzZWRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBhdHRyaWJ1dGlvbiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50XyhtYXBFdmVudC5mcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBBdHRyaWJ1dGlvbjtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgQXR0cmlidXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdHRyaWJ1dGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvUm90YXRlXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfSElEREVOLCBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1yb3RhdGUnXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbbGFiZWw9J+KHpyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgcm90YXRlIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXBMYWJlbD0nUmVzZXQgcm90YXRpb24nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NvbXBhc3NDbGFzc05hbWU9J29sLWNvbXBhc3MnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlIGNvbXBhc3MuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F1dG9IaWRlPXRydWVdIEhpZGUgdGhlIGNvbnRyb2wgd2hlbiByb3RhdGlvbiBpcyAwLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgY29udHJvbCBzaG91bGRcbiAqIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgIGNhbGxiYWNrLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbigpOnZvaWR9IFtyZXNldE5vcnRoXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgY29udHJvbCBpcyBjbGlja2VkLlxuICogVGhpcyB3aWxsIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGByZXNldE5vcnRoYC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZSBjb250cm9sIHRvIGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGJ1dHRvbiBjb250cm9sIHRvIHJlc2V0IHJvdGF0aW9uIHRvIDAuXG4gKiBUbyBzdHlsZSB0aGlzIGNvbnRyb2wgdXNlIGNzcyBzZWxlY3RvciBgLm9sLXJvdGF0ZWAuIEEgYC5vbC1oaWRkZW5gIGNzc1xuICogc2VsZWN0b3IgaXMgYWRkZWQgdG8gdGhlIGJ1dHRvbiB3aGVuIHRoZSByb3RhdGlvbiBpcyAwLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFJvdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUm90YXRlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBSb3RhdGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1yb3RhdGUnO1xuICAgICAgICB2YXIgbGFiZWwgPSBvcHRpb25zLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxhYmVsIDogJ1xcdTIxRTcnO1xuICAgICAgICB2YXIgY29tcGFzc0NsYXNzTmFtZSA9IG9wdGlvbnMuY29tcGFzc0NsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuY29tcGFzc0NsYXNzTmFtZVxuICAgICAgICAgICAgOiAnb2wtY29tcGFzcyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYWJlbF8gPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIGxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLmNsYXNzTmFtZSA9IGNvbXBhc3NDbGFzc05hbWU7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLmNsYXNzTGlzdC5hZGQoY29tcGFzc0NsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnUmVzZXQgcm90YXRpb24nO1xuICAgICAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnLXJlc2V0JztcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChfdGhpcy5sYWJlbF8pO1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzKSwgZmFsc2UpO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IGNsYXNzTmFtZSArICcgJyArIENMQVNTX1VOU0VMRUNUQUJMRSArICcgJyArIENMQVNTX0NPTlRST0w7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgIF90aGlzLmNhbGxSZXNldE5vcnRoXyA9IG9wdGlvbnMucmVzZXROb3J0aCA/IG9wdGlvbnMucmVzZXROb3J0aCA6IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hdXRvSGlkZV8gPSBvcHRpb25zLmF1dG9IaWRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF1dG9IaWRlIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpb25fID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoX3RoaXMuYXV0b0hpZGVfKSB7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUm90YXRlLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMuY2FsbFJlc2V0Tm9ydGhfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbFJlc2V0Tm9ydGhfKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0Tm9ydGhfKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUm90YXRlLnByb3RvdHlwZS5yZXNldE5vcnRoXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKCF2aWV3KSB7XG4gICAgICAgICAgICAvLyB0aGUgbWFwIGRvZXMgbm90IGhhdmUgYSB2aWV3LCBzbyB3ZSBjYW4ndCBhY3RcbiAgICAgICAgICAgIC8vIHVwb24gaXRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm90YXRpb24gPSB2aWV3LmdldFJvdGF0aW9uKCk7XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPiAwICYmIHJvdGF0aW9uICUgKDIgKiBNYXRoLlBJKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0Um90YXRpb24oMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcm90YXRlIGNvbnRyb2wgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBSb3RhdGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtYXBFdmVudCkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IG1hcEV2ZW50LmZyYW1lU3RhdGU7XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgICBpZiAocm90YXRpb24gIT0gdGhpcy5yb3RhdGlvbl8pIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSAncm90YXRlKCcgKyByb3RhdGlvbiArICdyYWQpJztcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9IaWRlXykge1xuICAgICAgICAgICAgICAgIHZhciBjb250YWlucyA9IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5zICYmIHJvdGF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5zICYmIHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYWJlbF8uc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm90YXRpb25fID0gcm90YXRpb247XG4gICAgfTtcbiAgICByZXR1cm4gUm90YXRlO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBSb3RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Sb3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1pvb21cbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19DT05UUk9MLCBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLXpvb20nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbUluQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctaW4nXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlIHpvb20taW4gYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tT3V0Q2xhc3NOYW1lPWNsYXNzTmFtZSArICctb3V0J10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSB6b29tLW91dCBidXR0b24uXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW3pvb21JbkxhYmVsPScrJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSB6b29tLWluXG4gKiBidXR0b24uIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tT3V0TGFiZWw9Jy0nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHpvb20tb3V0IGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tSW5UaXBMYWJlbD0nWm9vbSBpbiddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dFRpcExhYmVsPSdab29tIG91dCddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGNsaWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCB3aXRoIDIgYnV0dG9ucywgb25lIGZvciB6b29tIGluIGFuZCBvbmUgZm9yIHpvb20gb3V0LlxuICogVGhpcyBjb250cm9sIGlzIG9uZSBvZiB0aGUgZGVmYXVsdCBjb250cm9scyBvZiBhIG1hcC4gVG8gc3R5bGUgdGhpcyBjb250cm9sXG4gKiB1c2UgY3NzIHNlbGVjdG9ycyBgLm9sLXpvb20taW5gIGFuZCBgLm9sLXpvb20tb3V0YC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBab29tIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtem9vbSc7XG4gICAgICAgIHZhciBkZWx0YSA9IG9wdGlvbnMuZGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuICAgICAgICB2YXIgem9vbUluQ2xhc3NOYW1lID0gb3B0aW9ucy56b29tSW5DbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21JbkNsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWluJztcbiAgICAgICAgdmFyIHpvb21PdXRDbGFzc05hbWUgPSBvcHRpb25zLnpvb21PdXRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21PdXRDbGFzc05hbWVcbiAgICAgICAgICAgIDogY2xhc3NOYW1lICsgJy1vdXQnO1xuICAgICAgICB2YXIgem9vbUluTGFiZWwgPSBvcHRpb25zLnpvb21JbkxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21JbkxhYmVsIDogJysnO1xuICAgICAgICB2YXIgem9vbU91dExhYmVsID0gb3B0aW9ucy56b29tT3V0TGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbU91dExhYmVsIDogJ1xcdTIyMTInO1xuICAgICAgICB2YXIgem9vbUluVGlwTGFiZWwgPSBvcHRpb25zLnpvb21JblRpcExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21JblRpcExhYmVsIDogJ1pvb20gaW4nO1xuICAgICAgICB2YXIgem9vbU91dFRpcExhYmVsID0gb3B0aW9ucy56b29tT3V0VGlwTGFiZWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21PdXRUaXBMYWJlbFxuICAgICAgICAgICAgOiAnWm9vbSBvdXQnO1xuICAgICAgICB2YXIgaW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGluRWxlbWVudC5jbGFzc05hbWUgPSB6b29tSW5DbGFzc05hbWU7XG4gICAgICAgIGluRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIGluRWxlbWVudC50aXRsZSA9IHpvb21JblRpcExhYmVsO1xuICAgICAgICBpbkVsZW1lbnQuYXBwZW5kQ2hpbGQodHlwZW9mIHpvb21JbkxhYmVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tSW5MYWJlbClcbiAgICAgICAgICAgIDogem9vbUluTGFiZWwpO1xuICAgICAgICBpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzLCBkZWx0YSksIGZhbHNlKTtcbiAgICAgICAgdmFyIG91dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgb3V0RWxlbWVudC5jbGFzc05hbWUgPSB6b29tT3V0Q2xhc3NOYW1lO1xuICAgICAgICBvdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgb3V0RWxlbWVudC50aXRsZSA9IHpvb21PdXRUaXBMYWJlbDtcbiAgICAgICAgb3V0RWxlbWVudC5hcHBlbmRDaGlsZCh0eXBlb2Ygem9vbU91dExhYmVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tT3V0TGFiZWwpXG4gICAgICAgICAgICA6IHpvb21PdXRMYWJlbCk7XG4gICAgICAgIG91dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzLCAtZGVsdGEpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50O1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5FbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvdXRFbGVtZW50KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgWm9vbS5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGRlbHRhLCBldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnpvb21CeURlbHRhXyhkZWx0YSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgWm9vbSBkZWx0YS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFpvb20ucHJvdG90eXBlLnpvb21CeURlbHRhXyA9IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgICAgICAgLy8gdXBvbiBpdFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgICAgICBpZiAoY3VycmVudFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG5ld1pvb20gPSB2aWV3LmdldENvbnN0cmFpbmVkWm9vbShjdXJyZW50Wm9vbSArIGRlbHRhKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgem9vbTogbmV3Wm9vbSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3LnNldFpvb20obmV3Wm9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBab29tO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Wm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQUNUSVZFOiAnYWN0aXZlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb25Qcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IGVhc2VPdXQsIGxpbmVhciB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIFJldHVybj59IEludGVyYWN0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBPYmplY3QgbGl0ZXJhbCB3aXRoIGNvbmZpZyBvcHRpb25zIGZvciBpbnRlcmFjdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBJbnRlcmFjdGlvbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IGhhbmRsZUV2ZW50XG4gKiBNZXRob2QgY2FsbGVkIGJ5IHRoZSBtYXAgdG8gbm90aWZ5IHRoZSBpbnRlcmFjdGlvbiB0aGF0IGEgYnJvd3NlciBldmVudCB3YXNcbiAqIGRpc3BhdGNoZWQgdG8gdGhlIG1hcC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgcHJvcGFnYXRpb24gb2ZcbiAqIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9ucyBjaGFpbiB3aWxsIGJlXG4gKiBwcmV2ZW50ZWQgKHRoaXMgaW5jbHVkZXMgZnVuY3Rpb25zIHdpdGggbm8gZXhwbGljaXQgcmV0dXJuKS4gVGhlIGludGVyYWN0aW9uc1xuICogYXJlIHRyYXZlcnNlZCBpbiByZXZlcnNlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgY29sbGVjdGlvbiBvZiB0aGUgbWFwLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIFVzZXIgYWN0aW9ucyB0aGF0IGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIG1hcC4gU29tZSBhcmUgc2ltaWxhciB0byBjb250cm9scyxcbiAqIGJ1dCBhcmUgbm90IGFzc29jaWF0ZWQgd2l0aCBhIERPTSBlbGVtZW50LlxuICogRm9yIGV4YW1wbGUsIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX0gaXNcbiAqIGZ1bmN0aW9uYWxseSB0aGUgc2FtZSBhcyB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfSwgYnV0IHRyaWdnZXJlZFxuICogYnkgYSBrZXlib2FyZCBldmVudCBub3QgYSBidXR0b24gZWxlbWVudCBldmVudC5cbiAqIEFsdGhvdWdoIGludGVyYWN0aW9ucyBkbyBub3QgaGF2ZSBhIERPTSBlbGVtZW50LCBzb21lIG9mIHRoZW0gZG8gcmVuZGVyXG4gKiB2ZWN0b3JzIGFuZCBzbyBhcmUgdmlzaWJsZSBvbiB0aGUgc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgSW50ZXJhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEludGVyYWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SW50ZXJhY3Rpb25PcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW50ZXJhY3Rpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7SW50ZXJhY3Rpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7SW50ZXJhY3Rpb25PblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICBpZiAob3B0X29wdGlvbnMgJiYgb3B0X29wdGlvbnMuaGFuZGxlRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZUV2ZW50ID0gb3B0X29wdGlvbnMuaGFuZGxlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBudWxsO1xuICAgICAgICBfdGhpcy5zZXRBY3RpdmUodHJ1ZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGludGVyYWN0aW9uIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbnRlcmFjdGlvbiBpcyBhY3RpdmUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW50ZXJhY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWN0aXZhdGUgb3IgZGVhY3RpdmF0ZSB0aGUgaW50ZXJhY3Rpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhY3RpdmUgQWN0aXZlLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRBY3RpdmUgPSBmdW5jdGlvbiAoYWN0aXZlKSB7XG4gICAgICAgIHRoaXMuc2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFLCBhY3RpdmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBpbnRlcmFjdGlvbiBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgICAqIHRoZSBtYXAgaGVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICB9O1xuICAgIHJldHVybiBJbnRlcmFjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFuKHZpZXcsIGRlbHRhLCBvcHRfZHVyYXRpb24pIHtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICBpZiAoY3VycmVudENlbnRlcikge1xuICAgICAgICB2YXIgY2VudGVyID0gW2N1cnJlbnRDZW50ZXJbMF0gKyBkZWx0YVswXSwgY3VycmVudENlbnRlclsxXSArIGRlbHRhWzFdXTtcbiAgICAgICAgdmlldy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2R1cmF0aW9uIDogMjUwLFxuICAgICAgICAgICAgZWFzaW5nOiBsaW5lYXIsXG4gICAgICAgICAgICBjZW50ZXI6IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoY2VudGVyKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhIGZyb20gcHJldmlvdXMgem9vbSBsZXZlbC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gQW5jaG9yIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgICB2YXIgY3VycmVudFpvb20gPSB2aWV3LmdldFpvb20oKTtcbiAgICBpZiAoY3VycmVudFpvb20gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBuZXdab29tID0gdmlldy5nZXRDb25zdHJhaW5lZFpvb20oY3VycmVudFpvb20gKyBkZWx0YSk7XG4gICAgdmFyIG5ld1Jlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3Jab29tKG5ld1pvb20pO1xuICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgICAgICBhbmNob3I6IG9wdF9hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDI1MCxcbiAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlcmFjdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbVxuICovXG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGRvdWJsZSBjbGljay5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSBieSBkb3VibGUtY2xpY2tpbmcgb24gdGhlIG1hcC5cbiAqIEBhcGlcbiAqL1xudmFyIERvdWJsZUNsaWNrWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRG91YmxlQ2xpY2tab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERvdWJsZUNsaWNrWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gKGlmIGl0IHdhcyBhXG4gICAgICogZG91YmxlY2xpY2spIGFuZCBldmVudHVhbGx5IHpvb21zIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKi9cbiAgICBEb3VibGVDbGlja1pvb20ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLKSB7XG4gICAgICAgICAgICB2YXIgYnJvd3NlckV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGU7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBicm93c2VyRXZlbnQuc2hpZnRLZXkgPyAtdGhpcy5kZWx0YV8gOiB0aGlzLmRlbHRhXztcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBhbmNob3IsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgIGJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIHJldHVybiBEb3VibGVDbGlja1pvb207XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEb3VibGVDbGlja1pvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Eb3VibGVDbGlja1pvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qb2ludGVyXG4gKi9cbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgZ2V0VmFsdWVzIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZURvd25FdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZG93blwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIHRoZW4gYSBkcmFnXG4gKiBzZXF1ZW5jZSBpcyBzdGFydGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbaGFuZGxlTW92ZUV2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJtb3ZlXCIgZXZlbnRzLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBcIm1vdmVcIiBldmVudHMuXG4gKiBUaGlzIGZ1bmN0aW9ucyBpcyBhbHNvIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLCBzbyBkdXJpbmcgYSBkcmFnXG4gKiBzZXF1ZW5jZSBib3RoIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCBmdW5jdGlvbiBhbmQgdGhpcyBmdW5jdGlvbiBhcmUgY2FsbGVkLlxuICogSWYgYGhhbmRsZURvd25FdmVudGAgaXMgZGVmaW5lZCBhbmQgaXQgcmV0dXJucyB0cnVlIHRoaXMgZnVuY3Rpb24gd2lsbCBub3RcbiAqIGJlIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgdGhhdCBjYWxscyB1c2VyLWRlZmluZWQgZnVuY3Rpb25zIG9uIGBkb3duYCwgYG1vdmVgIGFuZCBgdXBgXG4gKiBldmVudHMuIFRoaXMgY2xhc3MgYWxzbyBtYW5hZ2VzIFwiZHJhZyBzZXF1ZW5jZXNcIi5cbiAqXG4gKiBXaGVuIHRoZSBgaGFuZGxlRG93bkV2ZW50YCB1c2VyIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGEgZHJhZyBzZXF1ZW5jZSBpc1xuICogc3RhcnRlZC4gRHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSB0aGUgYGhhbmRsZURyYWdFdmVudGAgdXNlciBmdW5jdGlvbiBpc1xuICogY2FsbGVkIG9uIGBtb3ZlYCBldmVudHMuIFRoZSBkcmFnIHNlcXVlbmNlIGVuZHMgd2hlbiB0aGUgYGhhbmRsZVVwRXZlbnRgXG4gKiB1c2VyIGZ1bmN0aW9uIGlzIGNhbGxlZCBhbmQgcmV0dXJucyBgZmFsc2VgLlxuICogQGFwaVxuICovXG52YXIgUG9pbnRlckludGVyYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2ludGVySW50ZXJhY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9pbnRlckludGVyYWN0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vSW50ZXJhY3Rpb24uanNcIikuSW50ZXJhY3Rpb25PcHRpb25zfSAqLyAob3B0aW9ucykpIHx8IHRoaXM7XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZURvd25FdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVEcmFnRXZlbnQgPSBvcHRpb25zLmhhbmRsZURyYWdFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVNb3ZlRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZU1vdmVFdmVudCA9IG9wdGlvbnMuaGFuZGxlTW92ZUV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZVVwRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIF90aGlzLnN0b3BEb3duID0gb3B0aW9ucy5zdG9wRG93bjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgUG9pbnRlckV2ZW50Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrZWRQb2ludGVyc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxQb2ludGVyRXZlbnQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRQb2ludGVycyA9IFtdO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHBvaW50ZXJzIGludm9sdmVkIGluIHRoZSBpbnRlcmFjdGlvbixcbiAgICAgKiBlLmcuIGAyYCB3aGVuIHR3byBmaW5nZXJzIGFyZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBwb2ludGVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRQb2ludGVyQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHsgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gYW5kIG1heSBjYWxsIGludG9cbiAgICAgKiBvdGhlciBmdW5jdGlvbnMsIGlmIGV2ZW50IHNlcXVlbmNlcyBsaWtlIGUuZy4gJ2RyYWcnIG9yICdkb3duLXVwJyBldGMuIGFyZVxuICAgICAqIGRldGVjdGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFja2VkUG9pbnRlcnNfKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIGlmICh0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICAvLyBwcmV2ZW50IHBhZ2Ugc2Nyb2xsaW5nIGR1cmluZyBkcmFnZ2luZ1xuICAgICAgICAgICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkVXAgPSB0aGlzLmhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPVxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVkVXAgJiYgdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlZCA9IHRoaXMuaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlID0gaGFuZGxlZDtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBtb3ZlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlTW92ZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgICAqIHRvIG90aGVyIGludGVyYWN0aW9ucyBvciBzaG91bGQgYmUgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhbmRsZWQgV2FzIHRoZSBldmVudCBoYW5kbGVkIGJ5IHRoZSBpbnRlcmFjdGlvbj9cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuc3RvcERvd24gPSBmdW5jdGlvbiAoaGFuZGxlZCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUudXBkYXRlVHJhY2tlZFBvaW50ZXJzXyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKGlzUG9pbnRlckRyYWdnaW5nRXZlbnQobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICAgIHZhciBpZCA9IGV2ZW50XzEucG9pbnRlcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnRfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlkIGluIHRoaXMudHJhY2tlZFBvaW50ZXJzXykge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBvbmx5IHdoZW4gdGhlcmUgd2FzIGEgcG9pbnRlcmRvd24gZXZlbnQgZm9yIHRoaXMgcG9pbnRlclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXJnZXRQb2ludGVycyA9IGdldFZhbHVlcyh0aGlzLnRyYWNrZWRQb2ludGVyc18pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUG9pbnRlckludGVyYWN0aW9uO1xufShJbnRlcmFjdGlvbikpO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFBvaW50ZXJFdmVudD59IHBvaW50ZXJFdmVudHMgTGlzdCBvZiBldmVudHMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gQ2VudHJvaWQgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjZW50cm9pZChwb2ludGVyRXZlbnRzKSB7XG4gICAgdmFyIGxlbmd0aCA9IHBvaW50ZXJFdmVudHMubGVuZ3RoO1xuICAgIHZhciBjbGllbnRYID0gMDtcbiAgICB2YXIgY2xpZW50WSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjbGllbnRYICs9IHBvaW50ZXJFdmVudHNbaV0uY2xpZW50WDtcbiAgICAgICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gICAgfVxuICAgIHJldHVybiBbY2xpZW50WCAvIGxlbmd0aCwgY2xpZW50WSAvIGxlbmd0aF07XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGV2ZW50IGlzIGEgcG9pbnRlcmRvd24sIHBvaW50ZXJkcmFnXG4gKiAgICAgb3IgcG9pbnRlcnVwIGV2ZW50LlxuICovXG5mdW5jdGlvbiBpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciB0eXBlID0gbWFwQnJvd3NlckV2ZW50LnR5cGU7XG4gICAgcmV0dXJuICh0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOIHx8XG4gICAgICAgIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcgfHxcbiAgICAgICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApO1xufVxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnRlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL2NvbmRpdGlvblxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IEZBTFNFLCBUUlVFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IE1BQywgV0VCS0lUIH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gQ29uZGl0aW9uXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIGNvbmRpdGlvbiBmdW5jdGlvbiB0aGF0IHBhc3NlcyB3aGVuIGFsbCBwcm92aWRlZCBjb25kaXRpb25zIHBhc3MuXG4gKiBAcGFyYW0gey4uLkNvbmRpdGlvbn0gdmFyX2FyZ3MgQ29uZGl0aW9ucyB0byBjaGVjay5cbiAqIEByZXR1cm4ge0NvbmRpdGlvbn0gQ29uZGl0aW9uIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsKHZhcl9hcmdzKSB7XG4gICAgdmFyIGNvbmRpdGlvbnMgPSBhcmd1bWVudHM7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQWxsIGNvbmRpdGlvbnMgcGFzc2VkLlxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHBhc3MgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb25kaXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHBhc3MgPSBwYXNzICYmIGNvbmRpdGlvbnNbaV0oZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhc3M7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlIChlLmcuIHdoZW5cbiAqIGFkZGl0aW9uYWxseSB0aGUgc2hpZnQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAob3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgYW5kIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZVxuICogKGUuZy4gd2hlbiBhZGRpdGlvbmFsbHkgdGhlIHBsYXRmb3JtLW1vZGlmaWVyLWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBhbmQgc2hpZnQga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRTaGlmdEtleXNPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQudGFyZ2V0LmdldFRhcmdldEVsZW1lbnQoKS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlIHNldC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgY29udGFpbmVyIGhhcyB0aGUgZm9jdXMgb3Igbm8gJ3RhYmluZGV4JyBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXNXaXRoVGFiaW5kZXggPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKS5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JylcbiAgICAgICAgPyBmb2N1cyhldmVudClcbiAgICAgICAgOiB0cnVlO1xufTtcbi8qKlxuICogUmV0dXJuIGFsd2F5cyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgYWx3YXlzID0gVFJVRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBgY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFzIGFuIFwiYWN0aW9uXCItcHJvZHVjaW5nIG1vdXNlIGJ1dHRvbi5cbiAqXG4gKiBCeSBkZWZpbml0aW9uLCB0aGlzIGluY2x1ZGVzIGxlZnQtY2xpY2sgb24gd2luZG93cy9saW51eCwgYW5kIGxlZnQtY2xpY2tcbiAqIHdpdGhvdXQgdGhlIGN0cmwga2V5IG9uIE1hY3MuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IHZhciBtb3VzZUFjdGlvbkJ1dHRvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gb3JpZ2luYWxFdmVudC5idXR0b24gPT0gMCAmJiAhKFdFQktJVCAmJiBNQUMgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBhbHdheXMgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gRmFsc2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbmV2ZXIgPSBGQUxTRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQsIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwb2ludGVyTW92ZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gJ3BvaW50ZXJtb3ZlJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xlQ2xpY2sgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGRvdWJsZUNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBubyBtb2RpZmllciBrZXkgKGFsdC0sIHNoaWZ0LSBvciBwbGF0Zm9ybS1tb2RpZmllci1rZXkpIGlzXG4gKiBwcmVzc2VkLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGVyZSBubyBtb2RpZmllciBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5vTW9kaWZpZXJLZXlzID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAoTUFDID8gb3JpZ2luYWxFdmVudC5tZXRhS2V5IDogb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBzaGlmdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGlmdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAoIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBub3QgZWRpdGFibGUsIGkuZS4gbm90IGEgYDxpbnB1dD5gLSxcbiAqIGA8c2VsZWN0PmAtIG9yIGA8dGV4dGFyZWE+YC1lbGVtZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciB0YXJnZXROb3RFZGl0YWJsZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgdmFyIHRhZ05hbWUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChvcmlnaW5hbEV2ZW50LnRhcmdldCkudGFnTmFtZTtcbiAgICByZXR1cm4gdGFnTmFtZSAhPT0gJ0lOUFVUJyAmJiB0YWdOYW1lICE9PSAnU0VMRUNUJyAmJiB0YWdOYW1lICE9PSAnVEVYVEFSRUEnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIG1vdXNlIGRldmljZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBtb3VzZU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdmVudCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LnBvaW50ZXJUeXBlID09ICdtb3VzZSc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSB0b3VjaGFibGUgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHRvdWNoYWJsZSBkZXZpY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgdG91Y2hPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZ0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2dC5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBlbk9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZ0ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gICAgLy8gc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICAgIHJldHVybiBwb2ludGVyRXZ0LnBvaW50ZXJUeXBlID09PSAncGVuJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyNidXR0b24tc3RhdGVzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwcmltYXJ5QWN0aW9uID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZlbnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LmlzUHJpbWFyeSAmJiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmRpdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdQYW5cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWxsLCBmb2N1c1dpdGhUYWJpbmRleCwgbm9Nb2RpZmllcktleXMsIHByaW1hcnlBY3Rpb24sIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7IHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCBzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGUsIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ubm9Nb2RpZmllcktleXN9IGFuZCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ucHJpbWFyeUFjdGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gV2hlbiB0aGUgbWFwJ3MgdGFyZ2V0IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlIHNldCxcbiAqIHRoZSBpbnRlcmFjdGlvbiB3aWxsIG9ubHkgaGFuZGxlIGV2ZW50cyB3aGVuIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vS2luZXRpYy5qc1wiKS5kZWZhdWx0fSBba2luZXRpY10gS2luZXRpYyBpbmVydGlhIHRvIGFwcGx5IHRvIHRoZSBwYW4uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIGJ5IGRyYWdnaW5nIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUGFuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnUGFuLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdQYW4ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgc3RvcERvd246IEZBTFNFLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2luZXRpY18gPSBvcHRpb25zLmtpbmV0aWM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RQb2ludGVyc0NvdW50XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICA/IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICA6IGFsbChub01vZGlmaWVyS2V5cywgcHJpbWFyeUFjdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5vbkZvY3VzT25seVxuICAgICAgICAgICAgPyBhbGwoZm9jdXNXaXRoVGFiaW5kZXgsIGNvbmRpdGlvbilcbiAgICAgICAgICAgIDogY29uZGl0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ub0tpbmV0aWNfID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgICAgICB0aGlzLnBhbm5pbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFyZ2V0UG9pbnRlcnMgPSB0aGlzLnRhcmdldFBvaW50ZXJzO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGlmICh0YXJnZXRQb2ludGVycy5sZW5ndGggPT0gdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy51cGRhdGUoY2VudHJvaWRbMF0sIGNlbnRyb2lkWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RDZW50cm9pZCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWRbMF0gLSBjZW50cm9pZFswXSxcbiAgICAgICAgICAgICAgICAgICAgY2VudHJvaWRbMV0gLSB0aGlzLmxhc3RDZW50cm9pZFsxXSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgICAgICBzY2FsZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICAgICAgICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHZpZXcuYWRqdXN0Q2VudGVySW50ZXJuYWwoZGVsdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgICAgIC8vIGFmdGVyIG9uZSBmaW5nZXIgZG93biwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIGRvd25cbiAgICAgICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IGNlbnRyb2lkO1xuICAgICAgICB0aGlzLmxhc3RQb2ludGVyc0NvdW50XyA9IHRhcmdldFBvaW50ZXJzLmxlbmd0aDtcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUGFuLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ub0tpbmV0aWNfICYmIHRoaXMua2luZXRpY18gJiYgdGhpcy5raW5ldGljXy5lbmQoKSkge1xuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IHRoaXMua2luZXRpY18uZ2V0RGlzdGFuY2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSB0aGlzLmtpbmV0aWNfLmdldEFuZ2xlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVycHggPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGNlbnRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGRlc3QgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKFtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVycHhbMF0gLSBkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgICAgICAgICAgICAgY2VudGVycHhbMV0gLSBkaXN0YW5jZSAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcjogdmlldy5nZXRDb25zdHJhaW5lZENlbnRlcihkZXN0KSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFubmluZ18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbm5pbmdfID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgICAgICAvLyByZXNldCBzbyB3ZSBkb24ndCBvdmVyZXN0aW1hdGUgdGhlIGtpbmV0aWMgZW5lcmd5IGFmdGVyXG4gICAgICAgICAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciB1cCwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIHVwXG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAgICAgICAvLyBzdG9wIGFueSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm8ga2luZXRpYyBhcyBzb29uIGFzIG1vcmUgdGhhbiBvbmUgcG9pbnRlciBvbiB0aGUgc2NyZWVuIGlzXG4gICAgICAgICAgICAvLyBkZXRlY3RlZC4gVGhpcyBpcyB0byBwcmV2ZW50IG5hc3R5IHBhbnMgYWZ0ZXIgcGluY2guXG4gICAgICAgICAgICB0aGlzLm5vS2luZXRpY18gPSB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERyYWdQYW47XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ1Bhbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdQYW4uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFsdFNoaWZ0S2V5c09ubHksIG1vdXNlQWN0aW9uQnV0dG9uLCBtb3VzZU9ubHksIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBkaXNhYmxlIH0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24uYWx0U2hpZnRLZXlzT25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcm90YXRlIHRoZSBtYXAgYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gdGhlIGFsdCBhbmQgc2hpZnQga2V5cyBhcmUgaGVsZCBkb3duLlxuICpcbiAqIFRoaXMgaW50ZXJhY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgZm9yIG1vdXNlIGRldmljZXMuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUm90YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnUm90YXRlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgc3RvcERvd246IEZBTFNFLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHRTaGlmdEtleXNPbmx5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICAgIHZhciB0aGV0YSA9IE1hdGguYXRhbjIoc2l6ZVsxXSAvIDIgLSBvZmZzZXRbMV0sIG9mZnNldFswXSAtIHNpemVbMF0gLyAyKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdEFuZ2xlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSB0aGV0YSAtIHRoaXMubGFzdEFuZ2xlXztcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Um90YXRpb25JbnRlcm5hbCgtZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHRoZXRhO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VBY3Rpb25CdXR0b24obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERyYWdSb3RhdGU7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ1JvdGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdSb3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9Cb3hcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IFBvbHlnb24gZnJvbSAnLi4vZ2VvbS9Qb2x5Z29uLmpzJztcbnZhciBSZW5kZXJCb3ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlbmRlckJveCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIENTUyBjbGFzcyBuYW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlbmRlckJveChjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmdlb21ldHJ5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9ICdvbC1ib3ggJyArIGNsYXNzTmFtZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZW5kUGl4ZWxfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRNYXAobnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUucmVuZGVyXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXJ0UGl4ZWwgPSB0aGlzLnN0YXJ0UGl4ZWxfO1xuICAgICAgICB2YXIgZW5kUGl4ZWwgPSB0aGlzLmVuZFBpeGVsXztcbiAgICAgICAgdmFyIHB4ID0gJ3B4JztcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgc3R5bGUubGVmdCA9IE1hdGgubWluKHN0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzBdKSArIHB4O1xuICAgICAgICBzdHlsZS50b3AgPSBNYXRoLm1pbihzdGFydFBpeGVsWzFdLCBlbmRQaXhlbFsxXSkgKyBweDtcbiAgICAgICAgc3R5bGUud2lkdGggPSBNYXRoLmFicyhlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF0pICsgcHg7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9IE1hdGguYWJzKGVuZFBpeGVsWzFdIC0gc3RhcnRQaXhlbFsxXSkgKyBweDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgICAgICAgICAgc3R5bGUubGVmdCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLnRvcCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLndpZHRoID0gJ2luaGVyaXQnO1xuICAgICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gJ2luaGVyaXQnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBTdGFydCBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBlbmRQaXhlbCBFbmQgcGl4ZWwuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5zZXRQaXhlbHMgPSBmdW5jdGlvbiAoc3RhcnRQaXhlbCwgZW5kUGl4ZWwpIHtcbiAgICAgICAgdGhpcy5zdGFydFBpeGVsXyA9IHN0YXJ0UGl4ZWw7XG4gICAgICAgIHRoaXMuZW5kUGl4ZWxfID0gZW5kUGl4ZWw7XG4gICAgICAgIHRoaXMuY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSgpO1xuICAgICAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgb3IgdXBkYXRlcyB0aGUgY2FjaGVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXJ0UGl4ZWwgPSB0aGlzLnN0YXJ0UGl4ZWxfO1xuICAgICAgICB2YXIgZW5kUGl4ZWwgPSB0aGlzLmVuZFBpeGVsXztcbiAgICAgICAgdmFyIHBpeGVscyA9IFtcbiAgICAgICAgICAgIHN0YXJ0UGl4ZWwsXG4gICAgICAgICAgICBbc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMV1dLFxuICAgICAgICAgICAgZW5kUGl4ZWwsXG4gICAgICAgICAgICBbZW5kUGl4ZWxbMF0sIHN0YXJ0UGl4ZWxbMV1dLFxuICAgICAgICBdO1xuICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBwaXhlbHMubWFwKHRoaXMubWFwXy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwsIHRoaXMubWFwXyk7XG4gICAgICAgIC8vIGNsb3NlIHRoZSBwb2x5Z29uXG4gICAgICAgIGNvb3JkaW5hdGVzWzRdID0gY29vcmRpbmF0ZXNbMF0uc2xpY2UoKTtcbiAgICAgICAgaWYgKCF0aGlzLmdlb21ldHJ5Xykge1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeV8gPSBuZXcgUG9seWdvbihbY29vcmRpbmF0ZXNdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlfLnNldENvb3JkaW5hdGVzKFtjb29yZGluYXRlc10pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnlfO1xuICAgIH07XG4gICAgcmV0dXJuIFJlbmRlckJveDtcbn0oRGlzcG9zYWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgUmVuZGVyQm94O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm94LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ0JveFxuICovXG4vLyBGSVhNRSBkcmF3IGRyYWcgYm94XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCBSZW5kZXJCb3ggZnJvbSAnLi4vcmVuZGVyL0JveC5qcyc7XG5pbXBvcnQgeyBtb3VzZUFjdGlvbkJ1dHRvbiB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH0gYW5kIHR3b1xuICoge0BsaW5rIG1vZHVsZTpvbC9waXhlbH5QaXhlbH1zIGFuZCByZXR1cm5zIGEgYHtib29sZWFufWAuIElmIHRoZSBjb25kaXRpb24gaXMgbWV0LFxuICogdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24odGhpczogPywgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsLCBpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbCk6Ym9vbGVhbn0gRW5kQ29uZGl0aW9uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWdib3gnXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGUgYm94LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBvbC9ldmVudHMvY29uZGl0aW9ufm1vdXNlQWN0aW9uQnV0dG9ufS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluQXJlYT02NF0gVGhlIG1pbmltdW0gYXJlYSBvZiB0aGUgYm94IGluIHBpeGVsLCB0aGlzIHZhbHVlIGlzIHVzZWQgYnkgdGhlIGRlZmF1bHRcbiAqIGBib3hFbmRDb25kaXRpb25gIGZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtFbmRDb25kaXRpb259IFtib3hFbmRDb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHR3b1xuICoge0BsaW5rIG1vZHVsZTpvbC9waXhlbH5QaXhlbH1zIHRvIGluZGljYXRlIHdoZXRoZXIgYSBgYm94ZW5kYCBldmVudCBzaG91bGQgYmUgZmlyZWQuXG4gKiBEZWZhdWx0IGlzIGB0cnVlYCBpZiB0aGUgYXJlYSBvZiB0aGUgYm94IGlzIGJpZ2dlciB0aGFuIHRoZSBgbWluQXJlYWAgb3B0aW9uLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbih0aGlzOkRyYWdCb3gsIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbb25Cb3hFbmRdIENvZGUgdG8gZXhlY3V0ZSBqdXN0XG4gKiBiZWZvcmUgYGJveGVuZGAgaXMgZmlyZWQuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIERyYWdCb3hFdmVudFR5cGUgPSB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggc3RhcnQuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hzdGFydFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hTVEFSVDogJ2JveHN0YXJ0JyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgb24gZHJhZyB3aGVuIGJveCBpcyBhY3RpdmUuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hkcmFnXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWERSQUc6ICdib3hkcmFnJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBlbmQuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hlbmRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YRU5EOiAnYm94ZW5kJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBjYW5jZWxlZC5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGNhbmNlbFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hDQU5DRUw6ICdib3hjYW5jZWwnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnQm94fkRyYWdCb3h9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mXG4gKiB0aGlzIHR5cGUuXG4gKi9cbnZhciBEcmFnQm94RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdCb3hFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgZXZlbnQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgT3JpZ2luYXRpbmcgZXZlbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ0JveEV2ZW50KHR5cGUsIGNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgb2YgdGhlIGRyYWcgZXZlbnQuXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlID0gY29vcmRpbmF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcEJyb3dzZXJFdmVudCA9IG1hcEJyb3dzZXJFdmVudDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRHJhZ0JveEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgRHJhZ0JveEV2ZW50IH07XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPCdib3hjYW5jZWwnfCdib3hkcmFnJ3wnYm94ZW5kJywgRHJhZ0JveEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnfCdib3hjYW5jZWwnfCdib3hkcmFnJ3wnYm94ZW5kJywgUmV0dXJuPn0gRHJhZ0JveE9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIGRyYXcgYSB2ZWN0b3IgYm94IGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIHRoZSBzaGlmdCBvciBvdGhlciBrZXkgaXMgaGVsZCBkb3duLiBUaGlzIGlzIHVzZWQsIGZvciBleGFtcGxlLFxuICogZm9yIHpvb21pbmcgdG8gYSBzcGVjaWZpYyBhcmVhIG9mIHRoZSBtYXBcbiAqIChzZWUge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbX5EcmFnWm9vbX0gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVBbmRab29tfSkuXG4gKlxuICogQGZpcmVzIERyYWdCb3hFdmVudFxuICogQGFwaVxuICovXG52YXIgRHJhZ0JveCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ0JveCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnQm94KG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtEcmFnQm94T25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtEcmFnQm94T25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0JveC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYm94XyA9IG5ldyBSZW5kZXJCb3gob3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWdib3gnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5taW5BcmVhXyA9IG9wdGlvbnMubWluQXJlYSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5BcmVhIDogNjQ7XG4gICAgICAgIGlmIChvcHRpb25zLm9uQm94RW5kKSB7XG4gICAgICAgICAgICBfdGhpcy5vbkJveEVuZCA9IG9wdGlvbnMub25Cb3hFbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogbW91c2VBY3Rpb25CdXR0b247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7RW5kQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYm94RW5kQ29uZGl0aW9uXyA9IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uXG4gICAgICAgICAgICA/IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uXG4gICAgICAgICAgICA6IF90aGlzLmRlZmF1bHRCb3hFbmRDb25kaXRpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgY29uZGl0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZSBib3hlbmQgZXZlbnRcbiAgICAgKiBzaG91bGQgZmlyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgVGhlIG9yaWdpbmF0aW5nIE1hcEJyb3dzZXJFdmVudFxuICAgICAqICAgICBsZWFkaW5nIHRvIHRoZSBib3ggZW5kLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgVGhlIHN0YXJ0aW5nIHBpeGVsIG9mIHRoZSBib3guXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgVGhlIGVuZCBwaXhlbCBvZiB0aGUgYm94LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBib3hlbmQgY29uZGl0aW9uIHNob3VsZCBiZSBmaXJlZC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCwgc3RhcnRQaXhlbCwgZW5kUGl4ZWwpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdO1xuICAgICAgICByZXR1cm4gd2lkdGggKiB3aWR0aCArIGhlaWdodCAqIGhlaWdodCA+PSB0aGlzLm1pbkFyZWFfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBnZW9tZXRyeSBvZiBsYXN0IGRyYXduIGJveC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3hfLmdldEdlb21ldHJ5KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YRFJBRywgbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuYm94Xy5zZXRNYXAobnVsbCk7XG4gICAgICAgIHZhciBjb21wbGV0ZUJveCA9IHRoaXMuYm94RW5kQ29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQsIHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG4gICAgICAgIGlmIChjb21wbGV0ZUJveCkge1xuICAgICAgICAgICAgdGhpcy5vbkJveEVuZChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KGNvbXBsZXRlQm94ID8gRHJhZ0JveEV2ZW50VHlwZS5CT1hFTkQgOiBEcmFnQm94RXZlbnRUeXBlLkJPWENBTkNFTCwgbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFBpeGVsXyA9IG1hcEJyb3dzZXJFdmVudC5waXhlbDtcbiAgICAgICAgICAgIHRoaXMuYm94Xy5zZXRNYXAobWFwQnJvd3NlckV2ZW50Lm1hcCk7XG4gICAgICAgICAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIHRoaXMuc3RhcnRQaXhlbF8pO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hTVEFSVCwgbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUganVzdCBiZWZvcmUgYG9uYm94ZW5kYCBpcyBmaXJlZFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLm9uQm94RW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7IH07XG4gICAgcmV0dXJuIERyYWdCb3g7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ0JveDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdCb3guanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbVxuICovXG5pbXBvcnQgRHJhZ0JveCBmcm9tICcuL0RyYWdCb3guanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBzaGlmdEtleU9ubHkgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWd6b29tJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlXG4gKiBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5zaGlmdEtleU9ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdXQ9ZmFsc2VdIFVzZSBpbnRlcmFjdGlvbiBmb3Igem9vbWluZyBvdXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBwYXJlbnQgZGVmYXVsdFxuICogYGJveEVuZENvbmRpdGlvbmAgZnVuY3Rpb24uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiBhIGtleSwgc2hpZnQgYnkgZGVmYXVsdCwgaXMgaGVsZCBkb3duLlxuICpcbiAqIFRvIGNoYW5nZSB0aGUgc3R5bGUgb2YgdGhlIGJveCwgdXNlIENTUyBhbmQgdGhlIGAub2wtZHJhZ3pvb21gIHNlbGVjdG9yLCBvclxuICogeW91ciBjdXN0b20gb25lIGNvbmZpZ3VyZWQgd2l0aCBgY2xhc3NOYW1lYC5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBzaGlmdEtleU9ubHk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29uZGl0aW9uOiBjb25kaXRpb24sXG4gICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbnMuY2xhc3NOYW1lIHx8ICdvbC1kcmFnem9vbScsXG4gICAgICAgICAgICBtaW5BcmVhOiBvcHRpb25zLm1pbkFyZWEsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDIwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3V0XyA9IG9wdGlvbnMub3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm91dCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUganVzdCBiZWZvcmUgYG9uYm94ZW5kYCBpcyBmaXJlZFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdab29tLnByb3RvdHlwZS5vbkJveEVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHZpZXcgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9ICovIChtYXAuZ2V0VmlldygpKTtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeSgpO1xuICAgICAgICBpZiAodGhpcy5vdXRfKSB7XG4gICAgICAgICAgICB2YXIgcm90YXRlZEV4dGVudCA9IHZpZXcucm90YXRlZEV4dGVudEZvckdlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwocm90YXRlZEV4dGVudCk7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgLyByZXNvbHV0aW9uO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpO1xuICAgICAgICAgICAgZ2VvbWV0cnkuc2NhbGUoZmFjdG9yICogZmFjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3LmZpdEludGVybmFsKGdlb21ldHJ5LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIERyYWdab29tO1xufShEcmFnQm94KSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyBwYW4gfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBLZXlDb2RlIGZyb20gJy4uL2V2ZW50cy9LZXlDb2RlLmpzJztcbmltcG9ydCB7IG5vTW9kaWZpZXJLZXlzLCB0YXJnZXROb3RFZGl0YWJsZSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUgfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ubm9Nb2RpZmllcktleXN9IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnRhcmdldE5vdEVkaXRhYmxlfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MTAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbERlbHRhPTEyOF0gVGhlIGFtb3VudCBvZiBwaXhlbHMgdG8gcGFuIG9uIGVhY2gga2V5XG4gKiBwcmVzcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcGFuIHRoZSBtYXAgdXNpbmcga2V5Ym9hcmQgYXJyb3dzLlxuICogTm90ZSB0aGF0LCBhbHRob3VnaCB0aGlzIGludGVyYWN0aW9uIGlzIGJ5IGRlZmF1bHQgaW5jbHVkZWQgaW4gbWFwcyxcbiAqIHRoZSBrZXlzIGNhbiBvbmx5IGJlIHVzZWQgd2hlbiBicm93c2VyIGZvY3VzIGlzIG9uIHRoZSBlbGVtZW50IHRvIHdoaWNoXG4gKiB0aGUga2V5Ym9hcmQgZXZlbnRzIGFyZSBhdHRhY2hlZC4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgbWFwIGRpdixcbiAqIHRob3VnaCB5b3UgY2FuIGNoYW5nZSB0aGlzIHdpdGggdGhlIGBrZXlib2FyZEV2ZW50VGFyZ2V0YCBpblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfS4gYGRvY3VtZW50YCBuZXZlciBsb3NlcyBmb2N1cyBidXQsIGZvciBhbnkgb3RoZXJcbiAqIGVsZW1lbnQsIGZvY3VzIHdpbGwgaGF2ZSB0byBiZSBvbiwgYW5kIHJldHVybmVkIHRvLCB0aGlzIGVsZW1lbnQgaWYgdGhlIGtleXNcbiAqIGFyZSB0byBmdW5jdGlvbi5cbiAqIFNlZSBhbHNvIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFBhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS2V5Ym9hcmRQYW4sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2V5Ym9hcmRQYW4ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gKG5vTW9kaWZpZXJLZXlzKG1hcEJyb3dzZXJFdmVudCkgJiYgdGFyZ2V0Tm90RWRpdGFibGUobWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29uZGl0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgOiBfdGhpcy5kZWZhdWx0Q29uZGl0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsRGVsdGFfID1cbiAgICAgICAgICAgIG9wdGlvbnMucGl4ZWxEZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBpZiBpdCB3YXMgYVxuICAgICAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHRoZSBkaXJlY3Rpb24gdG8gcGFuIHRvIChpZiBhbiBhcnJvdyBrZXkgd2FzXG4gICAgICogcHJlc3NlZCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAdGhpcyB7S2V5Ym9hcmRQYW59XG4gICAgICovXG4gICAgS2V5Ym9hcmRQYW4ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTikge1xuICAgICAgICAgICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBrZXlFdmVudC5rZXlDb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICAgICAgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCB8fFxuICAgICAgICAgICAgICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuVVApKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHZhciBtYXBVbml0c0RlbHRhID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiB0aGlzLnBpeGVsRGVsdGFfO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YVggPSAwLCBkZWx0YVkgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChrZXlDb2RlID09IEtleUNvZGUuRE9XTikge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVkgPSAtbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFYID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVggPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFZID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gW2RlbHRhWCwgZGVsdGFZXTtcbiAgICAgICAgICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHBhbih2aWV3LCBkZWx0YSwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgICAgIGtleUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIHJldHVybiBLZXlib2FyZFBhbjtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkUGFuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmRQYW4uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9LZXlDb2RlXG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqIEBjb25zdFxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgTEVGVDogMzcsXG4gICAgVVA6IDM4LFxuICAgIFJJR0hUOiAzOSxcbiAgICBET1dOOiA0MCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlDb2RlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7IHRhcmdldE5vdEVkaXRhYmxlIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MTAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24udGFyZ2V0Tm90RWRpdGFibGV9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBsZXZlbCBkZWx0YSBvbiBlYWNoIGtleSBwcmVzcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIHVzaW5nIGtleWJvYXJkICsgYW5kIC0uXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEtleWJvYXJkWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBLZXlib2FyZFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IHRhcmdldE5vdEVkaXRhYmxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBpZiBpdCB3YXMgYVxuICAgICAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHdoZXRoZXIgdG8gem9vbSBpbiBvciBvdXQgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZVxuICAgICAqIGtleSBwcmVzc2VkIHdhcyAnKycgb3IgJy0nKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEB0aGlzIHtLZXlib2FyZFpvb219XG4gICAgICovXG4gICAgS2V5Ym9hcmRab29tLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHN0b3BFdmVudCA9IGZhbHNlO1xuICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWURPV04gfHxcbiAgICAgICAgICAgIG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlQUkVTUykge1xuICAgICAgICAgICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0ga2V5RXZlbnQuY2hhckNvZGU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgICAgICAoY2hhckNvZGUgPT0gJysnLmNoYXJDb2RlQXQoMCkgfHwgY2hhckNvZGUgPT0gJy0nLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gY2hhckNvZGUgPT0gJysnLmNoYXJDb2RlQXQoMCkgPyB0aGlzLmRlbHRhXyA6IC10aGlzLmRlbHRhXztcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIHVuZGVmaW5lZCwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgICAgIGtleUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIHJldHVybiBLZXlib2FyZFpvb207XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBLZXlib2FyZFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlib2FyZFpvb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0tpbmV0aWNcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBpbmVydGlhbCBkZWNlbGVyYXRpb24gZm9yIG1hcCBtb3ZlbWVudC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBLaW5ldGljID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWNheSBSYXRlIG9mIGRlY2F5IChtdXN0IGJlIG5lZ2F0aXZlKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluVmVsb2NpdHkgTWluaW11bSB2ZWxvY2l0eSAocGl4ZWxzL21pbGxpc2Vjb25kKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgRGVsYXkgdG8gY29uc2lkZXIgdG8gY2FsY3VsYXRlIHRoZSBraW5ldGljXG4gICAgICogICAgIGluaXRpYWwgdmFsdWVzIChtaWxsaXNlY29uZHMpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEtpbmV0aWMoZGVjYXksIG1pblZlbG9jaXR5LCBkZWxheSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVjYXlfID0gZGVjYXk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5WZWxvY2l0eV8gPSBtaW5WZWxvY2l0eTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlbGF5XyA9IGRlbGF5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvaW50c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuZ2xlXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuYmVnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucG9pbnRzXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmFuZ2xlXyA9IDA7XG4gICAgICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdGhpcy5wb2ludHNfLnB1c2goeCwgeSwgRGF0ZS5ub3coKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHdlIHNob3VsZCBkbyBraW5ldGljIGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvaW50c18ubGVuZ3RoIDwgNikge1xuICAgICAgICAgICAgLy8gYXQgbGVhc3QgMiBwb2ludHMgYXJlIHJlcXVpcmVkIChpLmUuIHRoZXJlIG11c3QgYmUgYXQgbGVhc3QgNiBlbGVtZW50c1xuICAgICAgICAgICAgLy8gaW4gdGhlIGFycmF5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWxheSA9IERhdGUubm93KCkgLSB0aGlzLmRlbGF5XztcbiAgICAgICAgdmFyIGxhc3RJbmRleCA9IHRoaXMucG9pbnRzXy5sZW5ndGggLSAzO1xuICAgICAgICBpZiAodGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDJdIDwgZGVsYXkpIHtcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IHRyYWNrZWQgcG9pbnQgaXMgdG9vIG9sZCwgd2hpY2ggbWVhbnMgdGhhdCB0aGUgdXNlciBzdG9wcGVkXG4gICAgICAgICAgICAvLyBwYW5uaW5nIGJlZm9yZSByZWxlYXNpbmcgdGhlIG1hcFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGdldCB0aGUgZmlyc3QgcG9pbnQgd2hpY2ggc3RpbGwgZmFsbHMgaW50byB0aGUgZGVsYXkgdGltZVxuICAgICAgICB2YXIgZmlyc3RJbmRleCA9IGxhc3RJbmRleCAtIDM7XG4gICAgICAgIHdoaWxlIChmaXJzdEluZGV4ID4gMCAmJiB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDJdID4gZGVsYXkpIHtcbiAgICAgICAgICAgIGZpcnN0SW5kZXggLT0gMztcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHVyYXRpb24gPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMl0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDJdO1xuICAgICAgICAvLyB3ZSBkb24ndCB3YW50IGEgZHVyYXRpb24gb2YgMCAoZGl2aWRlIGJ5IHplcm8pXG4gICAgICAgIC8vIHdlIGFsc28gbWFrZSBzdXJlIHRoZSB1c2VyIHBhbm5lZCBmb3IgYSBkdXJhdGlvbiBvZiBhdCBsZWFzdCBvbmUgZnJhbWVcbiAgICAgICAgLy8gKDEvNjBzKSB0byBjb21wdXRlIHNhbmUgZGlzcGxhY2VtZW50IHZhbHVlc1xuICAgICAgICBpZiAoZHVyYXRpb24gPCAxMDAwIC8gNjApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHggPSB0aGlzLnBvaW50c19bbGFzdEluZGV4XSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4XTtcbiAgICAgICAgdmFyIGR5ID0gdGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDFdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXggKyAxXTtcbiAgICAgICAgdGhpcy5hbmdsZV8gPSBNYXRoLmF0YW4yKGR5LCBkeCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSkgLyBkdXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA+IHRoaXMubWluVmVsb2NpdHlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUb3RhbCBkaXN0YW5jZSB0cmF2ZWxsZWQgKHBpeGVscykuXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuZ2V0RGlzdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5WZWxvY2l0eV8gLSB0aGlzLmluaXRpYWxWZWxvY2l0eV8pIC8gdGhpcy5kZWNheV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIG9mIHRoZSBraW5ldGljIHBhbm5pbmcgYW5pbWF0aW9uIChyYWRpYW5zKS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5nZXRBbmdsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5nbGVfO1xuICAgIH07XG4gICAgcmV0dXJuIEtpbmV0aWM7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgS2luZXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtpbmV0aWMuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7IHpvb21CeURlbHRhIH0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgeyBERVZJQ0VfUElYRUxfUkFUSU8sIEZJUkVGT1ggfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgYWxsLCBhbHdheXMsIGZvY3VzV2l0aFRhYmluZGV4IH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIE1vZGUgPSB7XG4gICAgVFJBQ0tQQUQ6ICd0cmFja3BhZCcsXG4gICAgV0hFRUw6ICd3aGVlbCcsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5hbHdheXN9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heERlbHRhPTFdIE1heGltdW0gbW91c2Ugd2hlZWwgZGVsdGEuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGltZW91dD04MF0gTW91c2Ugd2hlZWwgdGltZW91dCBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VBbmNob3I9dHJ1ZV0gRW5hYmxlIHpvb21pbmcgdXNpbmcgdGhlIG1vdXNlJ3NcbiAqIGxvY2F0aW9uIGFzIHRoZSBhbmNob3IuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIHpvb21pbmcgaW4gYW5kIG91dCB3aWxsIHpvb20gdG9cbiAqIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbiBpbnN0ZWFkIG9mIHpvb21pbmcgb24gdGhlIG1vdXNlJ3MgbG9jYXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgbW91c2Ugd2hlZWwgem9vbVxuICogZXZlbnQgd2lsbCBhbHdheXMgYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uO1xuICogZmFsc2UgbWVhbnMgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgc2Nyb2xsaW5nIHRoZSBtb3VzZSB3aGVlbC5cbiAqIEBhcGlcbiAqL1xudmFyIE1vdXNlV2hlZWxab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNb3VzZVdoZWVsWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNb3VzZVdoZWVsWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0ludGVyYWN0aW9uLmpzXCIpLkludGVyYWN0aW9uT3B0aW9uc30gKi8gKG9wdGlvbnMpKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRvdGFsRGVsdGFfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0RGVsdGFfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSBvcHRpb25zLm1heERlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heERlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbWVvdXRfID0gb3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbWVvdXQgOiA4MDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXNlQW5jaG9yXyA9XG4gICAgICAgICAgICBvcHRpb25zLnVzZUFuY2hvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51c2VBbmNob3IgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHdheXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5vbkZvY3VzT25seVxuICAgICAgICAgICAgPyBhbGwoZm9jdXNXaXRoVGFiaW5kZXgsIGNvbmRpdGlvbilcbiAgICAgICAgICAgIDogY29uZGl0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbWVvdXRJZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TW9kZXx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYWNrcGFkIGV2ZW50cyBzZXBhcmF0ZWQgYnkgdGhpcyBkZWxheSB3aWxsIGJlIGNvbnNpZGVyZWQgc2VwYXJhdGVcbiAgICAgICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2twYWRFdmVudEdhcF8gPSA0MDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrcGFkVGltZW91dElkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgZGVsdGEgdmFsdWVzIHBlciB6b29tIGxldmVsXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YVBlclpvb21fID0gMzAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmVuZEludGVyYWN0aW9uXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCk7XG4gICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odW5kZWZpbmVkLCB0aGlzLmxhc3REZWx0YV8gPyAodGhpcy5sYXN0RGVsdGFfID4gMCA/IDEgOiAtMSkgOiAwLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGEgbW91c2V3aGVlbC1ldmVudCkgYW5kIGV2ZW50dWFsbHlcbiAgICAgKiB6b29tcyB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IG1hcEJyb3dzZXJFdmVudC50eXBlO1xuICAgICAgICBpZiAodHlwZSAhPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHdoZWVsRXZlbnQgPSAvKiogQHR5cGUge1doZWVsRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHdoZWVsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMudXNlQW5jaG9yXykge1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlbHRhIG5vcm1hbGlzYXRpb24gaW5zcGlyZWQgYnlcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvYmxvYi8wMDFjN2I5L2pzL3VpL2hhbmRsZXIvc2Nyb2xsX3pvb20uanNcbiAgICAgICAgdmFyIGRlbHRhO1xuICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICAgICAgICBkZWx0YSA9IHdoZWVsRXZlbnQuZGVsdGFZO1xuICAgICAgICAgICAgaWYgKEZJUkVGT1ggJiYgd2hlZWxFdmVudC5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgLz0gREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgKj0gNDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxhc3REZWx0YV8gPSBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRUaW1lXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm1vZGVfIHx8IG5vdyAtIHRoaXMuc3RhcnRUaW1lXyA+IHRoaXMudHJhY2twYWRFdmVudEdhcF8pIHtcbiAgICAgICAgICAgIHRoaXMubW9kZV8gPSBNYXRoLmFicyhkZWx0YSkgPCA0ID8gTW9kZS5UUkFDS1BBRCA6IE1vZGUuV0hFRUw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5UUkFDS1BBRCAmJlxuICAgICAgICAgICAgISh2aWV3LmdldENvbnN0cmFpblJlc29sdXRpb24oKSB8fCB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmVuZEludGVyYWN0aW9uXy5iaW5kKHRoaXMpLCB0aGlzLnRpbWVvdXRfKTtcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Wm9vbSgtZGVsdGEgLyB0aGlzLmRlbHRhUGVyWm9vbV8sIHRoaXMubGFzdEFuY2hvcl8pO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gbm93O1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG90YWxEZWx0YV8gKz0gZGVsdGE7XG4gICAgICAgIHZhciB0aW1lTGVmdCA9IE1hdGgubWF4KHRoaXMudGltZW91dF8gLSAobm93IC0gdGhpcy5zdGFydFRpbWVfKSwgMCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZF8pO1xuICAgICAgICB0aGlzLnRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlV2hlZWxab29tXy5iaW5kKHRoaXMsIG1hcCksIHRpbWVMZWZ0KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5oYW5kbGVXaGVlbFpvb21fID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsdGEgPSAtY2xhbXAodGhpcy50b3RhbERlbHRhXywgLXRoaXMubWF4RGVsdGFfICogdGhpcy5kZWx0YVBlclpvb21fLCB0aGlzLm1heERlbHRhXyAqIHRoaXMuZGVsdGFQZXJab29tXykgLyB0aGlzLmRlbHRhUGVyWm9vbV87XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpblJlc29sdXRpb24oKSB8fCB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fKSB7XG4gICAgICAgICAgICAvLyB2aWV3IGhhcyBhIHpvb20gY29uc3RyYWludCwgem9vbSBieSAxXG4gICAgICAgICAgICBkZWx0YSA9IGRlbHRhID8gKGRlbHRhID4gMCA/IDEgOiAtMSkgOiAwO1xuICAgICAgICB9XG4gICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB0aGlzLmxhc3RBbmNob3JfLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudG90YWxEZWx0YV8gPSAwO1xuICAgICAgICB0aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSB1c2luZyB0aGUgbW91c2UncyBsb2NhdGlvbiBhcyBhbiBhbmNob3Igd2hlbiB6b29taW5nXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1c2VBbmNob3IgdHJ1ZSB0byB6b29tIHRvIHRoZSBtb3VzZSdzIGxvY2F0aW9uLCBmYWxzZVxuICAgICAqIHRvIHpvb20gdG8gdGhlIGNlbnRlciBvZiB0aGUgbWFwXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5zZXRNb3VzZUFuY2hvciA9IGZ1bmN0aW9uICh1c2VBbmNob3IpIHtcbiAgICAgICAgdGhpcy51c2VBbmNob3JfID0gdXNlQW5jaG9yO1xuICAgICAgICBpZiAoIXVzZUFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNb3VzZVdoZWVsWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IE1vdXNlV2hlZWxab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VXaGVlbFpvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7IGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLCB9IGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBkaXNhYmxlIH0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RocmVzaG9sZD0wLjNdIE1pbmltYWwgYW5nbGUgaW4gcmFkaWFucyB0byBzdGFydCBhIHJvdGF0aW9uLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSB0d2lzdGluZyB3aXRoIHR3byBmaW5nZXJzXG4gKiBvbiBhIHRvdWNoIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIFBpbmNoUm90YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQaW5jaFJvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQaW5jaFJvdGF0ZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXBvaW50ZXJPcHRpb25zLnN0b3BEb3duKSB7XG4gICAgICAgICAgICBwb2ludGVyT3B0aW9ucy5zdG9wRG93biA9IEZBTFNFO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRocmVzaG9sZF8gPSBvcHRpb25zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aHJlc2hvbGQgOiAwLjM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHJvdGF0aW9uRGVsdGEgPSAwLjA7XG4gICAgICAgIHZhciB0b3VjaDAgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzBdO1xuICAgICAgICB2YXIgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcbiAgICAgICAgLy8gYW5nbGUgYmV0d2VlbiB0b3VjaGVzXG4gICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIodG91Y2gxLmNsaWVudFkgLSB0b3VjaDAuY2xpZW50WSwgdG91Y2gxLmNsaWVudFggLSB0b3VjaDAuY2xpZW50WCk7XG4gICAgICAgIGlmICh0aGlzLmxhc3RBbmdsZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gYW5nbGUgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfICs9IGRlbHRhO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJvdGF0aW5nXyAmJiBNYXRoLmFicyh0aGlzLnJvdGF0aW9uRGVsdGFfKSA+IHRoaXMudGhyZXNob2xkXykge1xuICAgICAgICAgICAgICAgIHRoaXMucm90YXRpbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvdGF0aW9uRGVsdGEgPSBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSBhbmdsZTtcbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcuZ2V0Q29uc3RyYWludHMoKS5yb3RhdGlvbiA9PT0gZGlzYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJvdGF0ZSBhbmNob3IgcG9pbnQuXG4gICAgICAgIC8vIEZJWE1FOiBzaG91bGQgYmUgdGhlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHRoZSBsaW5lczpcbiAgICAgICAgLy8gICAgIHRvdWNoMCx0b3VjaDEgYW5kIHByZXZpb3VzVG91Y2gwLHByZXZpb3VzVG91Y2gxXG4gICAgICAgIHZhciB2aWV3cG9ydFBvc2l0aW9uID0gbWFwLmdldFZpZXdwb3J0KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpO1xuICAgICAgICBjZW50cm9pZFswXSAtPSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQ7XG4gICAgICAgIGNlbnRyb2lkWzFdIC09IHZpZXdwb3J0UG9zaXRpb24udG9wO1xuICAgICAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKGNlbnRyb2lkKTtcbiAgICAgICAgLy8gcm90YXRlXG4gICAgICAgIGlmICh0aGlzLnJvdGF0aW5nXykge1xuICAgICAgICAgICAgbWFwLnJlbmRlcigpO1xuICAgICAgICAgICAgdmlldy5hZGp1c3RSb3RhdGlvbkludGVybmFsKHJvdGF0aW9uRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGluZ18gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQaW5jaFJvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBQaW5jaFJvdGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBpbmNoUm90YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hab29tXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj00MDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBwaW5jaGluZyB3aXRoIHR3byBmaW5nZXJzXG4gKiBvbiBhIHRvdWNoIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIFBpbmNoWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGluY2hab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBpbmNoWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXBvaW50ZXJPcHRpb25zLnN0b3BEb3duKSB7XG4gICAgICAgICAgICBwb2ludGVyT3B0aW9ucy5zdG9wRG93biA9IEZBTFNFO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDQwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdERpc3RhbmNlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBQaW5jaFpvb20ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHNjYWxlRGVsdGEgPSAxLjA7XG4gICAgICAgIHZhciB0b3VjaDAgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzBdO1xuICAgICAgICB2YXIgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcbiAgICAgICAgdmFyIGR4ID0gdG91Y2gwLmNsaWVudFggLSB0b3VjaDEuY2xpZW50WDtcbiAgICAgICAgdmFyIGR5ID0gdG91Y2gwLmNsaWVudFkgLSB0b3VjaDEuY2xpZW50WTtcbiAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiB0b3VjaGVzXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmICh0aGlzLmxhc3REaXN0YW5jZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2NhbGVEZWx0YSA9IHRoaXMubGFzdERpc3RhbmNlXyAvIGRpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdERpc3RhbmNlXyA9IGRpc3RhbmNlO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAoc2NhbGVEZWx0YSAhPSAxLjApIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gc2NhbGVEZWx0YTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzY2FsZSBhbmNob3IgcG9pbnQuXG4gICAgICAgIHZhciB2aWV3cG9ydFBvc2l0aW9uID0gbWFwLmdldFZpZXdwb3J0KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpO1xuICAgICAgICBjZW50cm9pZFswXSAtPSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQ7XG4gICAgICAgIGNlbnRyb2lkWzFdIC09IHZpZXdwb3J0UG9zaXRpb24udG9wO1xuICAgICAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKGNlbnRyb2lkKTtcbiAgICAgICAgLy8gc2NhbGUsIGJ5cGFzcyB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50XG4gICAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgICAgdmlldy5hZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwoc2NhbGVEZWx0YSwgdGhpcy5hbmNob3JfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFpvb20ucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMubGFzdFNjYWxlRGVsdGFfID4gMSA/IDEgOiAtMTtcbiAgICAgICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8sIGRpcmVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQaW5jaFpvb207XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgUGluY2hab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvblxuICovXG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IERvdWJsZUNsaWNrWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5pbXBvcnQgRHJhZ1BhbiBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuaW1wb3J0IERyYWdSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlLmpzJztcbmltcG9ydCBEcmFnWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmltcG9ydCBLZXlib2FyZFBhbiBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzJztcbmltcG9ydCBLZXlib2FyZFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMnO1xuaW1wb3J0IEtpbmV0aWMgZnJvbSAnLi9LaW5ldGljLmpzJztcbmltcG9ydCBNb3VzZVdoZWVsWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzJztcbmltcG9ydCBQaW5jaFJvdGF0ZSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzJztcbmltcG9ydCBQaW5jaFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEb3VibGVDbGlja1pvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdBbmREcm9wIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdCb3ggfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdCb3guanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnUGFuIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1JvdGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdSb3RhdGVBbmRab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYXcgfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBFeHRlbnQgfSBmcm9tICcuL2ludGVyYWN0aW9uL0V4dGVudC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEludGVyYWN0aW9uIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEtleWJvYXJkUGFuIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEtleWJvYXJkWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW9kaWZ5IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb2RpZnkuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3VzZVdoZWVsWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQaW5jaFJvdGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQaW5jaFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBvaW50ZXIgfSBmcm9tICcuL2ludGVyYWN0aW9uL1BvaW50ZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTZWxlY3QgfSBmcm9tICcuL2ludGVyYWN0aW9uL1NlbGVjdC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNuYXAgfSBmcm9tICcuL2ludGVyYWN0aW9uL1NuYXAuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBUcmFuc2xhdGUgfSBmcm9tICcuL2ludGVyYWN0aW9uL1RyYW5zbGF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRzT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbYWx0U2hpZnREcmFnUm90YXRlPXRydWVdIFdoZXRoZXIgQWx0LVNoaWZ0LWRyYWcgcm90YXRlIGlzXG4gKiBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIEludGVyYWN0IG9ubHkgd2hlbiB0aGUgbWFwIGhhcyB0aGVcbiAqIGZvY3VzLiBUaGlzIGFmZmVjdHMgdGhlIGBNb3VzZVdoZWVsWm9vbWAgYW5kIGBEcmFnUGFuYCBpbnRlcmFjdGlvbnMgYW5kIGlzXG4gKiB1c2VmdWwgd2hlbiBwYWdlIHNjcm9sbCBpcyBkZXNpcmVkIGZvciBtYXBzIHRoYXQgZG8gbm90IGhhdmUgdGhlIGJyb3dzZXInc1xuICogZm9jdXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkb3VibGVDbGlja1pvb209dHJ1ZV0gV2hldGhlciBkb3VibGUgY2xpY2sgem9vbSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tleWJvYXJkPXRydWVdIFdoZXRoZXIga2V5Ym9hcmQgaW50ZXJhY3Rpb24gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21vdXNlV2hlZWxab29tPXRydWVdIFdoZXRoZXIgbW91c2V3aGVlbCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaGlmdERyYWdab29tPXRydWVdIFdoZXRoZXIgU2hpZnQtZHJhZyB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkcmFnUGFuPXRydWVdIFdoZXRoZXIgZHJhZyBwYW4gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoUm90YXRlPXRydWVdIFdoZXRoZXIgcGluY2ggcm90YXRlIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFpvb209dHJ1ZV0gV2hldGhlciBwaW5jaCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EZWx0YV0gWm9vbSBsZXZlbCBkZWx0YSB3aGVuIHVzaW5nIGtleWJvYXJkIG9yIGRvdWJsZSBjbGljayB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRHVyYXRpb25dIER1cmF0aW9uIG9mIHRoZSB6b29tIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICovXG4vKipcbiAqIFNldCBvZiBpbnRlcmFjdGlvbnMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBTcGVjaWZpYyBpbnRlcmFjdGlvbnMgY2FuIGJlXG4gKiBleGNsdWRlZCBieSBzZXR0aW5nIHRoZSBhcHByb3ByaWF0ZSBvcHRpb24gdG8gZmFsc2UgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKiBvcHRpb25zLCBidXQgdGhlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgaXMgZml4ZWQuICBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5XG4gKiBhIGRpZmZlcmVudCBvcmRlciBmb3IgaW50ZXJhY3Rpb25zLCB5b3Ugd2lsbCBuZWVkIHRvIGNyZWF0ZSB5b3VyIG93blxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbn0gaW5zdGFuY2VzIGFuZCBpbnNlcnRcbiAqIHRoZW0gaW50byBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn0gaW4gdGhlIG9yZGVyIHlvdSB3YW50XG4gKiBiZWZvcmUgY3JlYXRpbmcgeW91ciB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGluc3RhbmNlLiBDaGFuZ2luZyB0aGUgb3JkZXIgY2FuXG4gKiBiZSBvZiBpbnRlcmVzdCBpZiB0aGUgZXZlbnQgcHJvcGFnYXRpb24gbmVlZHMgdG8gYmUgc3RvcHBlZCBhdCBhIHBvaW50LlxuICogVGhlIGRlZmF1bHQgc2V0IG9mIGludGVyYWN0aW9ucywgaW4gc2VxdWVuY2UsIGlzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGV+RHJhZ1JvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21+RG91YmxlQ2xpY2tab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdQYW5+RHJhZ1Bhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZX5QaW5jaFJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21+UGluY2hab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21+TW91c2VXaGVlbFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnN9IFtvcHRfb3B0aW9uc10gRGVmYXVsdHMgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKiBBIGNvbGxlY3Rpb24gb2YgaW50ZXJhY3Rpb25zIHRvIGJlIHVzZWQgd2l0aCB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfVxuICogY29uc3RydWN0b3IncyBgaW50ZXJhY3Rpb25zYCBvcHRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgIHZhciBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICAgIHZhciBraW5ldGljID0gbmV3IEtpbmV0aWMoLTAuMDA1LCAwLjA1LCAxMDApO1xuICAgIHZhciBhbHRTaGlmdERyYWdSb3RhdGUgPSBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5hbHRTaGlmdERyYWdSb3RhdGVcbiAgICAgICAgOiB0cnVlO1xuICAgIGlmIChhbHRTaGlmdERyYWdSb3RhdGUpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdSb3RhdGUoKSk7XG4gICAgfVxuICAgIHZhciBkb3VibGVDbGlja1pvb20gPSBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kb3VibGVDbGlja1pvb20gOiB0cnVlO1xuICAgIGlmIChkb3VibGVDbGlja1pvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERvdWJsZUNsaWNrWm9vbSh7XG4gICAgICAgICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIGRyYWdQYW4gPSBvcHRpb25zLmRyYWdQYW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHJhZ1BhbiA6IHRydWU7XG4gICAgaWYgKGRyYWdQYW4pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdQYW4oe1xuICAgICAgICAgICAgb25Gb2N1c09ubHk6IG9wdGlvbnMub25Gb2N1c09ubHksXG4gICAgICAgICAgICBraW5ldGljOiBraW5ldGljLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBwaW5jaFJvdGF0ZSA9IG9wdGlvbnMucGluY2hSb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGluY2hSb3RhdGUgOiB0cnVlO1xuICAgIGlmIChwaW5jaFJvdGF0ZSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hSb3RhdGUoKSk7XG4gICAgfVxuICAgIHZhciBwaW5jaFpvb20gPSBvcHRpb25zLnBpbmNoWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFpvb20gOiB0cnVlO1xuICAgIGlmIChwaW5jaFpvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IFBpbmNoWm9vbSh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIGtleWJvYXJkID0gb3B0aW9ucy5rZXlib2FyZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlib2FyZCA6IHRydWU7XG4gICAgaWYgKGtleWJvYXJkKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBLZXlib2FyZFBhbigpKTtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkWm9vbSh7XG4gICAgICAgICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIG1vdXNlV2hlZWxab29tID0gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSA6IHRydWU7XG4gICAgaWYgKG1vdXNlV2hlZWxab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBNb3VzZVdoZWVsWm9vbSh7XG4gICAgICAgICAgICBvbkZvY3VzT25seTogb3B0aW9ucy5vbkZvY3VzT25seSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgc2hpZnREcmFnWm9vbSA9IG9wdGlvbnMuc2hpZnREcmFnWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaGlmdERyYWdab29tIDogdHJ1ZTtcbiAgICBpZiAoc2hpZnREcmFnWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1pvb20oe1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiBpbnRlcmFjdGlvbnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmFjdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcFxuICovXG5pbXBvcnQgQ29tcG9zaXRlTWFwUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlci9Db21wb3NpdGUuanMnO1xuaW1wb3J0IFBsdWdnYWJsZU1hcCBmcm9tICcuL1BsdWdnYWJsZU1hcC5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyBhcyBkZWZhdWx0Q29udHJvbHMgfSBmcm9tICcuL2NvbnRyb2wuanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMgYXMgZGVmYXVsdEludGVyYWN0aW9ucyB9IGZyb20gJy4vaW50ZXJhY3Rpb24uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBUaGUgbWFwIGlzIHRoZSBjb3JlIGNvbXBvbmVudCBvZiBPcGVuTGF5ZXJzLiBGb3IgYSBtYXAgdG8gcmVuZGVyLCBhIHZpZXcsXG4gKiBvbmUgb3IgbW9yZSBsYXllcnMsIGFuZCBhIHRhcmdldCBjb250YWluZXIgYXJlIG5lZWRlZDpcbiAqXG4gKiAgICAgaW1wb3J0IE1hcCBmcm9tICdvbC9NYXAnO1xuICogICAgIGltcG9ydCBWaWV3IGZyb20gJ29sL1ZpZXcnO1xuICogICAgIGltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZSc7XG4gKiAgICAgaW1wb3J0IE9TTSBmcm9tICdvbC9zb3VyY2UvT1NNJztcbiAqXG4gKiAgICAgdmFyIG1hcCA9IG5ldyBNYXAoe1xuICogICAgICAgdmlldzogbmV3IFZpZXcoe1xuICogICAgICAgICBjZW50ZXI6IFswLCAwXSxcbiAqICAgICAgICAgem9vbTogMVxuICogICAgICAgfSksXG4gKiAgICAgICBsYXllcnM6IFtcbiAqICAgICAgICAgbmV3IFRpbGVMYXllcih7XG4gKiAgICAgICAgICAgc291cmNlOiBuZXcgT1NNKClcbiAqICAgICAgICAgfSlcbiAqICAgICAgIF0sXG4gKiAgICAgICB0YXJnZXQ6ICdtYXAnXG4gKiAgICAgfSk7XG4gKlxuICogVGhlIGFib3ZlIHNuaXBwZXQgY3JlYXRlcyBhIG1hcCB1c2luZyBhIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvVGlsZX0gdG9cbiAqIGRpc3BsYXkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvT1NNfk9TTX0gT1NNIGRhdGEgYW5kIHJlbmRlciBpdCB0byBhIERPTVxuICogZWxlbWVudCB3aXRoIHRoZSBpZCBgbWFwYC5cbiAqXG4gKiBUaGUgY29uc3RydWN0b3IgcGxhY2VzIGEgdmlld3BvcnQgY29udGFpbmVyICh3aXRoIENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtdmlld3BvcnRgKSBpbiB0aGUgdGFyZ2V0IGVsZW1lbnQgKHNlZSBgZ2V0Vmlld3BvcnQoKWApLCBhbmQgdGhlbiB0d29cbiAqIGZ1cnRoZXIgZWxlbWVudHMgd2l0aGluIHRoZSB2aWV3cG9ydDogb25lIHdpdGggQ1NTIGNsYXNzIG5hbWVcbiAqIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAgZm9yIGNvbnRyb2xzIGFuZCBzb21lIG92ZXJsYXlzLCBhbmQgb25lIHdpdGhcbiAqIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyYCBmb3Igb3RoZXIgb3ZlcmxheXMgKHNlZSB0aGUgYHN0b3BFdmVudGBcbiAqIG9wdGlvbiBvZiB7QGxpbmsgbW9kdWxlOm9sL092ZXJsYXl+T3ZlcmxheX0gZm9yIHRoZSBkaWZmZXJlbmNlKS4gVGhlIG1hcFxuICogaXRzZWxmIGlzIHBsYWNlZCBpbiBhIGZ1cnRoZXIgZWxlbWVudCB3aXRoaW4gdGhlIHZpZXdwb3J0LlxuICpcbiAqIExheWVycyBhcmUgc3RvcmVkIGFzIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IGluXG4gKiBsYXllckdyb3Vwcy4gQSB0b3AtbGV2ZWwgZ3JvdXAgaXMgcHJvdmlkZWQgYnkgdGhlIGxpYnJhcnkuIFRoaXMgaXMgd2hhdCBpc1xuICogYWNjZXNzZWQgYnkgYGdldExheWVyR3JvdXBgIGFuZCBgc2V0TGF5ZXJHcm91cGAuIExheWVycyBlbnRlcmVkIGluIHRoZVxuICogb3B0aW9ucyBhcmUgYWRkZWQgdG8gdGhpcyBncm91cCwgYW5kIGBhZGRMYXllcmAgYW5kIGByZW1vdmVMYXllcmAgY2hhbmdlIHRoZVxuICogbGF5ZXIgY29sbGVjdGlvbiBpbiB0aGUgZ3JvdXAuIGBnZXRMYXllcnNgIGlzIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yXG4gKiBgZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpYC4gTm90ZSB0aGF0IHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvR3JvdXB+R3JvdXB9XG4gKiBpcyBhIHN1YmNsYXNzIG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX0sIHNvIGxheWVycyBlbnRlcmVkIGluIHRoZVxuICogb3B0aW9ucyBvciBhZGRlZCB3aXRoIGBhZGRMYXllcmAgY2FuIGJlIGdyb3Vwcywgd2hpY2ggY2FuIGNvbnRhaW4gZnVydGhlclxuICogZ3JvdXBzLCBhbmQgc28gb24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXAsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5NYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIW9wdGlvbnMuY29udHJvbHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY29udHJvbHMgPSBkZWZhdWx0Q29udHJvbHMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuaW50ZXJhY3Rpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zLmludGVyYWN0aW9ucyA9IGRlZmF1bHRJbnRlcmFjdGlvbnMoe1xuICAgICAgICAgICAgICAgIG9uRm9jdXNPbmx5OiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE1hcC5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlTWFwUmVuZGVyZXIodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwO1xufShQbHVnZ2FibGVNYXApKTtcbmV4cG9ydCBkZWZhdWx0IE1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbFxuICovXG5pbXBvcnQgQXR0cmlidXRpb24gZnJvbSAnLi9jb250cm9sL0F0dHJpYnV0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgUm90YXRlIGZyb20gJy4vY29udHJvbC9Sb3RhdGUuanMnO1xuaW1wb3J0IFpvb20gZnJvbSAnLi9jb250cm9sL1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBBdHRyaWJ1dGlvbiB9IGZyb20gJy4vY29udHJvbC9BdHRyaWJ1dGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIENvbnRyb2wgfSBmcm9tICcuL2NvbnRyb2wvQ29udHJvbC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEZ1bGxTY3JlZW4gfSBmcm9tICcuL2NvbnRyb2wvRnVsbFNjcmVlbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdXNlUG9zaXRpb24gfSBmcm9tICcuL2NvbnRyb2wvTW91c2VQb3NpdGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE92ZXJ2aWV3TWFwIH0gZnJvbSAnLi9jb250cm9sL092ZXJ2aWV3TWFwLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUm90YXRlIH0gZnJvbSAnLi9jb250cm9sL1JvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNjYWxlTGluZSB9IGZyb20gJy4vY29udHJvbC9TY2FsZUxpbmUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tIH0gZnJvbSAnLi9jb250cm9sL1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tU2xpZGVyIH0gZnJvbSAnLi9jb250cm9sL1pvb21TbGlkZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tVG9FeHRlbnQgfSBmcm9tICcuL2NvbnRyb2wvWm9vbVRvRXh0ZW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbj10cnVlXSBJbmNsdWRlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NvbnRyb2wvQXR0cmlidXRpb24uanNcIikuT3B0aW9uc30gW2F0dHJpYnV0aW9uT3B0aW9uc11cbiAqIE9wdGlvbnMgZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyb3RhdGU9dHJ1ZV0gSW5jbHVkZVxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NvbnRyb2wvUm90YXRlLmpzXCIpLk9wdGlvbnN9IFtyb3RhdGVPcHRpb25zXSBPcHRpb25zXG4gKiBmb3Ige0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbem9vbV0gSW5jbHVkZSB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL1pvb20uanNcIikuT3B0aW9uc30gW3pvb21PcHRpb25zXSBPcHRpb25zIGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogU2V0IG9mIGNvbnRyb2xzIGluY2x1ZGVkIGluIG1hcHMgYnkgZGVmYXVsdC4gVW5sZXNzIGNvbmZpZ3VyZWQgb3RoZXJ3aXNlLFxuICogdGhpcyByZXR1cm5zIGEgY29sbGVjdGlvbiBjb250YWluaW5nIGFuIGluc3RhbmNlIG9mIGVhY2ggb2YgdGhlIGZvbGxvd2luZ1xuICogY29udHJvbHM6XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnN9IFtvcHRfb3B0aW9uc11cbiAqIERlZmF1bHRzIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fVxuICogQ29udHJvbHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgIHZhciBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgdmFyIHpvb21Db250cm9sID0gb3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb20gOiB0cnVlO1xuICAgIGlmICh6b29tQ29udHJvbCkge1xuICAgICAgICBjb250cm9scy5wdXNoKG5ldyBab29tKG9wdGlvbnMuem9vbU9wdGlvbnMpKTtcbiAgICB9XG4gICAgdmFyIHJvdGF0ZUNvbnRyb2wgPSBvcHRpb25zLnJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGUgOiB0cnVlO1xuICAgIGlmIChyb3RhdGVDb250cm9sKSB7XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobmV3IFJvdGF0ZShvcHRpb25zLnJvdGF0ZU9wdGlvbnMpKTtcbiAgICB9XG4gICAgdmFyIGF0dHJpYnV0aW9uQ29udHJvbCA9IG9wdGlvbnMuYXR0cmlidXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXR0cmlidXRpb24gOiB0cnVlO1xuICAgIGlmIChhdHRyaWJ1dGlvbkNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbHMucHVzaChuZXcgQXR0cmlidXRpb24ob3B0aW9ucy5hdHRyaWJ1dGlvbk9wdGlvbnMpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRyb2xzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udHJvbC5qcy5tYXAiLCJpbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XHJcbmltcG9ydCBQbHVnZ2FibGVNYXAgZnJvbSBcIm9sL1BsdWdnYWJsZU1hcFwiO1xyXG5cclxuLyoqXHJcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIENvbnRyb2xzIHdpdGggY2hpbGQgY29udHJvbHNcclxuICpcclxuICogVGhlIGVsZW1lbnQgcHJvcGVydHkgb2YgdGhlIENvbXBvc2l0ZUNvbnRyb2wgd2lsbCBiZWNvbWUgdGhlIHRhcmdldCBlbGVtZW50IG9mIGV2ZXJ5IGNoaWxkIGNvbnRyb2xcclxuICogYW5kIGFsc28gdGhlIGN1cnJlbnQgbWFwIHdpbGwgYmUgc2V0IGZvciBlYWNoIGNoaWxkIGNvbnRyb2xcclxuICpcclxuICogVGhpcyBpcyB1c2VkIGUuZy4gZm9yIHRoZSAobGF5b3V0KSBjb250YWluZXIgY29udHJvbHNcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb3NpdGVDb250cm9sIGV4dGVuZHMgQ29udHJvbCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBjaGlsZCBjb250cm9sc1xyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgY2hpbGRDb250cm9sczogQ29udHJvbFtdO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIEEgc2luZ2xlIGNoaWxkIGNvbnRyb2wgb3IgYSBjb2xsZWN0aW9uIG9mIGNoaWxkIGNvbnRyb2xzXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5MYXllciBjb250cm9sIG9wdGlvbnNcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSwgb3B0aW9ucz86IE9wdGlvbnMpIHtcclxuXHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuXHJcbiAgICBpZighb3B0cy5lbGVtZW50KSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1jb21wb3NpdGUnO1xyXG4gICAgICBvcHRzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjaGlsZHJlbjtcclxuICAgIGlmIChjaGlsZENvbnRyb2xzIGluc3RhbmNlb2YgQ29udHJvbCkge1xyXG4gICAgICBjaGlsZHJlbiA9IFtjaGlsZENvbnRyb2xzXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNoaWxkcmVuID0gY2hpbGRDb250cm9scztcclxuICAgIH1cclxuXHJcbiAgICBjaGlsZHJlbi5mb3JFYWNoKGNvbnRyb2wgPT4ge1xyXG4gICAgICBjb250cm9sLnNldFRhcmdldChvcHRzLmVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3VwZXIob3B0cyk7XHJcblxyXG4gICAgdGhpcy5jaGlsZENvbnRyb2xzID0gY2hpbGRyZW47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgb3ZlcnJpZGVuIHNldE1hcCBtZXRob2RcclxuICAgKlxyXG4gICAqIEhlcmUgd2Ugc2V0IHRoZSBtYXAgZm9yIGFsbCBjaGlsZCBjb250cm9sc1xyXG4gICAqIEBwYXJhbSBtYXAgdGhlIGN1cnJlbnQgbWFwXHJcbiAgICovXHJcbiAgc2V0TWFwKG1hcDogUGx1Z2dhYmxlTWFwKTogdm9pZCB7XHJcbiAgICBzdXBlci5zZXRNYXAobWFwKTtcclxuICAgIGlmKG1hcCkge1xyXG4gICAgICB0aGlzLmNoaWxkQ29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICBjb250cm9sLnNldE1hcChtYXApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZ2V0dGVyIGZvciB0aGUgY2hpbGQgY29udHJvbHNcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHVibGljIGdldENoaWxkQ29udHJvbHMoKTogQ29udHJvbFtdIHtcclxuICAgIHJldHVybiB0aGlzLmNoaWxkQ29udHJvbHM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDb250cm9sLCB7T3B0aW9uc30gZnJvbSBcIm9sL2NvbnRyb2wvQ29udHJvbFwiO1xyXG5pbXBvcnQge0NvbXBvc2l0ZUNvbnRyb2x9IGZyb20gXCIuLi9iYXNlXCI7XHJcblxyXG4vKipcclxuICogT3B0aW9ucyBmb3IgYSB7QGxpbmtjb2RlIENvbnRhaW5lcn1cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29udGFpbmVyT3B0aW9ucyBleHRlbmRzIE9wdGlvbnMge1xyXG4gIC8qKiBUaGUgc3R5bGUgY2xhc3Mgb2YgdGhlIGNvbnRhaW5lciAqKi9cclxuICBzdHlsZUNsYXNzOiBzdHJpbmdcclxuICAvKiogQSBjaGlsZCBjb250cm9sIG9yIGFuIGFycmF5IG9mIGNoaWxkIGNvbnRyb2xzICoqL1xyXG4gIGNoaWxkQ29udHJvbHM6IENvbnRyb2wgfCBDb250cm9sW10sXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGJhc2UgY2xhc3MgZm9yIGEgY29udGFpbmVyIG9mIGNvbnRyb2xzIGluIHRoZSBzYW1lIEhUTUwgZGl2IGVsZW1lbnRcclxuICpcclxuICogVGhpcyBjb250cm9sIGNyZWF0ZXMgYSBwYXJlbnQgZGl2LCBhbmQgcHV0cyB0aGUgY2hpbGQgY29udHJvbHMgaW4gaXQuXHJcbiAqIFRhcmdldCBhbmQgbWFwIGFyZSBzZXQgYXV0b21hdGljYWxseSAtIHNlZSB7QGxpbmtjb2RlIENvbXBvc2l0ZUNvbnRyb2x9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgQ29tcG9zaXRlQ29udHJvbCB7XHJcblxyXG4gIC8qKiBUaGUgc3R5bGUgY2xhc3Mgb2YgdGhlIGNvbnRhaW5lciAqKi9cclxuICBwcml2YXRlIHJlYWRvbmx5IHN0eWxlQ2xhc3M6IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY29udGFpbmVyIG9wdGlvbnNcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogQ29udGFpbmVyT3B0aW9ucykge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCA/IG9wdGlvbnMuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQob3B0aW9ucy5zdHlsZUNsYXNzKTtcclxuICAgIG9wdGlvbnMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICBzdXBlcihvcHRpb25zLmNoaWxkQ29udHJvbHMsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5zdHlsZUNsYXNzID0gb3B0aW9ucy5zdHlsZUNsYXNzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBnZXR0ZXIgZm9yIHRoZSBzdHlsZSBjbGFzc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRTdHlsZUNsYXNzKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5zdHlsZUNsYXNzO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiLyoqXHJcbiAqIEEgc2ltcGxlIGhlbHBlciBtZXRob2QgZm9yIHNpbXBsZXIgaGFuZGxpbmcgb2YgYXJyYXlzLlxyXG4gKiBSZWdhcmRsZXNzIGlmIHlvdSBnaXZlIGEgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MgeW91IHdpbGwgcmVjZWl2ZSBhbiBhcnJheVxyXG4gKlxyXG4gKiBAcGFyYW0gdmFsdWUgYSBzdHJpbmcgb3IgYW4gYXJyYXkgb2Ygc3RyaW5nXHJcbiAqL1xyXG5jb25zdCB0b0FycmF5ID0gKHZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSkgPT4ge1xyXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gW3ZhbHVlXTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIGNoaWxkIEhUTUwgZWxlbWVudCBpZiBpdCBkb2VzIG5vdCBleGlzdCBhbmQgYWRkcyBpdCBhcyBjaGlsZCB0byB0aGUgZ2l2ZW4gZWxlbWVudFxyXG4gKlxyXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnRcclxuICogQHBhcmFtIHRhZ05hbWUgdGhlIHRhZyBuYW1lIGZvciB0aGUgbmV3IGNoaWxkIC0gZS5nLiBkaXZcclxuICogQHBhcmFtIGNsYXNzTmFtZSBhIGNzcyBjbGFzcyBuYW1lIGZvciB0aGUgbmV3IGNoaWxkXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlQ2hpbGRJZk5vdEV4aXN0ID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgdGFnTmFtZTogc3RyaW5nLCBjbGFzc05hbWU6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICBpZiAoIWVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y2xhc3NOYW1lfWApKSB7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KHRhZ05hbWUsIGNsYXNzTmFtZSkpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkVuY2xvc2luZyBlbGVtZW50IGlzIG51bGxcIik7XHJcbiAgICB9XHJcbiAgfVxyXG47XHJcblxyXG4vKipcclxuICogUmVtb3ZlcyBhIGNoaWxkIGVsZW1lbnQgd2l0aCBnaXZlbiBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudFxyXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnRcclxuICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGNoaWxkIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBjb25zdCByZW1vdmVDaGlsZElmRXhpc3QgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsLCBjbGFzc05hbWU6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gIGlmIChlbGVtZW50ICE9IG51bGwpIHtcclxuICAgIGNvbnN0IGNoaWxkID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjbGFzc05hbWV9YCk7XHJcbiAgICBpZiAoY2hpbGQgIT0gbnVsbCAmJiBlbGVtZW50LmNvbnRhaW5zKGNoaWxkKSkge1xyXG4gICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgYWxsIGNoaWxkcmVuIGVsZW1lbnRzIHdpdGggZ2l2ZW4gY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGdpdmVuIHBhcmVudCBlbGVtZW50LlxyXG4gKiBUaGUgY2hpbGRyZW4gZG9uJ3QgaGF2ZSB0byBiZSBhIGRpcmVjdCBjaGlsZCBvZiB0aGUgcGFyZW50IGVsZW1lbnQuXHJcbiAqIEBwYXJhbSBlbGVtZW50IHRoZSBwYXJlbnQgZWxlbWVudFxyXG4gKiBAcGFyYW0gY2xhc3NOYW1lIHRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgY2hpbGQgZWxlbWVudFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJlbW92ZUNoaWxkcmVuSWZFeGlzdCA9IChlbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwsIGNsYXNzTmFtZTogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2NsYXNzTmFtZX1gKTtcclxuICAgIGlmIChjaGlsZHJlbiAhPSBudWxsICYmIGNoaWxkcmVuLmxlbmd0aD4wKSB7XHJcbiAgICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gY2hpbGQucGFyZW50RWxlbWVudCEucmVtb3ZlQ2hpbGQoY2hpbGQpKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgSFRNTCBlbGVtZW50XHJcbiAqIEBwYXJhbSB0YWdOYW1lIHRoZSB0YWcgbmFtZSBmb3IgdGhlIG5ldyBlbGVtZW50IC0gZS5nLiBkaXZcclxuICogQHBhcmFtIGNsYXNzTmFtZSBhIGNzcyBjbGFzcyBuYW1lIGZvciB0aGUgbmV3IGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVFbGVtZW50ID0gKHRhZ05hbWU6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpOiBIVE1MRWxlbWVudCA9PiB7XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XHJcbiAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgcmV0dXJuIGVsZW1lbnQ7XHJcbn07XHJcblxyXG4vKipcclxuICogVG9nZ2xlcyBjc3MgY2xhc3MgbmFtZXMgb2YgZWxlbWVudHMgZm91bmQgYnkgdGhlIGdpdmVuIHNlbGVjdG9yKHMpXHJcbiAqIEBwYXJhbSBzZWxlY3RvcnMydG9nZ2xlIG9uZSBvciBtb3JlIGNzcyBzZWxlY3RvcnNcclxuICogQHBhcmFtIHRvZ2dsZUNsYXNzTmFtZXMgb25lIG9yIG1vcmUgY2xhc3MgbmFtZXMgdG8gdG9nZ2xlXHJcbiAqIEBwYXJhbSBhbmNlc3RvciBhbiBhbmNlc3RvciBlbGVtZW50IGZvciB0aGUgcXVlcnkgc2VsZWN0aW9uIChkZWZhdWx0IGlzIGRvY3VtZW50KVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvZ2dsZUNsYXNzID0gKHNlbGVjdG9yczJ0b2dnbGU6IHN0cmluZyB8IHN0cmluZ1tdLCB0b2dnbGVDbGFzc05hbWVzOiBzdHJpbmcgfCBzdHJpbmdbXSwgYW5jZXN0b3I6IERvY3VtZW50IHwgRWxlbWVudCA9IGRvY3VtZW50KTogdm9pZCA9PiB7XHJcbiAgdG9BcnJheShzZWxlY3RvcnMydG9nZ2xlKS5mb3JFYWNoKHNlbGVjdG9yMnRvZ2dsZSA9PiB7XHJcbiAgICBjb25zdCB0b2dnbGVFbGVtZW50ID0gYW5jZXN0b3IucXVlcnlTZWxlY3RvcihzZWxlY3RvcjJ0b2dnbGUpO1xyXG4gICAgaWYgKHRvZ2dsZUVsZW1lbnQpIHtcclxuICAgICAgdG9BcnJheSh0b2dnbGVDbGFzc05hbWVzKS5mb3JFYWNoKFxyXG4gICAgICAgIHRvZ2dsZUNsYXNzTmFtZSA9PiB0b2dnbGVFbGVtZW50Py5jbGFzc0xpc3QudG9nZ2xlKHRvZ2dsZUNsYXNzTmFtZSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZHMgYSBjbGljayBldmVudCBsaXN0ZW5lciB0byBlbGVtZW50cyB3aGljaCB0cmlnZ2VycyBjc3MgY2xhc3MgdG9nZ2xpbmdcclxuICogQHBhcmFtIGNsaWNrU2VsZWN0b3JzIG9uZSBvciBtb3JlIGNzcyBzZWxlY3RvcnMgZm9yIHRoZSBlbGVtZW50cyB3aGljaCBzaGFsbCBsaXN0ZW4gdG8gY2xpY2sgZXZlbnRzXHJcbiAqIEBwYXJhbSBzZWxlY3RvcnMydG9nZ2xlIG9uZSBvciBtb3JlIGNzcyBjbGFzcyBzZWxlY3RvcnMgZm9yIHRoZSBlbGVtZW50cyB3aXRoIHRoZSBjc3MgY2xhc3NlcyB0byB0b2dnbGVcclxuICogQHBhcmFtIHRvZ2dsZUNsYXNzTmFtZXMgb25lIG9yIG1vcmUgY3NzIGNsYXNzIG5hbWVzIHdoaWNoIHNoYWxsIHRvZ2dsZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvZ2dsZUNsYXNzT25DbGljayA9IChjbGlja1NlbGVjdG9yczogc3RyaW5nIHwgc3RyaW5nW10sIHNlbGVjdG9yczJ0b2dnbGU6IHN0cmluZyB8IHN0cmluZ1tdLCB0b2dnbGVDbGFzc05hbWVzOiBzdHJpbmcgfCBzdHJpbmdbXSk6IHZvaWQgPT4ge1xyXG4gIHRvQXJyYXkoY2xpY2tTZWxlY3RvcnMpLmZvckVhY2goY2xpY2tTZWxlY3RvciA9PiB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsaWNrU2VsZWN0b3IpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICB0b2dnbGVDbGFzcyhzZWxlY3RvcnMydG9nZ2xlLCB0b2dnbGVDbGFzc05hbWVzKTtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tIFwib2wvY29udHJvbC9Db250cm9sXCI7XHJcbmltcG9ydCB7Q29tcG9zaXRlQ29udHJvbH0gZnJvbSBcIi4vQ29tcG9zaXRlQ29udHJvbFwiO1xyXG5pbXBvcnQgQmFzZUV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuaW1wb3J0IEV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuaW1wb3J0IHtPYmplY3RPblNpZ25hdHVyZX0gZnJvbSBcIm9sL09iamVjdFwiO1xyXG5pbXBvcnQge09uUmV0dXJufSBmcm9tIFwib2wvT2JzZXJ2YWJsZVwiO1xyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIHtAbGlua2NvZGUgQnV0dG9ufVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdXR0b25PcHRpb25zIGV4dGVuZHMgT3B0aW9ucyB7XHJcblxyXG4gIC8qKiBUaGUgdW5pY29kZSBudW1iZXIgb2YgdGhlIGZvbnQgaWNvbiwgZS5nLiAweGU5MDMgKiovXHJcbiAgdW5pY29kZT86IG51bWJlciB8IG51bGwsXHJcblxyXG4gIC8qKiBUaGUgdGV4dCB1c2VkIGZvciB0aGUgdGl0bGUgYW5kIGFyaWEgYXR0cmlidXRlcyBvZiB0aGUgYnV0dG9uIGNvbnRhaW5lciBhbmQgdGhlIGJ1dHRvbiBpdHNlbGYuICoqL1xyXG4gIHRvb2x0aXA/OiBzdHJpbmcsXHJcblxyXG4gIC8qKiBTdHlsZSBjbGFzcyBuYW1lIGZvciB0aGUgY29udGFpbmVyICAqKi9cclxuICBjb250YWluZXJDbGFzc05hbWU/OiBzdHJpbmcsXHJcblxyXG4gIC8qKiBTdHlsZSBjbGFzcyBuYW1lIGZvciB0aGUgYnV0dG9uIGVsZW1lbnQgKiovXHJcbiAgaWNvbkNsYXNzTmFtZT86IHN0cmluZyB8IG51bGwsXHJcblxyXG4gIC8qKiBJZiAndHJ1ZScgdGhlIHRvb2x0aXAgdGV4dCB3aWxsIGJlIHJlbmRlcmVkIGFzIHZpc2libGUgdGV4dCBlbGVtZW50ICAqKi9cclxuICB0b29sdGlwQXNUZXh0RWxlbWVudD86IGJvb2xlYW4sXHJcblxyXG4gIC8qKiBJZiAndHJ1ZScgdGhlIGRlZmF1bHQgYnV0dG9uIGNsaWNrIGhhbmRsZXIgd2lsbCBub3QgYmUgZXhlY3V0ZWQgKiovXHJcbiAgcHJldmVudERlZmF1bHQ/OiBib29sZWFuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgZXh0ZW5kZWQgc2lnbmF0dXJlIGZvciB0aGUgb24gbWV0aG9kXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5leHBvcnQgdHlwZSBCdXR0b25PblNpZ25hdHVyZTxSZXR1cm4+ID0gKCh0eXBlOiBcImNsaWNrXCIgfCBcImNsaWNrXCJbXSwgbGlzdGVuZXI6IChldmVudDogRXZlbnQpID0+IGFueSkgPT4gUmV0dXJuKSAmIE9iamVjdE9uU2lnbmF0dXJlPFJldHVybj47XHJcblxyXG4vKipcclxuICogKipBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBidXR0b25zKipcclxuICpcclxuICogQSBidXR0b24gaXMgYW4gT3BlbkxheWVyIGNvbnRyb2wgd2l0aCBhIGRlZmF1bHQgbGF5b3V0LiBZb3UgY2FuIGNoYW5nZSBzb21lIHN0eWxlIGNsYXNzZXMsIHRvb2x0aXBzIGV0Y1xyXG4gKiB3aXRoIHRoZSB7QGxpbmtjb2RlIEJ1dHRvbk9wdGlvbnN9XHJcbiAqXHJcbiAqIFNvbWUgYnV0dG9ucyBleHRlbnQgZnJvbSBPcGVuTGF5ZXIgY29udHJvbHMgd2l0aCBpdHMgZmVhdHVyZXMsIGJ1dCBtb3N0IG9mIHRoZW0gYXJlIGp1c3QgYSBzaGVsbCBmb3IgZnVydGhlciBpbXBsZW1lbnRhdGlvbnNcclxuICpcclxuICogWW91IGNhbiBzZXQgdGhlIGljb24gZm9udCBvZiB0aGUgYnV0dG9uIHdpdGggdGhlIHVuaWNvZGUgbnVtYmVyIG9yIHRoZSBpY29uQ2xhc3NOYW1lIG9wdGlvbi5cclxuICpcclxuICogQGV2ZW50IGNsaWNrIEEgQnV0dG9uIGRpc3BhdGNoZXMgdGhlIENMSUNLIGV2ZW50IHNvIHRoYXQgeW91IGNhbiBsaXN0ZW4gdG8gaXQgd2l0aCB0aGUgKm9uKiBPcGVuTGF5ZXIgbWV0aG9kXHJcbiAqIEV4YW1wbGU6XHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogY29uc3QgcHJpbnRDdHJsID0gbmV3IFByaW50KHsgcHJldmVudERlZmF1bHQ6IHRydWUgfSk7XHJcbiAqIHByaW50Q3RybC5vbihFdmVudFR5cGUuQ0xJQ0ssIHRoaXMuaGFuZGxlUHJpbnQpO1xyXG4gKiBgYGBcclxuICogQWx0ZXJuYXRpdmx5IHlvdSBjYW4gb3ZlcnJpZGUgdGhlIHtAbGlua2NvZGUgaGFuZGxlRXZlbnR9IG1ldGhvZFxyXG4gKlxyXG4gKiBAcmVtYXJrIEFzIGEgYnV0dG9uIGlzIGFsc28gYSBDb21wb3NpdGVDb250cm9sIGl0IGNhbiBoYXZlIGNoaWxkIGNvbnRyb2xzLiBFLmcuIGl0J3MgdXNlZCB3aXRoIHRoZSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn1cclxuICpcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBDb21wb3NpdGVDb250cm9sIHtcclxuXHJcbiAgLyoqIFRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIGJ1dHRvbiAqKi9cclxuICBwcm90ZWN0ZWQgYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbiAgLyoqIFRoZSB1bmljb2RlIGZvciB0aGUgZm9udCBpY29uICoqL1xyXG4gIHByb3RlY3RlZCB1bmljb2RlOiBudW1iZXIgfCBudWxsO1xyXG5cclxuICAvKiogVGhlIGljb25zIGNzcyBjbGFzcyBuYW1lICoqL1xyXG4gIHByb3RlY3RlZCBpY29uQ2xhc3NOYW1lOiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiovXHJcbiAgcHVibGljIG9uITogQnV0dG9uT25TaWduYXR1cmU8T25SZXR1cm4+O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIEJ1dHRvbiBvcHRpb25zXHJcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgT3B0aW9uYWwgY2hpbGQgY29udHJvbHNcclxuICAgKiBAZXZlbnQgY2xpY2sgVGhlIGV2ZW50IGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEJ1dHRvbk9wdGlvbnMsIGNoaWxkQ29udHJvbHM/OiBDb250cm9sIHwgQ29udHJvbFtdKSB7XHJcblxyXG4gICAgb3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCA9IG9wdGlvbnMudG9vbHRpcEFzVGV4dEVsZW1lbnQgPyBvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50IDogZmFsc2U7XHJcblxyXG4gICAgb3B0aW9ucy51bmljb2RlID0gb3B0aW9ucy51bmljb2RlIHx8IG51bGw7XHJcbiAgICBvcHRpb25zLmljb25DbGFzc05hbWUgPSBvcHRpb25zLmljb25DbGFzc05hbWUgfHwgbnVsbDtcclxuICAgIGlmKG9wdGlvbnMudW5pY29kZT09PW51bGwgJiYgb3B0aW9ucy5pY29uQ2xhc3NOYW1lPT09bnVsbCkge1xyXG4gICAgICBvcHRpb25zLnVuaWNvZGUgPSAweGU5MDM7XHJcbiAgICB9XHJcbiAgICBvcHRpb25zLnRvb2x0aXAgPSBvcHRpb25zLnRvb2x0aXAgfHwgJyc7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyRWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCA/IG9wdGlvbnMuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgYnV0dG9uQ29udGFpbmVyRWxlbWVudC5jbGFzc05hbWUgPSBvcHRpb25zLmNvbnRhaW5lckNsYXNzTmFtZSA/IG9wdGlvbnMuY29udGFpbmVyQ2xhc3NOYW1lIDogJ29sLWNvbnRyb2wgYmdpcy1jb250cm9sJztcclxuICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQudGl0bGUgPSBvcHRpb25zLnRvb2x0aXA7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1pY29uLWJ1dHRvbic7XHJcblxyXG4gICAgaWYob3B0aW9ucy51bmljb2RlICE9PSBudWxsKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludChvcHRpb25zLnVuaWNvZGUpO1xyXG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmljb25DbGFzc05hbWUgIT09IG51bGwpIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZChCdXR0b24uZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKG9wdGlvbnMuaWNvbkNsYXNzTmFtZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbkVsZW1lbnQudGl0bGUgPSBvcHRpb25zLnRvb2x0aXA7XHJcbiAgICBpZihvcHRpb25zLnRvb2x0aXAubGVuZ3RoID4gMCkge1xyXG4gICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIG9wdGlvbnMudG9vbHRpcCk7XHJcbiAgICB9XHJcbiAgICBidXR0b25Db250YWluZXJFbGVtZW50LmFwcGVuZChidXR0b25FbGVtZW50KTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCkge1xyXG4gICAgICBjb25zdCBkaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgIGRpdkVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtY29udHJvbC1idXR0b24tdGV4dC1jb250YWluZXInO1xyXG4gICAgICBjb25zdCBzcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICAgIHNwYW5FbGVtZW50LnRleHRDb250ZW50ID0gb3B0aW9ucy50b29sdGlwO1xyXG4gICAgICBzcGFuRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1jb250cm9sLWJ1dHRvbi10ZXh0JztcclxuICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChzcGFuRWxlbWVudCk7XHJcbiAgICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2RWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3VwZXIoY2hpbGRDb250cm9scyA/IGNoaWxkQ29udHJvbHMgOiBbXSwge1xyXG4gICAgICAuLi5vcHRpb25zLFxyXG4gICAgICBlbGVtZW50OiBidXR0b25Db250YWluZXJFbGVtZW50XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnVuaWNvZGUgPSBvcHRpb25zLnVuaWNvZGU7XHJcbiAgICB0aGlzLmljb25DbGFzc05hbWUgPSBvcHRpb25zLmljb25DbGFzc05hbWU7XHJcbiAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbkVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQoXCJjbGlja1wiKSwgZmFsc2UpO1xyXG5cclxuICAgIGlmKCFvcHRpb25zLnByZXZlbnREZWZhdWx0KSB7XHJcbiAgICAgIHRoaXMub24oXCJjbGlja1wiLCB0aGlzLmhhbmRsZUV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIGlzIHRoZSBkZWZhdWx0IGNsaWNrIGhhbmRsZXIgb2YgYSBidXR0b25cclxuICAgKlxyXG4gICAqIE92ZXJyaWRlIGl0IGZvciB5b3VyIGJlbmVmaXQgb3IgZGlzYWJsZSBleGVjdXRpb24gd2l0aCBvcHRpb25zLnByZXZlbnREZWZhdWx0XHJcbiAgICogQHBhcmFtIGV2ZW50XHJcbiAgICovXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xyXG4gIHB1YmxpYyBoYW5kbGVFdmVudChldmVudDogQmFzZUV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBnZXR0ZXIgZm9yIHRoZSBidXR0b25cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0QnV0dG9uKCk6IEhUTUxCdXR0b25FbGVtZW50IHtcclxuICAgIHJldHVybiB0aGlzLmJ1dHRvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgc2V0dGVyIHRvIGNoYW5nZSB0aGUgdW5pY29kZSBmb3IgdGhlIGJ1dHRvbiBmb250IGljb24uXHJcbiAgICogUmVtb3ZlcyB0aGUgaWNvbiB0YWcgZm9yIHRoZSBidXR0b24uXHJcbiAgICogQHBhcmFtIHVuaWNvZGVcclxuICAgKi9cclxuICBwdWJsaWMgc2V0QnV0dG9uVW5pY29kZSh1bmljb2RlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuZ2V0QnV0dG9uKCkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB0aGlzLmdldEJ1dHRvbigpLnRleHRDb250ZW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQodW5pY29kZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHNldHRlciB0byBjaGFuZ2UgdGhlIGljb24gY2xhc3MgbmFtZSBmb3IgdGhlIGJ1dHRvbi5cclxuICAgKiBSZXNldHMgdGhlIHVuaWNvZGUgZm9yIHRoZSBidXR0b24gaWNvbi5cclxuICAgKiBAcGFyYW0gaWNvbkNsYXNzTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRCdXR0b25JY29uQ2xhc3NOYW1lKGljb25DbGFzc05hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5nZXRCdXR0b24oKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgdGhpcy5nZXRCdXR0b24oKS5pbm5lckhUTUwgPSAnJztcclxuICAgIHRoaXMuZ2V0QnV0dG9uKCkuYXBwZW5kQ2hpbGQoQnV0dG9uLmdldEljb25FbGVtZW50Rm9ySWNvbkNsYXNzTmFtZShpY29uQ2xhc3NOYW1lKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYW4gaWNvbiBlbGVtZW50IGZvciB0aGUgZ2l2ZW4gY3NzIGNsYXNzIG5hbWVcclxuICAgKlxyXG4gICAqIEBwYXJhbSBpY29uQ2xhc3NOYW1lXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUoaWNvbkNsYXNzTmFtZTogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgaWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICBpY29uRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1pY29uICcgKyBpY29uQ2xhc3NOYW1lO1xyXG4gICAgcmV0dXJuIGljb25FbGVtZW50O1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IEV2ZW50VHlwZSBmcm9tIFwib2wvZXZlbnRzL0V2ZW50VHlwZVwiO1xyXG5pbXBvcnQge2NyZWF0ZUNoaWxkSWZOb3RFeGlzdCwgcmVtb3ZlQ2hpbGRyZW5JZkV4aXN0LCB0b2dnbGVDbGFzc30gZnJvbSBcIi4uLy4uLy4uL3V0aWwvZG9tXCI7XHJcbmltcG9ydCB7Q29udGFpbmVyfSBmcm9tIFwiLi4vY29udGFpbmVyXCI7XHJcbmltcG9ydCB7QnV0dG9uLCBCdXR0b25PcHRpb25zfSBmcm9tIFwiLi9CdXR0b25cIjtcclxuaW1wb3J0IEJhc2VFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcblxyXG4vKipcclxuICogVGhlIHRvZ2dsZSBldmVudCB3aGljaCBpcyBkaXNwYXRjaGVkIHdoZW4gdGhlIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufSBpcyBjbGlja2VkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9nZ2xlRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xyXG5cclxuICAvKiogQSBmbGFnIHRvIHNob3cgdGhlIHN0YXR1cyBvZiBhIHRvZ2dsZSBldmVudCAqKi9cclxuICBpc1RvZ2dsZWQ6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGUuIFVzdWFsbHkgYSB7QGxpbmtjb2RlIFRvZ2dsZUV2ZW50VHlwZX1cclxuICAgKiBAcGFyYW0gaXNUb2dnbGVkIFRoZSBmbGFnIHRvIHNob3cgdGhlIHN0YXRlIG9mIHRoZSB0b2dnbGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIGlzVG9nZ2xlZDogYm9vbGVhbikge1xyXG4gICAgc3VwZXIodHlwZSk7XHJcblxyXG4gICAgdGhpcy5pc1RvZ2dsZWQgPSBpc1RvZ2dsZWQ7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIG9wdGlvbiBmb3IgdGhlIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUb2dnbGVCdXR0b25PcHRpb25zIGV4dGVuZHMgQnV0dG9uT3B0aW9ucyB7XHJcbiAgLyoqIFRoZSB1bmljb2RlIG9mIHRoZSBmb250IGljb24gdmlzaWJsZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCAqKi9cclxuICB1bmljb2RlVG9nZ2xlZD86IG51bWJlcixcclxuXHJcbiAgLyoqIFRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgZm9udCBpY29uIHZpc2libGUgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQgKiovXHJcbiAgaWNvbkNsYXNzTmFtZVRvZ2dsZWQ/OiBzdHJpbmcsXHJcblxyXG4gIC8qKiBUaGUge0BsaW5rY29kZSBDb250YWluZXJ9IHdoaWNoIHZpc2liaWxpdHkgZ2V0IHRvZ2dsZWQgKiovXHJcbiAgY29udGFpbmVyVG9Ub2dnbGU6IENvbnRhaW5lclxyXG59XHJcblxyXG4vKipcclxuICogQSB7QGxpbmtDb2RlIEJ1dHRvbn0gdG8gdG9nZ2xlIHRoZSB2aXNpYmlsaXR5IG9mIGEge0BsaW5rY29kZSBDb250YWluZXJ9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9nZ2xlQnV0dG9uIGV4dGVuZHMgQnV0dG9uIHtcclxuXHJcbiAgLyoqIFRoZSB7QGxpbmtjb2RlIENvbnRhaW5lcn0gd2hpY2ggdmlzaWJpbGl0eSBnZXQgdG9nZ2xlZCAqKi9cclxuICBwcm90ZWN0ZWQgY29udGFpbmVyVG9Ub2dnbGU6IENvbnRhaW5lcjtcclxuXHJcbiAgLyoqIFRoZSB1bmljb2RlIG9mIHRoZSBmb250IGljb24gdmlzaWJsZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCAqKi9cclxuICBwcm90ZWN0ZWQgdW5pY29kZVRvZ2dsZWQ6IG51bWJlciB8IG51bGw7XHJcblxyXG4gIC8qKiBUaGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGZvbnQgaWNvbiB2aXNpYmxlIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkICoqL1xyXG4gIHByb3RlY3RlZCBpY29uQ2xhc3NOYW1lVG9nZ2xlZDogc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgLyoqIFRoZSBmbGFnIG9mIHRoZSB0b2dnbGUgc3RhdHVzICoqL1xyXG4gIHByb3RlY3RlZCBfaXNUb2dnbGVkOiBib29sZWFuO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFRvZ2dsZUJ1dHRvbk9wdGlvbnMpIHtcclxuXHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuXHJcbiAgICBzdXBlcihvcHRzIGFzIEJ1dHRvbk9wdGlvbnMsIG9wdGlvbnMuY29udGFpbmVyVG9Ub2dnbGUpO1xyXG5cclxuICAgIHRoaXMuX2lzVG9nZ2xlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5jb250YWluZXJUb1RvZ2dsZSA9IG9wdGlvbnMuY29udGFpbmVyVG9Ub2dnbGU7XHJcbiAgICB0aGlzLnVuaWNvZGVUb2dnbGVkID0gb3B0aW9ucy51bmljb2RlVG9nZ2xlZCB8fCBudWxsO1xyXG4gICAgdGhpcy5pY29uQ2xhc3NOYW1lVG9nZ2xlZCA9IG9wdGlvbnMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQgfHwgbnVsbDtcclxuXHJcbiAgICBpZih0aGlzLnVuaWNvZGVUb2dnbGVkID09PSBudWxsICYmIHRoaXMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQgPT09IG51bGwpIHtcclxuICAgICAgdGhpcy51bmljb2RlVG9nZ2xlZCA9IDB4ZTkwMztcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgb3ZlcnJpZGVuIGhhbmRsZUV2ZW50IG1ldGhvZFxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwYXJhbSBldmVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYW5kbGVFdmVudChldmVudDogQmFzZUV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICBpZihldmVudC50eXBlID09PSBFdmVudFR5cGUuQ0xJQ0spIHtcclxuICAgICAgdGhpcy5pc1RvZ2dsZWQgPSAhdGhpcy5pc1RvZ2dsZWQ7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVG9nZ2xlRXZlbnQoXCJ0b2dnbGVcIiwgdGhpcy5pc1RvZ2dsZWQpKTtcclxuXHJcbiAgICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSB0aGlzLmdldFBhcmVudEVsZW1lbnQoKTtcclxuXHJcbiAgICAgIGlmKHBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZU92ZXJsYXlGb3JFbGVtZW50KHBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50JykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmhhbmRsZU92ZXJsYXlPdXRlcigpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuaXNUb2dnbGVkKSB7XHJcbiAgICAgICAgaWYodGhpcy51bmljb2RlVG9nZ2xlZCE9PW51bGwpIHtcclxuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uVW5pY29kZSh0aGlzLnVuaWNvZGVUb2dnbGVkKTtcclxuICAgICAgICB9IGVsc2UgaWYodGhpcy5pY29uQ2xhc3NOYW1lVG9nZ2xlZCE9PW51bGwpIHtcclxuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uSWNvbkNsYXNzTmFtZSh0aGlzLmljb25DbGFzc05hbWVUb2dnbGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYodGhpcy51bmljb2RlIT09bnVsbCkge1xyXG4gICAgICAgICAgdGhpcy5zZXRCdXR0b25Vbmljb2RlKHRoaXMudW5pY29kZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuaWNvbkNsYXNzTmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgdGhpcy5zZXRCdXR0b25JY29uQ2xhc3NOYW1lKHRoaXMuaWNvbkNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRvZ2dsZUNsYXNzKCcuJyArIHRoaXMuY29udGFpbmVyVG9Ub2dnbGUuZ2V0U3R5bGVDbGFzcygpLCAnc2hvdycsIHBhcmVudEVsZW1lbnQgfHwgZG9jdW1lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHNldHRlciBmb3IgdGhlIHRvZ2dsZWQgc3RhdGUgb2YgdGhlIGJ1dHRvblxyXG4gICAqIEBwYXJhbSBpc1RvZ2dsZWRcclxuICAgKi9cclxuICBwdWJsaWMgc2V0IGlzVG9nZ2xlZChpc1RvZ2dsZWQ6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuX2lzVG9nZ2xlZCA9IGlzVG9nZ2xlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZ2V0dGVyIGZvciB0aGUgdG9nZ2xlZCBzdGF0ZSBvZiB0aGUgYnV0dG9uXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBpc1RvZ2dsZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNUb2dnbGVkO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhbmQgcmVtb3ZlcyBhIG92ZXJsYXkgbGF5ZXIgKGZvciBncmF5IG91dCkgb24gYW4gZWxlbWVudFxyXG4gICAqIEBwYXJhbSBlbGVtZW50IFRoZSBwYXJlbnQgZWxlbWVudCBmb3IgdGhlIG92ZXJsYXkgbGF5ZXJcclxuICAgKiBAcGFyYW0gY2xhc3NOYW1lIFRoZSBzdHlsZSBjbGFzcyBuYW1lIGZvciB0aGUgb3ZlcmxheSBsYXllclxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgaGFuZGxlT3ZlcmxheUZvckVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsLCBjbGFzc05hbWUgPSAnYmdpcy1vdmVybGF5LWJnJyk6IHZvaWQge1xyXG4gICAgaWYodGhpcy5lbGVtZW50ICE9IG51bGwpIHtcclxuICAgICAgaWYodGhpcy5pc1RvZ2dsZWQpIHtcclxuICAgICAgICBlbGVtZW50Py5jbGFzc0xpc3QuYWRkKCdiZ2lzLW92ZXJsYXktdG9nZ2xlZC10cnVlJyk7XHJcbiAgICAgICAgY3JlYXRlQ2hpbGRJZk5vdEV4aXN0KGVsZW1lbnQsICdkaXYnLCBjbGFzc05hbWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsZW1lbnQ/LmNsYXNzTGlzdC5yZW1vdmUoJ2JnaXMtb3ZlcmxheS10b2dnbGVkLXRydWUnKTtcclxuICAgICAgICByZW1vdmVDaGlsZHJlbklmRXhpc3QoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmluZHMgYWxsIGVsZW1lbnRzIGluIHRoZSBET00gd2l0aCAqLmJnaXMtdG9nZ2xlZC1vdmVybGF5YWJsZSogc3R5bGUgY2xhc3MgdG8gZ3JheSB0aGVtIG91dFxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgaGFuZGxlT3ZlcmxheU91dGVyKCk6IHZvaWQge1xyXG4gICAgY29uc3QgcGFyZW50RWxlbWVudCA9IHRoaXMuZ2V0UGFyZW50RWxlbWVudCgpO1xyXG4gICAgaWYocGFyZW50RWxlbWVudCkge1xyXG4gICAgICBjb25zdCBvdmVybGF5YWJsZVBhcmVudHMgPSBwYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iZ2lzLXRvZ2dsZWQtb3ZlcmxheWFibGUnKTtcclxuICAgICAgaWYob3ZlcmxheWFibGVQYXJlbnRzICYmIG92ZXJsYXlhYmxlUGFyZW50cy5sZW5ndGg+MCkge1xyXG4gICAgICAgIG92ZXJsYXlhYmxlUGFyZW50cy5mb3JFYWNoKChwYXJlbnQpID0+IHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlT3ZlcmxheUZvckVsZW1lbnQocGFyZW50IGFzIEhUTUxFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBjbG9zZXN0IHBhcmVudCBlbGVtZW50IGZvciB0b2dnbGUuXHJcbiAgICogRm9yIHRoZSBjb3JlIGZlYXR1cmUgdmVyc2lvbiBpdCdzIHRoZSAuYmdpcy1tYXBcclxuICAgKiBGb3IgdGhlIGZ1bGwgZmVhdHVyZSB2ZXJzaW9uIGl0J3MgdGhlIC5iZ2lzLWJvZHlcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGdldFBhcmVudEVsZW1lbnQoKTogRWxlbWVudCB8IG51bGwge1xyXG4gICAgbGV0IGNsb3Nlc3RQYXJlbnQgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCgnLmJnaXMnKTtcclxuICAgIGlmKCFjbG9zZXN0UGFyZW50KSB7XHJcbiAgICAgIGNsb3Nlc3RQYXJlbnQgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCgnLmJnaXMtbWFwJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2xvc2VzdFBhcmVudDtcclxuICB9XHJcbn1cclxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9HZW9sb2NhdGlvblxuICovXG5pbXBvcnQgQmFzZUV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGNpcmN1bGFyIGFzIGNpcmN1bGFyUG9seWdvbiB9IGZyb20gJy4vZ2VvbS9Qb2x5Z29uLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsIGlkZW50aXR5VHJhbnNmb3JtLCB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyB0b1JhZGlhbnMgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gICAgQUNDVVJBQ1k6ICdhY2N1cmFjeScsXG4gICAgQUNDVVJBQ1lfR0VPTUVUUlk6ICdhY2N1cmFjeUdlb21ldHJ5JyxcbiAgICBBTFRJVFVERTogJ2FsdGl0dWRlJyxcbiAgICBBTFRJVFVERV9BQ0NVUkFDWTogJ2FsdGl0dWRlQWNjdXJhY3knLFxuICAgIEhFQURJTkc6ICdoZWFkaW5nJyxcbiAgICBQT1NJVElPTjogJ3Bvc2l0aW9uJyxcbiAgICBQUk9KRUNUSU9OOiAncHJvamVjdGlvbicsXG4gICAgU1BFRUQ6ICdzcGVlZCcsXG4gICAgVFJBQ0tJTkc6ICd0cmFja2luZycsXG4gICAgVFJBQ0tJTkdfT1BUSU9OUzogJ3RyYWNraW5nT3B0aW9ucycsXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBvbiBHZW9sb2NhdGlvbiBlcnJvci5cbiAqL1xudmFyIEdlb2xvY2F0aW9uRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdlb2xvY2F0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtHZW9sb2NhdGlvblBvc2l0aW9uRXJyb3J9IGVycm9yIGVycm9yIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBHZW9sb2NhdGlvbkVycm9yKGVycm9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIEV2ZW50VHlwZS5FUlJPUikgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2RlID0gZXJyb3IuY29kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gR2VvbG9jYXRpb25FcnJvcjtcbn0oQmFzZUV2ZW50KSk7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3RyYWNraW5nPWZhbHNlXSBTdGFydCBUcmFja2luZyByaWdodCBhZnRlclxuICogaW5zdGFudGlhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7UG9zaXRpb25PcHRpb25zfSBbdHJhY2tpbmdPcHRpb25zXSBUcmFja2luZyBvcHRpb25zLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9nZW9sb2NhdGlvbi1BUEkvI3Bvc2l0aW9uX29wdGlvbnNfaW50ZXJmYWNlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBUaGUgcHJvamVjdGlvbiB0aGUgcG9zaXRpb25cbiAqIGlzIHJlcG9ydGVkIGluLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmFjY3VyYWN5J3wnY2hhbmdlOmFjY3VyYWN5R2VvbWV0cnknfCdjaGFuZ2U6YWx0aXR1ZGUnfFxuICogICAgJ2NoYW5nZTphbHRpdHVkZUFjY3VyYWN5J3wnY2hhbmdlOmhlYWRpbmcnfCdjaGFuZ2U6cG9zaXRpb24nfCdjaGFuZ2U6cHJvamVjdGlvbid8J2NoYW5nZTpzcGVlZCd8J2NoYW5nZTp0cmFja2luZyd8XG4gKiAgICAnY2hhbmdlOnRyYWNraW5nT3B0aW9ucyd9IEdlb2xvY2F0aW9uT2JqZWN0RXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPEdlb2xvY2F0aW9uT2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8J2Vycm9yJywgR2VvbG9jYXRpb25FcnJvciwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfEdlb2xvY2F0aW9uT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAnZXJyb3InLCBSZXR1cm4+fSBHZW9sb2NhdGlvbk9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogSGVscGVyIGNsYXNzIGZvciBwcm92aWRpbmcgSFRNTDUgR2VvbG9jYXRpb24gY2FwYWJpbGl0aWVzLlxuICogVGhlIFtHZW9sb2NhdGlvbiBBUEldKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9nZW9sb2NhdGlvbi1BUEkvKVxuICogaXMgdXNlZCB0byBsb2NhdGUgYSB1c2VyJ3MgcG9zaXRpb24uXG4gKlxuICogVG8gZ2V0IG5vdGlmaWVkIG9mIHBvc2l0aW9uIGNoYW5nZXMsIHJlZ2lzdGVyIGEgbGlzdGVuZXIgZm9yIHRoZSBnZW5lcmljXG4gKiBgY2hhbmdlYCBldmVudCBvbiB5b3VyIGluc3RhbmNlIG9mIHtAbGluayBtb2R1bGU6b2wvR2VvbG9jYXRpb25+R2VvbG9jYXRpb259LlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIHZhciBnZW9sb2NhdGlvbiA9IG5ldyBHZW9sb2NhdGlvbih7XG4gKiAgICAgICAvLyB0YWtlIHRoZSBwcm9qZWN0aW9uIHRvIHVzZSBmcm9tIHRoZSBtYXAncyB2aWV3XG4gKiAgICAgICBwcm9qZWN0aW9uOiB2aWV3LmdldFByb2plY3Rpb24oKVxuICogICAgIH0pO1xuICogICAgIC8vIGxpc3RlbiB0byBjaGFuZ2VzIGluIHBvc2l0aW9uXG4gKiAgICAgZ2VvbG9jYXRpb24ub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2dCkge1xuICogICAgICAgd2luZG93LmNvbnNvbGUubG9nKGdlb2xvY2F0aW9uLmdldFBvc2l0aW9uKCkpO1xuICogICAgIH0pO1xuICpcbiAqIEBmaXJlcyBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNldmVudDplcnJvclxuICogQGFwaVxuICovXG52YXIgR2VvbG9jYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdlb2xvY2F0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEdlb2xvY2F0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dlb2xvY2F0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtHZW9sb2NhdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtHZW9sb2NhdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdW5wcm9qZWN0ZWQgKEVQU0c6NDMyNikgZGV2aWNlIHBvc2l0aW9uLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zaXRpb25fID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2Zvcm1fID0gaWRlbnRpdHlUcmFuc2Zvcm07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndhdGNoSWRfID0gdW5kZWZpbmVkO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihQcm9wZXJ0eS5QUk9KRUNUSU9OLCBfdGhpcy5oYW5kbGVQcm9qZWN0aW9uQ2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihQcm9wZXJ0eS5UUkFDS0lORywgX3RoaXMuaGFuZGxlVHJhY2tpbmdDaGFuZ2VkXyk7XG4gICAgICAgIGlmIChvcHRpb25zLnByb2plY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0UHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRyYWNraW5nT3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRUcmFja2luZ09wdGlvbnMob3B0aW9ucy50cmFja2luZ09wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNldFRyYWNraW5nKG9wdGlvbnMudHJhY2tpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudHJhY2tpbmcgOiBmYWxzZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRUcmFja2luZyhmYWxzZSk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5oYW5kbGVQcm9qZWN0aW9uQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmIChwcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMoZ2V0UHJvamVjdGlvbignRVBTRzo0MzI2JyksIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zaXRpb25fKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUE9TSVRJT04sIHRoaXMudHJhbnNmb3JtXyh0aGlzLnBvc2l0aW9uXykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5oYW5kbGVUcmFja2luZ0NoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJ2dlb2xvY2F0aW9uJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgICAgIHZhciB0cmFja2luZyA9IHRoaXMuZ2V0VHJhY2tpbmcoKTtcbiAgICAgICAgICAgIGlmICh0cmFja2luZyAmJiB0aGlzLndhdGNoSWRfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndhdGNoSWRfID0gbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24odGhpcy5wb3NpdGlvbkNoYW5nZV8uYmluZCh0aGlzKSwgdGhpcy5wb3NpdGlvbkVycm9yXy5iaW5kKHRoaXMpLCB0aGlzLmdldFRyYWNraW5nT3B0aW9ucygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0cmFja2luZyAmJiB0aGlzLndhdGNoSWRfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uY2xlYXJXYXRjaCh0aGlzLndhdGNoSWRfKTtcbiAgICAgICAgICAgICAgICB0aGlzLndhdGNoSWRfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7R2VvbG9jYXRpb25Qb3NpdGlvbn0gcG9zaXRpb24gcG9zaXRpb24gZXZlbnQuXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLnBvc2l0aW9uQ2hhbmdlXyA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICB2YXIgY29vcmRzID0gcG9zaXRpb24uY29vcmRzO1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5BQ0NVUkFDWSwgY29vcmRzLmFjY3VyYWN5KTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuQUxUSVRVREUsIGNvb3Jkcy5hbHRpdHVkZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvb3Jkcy5hbHRpdHVkZSk7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkFMVElUVURFX0FDQ1VSQUNZLCBjb29yZHMuYWx0aXR1ZGVBY2N1cmFjeSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvb3Jkcy5hbHRpdHVkZUFjY3VyYWN5KTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuSEVBRElORywgY29vcmRzLmhlYWRpbmcgPT09IG51bGwgPyB1bmRlZmluZWQgOiB0b1JhZGlhbnMoY29vcmRzLmhlYWRpbmcpKTtcbiAgICAgICAgaWYgKCF0aGlzLnBvc2l0aW9uXykge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl8gPSBbY29vcmRzLmxvbmdpdHVkZSwgY29vcmRzLmxhdGl0dWRlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25fWzBdID0gY29vcmRzLmxvbmdpdHVkZTtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25fWzFdID0gY29vcmRzLmxhdGl0dWRlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcm9qZWN0ZWRQb3NpdGlvbiA9IHRoaXMudHJhbnNmb3JtXyh0aGlzLnBvc2l0aW9uXyk7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LlBPU0lUSU9OLCBwcm9qZWN0ZWRQb3NpdGlvbik7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LlNQRUVELCBjb29yZHMuc3BlZWQgPT09IG51bGwgPyB1bmRlZmluZWQgOiBjb29yZHMuc3BlZWQpO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBjaXJjdWxhclBvbHlnb24odGhpcy5wb3NpdGlvbl8sIGNvb3Jkcy5hY2N1cmFjeSk7XG4gICAgICAgIGdlb21ldHJ5LmFwcGx5VHJhbnNmb3JtKHRoaXMudHJhbnNmb3JtXyk7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkFDQ1VSQUNZX0dFT01FVFJZLCBnZW9tZXRyeSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0dlb2xvY2F0aW9uUG9zaXRpb25FcnJvcn0gZXJyb3IgZXJyb3Igb2JqZWN0LlxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5wb3NpdGlvbkVycm9yXyA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYWNjdXJhY3kgb2YgdGhlIHBvc2l0aW9uIGluIG1ldGVycy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgYWNjdXJhY3kgb2YgdGhlIHBvc2l0aW9uIG1lYXN1cmVtZW50IGluXG4gICAgICogICAgIG1ldGVycy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0QWNjdXJhY3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BQ0NVUkFDWSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgZ2VvbWV0cnkgb2YgdGhlIHBvc2l0aW9uIGFjY3VyYWN5LlxuICAgICAqIEByZXR1cm4gez9pbXBvcnQoXCIuL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBBIGdlb21ldHJ5IG9mIHRoZSBwb3NpdGlvbiBhY2N1cmFjeS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0QWNjdXJhY3lHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7P2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BQ0NVUkFDWV9HRU9NRVRSWSkgfHwgbnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFsdGl0dWRlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcG9zaXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGFsdGl0dWRlIG9mIHRoZSBwb3NpdGlvbiBpbiBtZXRlcnMgYWJvdmUgbWVhblxuICAgICAqICAgICBzZWEgbGV2ZWwuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldEFsdGl0dWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUHJvcGVydHkuQUxUSVRVREUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYWx0aXR1ZGUgYWNjdXJhY3kgb2YgdGhlIHBvc2l0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBhY2N1cmFjeSBvZiB0aGUgYWx0aXR1ZGUgbWVhc3VyZW1lbnQgaW5cbiAgICAgKiAgICAgbWV0ZXJzLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRBbHRpdHVkZUFjY3VyYWN5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUHJvcGVydHkuQUxUSVRVREVfQUNDVVJBQ1kpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaGVhZGluZyBhcyByYWRpYW5zIGNsb2Nrd2lzZSBmcm9tIE5vcnRoLlxuICAgICAqIE5vdGU6IGRlcGVuZGluZyBvbiB0aGUgYnJvd3NlciwgdGhlIGhlYWRpbmcgaXMgb25seSBkZWZpbmVkIGlmIHRoZSBgZW5hYmxlSGlnaEFjY3VyYWN5YFxuICAgICAqIGlzIHNldCB0byBgdHJ1ZWAgaW4gdGhlIHRyYWNraW5nIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGhlYWRpbmcgb2YgdGhlIGRldmljZSBpbiByYWRpYW5zIGZyb20gbm9ydGguXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldEhlYWRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5IRUFESU5HKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXZpY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBUaGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZGV2aWNlIHJlcG9ydGVkXG4gICAgICogICAgIGluIHRoZSBjdXJyZW50IHByb2plY3Rpb24uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5QT1NJVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwcm9qZWN0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcG9zaXRpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSBwcm9qZWN0aW9uIHRoZSBwb3NpdGlvbiBpc1xuICAgICAqICAgICByZXBvcnRlZCBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5QUk9KRUNUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNwZWVkIGluIG1ldGVycyBwZXIgc2Vjb25kLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBpbnN0YW50YW5lb3VzIHNwZWVkIG9mIHRoZSBkZXZpY2UgaW4gbWV0ZXJzXG4gICAgICogICAgIHBlciBzZWNvbmQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFNwZWVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUHJvcGVydHkuU1BFRUQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB0aGUgZGV2aWNlIGxvY2F0aW9uIGlzIGJlaW5nIHRyYWNrZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGRldmljZSBsb2NhdGlvbiBpcyBiZWluZyB0cmFja2VkLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRUcmFja2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlRSQUNLSU5HKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRyYWNraW5nIG9wdGlvbnMuXG4gICAgICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9nZW9sb2NhdGlvbi1BUEkvI3Bvc2l0aW9uLW9wdGlvbnMuXG4gICAgICogQHJldHVybiB7UG9zaXRpb25PcHRpb25zfHVuZGVmaW5lZH0gUG9zaXRpb25PcHRpb25zIGFzIGRlZmluZWQgYnlcbiAgICAgKiAgICAgdGhlIFtIVE1MNSBHZW9sb2NhdGlvbiBzcGVjXG4gICAgICogICAgIF0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UpLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRUcmFja2luZ09wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge1Bvc2l0aW9uT3B0aW9uc3x1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5UUkFDS0lOR19PUFRJT05TKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHByb2plY3Rpb24gdG8gdXNlIGZvciB0cmFuc2Zvcm1pbmcgdGhlIGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRoZSBwb3NpdGlvbiBpc1xuICAgICAqICAgICByZXBvcnRlZCBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuc2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LlBST0pFQ1RJT04sIGdldFByb2plY3Rpb24ocHJvamVjdGlvbikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRW5hYmxlIG9yIGRpc2FibGUgdHJhY2tpbmcuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB0cmFja2luZyBFbmFibGUgdHJhY2tpbmcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLnNldFRyYWNraW5nID0gZnVuY3Rpb24gKHRyYWNraW5nKSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LlRSQUNLSU5HLCB0cmFja2luZyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRyYWNraW5nIG9wdGlvbnMuXG4gICAgICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb24tb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge1Bvc2l0aW9uT3B0aW9uc30gb3B0aW9ucyBQb3NpdGlvbk9wdGlvbnMgYXMgZGVmaW5lZCBieSB0aGVcbiAgICAgKiAgICAgW0hUTUw1IEdlb2xvY2F0aW9uIHNwZWNcbiAgICAgKiAgICAgXShodHRwOi8vd3d3LnczLm9yZy9UUi9nZW9sb2NhdGlvbi1BUEkvI3Bvc2l0aW9uX29wdGlvbnNfaW50ZXJmYWNlKS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuc2V0VHJhY2tpbmdPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuVFJBQ0tJTkdfT1BUSU9OUywgb3B0aW9ucyk7XG4gICAgfTtcbiAgICByZXR1cm4gR2VvbG9jYXRpb247XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IEdlb2xvY2F0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbG9jYXRpb24uanMubWFwIiwiaW1wb3J0IEdlb2xvY2F0aW9uLCB7T3B0aW9ucyBhcyBPbEdlb0xvY2F0aW9uT3B0aW9uc30gZnJvbSAnb2wvR2VvbG9jYXRpb24nO1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSBcIi4vYmFzZVwiO1xyXG5pbXBvcnQgQmFzZUV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuaW1wb3J0IEV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuaW1wb3J0IEV2ZW50VHlwZSBmcm9tIFwib2wvZXZlbnRzL0V2ZW50VHlwZVwiO1xyXG5pbXBvcnQge0J1dHRvbk9uU2lnbmF0dXJlLCBCdXR0b25PcHRpb25zfSBmcm9tIFwiLi9iYXNlL0J1dHRvblwiO1xyXG5pbXBvcnQge2Zyb21Mb25MYXR9IGZyb20gXCJvbC9wcm9qXCI7XHJcbmltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIm9sL2Nvb3JkaW5hdGVcIjtcclxuaW1wb3J0IHtPblJldHVybn0gZnJvbSBcIm9sL09ic2VydmFibGVcIjtcclxuXHJcbi8qKlxyXG4gKiBUaGUgZXh0ZW5kZWQgc2lnbmF0dXJlIGZvciB0aGUgb24gbWV0aG9kXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5leHBvcnQgdHlwZSBHZW9sb2NhdGVPblNpZ25hdHVyZTxSZXR1cm4+ID0gKCh0eXBlOiBcImxvY2F0aW9uX3JldHJpZXZlZFwiIHwgXCJsb2NhdGlvbl9yZXRyaWV2ZWRcIltdLCBsaXN0ZW5lcjogKGV2ZW50OiBMb2NhdGlvblJldHJpZXZlZEV2ZW50KSA9PiBhbnkpID0+IFJldHVybikgJiBCdXR0b25PblNpZ25hdHVyZTxSZXR1cm4+O1xyXG5cclxuLyoqXHJcbiAqIFRoZSBsb2NhdGlvbiByZXRyaWV2ZWQgZXZlbnQgd2hpY2ggaXMgZGlzcGF0Y2hlZCB3aGVuIHdlIHJldHJpZXZlIGEgcG9zaXRpb24gdmlhIHRoZSB7QGxpbmtjb2RlIEdlb0xvY2F0ZX0gYnV0dG9uXHJcbiAqXHJcbiAqIEBUT0RPIGV4dGVuZCB0byByZXRyaWV2ZSBtb3JlIGluZm9ybWF0aW9uIGZyb20gdGhlIE9wZW5sYXllcnMgR2VvbG9jYXRlIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIExvY2F0aW9uUmV0cmlldmVkRXZlbnQgZXh0ZW5kcyBFdmVudCB7XHJcblxyXG4gIC8qKiB5b3VyIGN1cnJlbnQgcG9zaXRpb24gKiovXHJcbiAgcG9zaXRpb246IENvb3JkaW5hdGU7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGUuIFVzdWFsbHkgYSB7QGxpbmtjb2RlIExvY2F0aW9uUmV0cmlldmVkRXZlbnRUeXBlfVxyXG4gICAqIEBwYXJhbSBwb3NpdGlvbiBZb3VyIGN1cnJlbnQgcG9zaXRpb25cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIHBvc2l0aW9uOiBDb29yZGluYXRlKSB7XHJcbiAgICBzdXBlcih0eXBlKTtcclxuXHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEEge0BsaW5rQ29kZSBCdXR0b259IHRvIHJldHJpZXZlIHlvdXIgY3VycmVudCBwb3NpdGlvblxyXG4gKlxyXG4gKiBUaGlzIGNsYXNzIHVzZXMgdGhlIE9wZW5MYXllcnMgR2VvbG9jYXRpb24gb2JqZWN0IHRvIGZldGNoIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxyXG4gKiBXaGVuIHdlIHJldHJpZXZlIHRoZSBjdXJyZW50IHBvc2l0aW9uLCBhIExvY2F0aW9uUmV0cmlldmVkRXZlbnQgaXMgZmlyZWRcclxuICpcclxuICovXHJcbmV4cG9ydCBjbGFzcyBHZW9Mb2NhdGUgZXh0ZW5kcyBCdXR0b24ge1xyXG5cclxuICAvKiogVGhlIE9wZW5MYXllcnMgR2VvbG9jYXRpb24gb2JqZWN0ICoqL1xyXG4gIHByb3RlY3RlZCBfZ2VvTG9jYXRpb246IEdlb2xvY2F0aW9uO1xyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cclxuICBwdWJsaWMgb24hOiBHZW9sb2NhdGVPblNpZ25hdHVyZTxPblJldHVybj47XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogQnV0dG9uT3B0aW9ucyB8IE9sR2VvTG9jYXRpb25PcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICAgIHN1cGVyKHt1bmljb2RlOiAweGU5MzYsIGNvbnRhaW5lckNsYXNzTmFtZTogJ29sLWNvbnRyb2wgYmdpcy1jb250cm9sIG9sLWdlb2xvY2F0ZScsIHRvb2x0aXA6ICdTdGFuZG9ydCB6ZW50cmllcmVuJywgLi4ub3B0cyB9KTtcclxuXHJcbiAgICBjb25zdCBnZW9Mb2NhdGlvbk9wdGlvbnMgPSAob3B0aW9ucyB8fCB7fSkgYXMgT2xHZW9Mb2NhdGlvbk9wdGlvbnM7XHJcbiAgICB0aGlzLl9nZW9Mb2NhdGlvbiA9IG5ldyBHZW9sb2NhdGlvbihnZW9Mb2NhdGlvbk9wdGlvbnMpO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQHBhcmFtIGV2ZW50XHJcbiAgICovXHJcbiAgcHVibGljIGhhbmRsZUV2ZW50KGV2ZW50OiBFdmVudCB8IEJhc2VFdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgaWYoZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNMSUNLKSB7XHJcblxyXG4gICAgICBpZih0aGlzLmdlb0xvY2F0aW9uICYmIHRoaXMuZ2V0TWFwKCk/LmdldFZpZXcoKT8uZ2V0UHJvamVjdGlvbigpKSB7XHJcbiAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5vbmNlKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmdlb0xvY2F0aW9uLnNldFRyYWNraW5nKGZhbHNlKTtcclxuICAgICAgICAgIHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBjZW50ZXI6IGZyb21Mb25MYXQodGhpcy5nZW9Mb2NhdGlvbi5nZXRQb3NpdGlvbigpIGFzIG51bWJlcltdKSxcclxuICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYodGhpcy5nZW9Mb2NhdGlvbi5nZXRQb3NpdGlvbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTG9jYXRpb25SZXRyaWV2ZWRFdmVudChcImxvY2F0aW9uX3JldHJpZXZlZFwiLCB0aGlzLmdlb0xvY2F0aW9uLmdldFBvc2l0aW9uKCkhKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5zZXRUcmFja2luZyh0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZ2V0dGVyIGZvciB0aGUgT3BlbkxheWVycyBHZW9sb2NhdGlvbiBvYmplY3RcclxuICAgKi9cclxuICBnZXQgZ2VvTG9jYXRpb24oKTogR2VvbG9jYXRpb24ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2dlb0xvY2F0aW9uO1xyXG4gIH1cclxufVxyXG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiwgZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zLCBnZXRVc2VyUHJvamVjdGlvbiwgaWRlbnRpdHlUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgUFJPSkVDVElPTiA9ICdwcm9qZWN0aW9uJztcbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIENPT1JESU5BVEVfRk9STUFUID0gJ2Nvb3JkaW5hdGVGb3JtYXQnO1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6Y29vcmRpbmF0ZUZvcm1hdCd8J2NoYW5nZTpwcm9qZWN0aW9uJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpjb29yZGluYXRlRm9ybWF0J3wnY2hhbmdlOnByb2plY3Rpb24nLCBSZXR1cm4+fSBNb3VzZVBvc2l0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbW91c2UtcG9zaXRpb24nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fSBbY29vcmRpbmF0ZUZvcm1hdF0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLiBEZWZhdWx0IGlzIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZVxuICogY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlXG4gKiBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtzdHJpbmd8Ym9vbGVhbn0gW3BsYWNlaG9sZGVyXSBNYXJrdXAgdG8gc2hvdyB3aGVuIHRoZSBtb3VzZSBwb3NpdGlvbiBpcyBub3RcbiAqIGF2YWlsYWJsZSAoZS5nLiB3aGVuIHRoZSBwb2ludGVyIGxlYXZlcyB0aGUgbWFwIHZpZXdwb3J0KS4gIEJ5IGRlZmF1bHQsIGEgbm9uLWJyZWFraW5nIHNwYWNlXG4gKiBpcyByZW5kZXJlZCB3aGVuIHRoZSBtb3VzZSBsZWF2ZXMgdGhlIHZpZXdwb3J0LiAgVG8gcmVuZGVyIHNvbWV0aGluZyBlbHNlLCBwcm92aWRlIGEgc3RyaW5nXG4gKiB0byBiZSB1c2VkIGFzIHRoZSB0ZXh0IGNvbnRlbnQgKGUuZy4gJ25vIHBvc2l0aW9uJyBvciAnJyBmb3IgYW4gZW1wdHkgc3RyaW5nKS4gIFNldCB0aGUgcGxhY2Vob2xkZXJcbiAqIHRvIGBmYWxzZWAgdG8gcmV0YWluIHRoZSBsYXN0IHBvc2l0aW9uIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgdmlld3BvcnQuICBJbiBhIGZ1dHVyZSByZWxlYXNlLCB0aGlzXG4gKiB3aWxsIGJlIHRoZSBkZWZhdWx0IGJlaGF2aW9yLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1bmRlZmluZWRIVE1MPScmIzE2MDsnXSBUaGlzIG9wdGlvbiBpcyBkZXByZWNhdGVkLiAgVXNlIHRoZSBgcGxhY2Vob2xkZXJgIG9wdGlvbiBpbnN0ZWFkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCB0byBzaG93IHRoZSAyRCBjb29yZGluYXRlcyBvZiB0aGUgbW91c2UgY3Vyc29yLiBCeSBkZWZhdWx0LCB0aGVzZVxuICogYXJlIGluIHRoZSB2aWV3IHByb2plY3Rpb24sIGJ1dCBjYW4gYmUgaW4gYW55IHN1cHBvcnRlZCBwcm9qZWN0aW9uLlxuICogQnkgZGVmYXVsdCB0aGUgY29udHJvbCBpcyBzaG93biBpbiB0aGUgdG9wIHJpZ2h0IGNvcm5lciBvZiB0aGUgbWFwLCBidXQgdGhpc1xuICogY2FuIGJlIGNoYW5nZWQgYnkgdXNpbmcgdGhlIGNzcyBzZWxlY3RvciBgLm9sLW1vdXNlLXBvc2l0aW9uYC5cbiAqXG4gKiBPbiB0b3VjaCBkZXZpY2VzLCB3aGljaCB1c3VhbGx5IGRvIG5vdCBoYXZlIGEgbW91c2UgY3Vyc29yLCB0aGUgY29vcmRpbmF0ZXNcbiAqIG9mIHRoZSBjdXJyZW50bHkgdG91Y2hlZCBwb3NpdGlvbiBhcmUgc2hvd24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTW91c2VQb3NpdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTW91c2VQb3NpdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gTW91c2UgcG9zaXRpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNb3VzZVBvc2l0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9XG4gICAgICAgICAgICBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtbW91c2UtcG9zaXRpb24nO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge01vdXNlUG9zaXRpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge01vdXNlUG9zaXRpb25PblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihQUk9KRUNUSU9OLCBfdGhpcy5oYW5kbGVQcm9qZWN0aW9uQ2hhbmdlZF8pO1xuICAgICAgICBpZiAob3B0aW9ucy5jb29yZGluYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlRm9ybWF0KG9wdGlvbnMuY29vcmRpbmF0ZUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbikge1xuICAgICAgICAgICAgX3RoaXMuc2V0UHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQ2hhbmdlIHRoaXMgdG8gYGZhbHNlYCB3aGVuIHJlbW92aW5nIHRoZSBkZXByZWNhdGVkIGB1bmRlZmluZWRIVE1MYCBvcHRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVuZGVyT25Nb3VzZU91dCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gJyYjMTYwOyc7XG4gICAgICAgIGlmICgndW5kZWZpbmVkSFRNTCcgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgLy8gZGVwcmVjYXRlZCBiZWhhdmlvclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudW5kZWZpbmVkSFRNTCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBvcHRpb25zLnVuZGVmaW5lZEhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXJPbk1vdXNlT3V0ID0gISFwbGFjZWhvbGRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgncGxhY2Vob2xkZXInIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBsYWNlaG9sZGVyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJlbmRlck9uTW91c2VPdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gU3RyaW5nKG9wdGlvbnMucGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGxhY2Vob2xkZXJfID0gcGxhY2Vob2xkZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlck9uTW91c2VPdXRfID0gcmVuZGVyT25Nb3VzZU91dDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZEhUTUxfID0gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwUHJvamVjdGlvbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5oYW5kbGVQcm9qZWN0aW9uQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGUgZm9ybWF0IHR5cGUgdXNlZCB0byByZW5kZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24gb3JcbiAgICAgKiB1bmRlZmluZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fHVuZGVmaW5lZH0gVGhlIGZvcm1hdCB0byByZW5kZXIgdGhlIGN1cnJlbnRcbiAgICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KENPT1JESU5BVEVfRk9STUFUKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHByb2plY3Rpb24gdGhhdCBpcyB1c2VkIHRvIHJlcG9ydCB0aGUgbW91c2UgcG9zaXRpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcHJvamVjdGlvbiB0byByZXBvcnQgbW91c2VcbiAgICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUFJPSkVDVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5oYW5kbGVNb3VzZU1vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHRoaXMudXBkYXRlSFRNTF8obWFwLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZU1vdXNlT3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlSFRNTF8obnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICAgKiB0aGUgbWFwIGhlcmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsIG1hcCk7XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHZhciB2aWV3cG9ydCA9IG1hcC5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4odmlld3BvcnQsIEV2ZW50VHlwZS5QT0lOVEVSTU9WRSwgdGhpcy5oYW5kbGVNb3VzZU1vdmUsIHRoaXMpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlck9uTW91c2VPdXRfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4odmlld3BvcnQsIEV2ZW50VHlwZS5QT0lOVEVST1VULCB0aGlzLmhhbmRsZU1vdXNlT3V0LCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUhUTUxfKG51bGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvb3JkaW5hdGUgZm9ybWF0IHR5cGUgdXNlZCB0byByZW5kZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR9IGZvcm1hdCBUaGUgZm9ybWF0IHRvIHJlbmRlciB0aGUgY3VycmVudFxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5zZXRDb29yZGluYXRlRm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICB0aGlzLnNldChDT09SRElOQVRFX0ZPUk1BVCwgZm9ybWF0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvamVjdGlvbiB0aGF0IGlzIHVzZWQgdG8gcmVwb3J0IHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdG8gcmVwb3J0IG1vdXNlXG4gICAgICogICAgIHBvc2l0aW9uIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnNldFByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICB0aGlzLnNldChQUk9KRUNUSU9OLCBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnVwZGF0ZUhUTUxfID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHZhciBodG1sID0gdGhpcy5wbGFjZWhvbGRlcl87XG4gICAgICAgIGlmIChwaXhlbCAmJiB0aGlzLm1hcFByb2plY3Rpb25fKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudHJhbnNmb3JtXykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHRoaXMubWFwUHJvamVjdGlvbl8sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gaWRlbnRpdHlUcmFuc2Zvcm07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZSA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXNlclByb2plY3Rpb24gPSBnZXRVc2VyUHJvamVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmICh1c2VyUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnModGhpcy5tYXBQcm9qZWN0aW9uXywgdXNlclByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8oY29vcmRpbmF0ZSwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVGb3JtYXQgPSB0aGlzLmdldENvb3JkaW5hdGVGb3JtYXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZUZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICBodG1sID0gY29vcmRpbmF0ZUZvcm1hdChjb29yZGluYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgPSBjb29yZGluYXRlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZEhUTUxfIHx8IGh0bWwgIT09IHRoaXMucmVuZGVyZWRIVE1MXykge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkSFRNTF8gPSBodG1sO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2plY3Rpb24uIFJlbmRlcmluZyBvZiB0aGUgY29vcmRpbmF0ZXMgaXMgZG9uZSBpblxuICAgICAqIGBoYW5kbGVNb3VzZU1vdmVgIGFuZCBgaGFuZGxlTW91c2VVcGAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLm1hcFByb2plY3Rpb25fID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcFByb2plY3Rpb25fICE9IGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFByb2plY3Rpb25fID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTW91c2VQb3NpdGlvbjtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgTW91c2VQb3NpdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1vdXNlUG9zaXRpb24uanMubWFwIiwiaW1wb3J0IHtNYXBFdmVudH0gZnJvbSBcIm9sXCI7XHJcbmltcG9ydCB7U3RhdGV9IGZyb20gXCJvbC9WaWV3XCI7XHJcbmltcG9ydCB7Q29udHJvbH0gZnJvbSBcIm9sL2NvbnRyb2xcIjtcclxuaW1wb3J0IFVuaXRzIGZyb20gXCJvbC9wcm9qL1VuaXRzXCI7XHJcbmltcG9ydCB7Z2V0UG9pbnRSZXNvbHV0aW9ufSBmcm9tIFwib2wvcHJvalwiO1xyXG5cclxuLyoqXHJcbiAqIDI1LjRtbSA9IDEgaW5jaFxyXG4gKiAwLjI4bW0gPSBwaXhlbCBzaXplIGFjY29yZGluZyB0byB0aGUgT0dDIFdNVFMgc3BlY2lmaWNhdGlvblxyXG4gKlxyXG4gKiBAY29uc3RcclxuICogQHR5cGUge251bWJlcn1cclxuICovXHJcbmV4cG9ydCBjb25zdCBESVNQTEFZX0RQSSA9IDI1LjQgLyAwLjI4OyAvLyB+OTAuNzE0XHJcblxyXG4vKipcclxuICogQGNvbnN0XHJcbiAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxyXG4gKi9cclxuY29uc3QgTEVBRElOR19ESUdJVFMgPSBbMSwgMiwgNV07XHJcblxyXG4vKipcclxuICogU2NhbGVMaW5lIG9wdGlvbnNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NhbGVMaW5lT3B0aW9ucyB7XHJcblxyXG4gIC8qKiBBIGNzcyBjbGFzcyBuYW1lICoqL1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuXHJcbiAgLyoqIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQgKiovXHJcbiAgdGFyZ2V0PzogSFRNTEVsZW1lbnQgfCBzdHJpbmc7XHJcblxyXG4gIC8qKiBkcGkgb2YgdGhlIG91dHB1dCBkZXZpY2UgKiovXHJcbiAgZHBpPzogbnVtYmVyO1xyXG5cclxuICAvKiogTWluaW11bSB3aWR0aCBpbiBwaXhlbHMgYXQgdGhlIE9HQyBkZWZhdWx0IGRwaS4gVGhlIHdpZHRoIHdpbGwgYmUgYWRqdXN0ZWQgdG8gbWF0Y2ggdGhlIGRwaSB1c2VkLiAqKi9cclxuICBtaW5XaWR0aD86IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIERpc3BsYXlzIGEgc2NhbGUgbGluZSBpbiB0aGUgbWFwLlxyXG4gKlxyXG4gKiBUaGlzIGNvbnRyb2wgaXMgYW4gY3VzdG9taXplZCB2ZXJzaW9uIG9mIHRoZSBPcGVuTGF5ZXJzIFNjYWxlbGluZSBjb250cm9sLlxyXG4gKiBIZXJlIHRoZSBzY2FsZWxpbmUgaXMgYSBzdmcgaW1hZ2UsIGJlY2F1c2Ugbm93IHRoZSBjbGllbnQgY2FuIGV4cG9ydCBpdFxyXG4gKiB3aXRob3V0IDNyZCBwYXJ0eSBkZXBlbmRlbmN5IChzZWUgb3VyIGV4cG9ydCBleGFtcGxlKVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNjYWxlTGluZSBleHRlbmRzIENvbnRyb2wge1xyXG5cclxuICBwcm90ZWN0ZWQgdmlld1N0YXRlOiBTdGF0ZSB8IG51bGw7XHJcblxyXG4gIHByaXZhdGUgX21pbldpZHRoOiBudW1iZXI7XHJcblxyXG4gIHByb3RlY3RlZCByZW5kZXJlZFZpc2libGU6IGJvb2xlYW47XHJcblxyXG4gIHByb3RlY3RlZCByZW5kZXJlZFdpZHRoOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcblxyXG4gIHByb3RlY3RlZCByZW5kZXJlZFNWRzogU1ZHRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgcHJvdGVjdGVkIGRwaTogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgbmV3IHNjYWxlbGluZSBjb250cm9sLlxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiAvLyBFeGFtcGxlOiBjcmVhdGUgYSBuZXcgU2NhbGVMaW5lIGNvbnRyb2wgd2l0aCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxyXG4gICAqIGNvbnN0IHNjYWxlTGluZUNvbnRyb2wgPSBuZXcgU2NhbGVMaW5lKCk7XHJcbiAgICogYGBgXHJcbiAgICogQHBhcmFtIG9wdF9vcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0X29wdGlvbnM/OiBTY2FsZUxpbmVPcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xyXG5cclxuICAgIGNvbnN0IGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnYmdpcy1zY2FsZWxpbmUnO1xyXG5cclxuICAgIHN1cGVyKHtcclxuICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXHJcbiAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnZpZXdTdGF0ZSA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5fbWluV2lkdGggPSBvcHRpb25zLm1pbldpZHRoICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbldpZHRoIDogNjQ7XHJcbiAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5yZW5kZXJlZFdpZHRoID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5yZW5kZXJlZFNWRyA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuZHBpID0gb3B0aW9ucy5kcGkgfHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHRoZSBzY2FsZSBsaW5lIGVsZW1lbnRcclxuICAgKiBAcGFyYW0gbWFwRXZlbnRcclxuICAgKi9cclxuICBwdWJsaWMgcmVuZGVyKG1hcEV2ZW50OiBNYXBFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgZnJhbWVTdGF0ZSA9IG1hcEV2ZW50LmZyYW1lU3RhdGU7XHJcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcclxuICAgICAgdGhpcy52aWV3U3RhdGUgPSBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy52aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlRWxlbWVudCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGUgaXMgbWFpbmx5IGNvcGllZCBmcm9tIHRoZSBPcGVuTGF5ZXJzIFNjYWxlbGluZSBjb250cm9sXHJcbiAgICogYW5kIGN1c3RvbWl6ZWQgZm9yIG91ciBzdmcgZWxlbWVudFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVFbGVtZW50KCk6IHZvaWQge1xyXG5cclxuICAgIGNvbnN0IHZpZXdTdGF0ZSA9IHRoaXMudmlld1N0YXRlO1xyXG5cclxuICAgIGlmICghdmlld1N0YXRlKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XHJcbiAgICBjb25zdCBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XHJcbiAgICBjb25zdCBwb2ludFJlc29sdXRpb25Vbml0cyA9IFVuaXRzLk1FVEVSUztcclxuICAgIGxldCBwb2ludFJlc29sdXRpb24gPSBnZXRQb2ludFJlc29sdXRpb24oXHJcbiAgICAgIHByb2plY3Rpb24sXHJcbiAgICAgIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLFxyXG4gICAgICBjZW50ZXIsXHJcbiAgICAgIHBvaW50UmVzb2x1dGlvblVuaXRzXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IG1pbldpZHRoID0gKHRoaXMuX21pbldpZHRoICogKHRoaXMuZHBpIHx8IERJU1BMQVlfRFBJKSkgLyBESVNQTEFZX0RQSTtcclxuXHJcbiAgICBjb25zdCBub21pbmFsQ291bnQgPSBtaW5XaWR0aCAqIHBvaW50UmVzb2x1dGlvbjtcclxuICAgIGxldCBzdWZmaXggPSAnJztcclxuICAgIGlmIChub21pbmFsQ291bnQgPCAwLjAwMSkge1xyXG4gICAgICBzdWZmaXggPSAnzrxtJztcclxuICAgICAgcG9pbnRSZXNvbHV0aW9uICo9IDEwMDAwMDA7XHJcbiAgICB9IGVsc2UgaWYgKG5vbWluYWxDb3VudCA8IDEpIHtcclxuICAgICAgc3VmZml4ID0gJ21tJztcclxuICAgICAgcG9pbnRSZXNvbHV0aW9uICo9IDEwMDA7XHJcbiAgICB9IGVsc2UgaWYgKG5vbWluYWxDb3VudCA8IDEwMDApIHtcclxuICAgICAgc3VmZml4ID0gJ20nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3VmZml4ID0gJ2ttJztcclxuICAgICAgcG9pbnRSZXNvbHV0aW9uIC89IDEwMDA7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGkgPSAzICogTWF0aC5mbG9vcihNYXRoLmxvZyhtaW5XaWR0aCAqIHBvaW50UmVzb2x1dGlvbikgLyBNYXRoLmxvZygxMCkpO1xyXG4gICAgbGV0IGNvdW50LCB3aWR0aCwgZGVjaW1hbENvdW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgZGVjaW1hbENvdW50ID0gTWF0aC5mbG9vcihpIC8gMyk7XHJcbiAgICAgIGNvbnN0IGRlY2ltYWwgPSBNYXRoLnBvdygxMCwgZGVjaW1hbENvdW50KTtcclxuICAgICAgY291bnQgPSBMRUFESU5HX0RJR0lUU1soKGkgJSAzKSArIDMpICUgM10gKiBkZWNpbWFsO1xyXG4gICAgICB3aWR0aCA9IE1hdGgucm91bmQoY291bnQgLyBwb2ludFJlc29sdXRpb24pO1xyXG4gICAgICBpZiAoaXNOYU4od2lkdGgpKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSBpZiAod2lkdGggPj0gbWluV2lkdGgpIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICArK2k7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdlbmVyYXRlZFNWRyA9IG51bGw7XHJcbiAgICBpZiAoY291bnQgJiYgZGVjaW1hbENvdW50Pj0wKSB7XHJcbiAgICAgIGdlbmVyYXRlZFNWRyA9IHRoaXMuZ2V0R2VuZXJhdGVkU1ZHKGNvdW50LnRvRml4ZWQoZGVjaW1hbENvdW50IDwgMCA/IC1kZWNpbWFsQ291bnQgOiAwKSArICcgJyArIHN1ZmZpeCwgd2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChnZW5lcmF0ZWRTVkcgJiYgdGhpcy5yZW5kZXJlZFNWRyAhPSBnZW5lcmF0ZWRTVkcpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZ2VuZXJhdGVkU1ZHKTtcclxuICAgICAgdGhpcy5yZW5kZXJlZFNWRyA9IGdlbmVyYXRlZFNWRztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5yZW5kZXJlZFdpZHRoICE9IHdpZHRoKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcclxuICAgICAgaWYoZ2VuZXJhdGVkU1ZHKSB7XHJcbiAgICAgICAgZ2VuZXJhdGVkU1ZHLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBTdHJpbmcod2lkdGgpKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnJlbmRlcmVkV2lkdGggPSB3aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMucmVuZGVyZWRWaXNpYmxlKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGdlbmVyYXRlZCBzdmcgZWxlbWVudFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHR4dCB0aGUgY2FsY3VsYXRlZCB0ZXh0IGNvbnRlbnQgb2YgdGhlIGVsZW1lbnRcclxuICAgKiBAcGFyYW0gd2lkdGggdGhlIGNhbGN1bGF0ZWQgb3V0cHV0IHdpZHRoXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgZ2V0R2VuZXJhdGVkU1ZHKHR4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogU1ZHRWxlbWVudCB7XHJcblxyXG4gICAgY29uc3Qgc3ZnSGVpZ2h0ID0gMTg7XHJcblxyXG4gICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XHJcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdpZCcsICdiZ2lzLXNjYWxlbGluZS1zdmcnKTtcclxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIHN2Z0hlaWdodCk7XHJcbiAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyh3aWR0aCkpO1xyXG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzEwMCUnKTtcclxuXHJcbiAgICBjb25zdCByZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdyZWN0Jyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYmdpcy1zY2FsZWxpbmUtc3ZnLWJhY2tncm91bmQnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKDApKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd5JywgU3RyaW5nKDApKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd3aWR0aCcsICcxMDAlJyAvKlN0cmluZyh3aWR0aCkqLyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzEwMCUnIC8qU3RyaW5nKHN2Z0hlaWdodCkqLyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjZTVlY2YwJyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywgJy41Jyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzEnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgJzAgJyArIHdpZHRoICsgJyAnICsgKHdpZHRoICsgMiAqIHN2Z0hlaWdodCkpO1xyXG4gICAgc3ZnLmFwcGVuZENoaWxkKHJlY3QpO1xyXG5cclxuICAgIGNvbnN0IHRleHQ6IFNWR1RleHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICd0ZXh0Jyk7XHJcbiAgICB0ZXh0LnRleHRDb250ZW50ID0gdHh0O1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3gnLCBTdHJpbmcod2lkdGggLyAyKSk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgneScsIFN0cmluZygxMikpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtc2l6ZScsICcxZW0nKTtcclxuICAgIHRleHQuc2V0QXR0cmlidXRlKCdzdHlsZScsICdmb250LXNpemU6IDAuNzVyZW07IGZvbnQtZmFtaWx5OiBcIlNvdXJjZSBTYW5zIFByb1wiLCBzYW5zLXNlcmlmJyk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC1mYW1pbHknLCAnXCJTb3VyY2UgU2FucyBQcm9cIiwgc2Fucy1zZXJpZicpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnYmxhY2snKTtcclxuICAgIHN2Zy5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuXHJcbiAgICByZXR1cm4gc3ZnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHRoZSBtaW4gd2lkdGhcclxuICAgKiBAcGFyYW0gdmFsdWVcclxuICAgKi9cclxuICBwdWJsaWMgc2V0TWluV2lkdGgodmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5fbWluV2lkdGggPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgbWluIHdpZHRoXHJcbiAgICovXHJcbiAgcHVibGljIGdldE1pbldpZHRoKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWluV2lkdGg7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge01hcEV2ZW50LCBQbHVnZ2FibGVNYXB9IGZyb20gXCJvbFwiO1xyXG5pbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XHJcbmltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIm9sL2Nvb3JkaW5hdGVcIjtcclxuaW1wb3J0IHtib3VuZGluZ0V4dGVudCwgRXh0ZW50fSBmcm9tIFwib2wvZXh0ZW50XCI7XHJcbmltcG9ydCB7T25SZXR1cm59IGZyb20gXCJvbC9PYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7T2JqZWN0T25TaWduYXR1cmV9IGZyb20gXCJvbC9PYmplY3RcIjtcclxuaW1wb3J0IEJhc2VFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcblxyXG4vKipcclxuICogVGhlIG92ZXJ2aWV3IG9wdGlvbnNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgT3ZlcnZpZXdPcHRpb25zIGV4dGVuZHMgT3B0aW9ucyB7XHJcbiAgcHJldmVudERlZmF1bHQ/OiBib29sZWFuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBldmVudCBjbGFzcyB0byBoYW5kbGUgbW91c2UgZXZlbnRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3ZlcnZpZXdNYXBFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XHJcbiAgb3JpZ2luYWxFdmVudDogTW91c2VFdmVudDtcclxuICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIG9yaWdpbmFsRXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgIHN1cGVyKHR5cGUpO1xyXG4gICAgdGhpcy5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgZXh0ZW5kZWQgc2lnbmF0dXJlIGZvciB0aGUgb24gbWV0aG9kXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBPdmVydmlld09uU2lnbmF0dXJlPFJldHVybj4gPSAoKHR5cGU6IFwiY2xpY2tcIiB8IFwiY2xpY2tcIltdLCBsaXN0ZW5lcjogKGV2ZW50OiBPdmVydmlld01hcEV2ZW50KSA9PiBhbnkpID0+IFJldHVybikgJiBPYmplY3RPblNpZ25hdHVyZTxSZXR1cm4+O1xyXG5cclxuLyoqXHJcbiAqIERpc3BsYXlzIGFuIG92ZXJ2aWV3IG1hcCBvZiBBdXN0cmlhIGFuZCBhIGNyb3NzaGFpciBtYXJrZXIgZm9yIHRoZSBjdXJyZW50XHJcbiAqIGNlbnRlciBpbiB0aGUgbWFpbiBtYXAuIFlvdSBjYW4gY2xpY2sgb24gdGhlIG92ZXJ2aWV3IG1hcCB0byByZWNlbnRlciB0aGVcclxuICogbWFpbiBtYXAuXHJcbiAqXHJcbiAqIEhpbnQ6IHRoZSBkZWZhdWx0IHNpemUgb2YgdGhlIG92ZXJ2aWV3IG1hcCBkZXBlbmRzIG9uIHRoZSB3aWR0aCBvZiB0aGUgdmlld3BvcnQgKGFwcHJvcHJpYXRlIGZvciBmdWxsc2NyZWVuIG1hcHMpLlxyXG4gKiBUbyBsaW1pdCB0aGUgc2l6ZSBhZGQgYSBtYXgtd2lkdGggYW5kIG1heC1oZWlnaHQgKG1heC13aWR0aCA9IDEuNzUqbWF4LWhlaWdodCkgdG8gdGhlIC5iZ2lzLW92ZXJ2aWV3LWltYWdlIGNzcyBjbGFzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBPdmVydmlldyBleHRlbmRzIENvbnRyb2wge1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyBCQUNLR1JPVU5EX0NPTE9SID0gJyNlNWVjZjAnO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyBTVkdfSEVJR0hUID0gMjE2O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyBTVkdfV0lEVEggPSAzODA7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIFNWR19DT0RFID0gXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgY2xhc3M9J2JnaXMtb3ZlcnZpZXdtYXAtc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIFwiICsgT3ZlcnZpZXcuU1ZHX1dJRFRIICsgXCIgXCIgKyBPdmVydmlldy5TVkdfSEVJR0hUICsgXCInIHByZXNlcnZlQXNwZWN0UmF0aW89J3hNaWRZTWlkIG1lZXQnIGhlaWdodD0nMTAwJScgd2lkdGg9JzEwMCUnIGNvbG9yLWludGVycG9sYXRpb249J2F1dG8nIGZpbGw9J2JsYWNrJyBmaWxsLW9wYWNpdHk9JzEnICBzdHJva2U9J2JsYWNrJyBzdHJva2UtZGFzaGFycmF5PSdub25lJyBzdHJva2UtZGFzaG9mZnNldD0nMCcgc3Ryb2tlLWxpbmVjYXA9J3NxdWFyZScgc3Ryb2tlLWxpbmVqb2luPSdtaXRlcicgc3Ryb2tlLW1pdGVybGltaXQ9JzEwJyBzdHJva2Utb3BhY2l0eT0nMScgc3Ryb2tlLXdpZHRoPScxJyB4bWxuczp2PSdodHRwczovL3ZlY3RhLmlvL25hbm8nPjxzdHlsZT48IVtDREFUQVsuQntjbGlwLXBhdGg6dXJsKCNBKX0uQ3tmaWxsLXJ1bGU6ZXZlbm9kZH0uRHtzdHJva2U6bm9uZX0uRXtmaWxsOiM5OTl9LkZ7ZmlsbDpub25lfS5He3N0cm9rZS1taXRlcmxpbWl0OjF9Lkh7c3Ryb2tlLXdpZHRoOjIuNX1dXT48L3N0eWxlPjxkZWZzPjxjbGlwUGF0aCBpZD0nQSc+PHBhdGggZD0nTTAgMGgzODB2MjE2SDBWMHonLz48L2NsaXBQYXRoPjxwYXRoIGlkPSdCJyBkPSdNMzU2IDgybC0uNCA1LjIgNC40IDEuNi0zLjIgMi40djYuNGwtMy42LjggMi44IDMuNi44IDYuOC05LjYgMS4yLS40LTItMS42IDIuNGgtMy42bC0xLjYtMy42LTQuOC0xLjYtOCA2LjQgNi40IDMuMiAzLjItLjggMS4yIDQuOCAyIC44LTIuOCAyLjguNCAzLjItMy42IDMuMi0yLjgtLjQtLjggMS42LTIuNC0xLjYtLjQgNCAyLjQgNC44LTIuNCAxLjYtLjggNCAyIC44LS40IDIuNCAyLjgtLjQuOCAxLjYtMy4yIDEuNiAyLjggMi44LTQgMiAzLjYgMS42LTEwLS44LS40IDMuMi00IDEuNi0yLjQgNC40LTYuNCAyLjguOC0zLjYgNi40LTYuOC0zLjItNS4yIDEuNi00LjgtNC44LTE0LjggMTMuMi02Ljh2LTZsMi44LTQtLjgtMy42LTIuNC0xLjItMS4yLTcuNiAzLjIuOCAyLTIuOC0yLTEuNiAyLjgtLjggMi00IDMuMi0uNCAyLjQgNCA1LjYtNS42di0yLjhsNS42LTEuMiAyLjQtMy4yTDM1MiA4OGwxLjYtMy42LTItMiAyLjggMS42IDEuNi0yeicvPjxwYXRoIGlkPSdDJyBkPSdNMTYyLjQgMTQ2LjhsLjQgMiA4LjQgMS4yIDEuNiAyLjggNC40IDEuNiA4LTIgLjQtMi44IDQuOC0uOCAyIDIgMTAuOC44IDguNCA5LjYgNS42LTIgMi40LTQgOC40LTQuOCAxLjYgMy4yaDZsLjggMy4yIDQuOC0zLjIgNS42IDIgMTAtMy42IDggOC44LTIgOC44IDIuNC44LS40IDYuNCAyIDEuMi0zLjYgMy4yLTEuMi0yLTEuNiAyLTIuNC0uNC0yLjQgNi40LTQuOC44LS40IDIuNC00LjggMS42LS44IDQtMi40LTMuNi0yIDEuMi0yLTIuNC0xMi40LjgtMS4yLTIuOGgtNS4ybC00LTIuOC01LjYgMS4yLTE4LTQuOC02LjggMS42LTYuNC0zLjJIMTY4bC0yLjQtMi44LTQuOC0uNHYtMy4yaDEuNlYxNzJsOS4yLTEuMiAxLjYtMi40LTUuNi00di0zLjJsLTQuNC0zLjItLjgtMi40IDItMy4yaC0yLjhsLTIuNC0zLjYgMy4yLTJ6Jy8+PHBhdGggaWQ9J0QnIGQ9J00yNjQuOCAyMC44bDUuNiAxLjYuNCA0IDQuNC0uOCAxLjYtMi44IDguOCAzLjIuOCAyIDggNCA2LjgtMS42VjMybDUuMiAyIC40IDIuNCA1LjYgMy4yIDEyLjggMS4yIDMuNi01LjYgMy42LS40IDIuNCAyLjQgMi44LS40IDEuMiA0IDEwLjQgMS42IDEuNiAxMC44LTQuOCA2LS44IDQuOCA1LjYgNy42LjggNi40IDQuNCAzLjItMS42IDIuOC0yLjgtMS42IDIgMkwzNTIgODhsLTQuNC0zLjYtMi40IDMuMi01LjYgMS4ydjIuOGwtNS42IDUuNi0yLjQtNC0zLjIuNC0xLjYgMy42LTMuMiAxLjIgMiAxLjItMiAzLjItMy4yLS44IDEuMiA3LjYgMi40IDEuMi44IDMuNi0yLjggNCAxLjIgNC01LjIgNS4yaC0yLjhsLTItNi44LTIuNCAyLjgtMS4yLTItNC44LS44LTEuMi0yLjgtMiAuNC40LTQtNS4yLS40LTEuMi01LjYtMS42IDEuMi0zLjItMy42LTQuNC40di0xLjZIMjg0bC00LjQtNC0yLjQuNC0uNCAyLTMuMi0uNC0uOCAzLjItMTAuNC40LTIgMi40LTQtMi40LTMuMiAxLjItMi40LTR2LTQuNGwyLjgtMS42LS40LTEuNi0xLjYtMi40LTEuNi44LTguNC00LjQtMi0zLjJ2LTMuNmwxLjYtLjgtLjgtNi40IDItMi40IDYuOCA1LjIgNy4yLTJMMjU4IDc0aDMuMmwxLjIgMi40LjgtOC40aC0ybC44LTQuOC0yIC40IDEuNi0xLjYtNC00LjggMi44LTEuNi0xMC40LTUuMiAxLjYtNy4yIDMuNi0yLjguNC0zLjYgNy4yIDEuMlYyMy4ybDItMi40em02MiA0Ny4ybC03LjIgNS42LTIuNC0xLjYtLjggNiAxLjYgMy4yIDkuNi40IDItMi44IDQuNCAxLjYtMi0yLjQuOC02LTItMi0xLjYgMS4yLTIuNC0zLjJ6Jy8+PHBhdGggaWQ9J0UnIGQ9J00yMTIuNCAzOGw5LjYgNi40LTIuNCAyIDIuNCAzLjJoNmw2LjQgMi44IDItMi44aDIuNEwyNDAgNDZsNCAzLjIgMi40LTIgNS42IDUuMiA3LjIgMiAxLjIgMS4yLTIuOCAxLjYuNCAyIDMuNiAyLjgtMS42IDEuNiAyLS40LS44IDQuOGgydjQuNGwtLjggNC0xLjItMi40SDI1OGwtMS42IDIuOC02IDItNi44LTUuMi0zLjIgMi40LjggNi40LTEuNi44djMuNmw2LjQgNiA1LjYuOCAyIDMuMi0yLjggMi40IDEuNiA2LjgtMi40LS44LTIgMi40LTUuMi44LS44IDIuNC04LjQgNC44LTMuMi0uNC0yLTIuOC02LjggMi40di0zLjZsLTItMi0xMC40LTEuMi0zLjYgNS42IDIuOCA4LjQtMS42IDMuMmgtMi40bC04LjQtNCAyLTYuNC0xLjYtMiAyLjgtNC40LTUuMi0yIDEuMi0yLjggMy4yLjh2LTEuNmwtNi40LjQtNC40LTItLjQtOC44IDMuNiAxLjIuNC0yLjgtNC0yLTYgMi44di0ybC0zLjItLjQtMS4yLTIuNGgtNC40bC0zLjIgMy4yLTUuMi01LjItLjQtMy4yIDEyLTkuNiAxNC00IDQuOC03LjItLjQtOC44IDIgLjQgMS4yLTIuNCAxMCA1LjIgNC40LTcuMi40LTUuNi0yLS44IDIuNC0zLjZ6Jy8+PHBhdGggaWQ9J0YnIGQ9J00xNzYuNCA4Ni44bDEuNiAyLjQgMy4yLjR2Mmw2LTIuOCA0IDItLjQgMi44LTMuNi0xLjIuNCA4LjggMTEuMiAyLjRoLTMuNmwtMS4yIDMuMiA1LjIgMS42LTIuOCA0LjQgMS42IDItMiA2LjQgNS4yIDMuMi0xLjYgMy4yIDEuNiA4LjggNS4yIDIgNS4yLTIuNC44IDQuNCA2LjggNi40LTUuMiAxLjIgMS4yIDIuOC00LjQgOC01LjItMy42di0yLjRsLTEwLjQtMi44LTIuOC44LTEuNi0yLTUuMi44LS40IDIuOC03LjIgMi01LjItMS42LTEuNi0yLjgtOC40LTEuMnYtMmwtNCAyLTYtMy42SDE0OGwtNi40IDUuNi02LTEuMi0yLTEyLjggMS42LTEuNiA2LjguNCAxLjItMiA4LjQuNHYtMy42bDQuNC0uOCAyLjQtNC44IDIuOC0uOC0zLjItNC44IDItMi00LjQtMS42IDEuMi00LjRoOC40bC0xLjIgMS42IDIuOCAyLjQtMiAyIC44IDIgNy42IDUuMiAzLjYtMS4yLS40LTUuNiAyLjgtMy42LS44LTQtMi40LTJoLTUuNmw0LjQtOS4yLTYuNC04LjQgNC0zLjZoNHonLz48cGF0aCBpZD0nRycgZD0nTTI3OS4yIDEwMS4ybDcuMiAzLjZ2MS42bDQuNC0uNCAzLjIgMy42IDEuNi0xLjIgMS4yIDUuNiA1LjIuNC0uOCAzLjIgMi40LjQgMS4yIDIuOCA0LjguOCAxLjIgMiAxLjYtMi44IDEuMi44LS40IDIuOCAyLjggMy4yLTcuMiAzLjYgNC44IDE0LjgtMS42IDQuOCAzLjIgNC44LTcuNiAxMC44djZsMi40IDUuMi02LjgtNGgtMy42bC05LjYgMi0yIDEuMnYyLjhsLTMuMiAxLjItMi44LTMuMi0xNC44LjgtMi40LTEuNi40LTYuNC0yLjQtLjggMi04LjgtOC04LjgtMTAgMy42LTUuNi0yLTQuOCAzLjItLjgtMy4yaC02bC0xLjYtMy4yLTguNCA0LjgtMi40IDQtNC40IDItMy4yLTEuNiA1LjYtOC44LTEuMi0yLjggNS4yLTEuMi02LjgtNi40LS44LTQuNC01LjIgMi40LTQuOC0xLjYtMi04LjQgMS42LTQuNCA1LjYgMS4yIDEuNi0zLjItMi44LTguNCAzLjYtNS42IDEwLjQgMS4yIDIgMnYzLjZsNi44LTIuNCAyIDIuOCAzLjIuNCAxNi40LTEwLjQgMy4yIDIuNCAzLjItMS4yIDQgMi40IDItMi40IDEwLjQtLjQuOC0zLjIgMy4yLjQuNC0yaDJ6Jy8+PHBhdGggaWQ9J0gnIGQ9J00xNTEuNiAxNDUuMmw2LjQgMi40IDMuNiA0LjhoMi44bC0yIDMuMi44IDIuNCA0LjQgMy4ydjMuMmw1LjYgNC0xLjYgMi40LTkuMiAxLjItMS42IDUuNi01LjYuNC04LTQtMS4yLTQtMy4yLS40LS40LTYuOC0yLjguOC0zLjItMi44IDEuMi0xLjYtMi00LjggMy42LS44IDcuMi03LjYgNS4yLS44eicvPjxwYXRoIGlkPSdJJyBkPSdNNjEuMiAxMTguOGw1LjYgMS42IDItMi40IDYuOCAzLjYgNS4yLTEuNiAxLjIgMS42LTIuNCAyaDMuMmwyIDZoNmw0LTIuOCAyIC40LS44IDIuNCAyLjQtLjQgMi0zLjIgNCAuNC0xLjYtMi40IDIuNC0yLjggNiAuNCAyLjQtNS4yIDkuNi44IDYuOC0yLjggOS4yIDEuMi0yLTYuNCA0LjQtMi44djQuNGw4LTEuMiAyLjggNC44IDMuMi0uOHYybDQgMS4yLTEuNiAyLjQgMy4yIDQuOC0yLjguOC0yLjQgNC44LTQuNC44djMuNmwtOC40LS40LTEuMiAyLTYuOC0uNC0xLjYgMS42IDIuNCAxMy42LTggMi05LjIgNS4yLTUuMi0zLjItMy42IDItMy4yLTEuNi0yLjQgMi44LTIuNC0xLjYtOS4yIDEuNi40IDEuNi0zLjIgMS42LTMuMiAxMGgtNy4ybC02LTEuNiAxLjYtMi40LTQtMy4yTDY2IDE2NmwtNC0xLjIuOC01LjYtMi44LS44LTEuNi0zLjItMy42IDMuMi40IDItMy42LS40djRsLTQgMS4yLTEuNi0yLjgtLjQtMi40IDIuOC0zLjYtMi0yLjQgMS42LTEuMi0xLjItMi44IDQtNCAuNC03LjItMi40LTEuMiA2LjgtMiA0LjgtNS4yIDItMy4yLTItNCAuOC00LjR6Jy8+PHBhdGggaWQ9J0onIGQ9J00zMS4yIDExNi40bDIgLjQtLjQgMi44aDYuOGwxLjIgNCA0LjQgMS42LjQgMi40LTEuNi44IDEuNiAzLjYgNi0yLS44IDUuMi0yIDEuMiAyLjQgMi40LS40IDcuMi00IDQgMS4yIDIuOC0xLjYgMS4yIDIgMi40LTIuOCAzLjYgMiAzLjYtMS4yIDItMy4yLTEuMi0xLjItMi44LTYuNC0yVjE1NGwtMTItMi40IDEuMi00LjgtMy4yLTIuNC40LTQuOC0yLTIgNi40LTgtLjQtNC0yLjgtLjQtMS42LTIuOCA3LjYtMiAyLTR6Jy8+PHBhdGggaWQ9J0snIGQ9J00zMjcuNiA2OC40bC40IDIgMi44LS40IDIgMi0uOCA2IDIgMi40LTQuNC0xLjYtMiAyLjgtOS42LS40LTEuNi0zLjIuOC02IDIuNCAxLjYgMS42LTIuNCAzLjYtLjQuNC0yLjggMi40LjR6Jy8+PC9kZWZzPjxnIHRleHQtcmVuZGVyaW5nPSdvcHRpbWl6ZUxlZ2liaWxpdHknPjx1c2UgeGxpbms6aHJlZj0nI0InIGNsYXNzPSdCIEMgRCBFJy8+PGcgc3Ryb2tlPSdzaWx2ZXInPjx1c2UgeGxpbms6aHJlZj0nI0InIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjQycgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNDJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0QnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRCcgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNFJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0UnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRicgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNGJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0cnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRycgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNIJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0gnIGNsYXNzPSdCIEYgRyBIJy8+PHBhdGggZD0nTTYxLjIgMTE4LjhsLTEuMi0xLjIgMi40LS44LTEuMiAyeicgY2xhc3M9J0IgQyBEIEUnLz48cGF0aCBkPSdNNjEuMiAxMTguOGwtMS4yLTEuMiAyLjQtLjgtMS4yIDJ6JyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0knIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSScgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNKJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0onIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjSycgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNLJyBjbGFzcz0nQiBGIEcgSCcvPjwvZz48L2c+PC9zdmc+XCI7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFQSVByb3BlcnR5OiBleHRlbnRcclxuICAgKiBFeHRlbnQgb2Ygb3ZlcnZpZXcgLSBbbWlueCwgbWlueSwgbWF4eCwgbWF4eV0gb3IgW2xlZnQsIGJvdHRvbSwgcmlnaHQsIHRvcF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgZXh0ZW50OiBFeHRlbnQ7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdmdFbGVtZW50OiBTVkdFbGVtZW50O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGJhY2tncm91bmRTVkdSZWN0RWxlbWVudDogU1ZHUmVjdEVsZW1lbnQ7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgcHJldmVudERlZmF1bHQ6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbiE6IE92ZXJ2aWV3T25TaWduYXR1cmU8T25SZXR1cm4+O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvdmVydmlldyBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE92ZXJ2aWV3T3B0aW9ucykge1xyXG5cclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9IGFzIE92ZXJ2aWV3T3B0aW9ucztcclxuXHJcbiAgICBjb25zdCBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgIG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1vdmVydmlldy1pbWFnZSc7XHJcblxyXG4gICAgY29uc3QgZmlndXJlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZ3VyZScpO1xyXG4gICAgZmlndXJlRWxlbWVudC5pbm5lckhUTUwgPSBPdmVydmlldy5TVkdfQ09ERTtcclxuXHJcbiAgICBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoZmlndXJlRWxlbWVudCk7XHJcblxyXG4gICAgb3B0cy5lbGVtZW50ID0gb3ZlcnZpZXdDb250YWluZXJFbGVtZW50O1xyXG5cclxuICAgIHN1cGVyKG9wdHMpO1xyXG5cclxuICAgIHRoaXMucHJldmVudERlZmF1bHQgPSBvcHRzLnByZXZlbnREZWZhdWx0IHx8IGZhbHNlO1xyXG5cclxuICAgIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50ID0gb3ZlcnZpZXdDb250YWluZXJFbGVtZW50O1xyXG5cclxuICAgIC8vIGV4dGVudDogW21pbngsIG1pbnksIG1heHgsIG1heHldIC0tIGNvb3JkaW5hdGVzOiBbW2xlZnQsIGJvdHRvbV0sIFtyaWdodCwgdG9wXV1cclxuICAgIHRoaXMuZXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW1sxMDEwMDAwLCA1NzkwMDAwXSwgWzE5NjAwMDAsIDYzMzAwMDBdXSk7XHJcblxyXG4gICAgdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE92ZXJ2aWV3TWFwRXZlbnQoJ2NsaWNrJywgZSkpLCBmYWxzZSk7XHJcblxyXG4gICAgaWYoIXRoaXMucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgdGhpcy5vbihcImNsaWNrXCIsIHRoaXMub25PdmVydmlld0ltYWdlQ2xpY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3ZnRWxlbWVudCA9IGZpZ3VyZUVsZW1lbnQuZmlyc3RDaGlsZCBhcyBTVkdFbGVtZW50O1xyXG5cclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdyZWN0Jyk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWJhY2tncm91bmQnKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgneCcsIFN0cmluZygwKSk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoMCkpO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdyeCcsIFN0cmluZyg4KSk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3J5JywgU3RyaW5nKDgpKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBTdHJpbmcoT3ZlcnZpZXcuU1ZHX1dJRFRIKSk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIFN0cmluZyhPdmVydmlldy5TVkdfSEVJR0hUKSk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3N0cm9rZS13aWR0aDowJyk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBPdmVydmlldy5CQUNLR1JPVU5EX0NPTE9SKTtcclxuXHJcbiAgICB0aGlzLnN2Z0VsZW1lbnQucHJlcGVuZCh0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBtYXBcclxuICAgKi9cclxuICBwdWJsaWMgc2V0TWFwKG1hcDogUGx1Z2dhYmxlTWFwKTogdm9pZCB7XHJcbiAgICBzdXBlci5zZXRNYXAobWFwKTtcclxuICAgIGlmIChtYXApIHtcclxuICAgICAgLy8gaWYodGhpcy5zdmdFbGVtZW50KSB7XHJcbiAgICAgIC8vICAgdGhpcy5zdmdFbGVtZW50LnByZXBlbmQodGhpcy5zdmdCYWNrZ3JvdW5kUmVjdCk7XHJcbiAgICAgIC8vIH1cclxuICAgICAgaWYoIXRoaXMucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgICBtYXAub24oJ21vdmVlbmQnLCAoZXZlbnQ6IE1hcEV2ZW50KSA9PiB0aGlzLnVwZGF0ZUNyb3NzaGFpcihldmVudCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCB1cGRhdGVDcm9zc2hhaXIoZXZlbnQ6IE1hcEV2ZW50KTogdm9pZCB7XHJcblxyXG4gICAgY29uc3Qgc2l6ZSA9IFtPdmVydmlldy5TVkdfV0lEVEgsIE92ZXJ2aWV3LlNWR19IRUlHSFRdO1xyXG5cclxuICAgIGNvbnN0IGNlbnRlciA9IHRoaXMuZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQoZXZlbnQubWFwLmdldFZpZXcoKT8uZ2V0Q2VudGVyKCkpO1xyXG5cclxuICAgIC8vIGp1c3QgdG8gYmUgc3VyZSBtYWtlIHNvbWUgbGltaXRzXHJcbiAgICBpZiAoY2VudGVyWzBdID4gc2l6ZVswXSlcclxuICAgICAgY2VudGVyWzBdID0gc2l6ZVswXTtcclxuICAgIGVsc2UgaWYgKGNlbnRlclswXSA8IDApXHJcbiAgICAgIGNlbnRlclswXSA9IDA7XHJcblxyXG4gICAgaWYgKGNlbnRlclsxXSA+IHNpemVbMV0pXHJcbiAgICAgIGNlbnRlclsxXSA9IHNpemVbMV07XHJcbiAgICBlbHNlIGlmIChjZW50ZXJbMV0gPCAwKVxyXG4gICAgICBjZW50ZXJbMV0gPSAwO1xyXG5cclxuICAgIC8vIHVwZGF0ZSBjcm9zc2hhaXJcclxuICAgIGlmICh0aGlzLnN2Z0VsZW1lbnQpIHtcclxuICAgICAgY29uc3QgZXhpc3RpbmdFbG1zID0gdGhpcy5zdmdFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpcicpIGFzIEhUTUxDb2xsZWN0aW9uT2Y8U1ZHTGluZUVsZW1lbnQ+O1xyXG4gICAgICBpZiAoZXhpc3RpbmdFbG1zKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBleGlzdGluZ0VsbSBvZiBBcnJheS5mcm9tKGV4aXN0aW5nRWxtcykpIHtcclxuICAgICAgICAgIHRoaXMuc3ZnRWxlbWVudC5yZW1vdmVDaGlsZChleGlzdGluZ0VsbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc3ZnRWxlbWVudC5hcHBlbmRDaGlsZChPdmVydmlldy5nZXRDcm9zc2hhaXIoY2VudGVyWzBdLCAwLCBjZW50ZXJbMF0sIE92ZXJ2aWV3LlNWR19IRUlHSFQsICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXIteCcpKTtcclxuICAgICAgdGhpcy5zdmdFbGVtZW50LmFwcGVuZENoaWxkKE92ZXJ2aWV3LmdldENyb3NzaGFpcigwLCBjZW50ZXJbMV0sIE92ZXJ2aWV3LlNWR19XSURUSCwgY2VudGVyWzFdLCAnYmdpcy1vdmVydmlld21hcC1zdmctY3Jvc3NoYWlyLXknKSk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0geDFcclxuICAgKiBAcGFyYW0geTFcclxuICAgKiBAcGFyYW0geDJcclxuICAgKiBAcGFyYW0geTJcclxuICAgKiBAcGFyYW0gY3NzQ2xhc3NcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0Q3Jvc3NoYWlyKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIsIGNzc0NsYXNzOiBzdHJpbmcpOiBTVkdMaW5lRWxlbWVudCB7XHJcbiAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XHJcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDEnLCBTdHJpbmcoeDEpKTtcclxuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MScsIFN0cmluZyh5MSkpO1xyXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgU3RyaW5nKHgyKSk7XHJcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTInLCBTdHJpbmcoeTIpKTtcclxuICAgIGxpbmUuc2V0QXR0cmlidXRlKCdzdHlsZScsICdmaWxsOiBub25lOyBzdHJva2U6IGJsYWNrOyBzdHJva2Utd2lkdGg6IDFweDsnKTtcclxuICAgIGxpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXIgJyArIGNzc0NsYXNzKTtcclxuICAgIHJldHVybiBsaW5lO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gbGVmdFxyXG4gICAqIEBwYXJhbSByaWdodFxyXG4gICAqIEBwYXJhbSB3aWR0aFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5hYnMoKGxlZnQgLSByaWdodCkpIC8gd2lkdGg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjZW50ZXJcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBnZXRPdmVydmlld1B4RnJvbUxvbkxhdChjZW50ZXI6IENvb3JkaW5hdGUgfCB1bmRlZmluZWQpOiBudW1iZXJbXSB7XHJcbiAgICBpZiAoY2VudGVyKSB7XHJcbiAgICAgIGNvbnN0IHNpemUgPSBbT3ZlcnZpZXcuU1ZHX1dJRFRILCBPdmVydmlldy5TVkdfSEVJR0hUXTtcclxuICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IFtcclxuICAgICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzBdLCB0aGlzLmV4dGVudFsyXSwgc2l6ZVswXSksXHJcbiAgICAgICAgT3ZlcnZpZXcuY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aCh0aGlzLmV4dGVudFsxXSwgdGhpcy5leHRlbnRbM10sIHNpemVbMV0pXHJcbiAgICAgIF07XHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgTWF0aC5yb3VuZCgxIC8gcmVzb2x1dGlvblswXSAqIChjZW50ZXJbMF0gLSB0aGlzLmV4dGVudFswXSkpLFxyXG4gICAgICAgIE1hdGgucm91bmQoMSAvIHJlc29sdXRpb25bMV0gKiAodGhpcy5leHRlbnRbM10gLSBjZW50ZXJbMV0pKVxyXG4gICAgICBdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFswLCAwXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZDogb25PdmVydmlld0ltYWdlQ2xpY2tcclxuICAgKiBIYW5kbGUgY2xpY2sgaW4gb3ZlcnZpZXcgaW1hZ2VcclxuICAgKlxyXG4gICAqIFBhcmFtZXRlcnM6XHJcbiAgICogZSAtIE1vdXNlRXZlbnQgb2JqZWN0XHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIG9uT3ZlcnZpZXdJbWFnZUNsaWNrKGU6IE92ZXJ2aWV3TWFwRXZlbnQpOiB2b2lkIHtcclxuXHJcbiAgICBjb25zdCBvdmVydmlld0NvbnRhaW5lckNsaWVudEJvdW5kaW5nUmVjdCA9IHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3QgeCA9IGUub3JpZ2luYWxFdmVudC5jbGllbnRYIC0gb3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QubGVmdDsgLy8gWC1wb3MgaW4gb3ZlcnZpZXcgaW1hZ2VcclxuICAgIGNvbnN0IHkgPSBlLm9yaWdpbmFsRXZlbnQuY2xpZW50WSAtIG92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0LnRvcDsgLy8gWS1wb3MgaW4gb3ZlcnZpZXcgaW1hZ2VcclxuXHJcbiAgICAvLyBnZXQgTG9uTGF0XHJcbiAgICBjb25zdCBjbGlja0xvbkxhdCA9IHRoaXMuZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHgoW3gsIHldKTtcclxuXHJcbiAgICAvLyB1cGRhdGUgY2VudGVyIG9mIHRoZSBtYXBcclxuICAgIHRoaXMuZ2V0TWFwKCk/LmdldFZpZXcoKT8uYW5pbWF0ZSh7XHJcbiAgICAgIGNlbnRlcjogY2xpY2tMb25MYXQsXHJcbiAgICAgIGR1cmF0aW9uOiAzMDAsXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2Q6IGdldExvbkxhdEZyb21PdmVydmlld1B4XHJcbiAgICogR2V0IG1hcCBsb2NhdGlvbiBmcm9tIHBpeGVsIGxvY2F0aW9uXHJcbiAgICpcclxuICAgKiBQYXJhbWV0ZXJzOlxyXG4gICAqIG9QeCAtIENvb3JkaW5hdGVcclxuICAgKlxyXG4gICAqIFJldHVybnM6XHJcbiAgICogW3gseV0gTG9jYXRpb24gaW4gbG9uL2xhdCB0cmFuc2xhdGVkIGZyb21cclxuICAgKiBwYXNzZWQgaW4gcGl4ZWwtbG9jYXRpb24gaW4gb3ZlcnZpZXcgbWFwXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGdldExvbkxhdEZyb21PdmVydmlld1B4KG9QeDogQ29vcmRpbmF0ZSk6IG51bWJlcltdIHtcclxuXHJcbiAgICBjb25zdCBzaXplID0gW3RoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsaWVudFdpZHRoLCB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5jbGllbnRIZWlnaHRdO1xyXG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IFtcclxuICAgICAgT3ZlcnZpZXcuY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aCh0aGlzLmV4dGVudFswXSwgdGhpcy5leHRlbnRbMl0sIHNpemVbMF0pLFxyXG4gICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzFdLCB0aGlzLmV4dGVudFszXSwgc2l6ZVsxXSlcclxuICAgIF07XHJcblxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgb1B4WzBdICogcmVzb2x1dGlvblswXSArIHRoaXMuZXh0ZW50WzBdLFxyXG4gICAgICB0aGlzLmV4dGVudFszXSAtIG9QeFsxXSAqIHJlc29sdXRpb25bMV1cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIG92ZXJ2aWV3IHBhcmVudCBjb250YWluZXIgZWxlbWVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRPdmVydmlld0NvbnRhaW5lckVsZW1lbnQoKTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBvdmVydmlldyBzdmcgZWxlbWVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRTVkdFbGVtZW50KCk6IFNWR0VsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuc3ZnRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgc3ZnIGJhY2tncm91bmQgcmVjdCBlbGVtZW50XHJcbiAgICovXHJcbiAgcHVibGljIGdldEJhY2tncm91bmRSZWN0RWxlbWVudCgpOiBTVkdSZWN0RWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge0J1dHRvbn0gZnJvbSBcIi4vYmFzZVwiO1xyXG5pbXBvcnQge0J1dHRvbk9wdGlvbnN9IGZyb20gXCIuL2Jhc2UvQnV0dG9uXCI7XHJcblxyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJzaGFyZVwiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTaGFyZSBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIHN0YXRpYyByZWFkb25seSBERUZBVUxUX1RPT0xUSVBfVEVYVCA9ICdBbnNpY2h0IHRlaWxlbic7XHJcbiAgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfVU5JQ09ERSA9IDB4ZTkyYztcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgYnV0dG9uIG9wdGlvbnNcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9ucz86IEJ1dHRvbk9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgIHN1cGVyKHsgdW5pY29kZTogU2hhcmUuREVGQVVMVF9VTklDT0RFLCB0b29sdGlwOiBTaGFyZS5ERUZBVUxUX1RPT0xUSVBfVEVYVCwgdG9vbHRpcEFzVGV4dEVsZW1lbnQ6IHRydWUsIC4uLm9wdHMgfSk7XHJcblxyXG4gIH1cclxuXHJcbn1cclxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgeyBlYXNlSW4gfSBmcm9tICcuL2Vhc2luZy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL1RpbGV9IGZvciB0aGUgdGlsZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHVybCBhcyBhcmd1bWVudHMuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9KTtcbiAqIGBgYFxuICogRm9yIG1vcmUgZmluZSBncmFpbmVkIGNvbnRyb2wsIHRoZSBsb2FkIGZ1bmN0aW9uIGNhbiB1c2UgZmV0Y2ggb3IgWE1MSHR0cFJlcXVlc3QgYW5kIGludm9sdmVcbiAqIGVycm9yIGhhbmRsaW5nOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgVGlsZVN0YXRlIGZyb20gJ29sL1RpbGVTdGF0ZSc7XG4gKlxuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAqICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gKiAgICAgdmFyIGRhdGEgPSB0aGlzLnJlc3BvbnNlO1xuICogICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAqICAgICAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xuICogICAgIH0gZWxzZSB7XG4gKiAgICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5FUlJPUik7XG4gKiAgICAgfVxuICogICB9KTtcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICogICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgfSk7XG4gKiAgIHhoci5vcGVuKCdHRVQnLCBzcmMpO1xuICogICB4aHIuc2VuZCgpO1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oVGlsZSwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlfSBzb3VyY2VzIHVzZSBhIGZ1bmN0aW9uIG9mIHRoaXMgdHlwZSB0byBnZXRcbiAqIHRoZSB1cmwgdGhhdCBwcm92aWRlcyBhIHRpbGUgZm9yIGEgZ2l2ZW4gdGlsZSBjb29yZGluYXRlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC90aWxlY29vcmR+VGlsZUNvb3JkfSBmb3IgdGhlIHRpbGVcbiAqIGNvb3JkaW5hdGUsIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHBpeGVsIHJhdGlvIGFuZCBhXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gZm9yIHRoZSBwcm9qZWN0aW9uICBhcyBhcmd1bWVudHNcbiAqIGFuZCByZXR1cm5zIGEgYHtzdHJpbmd9YCByZXByZXNlbnRpbmcgdGhlIHRpbGUgVVJMLCBvciB1bmRlZmluZWQgaWYgbm8gdGlsZVxuICogc2hvdWxkIGJlIHJlcXVlc3RlZCBmb3IgdGhlIHBhc3NlZCB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCwgbnVtYmVyLFxuICogICAgICAgICAgIGltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQpOiAoc3RyaW5nfHVuZGVmaW5lZCl9IFVybEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uPTI1MF0gQSBkdXJhdGlvbiBmb3IgdGlsZSBvcGFjaXR5XG4gKiB0cmFuc2l0aW9ucyBpbiBtaWxsaXNlY29uZHMuIEEgZHVyYXRpb24gb2YgMCBkaXNhYmxlcyB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICogQGFwaVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHRpbGVzLlxuICpcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBUaWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZSh0aWxlQ29vcmQsIHN0YXRlLCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ29vcmQgPSB0aWxlQ29vcmQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIFwiaW50ZXJpbVwiIHRpbGUgZm9yIHRoaXMgdGlsZS4gVGhlIGludGVyaW0gdGlsZSBtYXkgYmUgdXNlZCB3aGlsZSB0aGlzXG4gICAgICAgICAqIG9uZSBpcyBsb2FkaW5nLCBmb3IgXCJzbW9vdGhcIiB0cmFuc2l0aW9ucyB3aGVuIGNoYW5naW5nIHBhcmFtcy9kaW1lbnNpb25zXG4gICAgICAgICAqIG9uIHRoZSBzb3VyY2UuXG4gICAgICAgICAqIEB0eXBlIHtUaWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW50ZXJpbVRpbGUgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBrZXkgYXNzaWduZWQgdG8gdGhlIHRpbGUuIFRoaXMgaXMgdXNlZCBieSB0aGUgdGlsZSBzb3VyY2UgdG8gZGV0ZXJtaW5lXG4gICAgICAgICAqIGlmIHRoaXMgdGlsZSBjYW4gZWZmZWN0aXZlbHkgYmUgdXNlZCwgb3IgaWYgYSBuZXcgdGlsZSBzaG91bGQgYmUgY3JlYXRlZFxuICAgICAgICAgKiBhbmQgdGhpcyBvbmUgYmUgdXNlZCBhcyBhbiBpbnRlcmltIHRpbGUgZm9yIHRoaXMgbmV3IHRpbGUuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXkgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkdXJhdGlvbiBmb3IgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbi5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zaXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNpdGlvbiA9PT0gdW5kZWZpbmVkID8gMjUwIDogb3B0aW9ucy50cmFuc2l0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogTG9va3VwIG9mIHN0YXJ0IHRpbWVzIGZvciByZW5kZXJpbmcgdHJhbnNpdGlvbnMuICBJZiB0aGUgc3RhcnQgdGltZSBpc1xuICAgICAgICAgKiBlcXVhbCB0byAtMSwgdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGUuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNpdGlvblN0YXJ0c18gPSB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IHRoZSB0aWxlIGNhY2hlIHdoZW4gdGhlIHRpbGUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBjYWNoZSBkdWUgdG8gZXhwaXJ5XG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleSArICcvJyArIHRoaXMudGlsZUNvb3JkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbnRlcmltIHRpbGUgbW9zdCBzdWl0YWJsZSBmb3IgcmVuZGVyaW5nIHVzaW5nIHRoZSBjaGFpbiBvZiBpbnRlcmltXG4gICAgICogdGlsZXMuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlICBtb3N0IHJlY2VudCB0aWxlIHRoYXQgaGFzIGJlZW4gbG9hZGVkLCBpZiBub1xuICAgICAqIHN1Y2ggdGlsZSBleGlzdHMsIHRoZSBvcmlnaW5hbCB0aWxlIGlzIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4geyFUaWxlfSBCZXN0IHRpbGUgZm9yIHJlbmRlcmluZy5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRJbnRlcmltVGlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmludGVyaW1UaWxlKSB7XG4gICAgICAgICAgICAvL2VtcHR5IGNoYWluXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG4gICAgICAgIC8vIGZpbmQgdGhlIGZpcnN0IGxvYWRlZCB0aWxlIGFuZCByZXR1cm4gaXQuIFNpbmNlIHRoZSBjaGFpbiBpcyBzb3J0ZWQgaW5cbiAgICAgICAgLy8gZGVjcmVhc2luZyBvcmRlciBvZiBjcmVhdGlvbiB0aW1lLCB0aGVyZSBpcyBubyBuZWVkIHRvIHNlYXJjaCB0aGUgcmVtYWluZGVyXG4gICAgICAgIC8vIG9mIHRoZSBsaXN0IChhbGwgdGhvc2UgdGlsZXMgY29ycmVzcG9uZCB0byBvbGRlciByZXF1ZXN0cyBhbmQgd2lsbCBiZVxuICAgICAgICAvLyBjbGVhbmVkIHVwIGJ5IHJlZnJlc2hJbnRlcmltQ2hhaW4pXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgIC8vIFNob3cgdGlsZSBpbW1lZGlhdGVseSBpbnN0ZWFkIG9mIGZhZGluZyBpdCBpbiBhZnRlciBsb2FkaW5nLCBiZWNhdXNlXG4gICAgICAgICAgICAgICAgLy8gdGhlIGludGVyaW0gdGlsZSBpcyBpbiBwbGFjZSBhbHJlYWR5XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uXyA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aWxlID0gdGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgfSB3aGlsZSAodGlsZSk7XG4gICAgICAgIC8vIHdlIGNhbiBub3QgZmluZCBhIGJldHRlciB0aWxlXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR29lcyB0aHJvdWdoIHRoZSBjaGFpbiBvZiBpbnRlcmltIHRpbGVzIGFuZCBkaXNjYXJkcyBzZWN0aW9ucyBvZiB0aGUgY2hhaW5cbiAgICAgKiB0aGF0IGFyZSBubyBsb25nZXIgcmVsZXZhbnQuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUucmVmcmVzaEludGVyaW1DaGFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmludGVyaW1UaWxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmludGVyaW1UaWxlO1xuICAgICAgICB2YXIgcHJldiA9IC8qKiBAdHlwZSB7VGlsZX0gKi8gKHRoaXMpO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICAvL3dlIGhhdmUgYSBsb2FkZWQgdGlsZSwgd2UgY2FuIGRpc2NhcmQgdGhlIHJlc3Qgb2YgdGhlIGxpc3RcbiAgICAgICAgICAgICAgICAvL3dlIHdvdWxkIGNvdWxkIGFib3J0IGFueSBMT0FESU5HIHRpbGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUgKGkuZS4gYW55IExPQURJTkcgdGlsZSBmb2xsb3dpbmcgdGhpcyBlbnRyeSBpbiB0aGUgY2hhaW4pXG4gICAgICAgICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgICAgICAvL2tlZXAgdGhpcyBMT0FESU5HIHRpbGUgYW55IGxvYWRlZCB0aWxlcyBsYXRlciBpbiB0aGUgY2hhaW4gYXJlXG4gICAgICAgICAgICAgICAgLy9vbGRlciB0aGFuIHRoaXMgdGlsZSwgc28gd2UncmUgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgIHByZXYgPSB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgLy90aGUgaGVhZCBvZiB0aGUgbGlzdCBpcyB0aGUgbW9zdCBjdXJyZW50IHRpbGUsIHdlIGRvbid0IG5lZWRcbiAgICAgICAgICAgICAgICAvL3RvIHN0YXJ0IGFueSBvdGhlciByZXF1ZXN0cyBmb3IgdGhpcyBjaGFpblxuICAgICAgICAgICAgICAgIHByZXYuaW50ZXJpbVRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aWxlID0gcHJldi5pbnRlcmltVGlsZTtcbiAgICAgICAgfSB3aGlsZSAodGlsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhpcyB0aWxlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGhlIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ29vcmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBTdGF0ZS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGlzIHRpbGUuIElmIHlvdSB3cml0ZSB5b3VyIG93biB7QGxpbmsgbW9kdWxlOm9sL1RpbGV+TG9hZEZ1bmN0aW9uIHRpbGVMb2FkRnVuY3Rpb259ICxcbiAgICAgKiBpdCBpcyBpbXBvcnRhbnQgdG8gc2V0IHRoZSBzdGF0ZSBjb3JyZWN0bHkgdG8ge0BsaW5rIG1vZHVsZTpvbC9UaWxlU3RhdGV+RVJST1J9XG4gICAgICogd2hlbiB0aGUgdGlsZSBjYW5ub3QgYmUgbG9hZGVkLiBPdGhlcndpc2UgdGhlIHRpbGUgY2Fubm90IGJlIHJlbW92ZWQgZnJvbVxuICAgICAqIHRoZSB0aWxlIHF1ZXVlIGFuZCB3aWxsIGJsb2NrIG90aGVyIHJlcXVlc3RzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUaWxlU3RhdGUuRVJST1IgJiYgdGhpcy5zdGF0ZSA+IHN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbGUgbG9hZCBzZXF1ZW5jZSB2aW9sYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgaW1hZ2Ugb3IgcmV0cnkgaWYgbG9hZGluZyBwcmV2aW91c2x5IGZhaWxlZC5cbiAgICAgKiBMb2FkaW5nIGlzIHRha2VuIGNhcmUgb2YgYnkgdGhlIHRpbGUgcXVldWUsIGFuZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzXG4gICAgICogb25seSBuZWVkZWQgZm9yIHByZWxvYWRpbmcgb3IgZm9yIHJlbG9hZGluZyBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbHBoYSB2YWx1ZSBmb3IgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRoZSByZW5kZXIgZnJhbWUgdGltZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRBbHBoYSA9IGZ1bmN0aW9uIChpZCwgdGltZSkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdO1xuICAgICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgICAgICBzdGFydCA9IHRpbWU7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSA9IHN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbHRhID0gdGltZSAtIHN0YXJ0ICsgMTAwMCAvIDYwOyAvLyBhdm9pZCByZW5kZXJpbmcgYXQgMFxuICAgICAgICBpZiAoZGVsdGEgPj0gdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVhc2VJbihkZWx0YSAvIHRoaXMudHJhbnNpdGlvbl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIGEgdGlsZSBpcyBpbiBhbiBhbHBoYSB0cmFuc2l0aW9uLiAgQSB0aWxlIGlzIGNvbnNpZGVyZWQgaW5cbiAgICAgKiB0cmFuc2l0aW9uIGlmIHRpbGUuZ2V0QWxwaGEoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZCBvciBoYXMgYmVlbiBjYWxsZWRcbiAgICAgKiBhbmQgcmV0dXJuZWQgMS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSBpcyBpbiB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmluVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gIT09IC0xO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFyayBhIHRyYW5zaXRpb24gYXMgY29tcGxldGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZW5kVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSAtMTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGU7XG59KEV2ZW50VGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlQmFzZVxuICovXG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBJbWFnZUJhc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlQmFzZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZUJhc2UoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50ID0gZXh0ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUGl4ZWxSYXRpby5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFBpeGVsUmF0aW8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpeGVsUmF0aW9fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5yZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBTdGF0ZS5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZUJhc2U7XG59KEV2ZW50VGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBJbWFnZUJhc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUJhc2UuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgeyBJTUFHRV9ERUNPREUgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBnZXRIZWlnaHQgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW5PbmNlLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9JbWFnZX5JbWFnZX0gZm9yIHRoZSBpbWFnZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHNyYyBhcyBhcmd1bWVudHMuIEl0IGlzIHN1cHBvc2VkIHRvIG1ha2UgaXQgc28gdGhlXG4gKiB1bmRlcmx5aW5nIGltYWdlIHtAbGluayBtb2R1bGU6b2wvSW1hZ2V+SW1hZ2UjZ2V0SW1hZ2V9IGlzIGFzc2lnbmVkIHRoZVxuICogY29udGVudCBzcGVjaWZpZWQgYnkgdGhlIHNyYy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgaXNcbiAqXG4gKiAgICAgZnVuY3Rpb24oaW1hZ2UsIHNyYykge1xuICogICAgICAgaW1hZ2UuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiAgICAgfVxuICpcbiAqIFByb3ZpZGluZyBhIGN1c3RvbSBgaW1hZ2VMb2FkRnVuY3Rpb25gIGNhbiBiZSB1c2VmdWwgdG8gbG9hZCBpbWFnZXMgd2l0aFxuICogcG9zdCByZXF1ZXN0cyBvciAtIGluIGdlbmVyYWwgLSB0aHJvdWdoIFhIUiByZXF1ZXN0cywgd2hlcmUgdGhlIHNyYyBvZiB0aGVcbiAqIGltYWdlIGVsZW1lbnQgd291bGQgYmUgc2V0IHRvIGEgZGF0YSBVUkkgd2hlbiB0aGUgY29udGVudCBpcyBsb2FkZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEltYWdlV3JhcHBlciwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbnZhciBJbWFnZVdyYXBwZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlV3JhcHBlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtMb2FkRnVuY3Rpb259IGltYWdlTG9hZEZ1bmN0aW9uIEltYWdlIGxvYWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VXcmFwcGVyKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3JjLCBjcm9zc09yaWdpbiwgaW1hZ2VMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBJbWFnZVN0YXRlLklETEUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3JjXyA9IHNyYztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICAgICAgICBfdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuSURMRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtMb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8gPSBpbWFnZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuRVJST1I7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KHRoaXMuZXh0ZW50KSAvIHRoaXMuaW1hZ2VfLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgICAqIExvYWRpbmcgaXMgdGFrZW4gY2FyZSBvZiBieSB0aGUgdGlsZSBxdWV1ZSwgYW5kIGNhbGxpbmcgdGhpcyBtZXRob2QgaXNcbiAgICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFIHx8IHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8odGhpcywgdGhpcy5zcmNfKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbGlzdGVuSW1hZ2UodGhpcy5pbWFnZV8sIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXy5iaW5kKHRoaXMpLCB0aGlzLmhhbmRsZUltYWdlRXJyb3JfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB0aGlzLmltYWdlXyA9IGltYWdlO1xuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSBnZXRIZWlnaHQodGhpcy5leHRlbnQpIC8gdGhpcy5pbWFnZV8uaGVpZ2h0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51bmxpc3Rlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVdyYXBwZXI7XG59KEltYWdlQmFzZSkpO1xuLyoqXG4gKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UgZWxlbWVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTphbnl9IGxvYWRIYW5kbGVyIExvYWQgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6YW55fSBlcnJvckhhbmRsZXIgRXJyb3IgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigpOnZvaWR9IENhbGxiYWNrIHRvIHN0b3AgbGlzdGVuaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuSW1hZ2UoaW1hZ2UsIGxvYWRIYW5kbGVyLCBlcnJvckhhbmRsZXIpIHtcbiAgICB2YXIgaW1nID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAoaW1hZ2UpO1xuICAgIGlmIChpbWcuc3JjICYmIElNQUdFX0RFQ09ERSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IGltZy5kZWNvZGUoKTtcbiAgICAgICAgdmFyIGxpc3RlbmluZ18xID0gdHJ1ZTtcbiAgICAgICAgdmFyIHVubGlzdGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGlzdGVuaW5nXzEgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmluZ18xKSB7XG4gICAgICAgICAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5pbmdfMSkge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBVbmNvbmRpdGlvbmFsbHkgY2FsbCBlcnJvckhhbmRsZXIoKSB3aGVuIHRoaXMgYnVnIGlzIGZpeGVkIHVwc3RyZWFtOlxuICAgICAgICAgICAgICAgIC8vICAgICAgICBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk4NTI3XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdFbmNvZGluZ0Vycm9yJyAmJlxuICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID09PSAnSW52YWxpZCBpbWFnZSB0eXBlLicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1bmxpc3RlbjtcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVyS2V5cyA9IFtcbiAgICAgICAgbGlzdGVuT25jZShpbWcsIEV2ZW50VHlwZS5MT0FELCBsb2FkSGFuZGxlciksXG4gICAgICAgIGxpc3Rlbk9uY2UoaW1nLCBFdmVudFR5cGUuRVJST1IsIGVycm9ySGFuZGxlciksXG4gICAgXTtcbiAgICByZXR1cm4gZnVuY3Rpb24gdW5saXN0ZW4oKSB7XG4gICAgICAgIGxpc3RlbmVyS2V5cy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIH07XG59XG5leHBvcnQgZGVmYXVsdCBJbWFnZVdyYXBwZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlVGlsZVxuICovXG5pbXBvcnQgVGlsZSBmcm9tICcuL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW5JbWFnZSB9IGZyb20gJy4vSW1hZ2UuanMnO1xudmFyIEltYWdlVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VUaWxlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBJbWFnZSBzb3VyY2UgVVJJLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvbiBUaWxlIGxvYWQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuT3B0aW9uc30gW29wdF9vcHRpb25zXSBUaWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VUaWxlKHRpbGVDb29yZCwgc3RhdGUsIHNyYywgY3Jvc3NPcmlnaW4sIHRpbGVMb2FkRnVuY3Rpb24sIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVDb29yZCwgc3RhdGUsIG9wdF9vcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbl8gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltYWdlIFVSSVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3JjXyA9IHNyYztcbiAgICAgICAgX3RoaXMua2V5ID0gc3JjO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICAgICAgICBfdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyA9IHRpbGVMb2FkRnVuY3Rpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBIVE1MIGltYWdlIGVsZW1lbnQgZm9yIHRoaXMgdGlsZSAobWF5IGJlIGEgQ2FudmFzLCBJbWFnZSwgb3IgVmlkZW8pLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgYW4gSFRNTCBpbWFnZSBlbGVtZW50IGZvciB0aGlzIHRpbGUgKG1heSBiZSBhIENhbnZhcyBvciBwcmVsb2FkZWQgSW1hZ2UpLlxuICAgICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUuc2V0SW1hZ2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB0aGlzLmltYWdlXyA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhY2tzIGxvYWRpbmcgb3IgcmVhZCBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUuaGFuZGxlSW1hZ2VFcnJvcl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRVJST1I7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBnZXRCbGFua0ltYWdlKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHN1Y2Nlc3NmdWwgaW1hZ2UgbG9hZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5oYW5kbGVJbWFnZUxvYWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW1hZ2UgPSAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovICh0aGlzLmltYWdlXyk7XG4gICAgICAgIGlmIChpbWFnZS5uYXR1cmFsV2lkdGggJiYgaW1hZ2UubmF0dXJhbEhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuSURMRTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jcm9zc09yaWdpbl8gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IHRoaXMuY3Jvc3NPcmlnaW5fO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbl8odGhpcywgdGhpcy5zcmNfKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbGlzdGVuSW1hZ2UodGhpcy5pbWFnZV8sIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXy5iaW5kKHRoaXMpLCB0aGlzLmhhbmRsZUltYWdlRXJyb3JfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUudW5saXN0ZW5JbWFnZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVubGlzdGVuXykge1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEltYWdlVGlsZTtcbn0oVGlsZSkpO1xuLyoqXG4gKiBHZXQgYSAxLXBpeGVsIGJsYW5rIGltYWdlLlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEJsYW5rIGltYWdlLlxuICovXG5mdW5jdGlvbiBnZXRCbGFua0ltYWdlKCkge1xuICAgIHZhciBjdHggPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDApJztcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgMSwgMSk7XG4gICAgcmV0dXJuIGN0eC5jYW52YXM7XG59XG5leHBvcnQgZGVmYXVsdCBJbWFnZVRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9Ucmlhbmd1bGF0aW9uXG4gKi9cbmltcG9ydCB7IGJvdW5kaW5nRXh0ZW50LCBjcmVhdGVFbXB0eSwgZXh0ZW5kQ29vcmRpbmF0ZSwgZ2V0QXJlYSwgZ2V0Qm90dG9tTGVmdCwgZ2V0Qm90dG9tUmlnaHQsIGdldFRvcExlZnQsIGdldFRvcFJpZ2h0LCBnZXRXaWR0aCwgaW50ZXJzZWN0cywgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0VHJhbnNmb3JtIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBsb2cyLCBtb2R1bG8gfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogU2luZ2xlIHRyaWFuZ2xlOyBjb25zaXN0cyBvZiAzIHNvdXJjZSBwb2ludHMgYW5kIDMgdGFyZ2V0IHBvaW50cy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRyaWFuZ2xlXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IHNvdXJjZSBTb3VyY2UuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IHRhcmdldCBUYXJnZXQuXG4gKi9cbi8qKlxuICogTWF4aW11bSBudW1iZXIgb2Ygc3ViZGl2aXNpb24gc3RlcHMgZHVyaW5nIHJhc3RlciByZXByb2plY3Rpb24gdHJpYW5ndWxhdGlvbi5cbiAqIFByZXZlbnRzIGhpZ2ggbWVtb3J5IHVzYWdlIGFuZCBsYXJnZSBudW1iZXIgb2YgcHJvajQgY2FsbHMgKGZvciBjZXJ0YWluXG4gKiB0cmFuc2Zvcm1hdGlvbnMgYW5kIGFyZWFzKS4gQXQgbW9zdCBgMiooMl50aGlzKWAgdHJpYW5nbGVzIGFyZSBjcmVhdGVkIGZvclxuICogZWFjaCB0cmlhbmd1bGF0ZWQgZXh0ZW50ICh0aWxlL2ltYWdlKS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfU1VCRElWSVNJT04gPSAxMDtcbi8qKlxuICogTWF4aW11bSBhbGxvd2VkIHNpemUgb2YgdHJpYW5nbGUgcmVsYXRpdmUgdG8gd29ybGQgd2lkdGguIFdoZW4gdHJhbnNmb3JtaW5nXG4gKiBjb3JuZXJzIG9mIHdvcmxkIGV4dGVudCBiZXR3ZWVuIGNlcnRhaW4gcHJvamVjdGlvbnMsIHRoZSByZXN1bHRpbmdcbiAqIHRyaWFuZ3VsYXRpb24gc2VlbXMgdG8gaGF2ZSB6ZXJvIGVycm9yIGFuZCBubyBzdWJkaXZpc2lvbiBpcyBwZXJmb3JtZWQuIElmXG4gKiB0aGUgdHJpYW5nbGUgd2lkdGggaXMgbW9yZSB0aGFuIHRoaXMgKHJlbGF0aXZlIHRvIHdvcmxkIHdpZHRoOyAwLTEpLFxuICogc3ViZGl2aXNvbiBpcyBmb3JjZWQgKHVwIHRvIGBNQVhfU1VCRElWSVNJT05gKS4gRGVmYXVsdCBpcyBgMC4yNWAuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgTUFYX1RSSUFOR0xFX1dJRFRIID0gMC4yNTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2xhc3MgY29udGFpbmluZyB0cmlhbmd1bGF0aW9uIG9mIHRoZSBnaXZlbiB0YXJnZXQgZXh0ZW50LlxuICogVXNlZCBmb3IgZGV0ZXJtaW5pbmcgc291cmNlIGRhdGEgYW5kIHRoZSByZXByb2plY3Rpb24gaXRzZWxmLlxuICovXG52YXIgVHJpYW5ndWxhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudCB0byB0cmlhbmd1bGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heFNvdXJjZUV4dGVudCBNYXhpbWFsIHNvdXJjZSBleHRlbnQgdGhhdCBjYW4gYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZXJyb3JUaHJlc2hvbGQgQWNjZXB0YWJsZSBlcnJvciAoaW4gc291cmNlIHVuaXRzKS5cbiAgICAgKiBAcGFyYW0gez9udW1iZXJ9IG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24gVGhlIChvcHRpb25hbCkgcmVzb2x1dGlvbiBvZiB0aGUgZGVzdGluYXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gVHJpYW5ndWxhdGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgZXJyb3JUaHJlc2hvbGQsIG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc291cmNlUHJval8gPSBzb3VyY2VQcm9qO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXRQcm9qXyA9IHRhcmdldFByb2o7XG4gICAgICAgIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59ICovXG4gICAgICAgIHZhciB0cmFuc2Zvcm1JbnZDYWNoZSA9IHt9O1xuICAgICAgICB2YXIgdHJhbnNmb3JtSW52ID0gZ2V0VHJhbnNmb3JtKHRoaXMudGFyZ2V0UHJval8sIHRoaXMuc291cmNlUHJval8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgQSBjb29yZGluYXRlLlxuICAgICAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGUuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyYW5zZm9ybUludl8gPSBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGNbMF0gKyAnLycgKyBjWzFdO1xuICAgICAgICAgICAgaWYgKCF0cmFuc2Zvcm1JbnZDYWNoZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtSW52Q2FjaGVba2V5XSA9IHRyYW5zZm9ybUludihjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1JbnZDYWNoZVtrZXldO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFNvdXJjZUV4dGVudF8gPSBtYXhTb3VyY2VFeHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfID0gZXJyb3JUaHJlc2hvbGQgKiBlcnJvclRocmVzaG9sZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxUcmlhbmdsZT59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWFuZ2xlc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSB0cmlhbmd1bGF0aW9uIGNyb3NzZXMgZWRnZSBvZiB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cmFwc1hJblNvdXJjZV8gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYW5XcmFwWEluU291cmNlXyA9XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVByb2pfLmNhbldyYXBYKCkgJiZcbiAgICAgICAgICAgICAgICAhIW1heFNvdXJjZUV4dGVudCAmJlxuICAgICAgICAgICAgICAgICEhdGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSAmJlxuICAgICAgICAgICAgICAgIGdldFdpZHRoKG1heFNvdXJjZUV4dGVudCkgPT0gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc291cmNlV29ybGRXaWR0aF8gPSB0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpXG4gICAgICAgICAgICA/IGdldFdpZHRoKHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KCkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0V29ybGRXaWR0aF8gPSB0aGlzLnRhcmdldFByb2pfLmdldEV4dGVudCgpXG4gICAgICAgICAgICA/IGdldFdpZHRoKHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KCkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvblRvcExlZnQgPSBnZXRUb3BMZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvblRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Cb3R0b21MZWZ0ID0gZ2V0Qm90dG9tTGVmdCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgc291cmNlVG9wTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcExlZnQpO1xuICAgICAgICB2YXIgc291cmNlVG9wUmlnaHQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Ub3BSaWdodCk7XG4gICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0KTtcbiAgICAgICAgdmFyIHNvdXJjZUJvdHRvbUxlZnQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Cb3R0b21MZWZ0KTtcbiAgICAgICAgLypcbiAgICAgICAgICogVGhlIG1heFN1YmRpdmlzaW9uIGNvbnRyb2xzIGhvdyBtYW55IHNwbGl0dGluZ3Mgb2YgdGhlIHRhcmdldCBhcmVhIGNhblxuICAgICAgICAgKiBiZSBkb25lLiBUaGUgaWRlYSBoZXJlIGlzIHRvIGRvIGEgbGluZWFyIG1hcHBpbmcgb2YgdGhlIHRhcmdldCBhcmVhc1xuICAgICAgICAgKiBidXQgdGhlIGFjdHVhbCBvdmVyYWwgcmVwcm9qZWN0aW9uIChjYW4gYmUpIGV4dHJlbWVseSBub24tbGluZWFyLiBUaGVcbiAgICAgICAgICogZGVmYXVsdCB2YWx1ZSBvZiBNQVhfU1VCRElWSVNJT04gd2FzIGNob3NlbiBiYXNlZCBvbiBtYXBwaW5nIGEgMjU2eDI1NlxuICAgICAgICAgKiB0aWxlIHNpemUuIEhvd2V2ZXIgdGhpcyBmdW5jdGlvbiBpcyBhbHNvIGNhbGxlZCB0byByZW1hcCBjYW52YXMgcmVuZGVyZWRcbiAgICAgICAgICogbGF5ZXJzIHdoaWNoIGNhbiBiZSBtdWNoIGxhcmdlci4gVGhpcyBjYWxjdWxhdGlvbiBpbmNyZWFzZXMgdGhlIG1heFN1YmRpdmlzaW9uXG4gICAgICAgICAqIHZhbHVlIGJ5IHRoZSByaWdodCBmYWN0b3Igc28gdGhhdCBlYWNoIDI1NngyNTYgcGl4ZWwgYXJlYSBoYXNcbiAgICAgICAgICogTUFYX1NVQkRJVklTSU9OIGRpdmlzaW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHZhciBtYXhTdWJkaXZpc2lvbiA9IE1BWF9TVUJESVZJU0lPTiArXG4gICAgICAgICAgICAob3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvblxuICAgICAgICAgICAgICAgID8gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKGxvZzIoZ2V0QXJlYSh0YXJnZXRFeHRlbnQpIC9cbiAgICAgICAgICAgICAgICAgICAgKG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24gKlxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiAqXG4gICAgICAgICAgICAgICAgICAgICAgICAyNTYgKlxuICAgICAgICAgICAgICAgICAgICAgICAgMjU2KSkpKVxuICAgICAgICAgICAgICAgIDogMCk7XG4gICAgICAgIHRoaXMuYWRkUXVhZF8oZGVzdGluYXRpb25Ub3BMZWZ0LCBkZXN0aW5hdGlvblRvcFJpZ2h0LCBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0LCBkZXN0aW5hdGlvbkJvdHRvbUxlZnQsIHNvdXJjZVRvcExlZnQsIHNvdXJjZVRvcFJpZ2h0LCBzb3VyY2VCb3R0b21SaWdodCwgc291cmNlQm90dG9tTGVmdCwgbWF4U3ViZGl2aXNpb24pO1xuICAgICAgICBpZiAodGhpcy53cmFwc1hJblNvdXJjZV8pIHtcbiAgICAgICAgICAgIHZhciBsZWZ0Qm91bmRfMSA9IEluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgICAgICBsZWZ0Qm91bmRfMSA9IE1hdGgubWluKGxlZnRCb3VuZF8xLCB0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzBdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU2hpZnQgdHJpYW5nbGVzIHRvIGJlIGFzIGNsb3NlIHRvIGBsZWZ0Qm91bmRgIGFzIHBvc3NpYmxlXG4gICAgICAgICAgICAvLyAoaWYgdGhlIGRpc3RhbmNlIGlzIG1vcmUgdGhhbiBgd29ybGRXaWR0aCAvIDJgIGl0IGNhbiBiZSBjbG9zZXIuXG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5tYXgodHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsyXVswXSkgLVxuICAgICAgICAgICAgICAgICAgICBsZWZ0Qm91bmRfMSA+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdUcmlhbmdsZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVswXVsxXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMV1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVsyXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzFdXSxcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzBdWzBdIC0gbGVmdEJvdW5kXzEgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVbMF1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMV1bMF0gLSBsZWZ0Qm91bmRfMSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZVsxXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVsyXVswXSAtIGxlZnRCb3VuZF8xID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzJdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gUmFyZWx5IChpZiB0aGUgZXh0ZW50IGNvbnRhaW5zIGJvdGggdGhlIGRhdGVsaW5lIGFuZCBwcmltZSBtZXJpZGlhbilcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNoaWZ0IGNhbiBpbiB0dXJuIGJyZWFrIHNvbWUgdHJpYW5nbGVzLlxuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlY3QgdGhpcyBoZXJlIGFuZCBkb24ndCBzaGlmdCBpbiBzdWNoIGNhc2VzLlxuICAgICAgICAgICAgICAgICAgICB2YXIgbWluWCA9IE1hdGgubWluKG5ld1RyaWFuZ2xlWzBdWzBdLCBuZXdUcmlhbmdsZVsxXVswXSwgbmV3VHJpYW5nbGVbMl1bMF0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4WCA9IE1hdGgubWF4KG5ld1RyaWFuZ2xlWzBdWzBdLCBuZXdUcmlhbmdsZVsxXVswXSwgbmV3VHJpYW5nbGVbMl1bMF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF4WCAtIG1pblggPCB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUuc291cmNlID0gbmV3VHJpYW5nbGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIHRyYW5zZm9ybUludkNhY2hlID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdHJpYW5nbGUgdG8gdGhlIHRyaWFuZ3VsYXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGEgVGhlIHRhcmdldCBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGIgVGhlIHRhcmdldCBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgVGhlIHRhcmdldCBjIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFTcmMgVGhlIHNvdXJjZSBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNTcmMgVGhlIHNvdXJjZSBjIGNvb3JkaW5hdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUcmlhbmd1bGF0aW9uLnByb3RvdHlwZS5hZGRUcmlhbmdsZV8gPSBmdW5jdGlvbiAoYSwgYiwgYywgYVNyYywgYlNyYywgY1NyYykge1xuICAgICAgICB0aGlzLnRyaWFuZ2xlc18ucHVzaCh7XG4gICAgICAgICAgICBzb3VyY2U6IFthU3JjLCBiU3JjLCBjU3JjXSxcbiAgICAgICAgICAgIHRhcmdldDogW2EsIGIsIGNdLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgcXVhZCAocG9pbnRzIGluIGNsb2NrLXdpc2Ugb3JkZXIpIHRvIHRoZSB0cmlhbmd1bGF0aW9uXG4gICAgICogKGFuZCByZXByb2plY3RzIHRoZSB2ZXJ0aWNlcykgaWYgdmFsaWQuXG4gICAgICogUGVyZm9ybXMgcXVhZCBzdWJkaXZpc2lvbiBpZiBuZWVkZWQgdG8gaW5jcmVhc2UgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGEgVGhlIHRhcmdldCBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGIgVGhlIHRhcmdldCBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgVGhlIHRhcmdldCBjIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGQgVGhlIHRhcmdldCBkIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFTcmMgVGhlIHNvdXJjZSBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNTcmMgVGhlIHNvdXJjZSBjIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRTcmMgVGhlIHNvdXJjZSBkIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFN1YmRpdmlzaW9uIE1heGltYWwgYWxsb3dlZCBzdWJkaXZpc2lvbiBvZiB0aGUgcXVhZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFF1YWRfID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGFTcmMsIGJTcmMsIGNTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uKSB7XG4gICAgICAgIHZhciBzb3VyY2VRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2FTcmMsIGJTcmMsIGNTcmMsIGRTcmNdKTtcbiAgICAgICAgdmFyIHNvdXJjZUNvdmVyYWdlWCA9IHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgICAgICAgID8gZ2V0V2lkdGgoc291cmNlUXVhZEV4dGVudCkgLyB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBzb3VyY2VXb3JsZFdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnNvdXJjZVdvcmxkV2lkdGhfKTtcbiAgICAgICAgLy8gd2hlbiB0aGUgcXVhZCBpcyB3cmFwcGVkIGluIHRoZSBzb3VyY2UgcHJvamVjdGlvblxuICAgICAgICAvLyBpdCBjb3ZlcnMgbW9zdCBvZiB0aGUgcHJvamVjdGlvbiBleHRlbnQsIGJ1dCBub3QgZnVsbHlcbiAgICAgICAgdmFyIHdyYXBzWCA9IHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgc291cmNlQ292ZXJhZ2VYID4gMC41ICYmXG4gICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPCAxO1xuICAgICAgICB2YXIgbmVlZHNTdWJkaXZpc2lvbiA9IGZhbHNlO1xuICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXRQcm9qXy5pc0dsb2JhbCgpICYmIHRoaXMudGFyZ2V0V29ybGRXaWR0aF8pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0UXVhZEV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KFthLCBiLCBjLCBkXSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldENvdmVyYWdlWCA9IGdldFdpZHRoKHRhcmdldFF1YWRFeHRlbnQpIC8gdGhpcy50YXJnZXRXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID1cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8IG5lZWRzU3ViZGl2aXNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXdyYXBzWCAmJiB0aGlzLnNvdXJjZVByb2pfLmlzR2xvYmFsKCkgJiYgc291cmNlQ292ZXJhZ2VYKSB7XG4gICAgICAgICAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA+IE1BWF9UUklBTkdMRV9XSURUSCB8fCBuZWVkc1N1YmRpdmlzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbmVlZHNTdWJkaXZpc2lvbiAmJiB0aGlzLm1heFNvdXJjZUV4dGVudF8pIHtcbiAgICAgICAgICAgIGlmIChpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzBdKSAmJlxuICAgICAgICAgICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMV0pICYmXG4gICAgICAgICAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsyXSkgJiZcbiAgICAgICAgICAgICAgICBpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzNdKSkge1xuICAgICAgICAgICAgICAgIGlmICghaW50ZXJzZWN0cyhzb3VyY2VRdWFkRXh0ZW50LCB0aGlzLm1heFNvdXJjZUV4dGVudF8pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdob2xlIHF1YWQgb3V0c2lkZSBzb3VyY2UgcHJvamVjdGlvbiBleHRlbnQgLT4gaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzTm90RmluaXRlID0gMDtcbiAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgICAgICBpZiAoIWlzRmluaXRlKGFTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGFTcmNbMV0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGJTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGJTcmNbMV0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGNTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGNTcmNbMV0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGRTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGRTcmNbMV0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEl0IG1pZ2h0IGJlIHRoZSBjYXNlIHRoYXQgb25seSAxIG9mIHRoZSBwb2ludHMgaXMgaW5maW5pdGUuIEluIHRoaXMgY2FzZVxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBjYW4gZHJhdyBhIHNpbmdsZSB0cmlhbmdsZSB3aXRoIHRoZSBvdGhlciB0aHJlZSBwb2ludHNcbiAgICAgICAgICAgICAgICAgICAgaXNOb3RGaW5pdGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShhU3JjWzBdKSB8fCAhaXNGaW5pdGUoYVNyY1sxXSkgPyA4IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoYlNyY1swXSkgfHwgIWlzRmluaXRlKGJTcmNbMV0pID8gNCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGNTcmNbMF0pIHx8ICFpc0Zpbml0ZShjU3JjWzFdKSA/IDIgOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShkU3JjWzBdKSB8fCAhaXNGaW5pdGUoZFNyY1sxXSkgPyAxIDogMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05vdEZpbml0ZSAhPSAxICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSAhPSAyICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSAhPSA0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSAhPSA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IFsoYVswXSArIGNbMF0pIC8gMiwgKGFbMV0gKyBjWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oY2VudGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZHggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKHdyYXBzWCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VudGVyU3JjRXN0aW1YID0gKG1vZHVsbyhhU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2R1bG8oY1NyY1swXSwgc291cmNlV29ybGRXaWR0aCkpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgIDI7XG4gICAgICAgICAgICAgICAgICAgIGR4ID0gY2VudGVyU3JjRXN0aW1YIC0gbW9kdWxvKGNlbnRlclNyY1swXSwgc291cmNlV29ybGRXaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkeCA9IChhU3JjWzBdICsgY1NyY1swXSkgLyAyIC0gY2VudGVyU3JjWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZHkgPSAoYVNyY1sxXSArIGNTcmNbMV0pIC8gMiAtIGNlbnRlclNyY1sxXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyU3JjRXJyb3JTcXVhcmVkID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgICAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9IGNlbnRlclNyY0Vycm9yU3F1YXJlZCA+IHRoaXMuZXJyb3JUaHJlc2hvbGRTcXVhcmVkXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGFbMF0gLSBjWzBdKSA8PSBNYXRoLmFicyhhWzFdIC0gY1sxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQgaG9yaXpvbnRhbGx5ICh0b3AgJiBib3R0b20pXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYyA9IFsoYlswXSArIGNbMF0pIC8gMiwgKGJbMV0gKyBjWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmNTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oYmMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGEgPSBbKGRbMF0gKyBhWzBdKSAvIDIsIChkWzFdICsgYVsxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRRdWFkXyhhLCBiLCBiYywgZGEsIGFTcmMsIGJTcmMsIGJjU3JjLCBkYVNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRRdWFkXyhkYSwgYmMsIGMsIGQsIGRhU3JjLCBiY1NyYywgY1NyYywgZFNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNwbGl0IHZlcnRpY2FsbHkgKGxlZnQgJiByaWdodClcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFiID0gWyhhWzBdICsgYlswXSkgLyAyLCAoYVsxXSArIGJbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhYlNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhhYik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZCA9IFsoY1swXSArIGRbMF0pIC8gMiwgKGNbMV0gKyBkWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2RTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oY2QpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGEsIGFiLCBjZCwgZCwgYVNyYywgYWJTcmMsIGNkU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGFiLCBiLCBjLCBjZCwgYWJTcmMsIGJTcmMsIGNTcmMsIGNkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdyYXBzWCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhbldyYXBYSW5Tb3VyY2VfKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53cmFwc1hJblNvdXJjZV8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4YWN0bHkgemVybyBvciBvbmUgb2YgKlNyYyBpcyBub3QgZmluaXRlXG4gICAgICAgIC8vIFRoZSB0cmlhbmdsZXMgbXVzdCBoYXZlIHRoZSBkaWFnb25hbCBsaW5lIGFzIHRoZSBmaXJzdCBzaWRlXG4gICAgICAgIC8vIFRoaXMgaXMgdG8gYWxsb3cgZWFzeSBjb2RlIGluIHJlcHJvai5zIHRvIG1ha2UgaXQgc3RyYWlnaHQgZm9yIGJyb2tlblxuICAgICAgICAvLyBicm93c2VycyB0aGF0IGNhbid0IGhhbmRsZSBkaWFnb25hbCBjbGlwcGluZ1xuICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhiKSA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhhLCBjLCBkLCBhU3JjLCBjU3JjLCBkU3JjKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhlKSA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhhLCBjLCBiLCBhU3JjLCBjU3JjLCBiU3JjKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOb3RGaW5pdGUpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0aGUgb3RoZXIgdHdvIHRyaWFuZ2xlc1xuICAgICAgICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4ZCkgPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGIsIGQsIGEsIGJTcmMsIGRTcmMsIGFTcmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4NykgPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGIsIGQsIGMsIGJTcmMsIGRTcmMsIGNTcmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIGV4dGVudCBvZiB0aGUgJ3NvdXJjZScgY29vcmRpbmF0ZXMgZnJvbSBhbGwgdGhlIHRyaWFuZ2xlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IENhbGN1bGF0ZWQgZXh0ZW50LlxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmNhbGN1bGF0ZVNvdXJjZUV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICB2YXIgc3JjID0gdHJpYW5nbGUuc291cmNlO1xuICAgICAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1swXSk7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzFdKTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMl0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PFRyaWFuZ2xlPn0gQXJyYXkgb2YgdGhlIGNhbGN1bGF0ZWQgdHJpYW5nbGVzLlxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmdldFRyaWFuZ2xlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpYW5nbGVzXztcbiAgICB9O1xuICAgIHJldHVybiBUcmlhbmd1bGF0aW9uO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRyaWFuZ3VsYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ucmlhbmd1bGF0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBXTVMgdmVyc2lvbi5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9XTVNfVkVSU0lPTiA9ICcxLjMuMCc7XG4vKipcbiAqIENvbnRleHQgb3B0aW9ucyB0byBkaXNhYmxlIGltYWdlIHNtb290aGluZy5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmV4cG9ydCB2YXIgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEID0ge1xuICAgIGltYWdlU21vb3RoaW5nRW5hYmxlZDogZmFsc2UsXG4gICAgbXNJbWFnZVNtb290aGluZ0VuYWJsZWQ6IGZhbHNlLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qXG4gKi9cbmltcG9ydCB7IElNQUdFX1NNT09USElOR19ESVNBQkxFRCB9IGZyb20gJy4vc291cmNlL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBjb250YWluc0Nvb3JkaW5hdGUsIGNyZWF0ZUVtcHR5LCBleHRlbmQsIGZvckVhY2hDb3JuZXIsIGdldENlbnRlciwgZ2V0SGVpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRXaWR0aCwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBnZXRQb2ludFJlc29sdXRpb24sIHRyYW5zZm9ybSB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBzb2x2ZUxpbmVhclN5c3RlbSB9IGZyb20gJy4vbWF0aC5qcyc7XG52YXIgYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xuLyoqXG4gKiBUaGlzIGRyYXdzIGEgc21hbGwgdHJpYW5nbGUgaW50byBhIGNhbnZhcyBieSBzZXR0aW5nIHRoZSB0cmlhbmdsZSBhcyB0aGUgY2xpcCByZWdpb25cbiAqIGFuZCB0aGVuIGRyYXdpbmcgYSAodG9vIGxhcmdlKSByZWN0YW5nbGVcbiAqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4IFRoZSBjb250ZXh0IGluIHdoaWNoIHRvIGRyYXcgdGhlIHRyaWFuZ2xlXG4gKiBAcGFyYW0ge251bWJlcn0gdTEgVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHBvaW50LiBUaGUgZmlyc3QgcG9pbnQgaXMgMCwwLlxuICogQHBhcmFtIHtudW1iZXJ9IHYxIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHNlY29uZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB1MiBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2MiBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gZHJhd1Rlc3RUcmlhbmdsZShjdHgsIHUxLCB2MSwgdTIsIHYyKSB7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oMCwgMCk7XG4gICAgY3R4LmxpbmVUbyh1MSwgdjEpO1xuICAgIGN0eC5saW5lVG8odTIsIHYyKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguY2xpcCgpO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBNYXRoLm1heCh1MSwgdTIpICsgMSwgTWF0aC5tYXgodjEsIHYyKSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbn1cbi8qKlxuICogR2l2ZW4gdGhlIGRhdGEgZnJvbSBnZXRJbWFnZURhdGEsIHNlZSBpZiB0aGUgcmlnaHQgdmFsdWVzIGFwcGVhciBhdCB0aGUgcHJvdmlkZWQgb2Zmc2V0LlxuICogUmV0dXJucyB0cnVlIGlmIGVpdGhlciB0aGUgY29sb3Igb3IgdHJhbnNwYXJlbmN5IGlzIG9mZlxuICpcbiAqIEBwYXJhbSB7VWludDhDbGFtcGVkQXJyYXl9IGRhdGEgVGhlIGRhdGEgcmV0dXJuZWQgZnJvbSBnZXRJbWFnZURhdGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgVGhlIHBpeGVsIG9mZnNldCBmcm9tIHRoZSBzdGFydCBvZiBkYXRhLlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgZGlhZ29uYWwgcmVuZGVyaW5nIGlzIGJyb2tlblxuICovXG5mdW5jdGlvbiB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCBvZmZzZXQpIHtcbiAgICAvLyB0aGUgdmFsdWVzIG91Z2h0IHRvIGJlIGNsb3NlIHRvIHRoZSByZ2JhKDIxMCwgMCwgMCwgMC43NSlcbiAgICByZXR1cm4gKE1hdGguYWJzKGRhdGFbb2Zmc2V0ICogNF0gLSAyMTApID4gMiB8fFxuICAgICAgICBNYXRoLmFicyhkYXRhW29mZnNldCAqIDQgKyAzXSAtIDAuNzUgKiAyNTUpID4gMik7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBjb25maWd1cmF0aW9uIGNhbiByZW5kZXIgdHJpYW5ndWxhciBjbGlwIHJlZ2lvbnMgY29ycmVjdGx5LlxuICogVGhpcyB2YWx1ZSBpcyBjYWNoZWQgc28gdGhlIGZ1bmN0aW9uIGlzIG9ubHkgZXhwZW5zaXZlIHRoZSBmaXJzdCB0aW1lIGNhbGxlZC5cbiAqIEZpcmVmb3ggb24gV2luZG93cyAoYXMgb2Ygbm93KSBkb2VzIG5vdCBpZiBIV0EgaXMgZW5hYmxlZC4gU2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE2MDY5NzZcbiAqIElFIGFsc28gZG9lc24ndC4gQ2hyb21lIHdvcmtzLCBhbmQgZXZlcnl0aGluZyBzZWVtcyB0byB3b3JrIG9uIE9TWCBhbmQgQW5kcm9pZC4gVGhpcyBmdW5jdGlvbiBjYWNoZXMgdGhlXG4gKiByZXN1bHQuIEkgc3VwcG9zZSB0aGF0IGl0IGlzIGNvbmNlaXZhYmx5IHBvc3NpYmxlIHRoYXQgYSBicm93c2VyIG1pZ2h0IGZsaXAgbW9kZXMgd2hpbGUgdGhlIGFwcCBpc1xuICogcnVubmluZywgYnV0IGxldHMgaG9wZSBub3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgRGlhZ29uYWwgUmVuZGVyaW5nIGlzIGJyb2tlbi5cbiAqL1xuZnVuY3Rpb24gaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZygpIHtcbiAgICBpZiAoYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyMTAsIDAsIDAsIDAuNzUpJztcbiAgICAgICAgZHJhd1Rlc3RUcmlhbmdsZShjdHgsIDQsIDUsIDQsIDApO1xuICAgICAgICBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgNCwgNSwgMCwgNSk7XG4gICAgICAgIHZhciBkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCAzLCAzKS5kYXRhO1xuICAgICAgICBicm9rZW5EaWFnb25hbFJlbmRlcmluZ18gPVxuICAgICAgICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgMCkgfHxcbiAgICAgICAgICAgICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCA0KSB8fFxuICAgICAgICAgICAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDgpO1xuICAgIH1cbiAgICByZXR1cm4gYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pIHtcbiAgICB2YXIgc291cmNlQ2VudGVyID0gdHJhbnNmb3JtKHRhcmdldENlbnRlciwgdGFyZ2V0UHJvaiwgc291cmNlUHJvaik7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBpZGVhbCByZXNvbHV0aW9uIG9mIHRoZSBzb3VyY2UgZGF0YVxuICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gZ2V0UG9pbnRSZXNvbHV0aW9uKHRhcmdldFByb2osIHRhcmdldFJlc29sdXRpb24sIHRhcmdldENlbnRlcik7XG4gICAgdmFyIHRhcmdldE1ldGVyc1BlclVuaXQgPSB0YXJnZXRQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICBpZiAodGFyZ2V0TWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24gKj0gdGFyZ2V0TWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgdmFyIHNvdXJjZU1ldGVyc1BlclVuaXQgPSBzb3VyY2VQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICBpZiAoc291cmNlTWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24gLz0gc291cmNlTWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgLy8gQmFzZWQgb24gdGhlIHByb2plY3Rpb24gcHJvcGVydGllcywgdGhlIHBvaW50IHJlc29sdXRpb24gYXQgdGhlIHNwZWNpZmllZFxuICAgIC8vIGNvb3JkaW5hdGVzIG1heSBiZSBzbGlnaHRseSBkaWZmZXJlbnQuIFdlIG5lZWQgdG8gcmV2ZXJzZS1jb21wZW5zYXRlIHRoaXNcbiAgICAvLyBpbiBvcmRlciB0byBhY2hpZXZlIG9wdGltYWwgcmVzdWx0cy5cbiAgICB2YXIgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICBpZiAoIXNvdXJjZUV4dGVudCB8fCBjb250YWluc0Nvb3JkaW5hdGUoc291cmNlRXh0ZW50LCBzb3VyY2VDZW50ZXIpKSB7XG4gICAgICAgIHZhciBjb21wZW5zYXRpb25GYWN0b3IgPSBnZXRQb2ludFJlc29sdXRpb24oc291cmNlUHJvaiwgc291cmNlUmVzb2x1dGlvbiwgc291cmNlQ2VudGVyKSAvXG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uO1xuICAgICAgICBpZiAoaXNGaW5pdGUoY29tcGVuc2F0aW9uRmFjdG9yKSAmJiBjb21wZW5zYXRpb25GYWN0b3IgPiAwKSB7XG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uIC89IGNvbXBlbnNhdGlvbkZhY3RvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBpZGVhbCByZXNvbHV0aW9uIHRvIHVzZSBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gYWNoaWV2ZVxuICogcGl4ZWwgbWFwcGluZyBhcyBjbG9zZSBhcyBwb3NzaWJsZSB0byAxOjEgZHVyaW5nIHJlcHJvamVjdGlvbi5cbiAqIFRoZSByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWQgcmVnYXJkbGVzcyBvZiB3aGF0IHJlc29sdXRpb25zXG4gKiBhcmUgYWN0dWFsbHkgYXZhaWxhYmxlIGluIHRoZSBkYXRhc2V0IChUaWxlR3JpZCwgSW1hZ2UsIC4uLikuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50XG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGJlc3QgcmVzb2x1dGlvbiB0byB1c2UuIENhbiBiZSArLUluZmluaXR5LCBOYU4gb3IgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0RXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgdmFyIHRhcmdldENlbnRlciA9IGdldENlbnRlcih0YXJnZXRFeHRlbnQpO1xuICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pO1xuICAgIGlmICghaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgfHwgc291cmNlUmVzb2x1dGlvbiA8PSAwKSB7XG4gICAgICAgIGZvckVhY2hDb3JuZXIodGFyZ2V0RXh0ZW50LCBmdW5jdGlvbiAoY29ybmVyKSB7XG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBjb3JuZXIsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pICYmIHNvdXJjZVJlc29sdXRpb24gPiAwO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZVJlc29sdXRpb247XG59XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEltYWdlRXh0ZW50XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAqL1xuLyoqXG4gKiBSZW5kZXJzIHRoZSBzb3VyY2UgZGF0YSBpbnRvIG5ldyBjYW52YXMgYmFzZWQgb24gdGhlIHRyaWFuZ3VsYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge251bWJlcn0gc291cmNlUmVzb2x1dGlvbiBTb3VyY2UgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBzb3VyY2VFeHRlbnQgRXh0ZW50IG9mIHRoZSBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9IHRyaWFuZ3VsYXRpb24gQ2FsY3VsYXRlZCB0cmlhbmd1bGF0aW9uLlxuICogQHBhcmFtIHtBcnJheTxJbWFnZUV4dGVudD59IHNvdXJjZXMgQXJyYXkgb2Ygc291cmNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBndXR0ZXIgR3V0dGVyIG9mIHRoZSBzb3VyY2VzLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JlbmRlckVkZ2VzXSBSZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzLlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRfY29udGV4dE9wdGlvbnNdIFByb3BlcnRpZXMgdG8gc2V0IG9uIHRoZSBjYW52YXMgY29udGV4dC5cbiAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMgd2l0aCByZXByb2plY3RlZCBkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKHdpZHRoLCBoZWlnaHQsIHBpeGVsUmF0aW8sIHNvdXJjZVJlc29sdXRpb24sIHNvdXJjZUV4dGVudCwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0RXh0ZW50LCB0cmlhbmd1bGF0aW9uLCBzb3VyY2VzLCBndXR0ZXIsIG9wdF9yZW5kZXJFZGdlcywgb3B0X2NvbnRleHRPcHRpb25zKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoTWF0aC5yb3VuZChwaXhlbFJhdGlvICogd2lkdGgpLCBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBoZWlnaHQpKTtcbiAgICBhc3NpZ24oY29udGV4dCwgb3B0X2NvbnRleHRPcHRpb25zKTtcbiAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY2FudmFzO1xuICAgIH1cbiAgICBjb250ZXh0LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuICAgIGZ1bmN0aW9uIHBpeGVsUm91bmQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiBwaXhlbFJhdGlvKSAvIHBpeGVsUmF0aW87XG4gICAgfVxuICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2xpZ2h0ZXInO1xuICAgIHZhciBzb3VyY2VEYXRhRXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNyYywgaSwgYXJyKSB7XG4gICAgICAgIGV4dGVuZChzb3VyY2VEYXRhRXh0ZW50LCBzcmMuZXh0ZW50KTtcbiAgICB9KTtcbiAgICB2YXIgY2FudmFzV2lkdGhJblVuaXRzID0gZ2V0V2lkdGgoc291cmNlRGF0YUV4dGVudCk7XG4gICAgdmFyIGNhbnZhc0hlaWdodEluVW5pdHMgPSBnZXRIZWlnaHQoc291cmNlRGF0YUV4dGVudCk7XG4gICAgdmFyIHN0aXRjaENvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoTWF0aC5yb3VuZCgocGl4ZWxSYXRpbyAqIGNhbnZhc1dpZHRoSW5Vbml0cykgLyBzb3VyY2VSZXNvbHV0aW9uKSwgTWF0aC5yb3VuZCgocGl4ZWxSYXRpbyAqIGNhbnZhc0hlaWdodEluVW5pdHMpIC8gc291cmNlUmVzb2x1dGlvbikpO1xuICAgIGFzc2lnbihzdGl0Y2hDb250ZXh0LCBvcHRfY29udGV4dE9wdGlvbnMpO1xuICAgIHZhciBzdGl0Y2hTY2FsZSA9IHBpeGVsUmF0aW8gLyBzb3VyY2VSZXNvbHV0aW9uO1xuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc3JjLCBpLCBhcnIpIHtcbiAgICAgICAgdmFyIHhQb3MgPSBzcmMuZXh0ZW50WzBdIC0gc291cmNlRGF0YUV4dGVudFswXTtcbiAgICAgICAgdmFyIHlQb3MgPSAtKHNyYy5leHRlbnRbM10gLSBzb3VyY2VEYXRhRXh0ZW50WzNdKTtcbiAgICAgICAgdmFyIHNyY1dpZHRoID0gZ2V0V2lkdGgoc3JjLmV4dGVudCk7XG4gICAgICAgIHZhciBzcmNIZWlnaHQgPSBnZXRIZWlnaHQoc3JjLmV4dGVudCk7XG4gICAgICAgIC8vIFRoaXMgdGVzdCBzaG91bGQgbmV2ZXIgZmFpbCAtLSBidXQgaXQgZG9lcy4gTmVlZCB0byBmaW5kIGEgZml4IHRoZSB1cHN0cmVhbSBjb25kaXRpb25cbiAgICAgICAgaWYgKHNyYy5pbWFnZS53aWR0aCA+IDAgJiYgc3JjLmltYWdlLmhlaWdodCA+IDApIHtcbiAgICAgICAgICAgIHN0aXRjaENvbnRleHQuZHJhd0ltYWdlKHNyYy5pbWFnZSwgZ3V0dGVyLCBndXR0ZXIsIHNyYy5pbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIHNyYy5pbWFnZS5oZWlnaHQgLSAyICogZ3V0dGVyLCB4UG9zICogc3RpdGNoU2NhbGUsIHlQb3MgKiBzdGl0Y2hTY2FsZSwgc3JjV2lkdGggKiBzdGl0Y2hTY2FsZSwgc3JjSGVpZ2h0ICogc3RpdGNoU2NhbGUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIHRhcmdldFRvcExlZnQgPSBnZXRUb3BMZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgdHJpYW5ndWxhdGlvbi5nZXRUcmlhbmdsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgIC8qIENhbGN1bGF0ZSBhZmZpbmUgdHJhbnNmb3JtIChzcmMgLT4gZHN0KVxuICAgICAgICAgKiBSZXN1bHRpbmcgbWF0cml4IGNhbiBiZSB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZGluYXRlXG4gICAgICAgICAqIGZyb20gYHNvdXJjZVByb2plY3Rpb25gIHRvIGRlc3RpbmF0aW9uIHBpeGVscy5cbiAgICAgICAgICpcbiAgICAgICAgICogVG8gb3B0aW1pemUgbnVtYmVyIG9mIGNvbnRleHQgY2FsbHMgYW5kIGluY3JlYXNlIG51bWVyaWNhbCBzdGFiaWxpdHksXG4gICAgICAgICAqIHdlIGFsc28gZG8gdGhlIGZvbGxvd2luZyBvcGVyYXRpb25zOlxuICAgICAgICAgKiB0cmFucygtdG9wTGVmdEV4dGVudENvcm5lciksIHNjYWxlKDEgLyB0YXJnZXRSZXNvbHV0aW9uKSwgc2NhbGUoMSwgLTEpXG4gICAgICAgICAqIGhlcmUgYmVmb3JlIHNvbHZpbmcgdGhlIGxpbmVhciBzeXN0ZW0gc28gW3VpLCB2aV0gYXJlIHBpeGVsIGNvb3JkaW5hdGVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBTcmMgcG9pbnRzOiB4aSwgeWlcbiAgICAgICAgICogRHN0IHBvaW50czogdWksIHZpXG4gICAgICAgICAqIEFmZmluZSBjb2VmZmljaWVudHM6IGFpalxuICAgICAgICAgKlxuICAgICAgICAgKiB8IHgwIHkwIDEgIDAgIDAgMCB8ICAgfGEwMHwgICB8dTB8XG4gICAgICAgICAqIHwgeDEgeTEgMSAgMCAgMCAwIHwgICB8YTAxfCAgIHx1MXxcbiAgICAgICAgICogfCB4MiB5MiAxICAwICAwIDAgfCB4IHxhMDJ8ID0gfHUyfFxuICAgICAgICAgKiB8ICAwICAwIDAgeDAgeTAgMSB8ICAgfGExMHwgICB8djB8XG4gICAgICAgICAqIHwgIDAgIDAgMCB4MSB5MSAxIHwgICB8YTExfCAgIHx2MXxcbiAgICAgICAgICogfCAgMCAgMCAwIHgyIHkyIDEgfCAgIHxhMTJ8ICAgfHYyfFxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHNvdXJjZSA9IHRyaWFuZ2xlLnNvdXJjZTtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgICAgdmFyIHgwID0gc291cmNlWzBdWzBdLCB5MCA9IHNvdXJjZVswXVsxXTtcbiAgICAgICAgdmFyIHgxID0gc291cmNlWzFdWzBdLCB5MSA9IHNvdXJjZVsxXVsxXTtcbiAgICAgICAgdmFyIHgyID0gc291cmNlWzJdWzBdLCB5MiA9IHNvdXJjZVsyXVsxXTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgZXZlcnl0aGluZyBpcyBvbiBwaXhlbCBib3VuZGFyaWVzXG4gICAgICAgIHZhciB1MCA9IHBpeGVsUm91bmQoKHRhcmdldFswXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2MCA9IHBpeGVsUm91bmQoLSh0YXJnZXRbMF1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdTEgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdjEgPSBwaXhlbFJvdW5kKC0odGFyZ2V0WzFdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHUyID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzJdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHYyID0gcGl4ZWxSb3VuZCgtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIC8vIFNoaWZ0IGFsbCB0aGUgc291cmNlIHBvaW50cyB0byBpbXByb3ZlIG51bWVyaWNhbCBzdGFiaWxpdHlcbiAgICAgICAgLy8gb2YgYWxsIHRoZSBzdWJzZXF1ZW50IGNhbGN1bGF0aW9ucy4gVGhlIFt4MCwgeTBdIGlzIHVzZWQgaGVyZS5cbiAgICAgICAgLy8gVGhpcyBpcyBhbHNvIHVzZWQgdG8gc2ltcGxpZnkgdGhlIGxpbmVhciBzeXN0ZW0uXG4gICAgICAgIHZhciBzb3VyY2VOdW1lcmljYWxTaGlmdFggPSB4MDtcbiAgICAgICAgdmFyIHNvdXJjZU51bWVyaWNhbFNoaWZ0WSA9IHkwO1xuICAgICAgICB4MCA9IDA7XG4gICAgICAgIHkwID0gMDtcbiAgICAgICAgeDEgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgICAgICB5MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG4gICAgICAgIHgyIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WDtcbiAgICAgICAgeTIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRZO1xuICAgICAgICB2YXIgYXVnbWVudGVkTWF0cml4ID0gW1xuICAgICAgICAgICAgW3gxLCB5MSwgMCwgMCwgdTEgLSB1MF0sXG4gICAgICAgICAgICBbeDIsIHkyLCAwLCAwLCB1MiAtIHUwXSxcbiAgICAgICAgICAgIFswLCAwLCB4MSwgeTEsIHYxIC0gdjBdLFxuICAgICAgICAgICAgWzAsIDAsIHgyLCB5MiwgdjIgLSB2MF0sXG4gICAgICAgIF07XG4gICAgICAgIHZhciBhZmZpbmVDb2VmcyA9IHNvbHZlTGluZWFyU3lzdGVtKGF1Z21lbnRlZE1hdHJpeCk7XG4gICAgICAgIGlmICghYWZmaW5lQ29lZnMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgaWYgKGlzQnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoKSB8fFxuICAgICAgICAgICAgb3B0X2NvbnRleHRPcHRpb25zID09PSBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGFsbCBsaW5lcyBhcmUgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbFxuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8odTEsIHYxKTtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGRpYWdvbmFsIGxpbmUuIERvIGl0IGluIDQgc3RlcHNcbiAgICAgICAgICAgIHZhciBzdGVwcyA9IDQ7XG4gICAgICAgICAgICB2YXIgdWQgPSB1MCAtIHUxO1xuICAgICAgICAgICAgdmFyIHZkID0gdjAgLSB2MTtcbiAgICAgICAgICAgIGZvciAodmFyIHN0ZXAgPSAwOyBzdGVwIDwgc3RlcHM7IHN0ZXArKykge1xuICAgICAgICAgICAgICAgIC8vIEdvIGhvcml6b250YWxseVxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUxICsgcGl4ZWxSb3VuZCgoKHN0ZXAgKyAxKSAqIHVkKSAvIHN0ZXBzKSwgdjEgKyBwaXhlbFJvdW5kKChzdGVwICogdmQpIC8gKHN0ZXBzIC0gMSkpKTtcbiAgICAgICAgICAgICAgICAvLyBHbyB2ZXJ0aWNhbGx5XG4gICAgICAgICAgICAgICAgaWYgKHN0ZXAgIT0gc3RlcHMgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUxICsgcGl4ZWxSb3VuZCgoKHN0ZXAgKyAxKSAqIHVkKSAvIHN0ZXBzKSwgdjEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdmQpIC8gKHN0ZXBzIC0gMSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSBhcmUgYWxtb3N0IGF0IHUwciwgdjByXG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MiwgdjIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8odTEsIHYxKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUwLCB2MCk7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MiwgdjIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuY2xpcCgpO1xuICAgICAgICBjb250ZXh0LnRyYW5zZm9ybShhZmZpbmVDb2Vmc1swXSwgYWZmaW5lQ29lZnNbMl0sIGFmZmluZUNvZWZzWzFdLCBhZmZpbmVDb2Vmc1szXSwgdTAsIHYwKTtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoc291cmNlRGF0YUV4dGVudFswXSAtIHNvdXJjZU51bWVyaWNhbFNoaWZ0WCwgc291cmNlRGF0YUV4dGVudFszXSAtIHNvdXJjZU51bWVyaWNhbFNoaWZ0WSk7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc291cmNlUmVzb2x1dGlvbiAvIHBpeGVsUmF0aW8sIC1zb3VyY2VSZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbyk7XG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHN0aXRjaENvbnRleHQuY2FudmFzLCAwLCAwKTtcbiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgfSk7XG4gICAgaWYgKG9wdF9yZW5kZXJFZGdlcykge1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSAxO1xuICAgICAgICB0cmlhbmd1bGF0aW9uLmdldFRyaWFuZ2xlcygpLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0cmlhbmdsZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgdTAgPSAodGFyZ2V0WzBdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHYwID0gLSh0YXJnZXRbMF1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdTEgPSAodGFyZ2V0WzFdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHYxID0gLSh0YXJnZXRbMV1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdTIgPSAodGFyZ2V0WzJdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHYyID0gLSh0YXJnZXRbMl1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8odTEsIHYxKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUwLCB2MCk7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MiwgdjIpO1xuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRleHQuY2FudmFzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwcm9qLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RpbGVcbiAqL1xuaW1wb3J0IHsgRVJST1JfVEhSRVNIT0xEIH0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlIGZyb20gJy4uL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IFRyaWFuZ3VsYXRpb24gZnJvbSAnLi9Ucmlhbmd1bGF0aW9uLmpzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24sIHJlbmRlciBhcyByZW5kZXJSZXByb2plY3RlZCwgfSBmcm9tICcuLi9yZXByb2ouanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7IGdldEFyZWEsIGdldEludGVyc2VjdGlvbiB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24obnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyKSA6IGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gRnVuY3Rpb25UeXBlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2xhc3MgZW5jYXBzdWxhdGluZyBzaW5nbGUgcmVwcm9qZWN0ZWQgdGlsZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlSW1hZ2V+VGlsZUltYWdlfS5cbiAqXG4gKi9cbnZhciBSZXByb2pUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXByb2pUaWxlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBzb3VyY2VUaWxlR3JpZCBTb3VyY2UgdGlsZSBncmlkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0YXJnZXRUaWxlR3JpZCBUYXJnZXQgdGlsZSBncmlkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIENvb3JkaW5hdGUgb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB3cmFwcGVkVGlsZUNvb3JkIENvb3JkaW5hdGUgb2YgdGhlIHRpbGUgd3JhcHBlZCBpbiBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBndXR0ZXIgR3V0dGVyIG9mIHRoZSBzb3VyY2UgdGlsZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvblR5cGV9IGdldFRpbGVGdW5jdGlvblxuICAgICAqICAgICBGdW5jdGlvbiByZXR1cm5pbmcgc291cmNlIHRpbGVzICh6LCB4LCB5LCBwaXhlbFJhdGlvKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9lcnJvclRocmVzaG9sZF0gQWNjZXB0YWJsZSByZXByb2plY3Rpb24gZXJyb3IgKGluIHB4KS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmVuZGVyRWRnZXNdIFJlbmRlciByZXByb2plY3Rpb24gZWRnZXMuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRfY29udGV4dE9wdGlvbnNdIFByb3BlcnRpZXMgdG8gc2V0IG9uIHRoZSBjYW52YXMgY29udGV4dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZXByb2pUaWxlKHNvdXJjZVByb2osIHNvdXJjZVRpbGVHcmlkLCB0YXJnZXRQcm9qLCB0YXJnZXRUaWxlR3JpZCwgdGlsZUNvb3JkLCB3cmFwcGVkVGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBndXR0ZXIsIGdldFRpbGVGdW5jdGlvbiwgb3B0X2Vycm9yVGhyZXNob2xkLCBvcHRfcmVuZGVyRWRnZXMsIG9wdF9jb250ZXh0T3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0aWxlQ29vcmQsIFRpbGVTdGF0ZS5JRExFKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJFZGdlc18gPSBvcHRfcmVuZGVyRWRnZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9yZW5kZXJFZGdlcyA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge29iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHRPcHRpb25zXyA9IG9wdF9jb250ZXh0T3B0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZ3V0dGVyXyA9IGd1dHRlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbnZhc18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VUaWxlR3JpZF8gPSBzb3VyY2VUaWxlR3JpZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0VGlsZUdyaWRfID0gdGFyZ2V0VGlsZUdyaWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndyYXBwZWRUaWxlQ29vcmRfID0gd3JhcHBlZFRpbGVDb29yZCA/IHdyYXBwZWRUaWxlQ29vcmQgOiB0aWxlQ29vcmQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VUaWxlc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlWl8gPSAwO1xuICAgICAgICB2YXIgdGFyZ2V0RXh0ZW50ID0gdGFyZ2V0VGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KF90aGlzLndyYXBwZWRUaWxlQ29vcmRfKTtcbiAgICAgICAgdmFyIG1heFRhcmdldEV4dGVudCA9IF90aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRFeHRlbnQoKTtcbiAgICAgICAgdmFyIG1heFNvdXJjZUV4dGVudCA9IF90aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRFeHRlbnQoKTtcbiAgICAgICAgdmFyIGxpbWl0ZWRUYXJnZXRFeHRlbnQgPSBtYXhUYXJnZXRFeHRlbnRcbiAgICAgICAgICAgID8gZ2V0SW50ZXJzZWN0aW9uKHRhcmdldEV4dGVudCwgbWF4VGFyZ2V0RXh0ZW50KVxuICAgICAgICAgICAgOiB0YXJnZXRFeHRlbnQ7XG4gICAgICAgIGlmIChnZXRBcmVhKGxpbWl0ZWRUYXJnZXRFeHRlbnQpID09PSAwKSB7XG4gICAgICAgICAgICAvLyBUaWxlIGlzIGNvbXBsZXRlbHkgb3V0c2lkZSByYW5nZSAtPiBFTVBUWVxuICAgICAgICAgICAgLy8gVE9ETzogaXMgaXQgYWN0dWFsbHkgY29ycmVjdCB0aGF0IHRoZSBzb3VyY2UgZXZlbiBjcmVhdGVzIHRoZSB0aWxlID9cbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2VQcm9qRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgaWYgKHNvdXJjZVByb2pFeHRlbnQpIHtcbiAgICAgICAgICAgIGlmICghbWF4U291cmNlRXh0ZW50KSB7XG4gICAgICAgICAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gc291cmNlUHJvakV4dGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1heFNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihtYXhTb3VyY2VFeHRlbnQsIHNvdXJjZVByb2pFeHRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB0YXJnZXRSZXNvbHV0aW9uID0gdGFyZ2V0VGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihfdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXSk7XG4gICAgICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBsaW1pdGVkVGFyZ2V0RXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSB8fCBzb3VyY2VSZXNvbHV0aW9uIDw9IDApIHtcbiAgICAgICAgICAgIC8vIGludmFsaWQgc291cmNlUmVzb2x1dGlvbiAtPiBFTVBUWVxuICAgICAgICAgICAgLy8gcHJvYmFibHkgZWRnZXMgb2YgdGhlIHByb2plY3Rpb25zIHdoZW4gbm8gZXh0ZW50IGlzIGRlZmluZWRcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlcnJvclRocmVzaG9sZEluUGl4ZWxzID0gb3B0X2Vycm9yVGhyZXNob2xkICE9PSB1bmRlZmluZWQgPyBvcHRfZXJyb3JUaHJlc2hvbGQgOiBFUlJPUl9USFJFU0hPTEQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IWltcG9ydChcIi4vVHJpYW5ndWxhdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJpYW5ndWxhdGlvbl8gPSBuZXcgVHJpYW5ndWxhdGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBsaW1pdGVkVGFyZ2V0RXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQsIHNvdXJjZVJlc29sdXRpb24gKiBlcnJvclRocmVzaG9sZEluUGl4ZWxzLCB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKF90aGlzLnRyaWFuZ3VsYXRpb25fLmdldFRyaWFuZ2xlcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gbm8gdmFsaWQgdHJpYW5nbGVzIC0+IEVNUFRZXG4gICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5zb3VyY2VaXyA9IHNvdXJjZVRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHNvdXJjZVJlc29sdXRpb24pO1xuICAgICAgICB2YXIgc291cmNlRXh0ZW50ID0gX3RoaXMudHJpYW5ndWxhdGlvbl8uY2FsY3VsYXRlU291cmNlRXh0ZW50KCk7XG4gICAgICAgIGlmIChtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2VQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VFeHRlbnRbMV0gPSBjbGFtcChzb3VyY2VFeHRlbnRbMV0sIG1heFNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzNdKTtcbiAgICAgICAgICAgICAgICBzb3VyY2VFeHRlbnRbM10gPSBjbGFtcChzb3VyY2VFeHRlbnRbM10sIG1heFNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzNdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihzb3VyY2VFeHRlbnQsIG1heFNvdXJjZUV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnZXRBcmVhKHNvdXJjZUV4dGVudCkpIHtcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNvdXJjZVJhbmdlID0gc291cmNlVGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihzb3VyY2VFeHRlbnQsIF90aGlzLnNvdXJjZVpfKTtcbiAgICAgICAgICAgIGZvciAodmFyIHNyY1ggPSBzb3VyY2VSYW5nZS5taW5YOyBzcmNYIDw9IHNvdXJjZVJhbmdlLm1heFg7IHNyY1grKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHNyY1kgPSBzb3VyY2VSYW5nZS5taW5ZOyBzcmNZIDw9IHNvdXJjZVJhbmdlLm1heFk7IHNyY1krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGlsZSA9IGdldFRpbGVGdW5jdGlvbihfdGhpcy5zb3VyY2VaXywgc3JjWCwgc3JjWSwgcGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zb3VyY2VUaWxlc18ucHVzaCh0aWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5zb3VyY2VUaWxlc18ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEhUTUwgQ2FudmFzIGVsZW1lbnQgZm9yIHRoaXMgdGlsZS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzLlxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS5yZXByb2plY3RfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICB0aGlzLnNvdXJjZVRpbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgc291cmNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50OiB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdGlsZS5nZXRJbWFnZSgpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPSAwO1xuICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRVJST1I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgeiA9IHRoaXMud3JhcHBlZFRpbGVDb29yZF9bMF07XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFRpbGVTaXplKHopO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdHlwZW9mIHNpemUgPT09ICdudW1iZXInID8gc2l6ZSA6IHNpemVbMF07XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdHlwZW9mIHNpemUgPT09ICdudW1iZXInID8gc2l6ZSA6IHNpemVbMV07XG4gICAgICAgICAgICB2YXIgdGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgICAgICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFJlc29sdXRpb24odGhpcy5zb3VyY2VaXyk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RXh0ZW50ID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZUNvb3JkRXh0ZW50KHRoaXMud3JhcHBlZFRpbGVDb29yZF8pO1xuICAgICAgICAgICAgdGhpcy5jYW52YXNfID0gcmVuZGVyUmVwcm9qZWN0ZWQod2lkdGgsIGhlaWdodCwgdGhpcy5waXhlbFJhdGlvXywgc291cmNlUmVzb2x1dGlvbiwgdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0RXh0ZW50KCksIHRhcmdldFJlc29sdXRpb24sIHRhcmdldEV4dGVudCwgdGhpcy50cmlhbmd1bGF0aW9uXywgc291cmNlcywgdGhpcy5ndXR0ZXJfLCB0aGlzLnJlbmRlckVkZ2VzXywgdGhpcy5jb250ZXh0T3B0aW9uc18pO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgICAgICB2YXIgbGVmdFRvTG9hZF8xID0gMDtcbiAgICAgICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLklETEUgfHwgc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdFRvTG9hZF8xKys7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VMaXN0ZW5LZXlfMSA9IGxpc3Rlbih0aWxlLCBFdmVudFR5cGUuQ0hBTkdFLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5MT0FERUQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1IgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9PSBUaWxlU3RhdGUuRU1QVFkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHNvdXJjZUxpc3RlbktleV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0VG9Mb2FkXzEtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVmdFRvTG9hZF8xID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5saXN0ZW5Tb3VyY2VzXygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcHJvamVjdF8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLnB1c2goc291cmNlTGlzdGVuS2V5XzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBpZiAobGVmdFRvTG9hZF8xID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnJlcHJvamVjdF8uYmluZCh0aGlzKSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZVRpbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUudW5saXN0ZW5Tb3VyY2VzXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBSZXByb2pUaWxlO1xufShUaWxlKSk7XG5leHBvcnQgZGVmYXVsdCBSZXByb2pUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL2NvbW1vblxuICovXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSBhbGxvd2VkIHRocmVzaG9sZCAgKGluIHBpeGVscykgZm9yIHJlcHJvamVjdGlvblxuICogdHJpYW5ndWxhdGlvbi5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgRVJST1JfVEhSRVNIT0xEID0gMC41O1xuLyoqXG4gKiBFbmFibGUgYXV0b21hdGljIHJlcHJvamVjdGlvbiBvZiByYXN0ZXIgc291cmNlcy4gRGVmYXVsdCBpcyBgdHJ1ZWAuXG4gKiBUT0RPOiBkZWNpZGUgaWYgd2Ugd2FudCB0byBleHBvc2UgdGhpcyBhcyBhIGJ1aWxkIGZsYWcgb3IgcmVtb3ZlIGl0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvTFJVQ2FjaGVcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEVudHJ5XG4gKiBAcHJvcGVydHkge3N0cmluZ30ga2V5XyBLZXkuXG4gKiBAcHJvcGVydHkge09iamVjdH0gbmV3ZXIgTmV3ZXIuXG4gKiBAcHJvcGVydHkge09iamVjdH0gb2xkZXIgT2xkZXIuXG4gKiBAcHJvcGVydHkgeyp9IHZhbHVlXyBWYWx1ZS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbXBsZW1lbnRzIGEgTGVhc3QtUmVjZW50bHktVXNlZCBjYWNoZSB3aGVyZSB0aGUga2V5cyBkbyBub3QgY29uZmxpY3Qgd2l0aFxuICogT2JqZWN0J3MgcHJvcGVydGllcyAoZS5nLiAnaGFzT3duUHJvcGVydHknIGlzIG5vdCBhbGxvd2VkIGFzIGEga2V5KS4gRXhwaXJpbmdcbiAqIGl0ZW1zIGZyb20gdGhlIGNhY2hlIGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgdXNlci5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHRcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbnZhciBMUlVDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9oaWdoV2F0ZXJNYXJrXSBIaWdoIHdhdGVyIG1hcmsuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTFJVQ2FjaGUob3B0X2hpZ2hXYXRlck1hcmspIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc2lyZWQgbWF4IGNhY2hlIHNpemUgYWZ0ZXIgZXhwaXJlQ2FjaGUoKS4gSWYgc2V0IHRvIDAsIG5vIGNhY2hlIGVudHJpZXNcbiAgICAgICAgICogd2lsbCBiZSBwcnVuZWQgYXQgYWxsLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oaWdoV2F0ZXJNYXJrID1cbiAgICAgICAgICAgIG9wdF9oaWdoV2F0ZXJNYXJrICE9PSB1bmRlZmluZWQgPyBvcHRfaGlnaFdhdGVyTWFyayA6IDIwNDg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb3VudF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBFbnRyeT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVudHJpZXNfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0VudHJ5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbGRlc3RfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/RW50cnl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlnaFdhdGVyTWFyayA+IDAgJiYgdGhpcy5nZXRDb3VudCgpID4gdGhpcy5oaWdoV2F0ZXJNYXJrO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgICAgIHRoaXMuZW50cmllc18gPSB7fTtcbiAgICAgICAgdGhpcy5vbGRlc3RfID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGtleS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudHJpZXNfLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIHN0cmluZywgTFJVQ2FjaGU8VD4pOiA/fSBmIFRoZSBmdW5jdGlvblxuICAgICAqICAgICB0byBjYWxsIGZvciBldmVyeSBlbnRyeSBmcm9tIHRoZSBvbGRlc3QgdG8gdGhlIG5ld2VyLiBUaGlzIGZ1bmN0aW9uIHRha2VzXG4gICAgICogICAgIDMgYXJndW1lbnRzICh0aGUgZW50cnkgdmFsdWUsIHRoZSBlbnRyeSBrZXkgYW5kIHRoZSBMUlVDYWNoZSBvYmplY3QpLlxuICAgICAqICAgICBUaGUgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLm9sZGVzdF87XG4gICAgICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgICAgICAgZihlbnRyeS52YWx1ZV8sIGVudHJ5LmtleV8sIHRoaXMpO1xuICAgICAgICAgICAgZW50cnkgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMgKHJlc2VydmVkIGZvciBzdWJjbGFzc2VzKS5cbiAgICAgKiBAcmV0dXJuIHtUfSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5lbnRyaWVzX1trZXldO1xuICAgICAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCwgMTUpOyAvLyBUcmllZCB0byBnZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY2FjaGVcbiAgICAgICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKHRoaXMub2xkZXN0Xy5uZXdlcik7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjtcbiAgICAgICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkubmV3ZXIgPSBudWxsO1xuICAgICAgICBlbnRyeS5vbGRlciA9IHRoaXMubmV3ZXN0XztcbiAgICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gZW50cnk7XG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IGVudHJ5O1xuICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFuIGVudHJ5IGZyb20gdGhlIGNhY2hlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGVudHJ5IGtleS5cbiAgICAgKiBAcmV0dXJuIHtUfSBUaGUgcmVtb3ZlZCBlbnRyeS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgICAgIGFzc2VydChlbnRyeSAhPT0gdW5kZWZpbmVkLCAxNSk7IC8vIFRyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZVxuICAgICAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5uZXdlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm9sZGVyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVudHJ5ID09PSB0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5uZXdlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbGRlc3RfLm9sZGVyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICAgICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgICAgIC0tdGhpcy5jb3VudF87XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENvdW50LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gS2V5cy5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBlbnRyeTtcbiAgICAgICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgICAgICAgIGtleXNbaSsrXSA9IGVudHJ5LmtleV87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxUPn0gVmFsdWVzLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXRWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBlbnRyeTtcbiAgICAgICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgICAgICAgIHZhbHVlc1tpKytdID0gZW50cnkudmFsdWVfO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtUfSBMYXN0IHZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wZWVrTGFzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2xkZXN0Xy52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IExhc3Qga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wZWVrTGFzdEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2xkZXN0Xy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBrZXkgb2YgdGhlIG5ld2VzdCBpdGVtIGluIHRoZSBjYWNoZS4gIFRocm93cyBpZiB0aGUgY2FjaGUgaXMgZW1wdHkuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbmV3ZXN0IGtleS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0ZpcnN0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXdlc3RfLmtleV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLm9sZGVzdF87XG4gICAgICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2VudHJ5LmtleV9dO1xuICAgICAgICBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICAgICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgICAgICBpZiAoIXRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAtLXRoaXMuY291bnRfO1xuICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZ2V0KGtleSk7IC8vIHVwZGF0ZSBgbmV3ZXN0X2BcbiAgICAgICAgdGhpcy5lbnRyaWVzX1trZXldLnZhbHVlXyA9IHZhbHVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgYXNzZXJ0KCEoa2V5IGluIHRoaXMuZW50cmllc18pLCAxNik7IC8vIFRyaWVkIHRvIHNldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGlzIHVzZWQgYWxyZWFkeVxuICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICBrZXlfOiBrZXksXG4gICAgICAgICAgICBuZXdlcjogbnVsbCxcbiAgICAgICAgICAgIG9sZGVyOiB0aGlzLm5ld2VzdF8sXG4gICAgICAgICAgICB2YWx1ZV86IHZhbHVlLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfID0gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5ld2VzdF8gPSBlbnRyeTtcbiAgICAgICAgdGhpcy5lbnRyaWVzX1trZXldID0gZW50cnk7XG4gICAgICAgICsrdGhpcy5jb3VudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSBtYXhpbXVtIG51bWJlciBvZiBlbnRyaWVzIGZvciB0aGUgY2FjaGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQ2FjaGUgc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBzaXplO1xuICAgIH07XG4gICAgcmV0dXJuIExSVUNhY2hlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IExSVUNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TFJVQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVjb29yZFxuICovXG4vKipcbiAqIEFuIGFycmF5IG9mIHRocmVlIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBsb2NhdGlvbiBvZiBhIHRpbGUgaW4gYSB0aWxlXG4gKiBncmlkLiBUaGUgb3JkZXIgaXMgYHpgICh6b29tIGxldmVsKSwgYHhgIChjb2x1bW4pLCBhbmQgYHlgIChyb3cpLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IFRpbGVDb29yZFxuICogQGFwaVxuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gVGlsZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7VGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZSh6LCB4LCB5LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgaWYgKG9wdF90aWxlQ29vcmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvcHRfdGlsZUNvb3JkWzBdID0gejtcbiAgICAgICAgb3B0X3RpbGVDb29yZFsxXSA9IHg7XG4gICAgICAgIG9wdF90aWxlQ29vcmRbMl0gPSB5O1xuICAgICAgICByZXR1cm4gb3B0X3RpbGVDb29yZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbeiwgeCwgeV07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleVpYWSh6LCB4LCB5KSB7XG4gICAgcmV0dXJuIHogKyAnLycgKyB4ICsgJy8nICsgeTtcbn1cbi8qKlxuICogR2V0IHRoZSBrZXkgZm9yIGEgdGlsZSBjb29yZC5cbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGhlIHRpbGUgY29vcmQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleSh0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gZ2V0S2V5WlhZKHRpbGVDb29yZFswXSwgdGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xufVxuLyoqXG4gKiBHZXQgdGhlIHRpbGUgY2FjaGUga2V5IGZvciBhIHRpbGUga2V5IG9idGFpbmVkIHRocm91Z2ggYHRpbGUuZ2V0S2V5KClgLlxuICogQHBhcmFtIHtzdHJpbmd9IHRpbGVLZXkgVGhlIHRpbGUga2V5LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY2FjaGUga2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVLZXlGb3JUaWxlS2V5KHRpbGVLZXkpIHtcbiAgICB2YXIgX2EgPSB0aWxlS2V5XG4gICAgICAgIC5zdWJzdHJpbmcodGlsZUtleS5sYXN0SW5kZXhPZignLycpICsgMSwgdGlsZUtleS5sZW5ndGgpXG4gICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgIC5tYXAoTnVtYmVyKSwgeiA9IF9hWzBdLCB4ID0gX2FbMV0sIHkgPSBfYVsyXTtcbiAgICByZXR1cm4gZ2V0S2V5WlhZKHosIHgsIHkpO1xufVxuLyoqXG4gKiBHZXQgYSB0aWxlIGNvb3JkIGdpdmVuIGEga2V5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgdGlsZSBjb29yZCBrZXkuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRoZSB0aWxlIGNvb3JkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUtleShrZXkpIHtcbiAgICByZXR1cm4ga2V5LnNwbGl0KCcvJykubWFwKE51bWJlcik7XG59XG4vKipcbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSGFzaC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2godGlsZUNvb3JkKSB7XG4gICAgcmV0dXJuICh0aWxlQ29vcmRbMV0gPDwgdGlsZUNvb3JkWzBdKSArIHRpbGVDb29yZFsyXTtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0geyFpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRpbGUgY29vcmRpbmF0ZSBpcyB3aXRoaW4gZXh0ZW50IGFuZCB6b29tIGxldmVsIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aGluRXh0ZW50QW5kWih0aWxlQ29vcmQsIHRpbGVHcmlkKSB7XG4gICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgdmFyIHggPSB0aWxlQ29vcmRbMV07XG4gICAgdmFyIHkgPSB0aWxlQ29vcmRbMl07XG4gICAgaWYgKHRpbGVHcmlkLmdldE1pblpvb20oKSA+IHogfHwgeiA+IHRpbGVHcmlkLmdldE1heFpvb20oKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRGdWxsVGlsZVJhbmdlKHopO1xuICAgIGlmICghdGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRpbGVSYW5nZS5jb250YWluc1hZKHgsIHkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbGVjb29yZC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVDYWNoZVxuICovXG5pbXBvcnQgTFJVQ2FjaGUgZnJvbSAnLi9zdHJ1Y3RzL0xSVUNhY2hlLmpzJztcbmltcG9ydCB7IGZyb21LZXksIGdldEtleSB9IGZyb20gJy4vdGlsZWNvb3JkLmpzJztcbnZhciBUaWxlQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVDYWNoZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaWxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVDYWNoZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAodXNlZFRpbGVzKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHZhciB0aWxlID0gdGhpcy5wZWVrTGFzdCgpO1xuICAgICAgICAgICAgaWYgKHRpbGUuZ2V0S2V5KCkgaW4gdXNlZFRpbGVzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcCgpLnJlbGVhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUHJ1bmUgYWxsIHRpbGVzIGZyb20gdGhlIGNhY2hlIHRoYXQgZG9uJ3QgaGF2ZSB0aGUgc2FtZSB6IGFzIHRoZSBuZXdlc3QgdGlsZS5cbiAgICAgKi9cbiAgICBUaWxlQ2FjaGUucHJvdG90eXBlLnBydW5lRXhjZXB0TmV3ZXN0WiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0Q291bnQoKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLnBlZWtGaXJzdEtleSgpO1xuICAgICAgICB2YXIgdGlsZUNvb3JkID0gZnJvbUtleShrZXkpO1xuICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlKSB7XG4gICAgICAgICAgICBpZiAodGlsZS50aWxlQ29vcmRbMF0gIT09IHopIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShnZXRLZXkodGlsZS50aWxlQ29vcmQpKTtcbiAgICAgICAgICAgICAgICB0aWxlLnJlbGVhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlQ2FjaGU7XG59KExSVUNhY2hlKSk7XG5leHBvcnQgZGVmYXVsdCBUaWxlQ2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlQ2FjaGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU291cmNlXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24gfSBmcm9tICcuLi9wcm9qLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+RnJhbWVTdGF0ZX0gYW5kIHJldHVybnMgYSBzdHJpbmcgb3JcbiAqIGFuIGFycmF5IG9mIHN0cmluZ3MgcmVwcmVzZW50aW5nIHNvdXJjZSBhdHRyaWJ1dGlvbnMuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlKTogKHN0cmluZ3xBcnJheTxzdHJpbmc+KX0gQXR0cmlidXRpb25cbiAqL1xuLyoqXG4gKiBBIHR5cGUgdGhhdCBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGF0dHJpYnV0aW9uIGluZm9ybWF0aW9uIGZvciBkYXRhIHNvdXJjZXMuXG4gKlxuICogSXQgcmVwcmVzZW50cyBlaXRoZXJcbiAqICogYSBzaW1wbGUgc3RyaW5nIChlLmcuIGAnwqkgQWNtZSBJbmMuJ2ApXG4gKiAqIGFuIGFycmF5IG9mIHNpbXBsZSBzdHJpbmdzIChlLmcuIGBbJ8KpIEFjbWUgSW5jLicsICfCqSBCYWNtZSBJbmMuJ11gKVxuICogKiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdzICh7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9Tb3VyY2V+QXR0cmlidXRpb259KVxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd8QXJyYXk8c3RyaW5nPnxBdHRyaWJ1dGlvbn0gQXR0cmlidXRpb25MaWtlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtBdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLiBEZWZhdWx0IGlzIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlPSdyZWFkeSddIFN0YXRlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9ZmFsc2VdIFdyYXBYLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXJ9IHNvdXJjZXMuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU291cmNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBTb3VyY2Ugb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTb3VyY2Uob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wcm9qZWN0aW9uID0gZ2V0UHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BdHRyaWJ1dGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhvcHRpb25zLmF0dHJpYnV0aW9ucyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXyA9XG4gICAgICAgICAgICBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGVcbiAgICAgICAgICAgICAgICA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHNvdXJjZSBpcyBjdXJyZW50bHkgbG9hZGluZyBkYXRhLiBTb3VyY2VzIHRoYXQgZGVmZXIgbG9hZGluZyB0byB0aGVcbiAgICAgICAgICogbWFwJ3MgdGlsZSBxdWV1ZSBuZXZlciBzZXQgdGhpcyB0byBgdHJ1ZWAuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlXyA9XG4gICAgICAgICAgICBvcHRpb25zLnN0YXRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0YXRlIDogU291cmNlU3RhdGUuUkVBRFk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndyYXBYXyA9IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGF0dHJpYnV0aW9uIGZ1bmN0aW9uIGZvciB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQXR0cmlidXRpb24gZnVuY3Rpb24uXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcHJvamVjdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBQcm9qZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFByb2plY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3Rpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH0gUmVzb2x1dGlvbnMuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UsIHNlZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9TdGF0ZX5TdGF0ZX0gZm9yIHBvc3NpYmxlIHN0YXRlcy5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gV3JhcCBYLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0V3JhcFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBYXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9IENvbnRleHQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldENvbnRleHRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVmcmVzaGVzIHRoZSBzb3VyY2UuIFRoZSBzb3VyY2Ugd2lsbCBiZSBjbGVhcmVkLCBhbmQgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBiZSByZWxvYWRlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYXR0cmlidXRpb25zIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbnMgQXR0cmlidXRpb25zLlxuICAgICAqICAgICBDYW4gYmUgcGFzc2VkIGFzIGBzdHJpbmdgLCBgQXJyYXk8c3RyaW5nPmAsIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0sXG4gICAgICogICAgIG9yIGB1bmRlZmluZWRgLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLnNldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGlvbnMpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25zKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU291cmNlO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIFR1cm5zIHRoZSBhdHRyaWJ1dGlvbnMgb3B0aW9uIGludG8gYW4gYXR0cmlidXRpb25zIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbkxpa2UgVGhlIGF0dHJpYnV0aW9uIG9wdGlvbi5cbiAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQW4gYXR0cmlidXRpb24gZnVuY3Rpb24gKG9yIG51bGwpLlxuICovXG5mdW5jdGlvbiBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbkxpa2UpIHtcbiAgICBpZiAoIWF0dHJpYnV0aW9uTGlrZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25MaWtlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXR0cmlidXRpb25MaWtlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICByZXR1cm4gW2F0dHJpYnV0aW9uTGlrZV07XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IFNvdXJjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvVGlsZUdyaWRcbiAqL1xuaW1wb3J0IFRpbGVSYW5nZSwgeyBjcmVhdGVPclVwZGF0ZSBhcyBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZSwgfSBmcm9tICcuLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZSwgZ2V0VG9wTGVmdCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZSBhcyBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBpc1NvcnRlZCwgbGluZWFyRmluZE5lYXJlc3QgfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuLi9zaXplLmpzJztcbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICovXG52YXIgdG1wVGlsZUNvb3JkID0gWzAsIDAsIDBdO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudCBmb3IgdGhlIHRpbGUgZ3JpZC4gTm8gdGlsZXMgb3V0c2lkZSB0aGlzXG4gKiBleHRlbnQgd2lsbCBiZSByZXF1ZXN0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX0gc291cmNlcy4gV2hlbiBubyBgb3JpZ2luYCBvclxuICogYG9yaWdpbnNgIGFyZSBjb25maWd1cmVkLCB0aGUgYG9yaWdpbmAgd2lsbCBiZSBzZXQgdG8gdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3JpZ2luXSBUaGUgdGlsZSBncmlkIG9yaWdpbiwgaS5lLiB3aGVyZSB0aGUgYHhgXG4gKiBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIGRvd253YXJkcy4gSWYgbm90XG4gKiBzcGVjaWZpZWQsIGBleHRlbnRgIG9yIGBvcmlnaW5zYCBtdXN0IGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBbb3JpZ2luc10gVGlsZSBncmlkIG9yaWdpbnMsIGkuZS4gd2hlcmVcbiAqIHRoZSBgeGAgYW5kIGB5YCBheGVzIG1lZXQgKGBbeiwgMCwgMF1gKSwgZm9yIGVhY2ggem9vbSBsZXZlbC4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogb3JpZ2luLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIGRvd253YXJkcy4gSWYgbm90IHNwZWNpZmllZCwgYGV4dGVudGAgb3JcbiAqIGBvcmlnaW5gIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSByZXNvbHV0aW9ucyBSZXNvbHV0aW9ucy4gVGhlIGFycmF5IGluZGV4IG9mIGVhY2ggcmVzb2x1dGlvbiBuZWVkc1xuICogdG8gbWF0Y2ggdGhlIHpvb20gbGV2ZWwuIFRoaXMgbWVhbnMgdGhhdCBldmVuIGlmIGEgYG1pblpvb21gIGlzIGNvbmZpZ3VyZWQsIHRoZSByZXNvbHV0aW9uc1xuICogYXJyYXkgd2lsbCBoYXZlIGEgbGVuZ3RoIG9mIGBtYXhab29tICsgMWAuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59IFtzaXplc10gTnVtYmVyIG9mIHRpbGUgcm93cyBhbmQgY29sdW1uc1xuICogb2YgdGhlIGdyaWQgZm9yIGVhY2ggem9vbSBsZXZlbC4gSWYgc3BlY2lmaWVkIHRoZSB2YWx1ZXNcbiAqIGRlZmluZSBlYWNoIHpvb20gbGV2ZWwncyBleHRlbnQgdG9nZXRoZXIgd2l0aCB0aGUgYG9yaWdpbmAgb3IgYG9yaWdpbnNgLlxuICogQSBncmlkIGBleHRlbnRgIGNhbiBiZSBjb25maWd1cmVkIGluIGFkZGl0aW9uLCBhbmQgd2lsbCBmdXJ0aGVyIGxpbWl0IHRoZSBleHRlbnRcbiAqIGZvciB3aGljaCB0aWxlIHJlcXVlc3RzIGFyZSBtYWRlIGJ5IHNvdXJjZXMuIElmIHRoZSBib3R0b20tbGVmdCBjb3JuZXIgb2ZcbiAqIGFuIGV4dGVudCBpcyB1c2VkIGFzIGBvcmlnaW5gIG9yIGBvcmlnaW5zYCwgdGhlbiB0aGUgYHlgIHZhbHVlIG11c3QgYmVcbiAqIG5lZ2F0aXZlIGJlY2F1c2UgT3BlbkxheWVycyB0aWxlIGNvb3JkaW5hdGVzIHVzZSB0aGUgdG9wIGxlZnQgYXMgdGhlIG9yaWdpbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplXSBUaWxlIHNpemUuXG4gKiBEZWZhdWx0IGlzIGBbMjU2LCAyNTZdYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3RpbGVTaXplc10gVGlsZSBzaXplcy4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogdGlsZSBzaXplLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNldHRpbmcgdGhlIGdyaWQgcGF0dGVybiBmb3Igc291cmNlcyBhY2Nlc3NpbmcgdGlsZWQtaW1hZ2VcbiAqIHNlcnZlcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlR3JpZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgVGlsZSBncmlkIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUdyaWQob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICBhc3NlcnQoaXNTb3J0ZWQodGhpcy5yZXNvbHV0aW9uc18sIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYiAtIGE7XG4gICAgICAgIH0sIHRydWUpLCAxNyk7IC8vIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBzb3J0ZWQgaW4gZGVzY2VuZGluZyBvcmRlclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSd2ZSBnb3QgYSBjb25zaXN0ZW50IHpvb20gZmFjdG9yIGFuZCBvcmlnaW5cbiAgICAgICAgdmFyIHpvb21GYWN0b3I7XG4gICAgICAgIGlmICghb3B0aW9ucy5vcmlnaW5zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICghem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gdGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV0gIT09IHpvb21GYWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpvb21GYWN0b3JfID0gem9vbUZhY3RvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4Wm9vbSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmlnaW5fID0gb3B0aW9ucy5vcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmlnaW5zXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLm9yaWdpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5zXyA9IG9wdGlvbnMub3JpZ2lucztcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLm9yaWdpbnNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDIwKTsgLy8gTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGV4dGVudCA9IG9wdGlvbnMuZXh0ZW50O1xuICAgICAgICBpZiAoZXh0ZW50ICE9PSB1bmRlZmluZWQgJiYgIXRoaXMub3JpZ2luXyAmJiAhdGhpcy5vcmlnaW5zXykge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5fID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCgoIXRoaXMub3JpZ2luXyAmJiB0aGlzLm9yaWdpbnNfKSB8fCAodGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSwgMTgpOyAvLyBFaXRoZXIgYG9yaWdpbmAgb3IgYG9yaWdpbnNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWxlU2l6ZXNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMudGlsZVNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZVNpemVzXyA9IG9wdGlvbnMudGlsZVNpemVzO1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMudGlsZVNpemVzXy5sZW5ndGggPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoLCAxOSk7IC8vIE51bWJlciBvZiBgdGlsZVNpemVzYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWxlU2l6ZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlU2l6ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnRpbGVTaXplXG4gICAgICAgICAgICAgICAgOiAhdGhpcy50aWxlU2l6ZXNfXG4gICAgICAgICAgICAgICAgICAgID8gREVGQVVMVF9USUxFX1NJWkVcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBhc3NlcnQoKCF0aGlzLnRpbGVTaXplXyAmJiB0aGlzLnRpbGVTaXplc18pIHx8XG4gICAgICAgICAgICAodGhpcy50aWxlU2l6ZV8gJiYgIXRoaXMudGlsZVNpemVzXyksIDIyKTsgLy8gRWl0aGVyIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IGV4dGVudCAhPT0gdW5kZWZpbmVkID8gZXh0ZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50bXBTaXplXyA9IFswLCAwXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50bXBFeHRlbnRfID0gWzAsIDAsIDAsIDBdO1xuICAgICAgICBpZiAob3B0aW9ucy5zaXplcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG9wdGlvbnMuc2l6ZXMubWFwKGZ1bmN0aW9uIChzaXplLCB6KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVSYW5nZSA9IG5ldyBUaWxlUmFuZ2UoTWF0aC5taW4oMCwgc2l6ZVswXSksIE1hdGgubWF4KHNpemVbMF0gLSAxLCAtMSksIE1hdGgubWluKDAsIHNpemVbMV0pLCBNYXRoLm1heChzaXplWzFdIC0gMSwgLTEpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN0cmljdGVkVGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5taW5YID0gTWF0aC5tYXgocmVzdHJpY3RlZFRpbGVSYW5nZS5taW5YLCB0aWxlUmFuZ2UubWluWCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhYID0gTWF0aC5taW4ocmVzdHJpY3RlZFRpbGVSYW5nZS5tYXhYLCB0aWxlUmFuZ2UubWF4WCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5taW5ZID0gTWF0aC5tYXgocmVzdHJpY3RlZFRpbGVSYW5nZS5taW5ZLCB0aWxlUmFuZ2UubWluWSk7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhZID0gTWF0aC5taW4ocmVzdHJpY3RlZFRpbGVSYW5nZS5tYXhZLCB0aWxlUmFuZ2UubWF4WSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlUmFuZ2U7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVGlsZVJhbmdlc18oZXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgZnVuY3Rpb24gd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCk6IHZvaWR9IGNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCB3aXRoIGVhY2ggdGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZCA9IGZ1bmN0aW9uIChleHRlbnQsIHpvb20sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6b29tKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRpbGVSYW5nZS5taW5YLCBpaSA9IHRpbGVSYW5nZS5tYXhYOyBpIDw9IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSB0aWxlUmFuZ2UubWluWSwgamogPSB0aWxlUmFuZ2UubWF4WTsgaiA8PSBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soW3pvb20sIGksIGpdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGNhbGxiYWNrIENhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYWxsYmFjayBzdWNjZWVkZWQuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UgPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBjYWxsYmFjaywgb3B0X3RpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgdGlsZVJhbmdlLCB4LCB5O1xuICAgICAgICB2YXIgdGlsZUNvb3JkRXh0ZW50ID0gbnVsbDtcbiAgICAgICAgdmFyIHogPSB0aWxlQ29vcmRbMF0gLSAxO1xuICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgeCA9IHRpbGVDb29yZFsxXTtcbiAgICAgICAgICAgIHkgPSB0aWxlQ29vcmRbMl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRFeHRlbnQgPSB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIG9wdF9leHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh6ID49IHRoaXMubWluWm9vbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgICAgICAgICB4ID0gTWF0aC5mbG9vcih4IC8gMik7XG4gICAgICAgICAgICAgICAgeSA9IE1hdGguZmxvb3IoeSAvIDIpO1xuICAgICAgICAgICAgICAgIHRpbGVSYW5nZSA9IGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHgsIHgsIHksIHksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRpbGVDb29yZEV4dGVudCwgeiwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2soeiwgdGlsZVJhbmdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLS16O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZCwgaWYgaXQgd2FzIGNvbmZpZ3VyZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBncmlkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWF4IHpvb20uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhab29tO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBncmlkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluIHpvb20uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRNaW5ab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5ab29tO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvcmlnaW4gZm9yIHRoZSBncmlkIGF0IHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IE9yaWdpbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE9yaWdpbiA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICh0aGlzLm9yaWdpbl8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbl87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5zX1t6XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGUgZ2l2ZW4gem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t6XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiByZXNvbHV0aW9ucyBmb3IgdGhlIHRpbGUgZ3JpZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gW29wdF90aWxlUmFuZ2VdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF90aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgaWYgKHRpbGVDb29yZFswXSA8IHRoaXMubWF4Wm9vbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWluWCA9IHRpbGVDb29yZFsxXSAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIG1pblkgPSB0aWxlQ29vcmRbMl0gKiAyO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtaW5YICsgMSwgbWluWSwgbWluWSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCB8fCB0aGlzLnRtcEV4dGVudF8pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHRpbGVDb29yZFswXSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbb3B0X3RpbGVSYW5nZV0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gVGlsZSByYW5nZS5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZVJhbmdlRm9yVGlsZUNvb3JkQW5kWiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIHosIG9wdF90aWxlUmFuZ2UpIHtcbiAgICAgICAgaWYgKHogPiB0aGlzLm1heFpvb20gfHwgeiA8IHRoaXMubWluWm9vbSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVDb29yZFogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRYID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgaWYgKHogPT09IHRpbGVDb29yZFopIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZSh0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXykge1xuICAgICAgICAgICAgdmFyIGZhY3RvciA9IE1hdGgucG93KHRoaXMuem9vbUZhY3Rvcl8sIHogLSB0aWxlQ29vcmRaKTtcbiAgICAgICAgICAgIHZhciBtaW5YID0gTWF0aC5mbG9vcih0aWxlQ29vcmRYICogZmFjdG9yKTtcbiAgICAgICAgICAgIHZhciBtaW5ZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZICogZmFjdG9yKTtcbiAgICAgICAgICAgIGlmICh6IDwgdGlsZUNvb3JkWikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtaW5YLCBtaW5ZLCBtaW5ZLCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtYXhYID0gTWF0aC5mbG9vcihmYWN0b3IgKiAodGlsZUNvb3JkWCArIDEpKSAtIDE7XG4gICAgICAgICAgICB2YXIgbWF4WSA9IE1hdGguZmxvb3IoZmFjdG9yICogKHRpbGVDb29yZFkgKyAxKSkgLSAxO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIHRoaXMudG1wRXh0ZW50Xyk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IGZvciBhIHRpbGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUV4dGVudCA9IGZ1bmN0aW9uICh6LCB0aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHopO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgbWluWCA9IG9yaWdpblswXSArIHRpbGVSYW5nZS5taW5YICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WCA9IG9yaWdpblswXSArICh0aWxlUmFuZ2UubWF4WCArIDEpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluWSA9IG9yaWdpblsxXSArIHRpbGVSYW5nZS5taW5ZICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WSA9IG9yaWdpblsxXSArICh0aWxlUmFuZ2UubWF4WSArIDEpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB0aWxlIHJhbmdlIGZvciB0aGUgZ2l2ZW4gZXh0ZW50IGFuZCBpbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbb3B0X3RpbGVSYW5nZV0gVGVtcG9yYXJ5IHRpbGUgcmFuZ2Ugb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaID0gZnVuY3Rpb24gKGV4dGVudCwgeiwgb3B0X3RpbGVSYW5nZSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkID0gdG1wVGlsZUNvb3JkO1xuICAgICAgICB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oZXh0ZW50WzBdLCBleHRlbnRbM10sIHosIGZhbHNlLCB0aWxlQ29vcmQpO1xuICAgICAgICB2YXIgbWluWCA9IHRpbGVDb29yZFsxXTtcbiAgICAgICAgdmFyIG1pblkgPSB0aWxlQ29vcmRbMl07XG4gICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMl0sIGV4dGVudFsxXSwgeiwgdHJ1ZSwgdGlsZUNvb3JkKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIHRpbGVDb29yZFsxXSwgbWluWSwgdGlsZUNvb3JkWzJdLCBvcHRfdGlsZVJhbmdlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRpbGUgY2VudGVyLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRDZW50ZXIgPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh0aWxlQ29vcmRbMF0pLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG9yaWdpblswXSArICh0aWxlQ29vcmRbMV0gKyAwLjUpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgb3JpZ2luWzFdIC0gKHRpbGVDb29yZFsyXSArIDAuNSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb24sXG4gICAgICAgIF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBvZiBhIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfZXh0ZW50XSBUZW1wb3JhcnkgZXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRFeHRlbnQgPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh0aWxlQ29vcmRbMF0pLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgdmFyIG1pblggPSBvcmlnaW5bMF0gKyB0aWxlQ29vcmRbMV0gKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtaW5ZID0gb3JpZ2luWzFdIC0gKHRpbGVDb29yZFsyXSArIDEpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WCA9IG1pblggKyB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhZID0gbWluWSArIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoZSBnaXZlbiBtYXAgY29vcmRpbmF0ZSBhbmQgcmVzb2x1dGlvbi4gIFRoaXNcbiAgICAgKiBtZXRob2QgY29uc2lkZXJzIHRoYXQgY29vcmRpbmF0ZXMgdGhhdCBpbnRlcnNlY3QgdGlsZSBib3VuZGFyaWVzIHNob3VsZCBiZVxuICAgICAqIGFzc2lnbmVkIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCByZXNvbHV0aW9uLCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8oY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgcmVzb2x1dGlvbiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyB0aGF0IGNvcnJlc3BvbmRcbiAgICAgKiB0byBhbiBpbnRlZ2VyIHpvb20gbGV2ZWwuICBJbnN0ZWFkIGNhbGwgdGhlIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFpfYCBtZXRob2QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24gKGZvciBhIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWwpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgICAqICAgICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gICAgICogICAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fID0gZnVuY3Rpb24gKHgsIHksIHJlc29sdXRpb24sIHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3ksIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIHogPSB0aGlzLmdldFpGb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICB2YXIgc2NhbGUgPSByZXNvbHV0aW9uIC8gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgdmFyIGFkanVzdFggPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMC41IDogMDtcbiAgICAgICAgdmFyIGFkanVzdFkgPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMC41IDogMDtcbiAgICAgICAgdmFyIHhGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigoeCAtIG9yaWdpblswXSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WCk7XG4gICAgICAgIHZhciB5RnJvbU9yaWdpbiA9IE1hdGguZmxvb3IoKG9yaWdpblsxXSAtIHkpIC8gcmVzb2x1dGlvbiArIGFkanVzdFkpO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWCA9IChzY2FsZSAqIHhGcm9tT3JpZ2luKSAvIHRpbGVTaXplWzBdO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWSA9IChzY2FsZSAqIHlGcm9tT3JpZ2luKSAvIHRpbGVTaXplWzFdO1xuICAgICAgICBpZiAocmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSkge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguY2VpbCh0aWxlQ29vcmRYKSAtIDE7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5jZWlsKHRpbGVDb29yZFkpIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZFggPSBNYXRoLmZsb29yKHRpbGVDb29yZFgpO1xuICAgICAgICAgICAgdGlsZUNvb3JkWSA9IE1hdGguZmxvb3IodGlsZUNvb3JkWSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkKHosIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWx0aG91Z2ggdGhlcmUgaXMgcmVwZXRpdGlvbiBiZXR3ZWVuIHRoaXMgbWV0aG9kIGFuZCBgZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uX2AsXG4gICAgICogdGhleSBzaG91bGQgaGF2ZSBzZXBhcmF0ZSBpbXBsZW1lbnRhdGlvbnMuICBUaGlzIG1ldGhvZCBpcyBmb3IgaW50ZWdlciB6b29tXG4gICAgICogbGV2ZWxzLiAgVGhlIG90aGVyIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZm9yIHJlc29sdXRpb25zIGNvcnJlc3BvbmRpbmdcbiAgICAgKiB0byBub24taW50ZWdlciB6b29tIGxldmVscy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBNYXAgeCBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IE1hcCB5IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgICAqICAgICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gICAgICogICAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfID0gZnVuY3Rpb24gKHgsIHksIHosIHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3ksIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHopO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgYWRqdXN0WCA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgYWRqdXN0WSA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgeEZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RYKTtcbiAgICAgICAgdmFyIHlGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigob3JpZ2luWzFdIC0geSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WSk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRYID0geEZyb21PcmlnaW4gLyB0aWxlU2l6ZVswXTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFkgPSB5RnJvbU9yaWdpbiAvIHRpbGVTaXplWzFdO1xuICAgICAgICBpZiAocmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSkge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguY2VpbCh0aWxlQ29vcmRYKSAtIDE7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5jZWlsKHRpbGVDb29yZFkpIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZFggPSBNYXRoLmZsb29yKHRpbGVDb29yZFgpO1xuICAgICAgICAgICAgdGlsZUNvb3JkWSA9IE1hdGguZmxvb3IodGlsZUNvb3JkWSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkKHosIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdGlsZSBjb29yZGluYXRlIGdpdmVuIGEgbWFwIGNvb3JkaW5hdGUgYW5kIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCB6LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgeiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSByZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc19bdGlsZUNvb3JkWzBdXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBzaXplIGZvciBhIHpvb20gbGV2ZWwuIFRoZSB0eXBlIG9mIHRoZSByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGVcbiAgICAgKiBgdGlsZVNpemVgIG9yIGB0aWxlU2l6ZXNgIHRoYXQgdGhlIHRpbGUgZ3JpZCB3YXMgY29uZmlndXJlZCB3aXRoLiBUbyBhbHdheXNcbiAgICAgKiBnZXQgYW4gYGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZWAsIHJ1biB0aGUgcmVzdWx0IHRocm91Z2ggYGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZS50b1NpemUoKWAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBUaWxlIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlU2l6ZSA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICh0aGlzLnRpbGVTaXplXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNpemVfO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNpemVzX1t6XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gRXh0ZW50IHRpbGUgcmFuZ2UgZm9yIHRoZSBzcGVjaWZpZWQgem9vbSBsZXZlbC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICghdGhpcy5mdWxsVGlsZVJhbmdlc18pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dGVudF9cbiAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aGlzLmV4dGVudF8sIHopXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnVsbFRpbGVSYW5nZXNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW29wdF9kaXJlY3Rpb25dXG4gICAgICogICAgIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAqICAgICBJZiAxLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiAobG93ZXIgWikgd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlXG4gICAgICogICAgIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvbiAoaGlnaGVyIFopIHdpbGwgYmUgdXNlZC4gRGVmYXVsdCBpcyAwLlxuICAgICAqICAgICBVc2UgYSB7QGxpbmsgbW9kdWxlOm9sL2FycmF5fk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gZm9yIG1vcmUgcHJlY2lzZSBjb250cm9sLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUgdG8gY2hhbmdlIHRpbGUgWiBhdCB0aGUgbWlkcG9pbnQgb2Ygem9vbSBsZXZlbHNcbiAgICAgKiBgYGBqc1xuICAgICAqIGZ1bmN0aW9uKHZhbHVlLCBoaWdoLCBsb3cpIHtcbiAgICAgKiAgIHJldHVybiB2YWx1ZSAtIGxvdyAqIE1hdGguc3FydChoaWdoIC8gbG93KTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBaLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0WkZvclJlc29sdXRpb24gPSBmdW5jdGlvbiAocmVzb2x1dGlvbiwgb3B0X2RpcmVjdGlvbikge1xuICAgICAgICB2YXIgeiA9IGxpbmVhckZpbmROZWFyZXN0KHRoaXMucmVzb2x1dGlvbnNfLCByZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uIHx8IDApO1xuICAgICAgICByZXR1cm4gY2xhbXAoeiwgdGhpcy5taW5ab29tLCB0aGlzLm1heFpvb20pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudCBmb3IgdGhpcyB0aWxlIGdyaWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuY2FsY3VsYXRlVGlsZVJhbmdlc18gPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHZhciBsZW5ndGggPSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGg7XG4gICAgICAgIHZhciBmdWxsVGlsZVJhbmdlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciB6ID0gdGhpcy5taW5ab29tOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICAgICAgICAgIGZ1bGxUaWxlUmFuZ2VzW3pdID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mdWxsVGlsZVJhbmdlc18gPSBmdWxsVGlsZVJhbmdlcztcbiAgICB9O1xuICAgIHJldHVybiBUaWxlR3JpZDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBUaWxlR3JpZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVHcmlkLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZFxuICovXG5pbXBvcnQgQ29ybmVyIGZyb20gJy4vZXh0ZW50L0Nvcm5lci5qcyc7XG5pbXBvcnQgVGlsZUdyaWQgZnJvbSAnLi90aWxlZ3JpZC9UaWxlR3JpZC5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IERFRkFVTFRfTUFYX1pPT00sIERFRkFVTFRfVElMRV9TSVpFIH0gZnJvbSAnLi90aWxlZ3JpZC9jb21tb24uanMnO1xuaW1wb3J0IHsgTUVURVJTX1BFUl9VTklULCBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBjb250YWluc0Nvb3JkaW5hdGUsIGNyZWF0ZU9yVXBkYXRlLCBnZXRDb3JuZXIsIGdldEhlaWdodCwgZ2V0V2lkdGgsIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgdG9TaXplIH0gZnJvbSAnLi9zaXplLmpzJztcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IERlZmF1bHQgdGlsZSBncmlkIGZvciB0aGVcbiAqIHBhc3NlZCBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRpbGVHcmlkID0gcHJvamVjdGlvbi5nZXREZWZhdWx0VGlsZUdyaWQoKTtcbiAgICBpZiAoIXRpbGVHcmlkKSB7XG4gICAgICAgIHRpbGVHcmlkID0gY3JlYXRlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgcHJvamVjdGlvbi5zZXREZWZhdWx0VGlsZUdyaWQodGlsZUdyaWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGlsZUdyaWQ7XG59XG4vKipcbiAqIEBwYXJhbSB7VGlsZUdyaWR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKHRpbGVHcmlkLCB0aWxlQ29vcmQsIHByb2plY3Rpb24pIHtcbiAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICB2YXIgY2VudGVyID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGVDb29yZCk7XG4gICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAoIWNvbnRhaW5zQ29vcmRpbmF0ZShwcm9qZWN0aW9uRXh0ZW50LCBjZW50ZXIpKSB7XG4gICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgIHZhciB3b3JsZHNBd2F5ID0gTWF0aC5jZWlsKChwcm9qZWN0aW9uRXh0ZW50WzBdIC0gY2VudGVyWzBdKSAvIHdvcmxkV2lkdGgpO1xuICAgICAgICBjZW50ZXJbMF0gKz0gd29ybGRXaWR0aCAqIHdvcmxkc0F3YXk7XG4gICAgICAgIHJldHVybiB0aWxlR3JpZC5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFooY2VudGVyLCB6KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0aWxlQ29vcmQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfdGlsZVNpemVdIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC9Db3JuZXIuanNcIikuZGVmYXVsdH0gW29wdF9jb3JuZXJdIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JFeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfY29ybmVyKSB7XG4gICAgdmFyIGNvcm5lciA9IG9wdF9jb3JuZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9jb3JuZXIgOiBDb3JuZXIuVE9QX0xFRlQ7XG4gICAgdmFyIHJlc29sdXRpb25zID0gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSk7XG4gICAgcmV0dXJuIG5ldyBUaWxlR3JpZCh7XG4gICAgICAgIGV4dGVudDogZXh0ZW50LFxuICAgICAgICBvcmlnaW46IGdldENvcm5lcihleHRlbnQsIGNvcm5lciksXG4gICAgICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9ucyxcbiAgICAgICAgdGlsZVNpemU6IG9wdF90aWxlU2l6ZSxcbiAgICB9KTtcbn1cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gWFlaT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudCBmb3IgdGhlIHRpbGUgZ3JpZC4gVGhlIG9yaWdpbiBmb3IgYW4gWFlaIHRpbGUgZ3JpZCBpcyB0aGVcbiAqIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgZXh0ZW50LiBJZiBgbWF4UmVzb2x1dGlvbmAgaXMgbm90IHByb3ZpZGVkIHRoZSB6ZXJvIGxldmVsIG9mIHRoZSBncmlkIGlzIGRlZmluZWQgYnkgdGhlIHJlc29sdXRpb25cbiAqIGF0IHdoaWNoIG9uZSB0aWxlIGZpdHMgaW4gdGhlIHByb3ZpZGVkIGV4dGVudC4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZXh0ZW50IG9mIHRoZSBFUFNHOjM4NTcgcHJvamVjdGlvbiBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBSZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIE1heGltdW0gem9vbS4gVGhlIGRlZmF1bHQgaXMgYDQyYC4gVGhpcyBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgbGV2ZWxzXG4gKiBpbiB0aGUgZ3JpZCBzZXQuIEZvciBleGFtcGxlLCBhIGBtYXhab29tYCBvZiAyMSBtZWFucyB0aGVyZSBhcmUgMjIgbGV2ZWxzIGluIHRoZSBncmlkIHNldC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBNaW5pbXVtIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRpbGUgc2l6ZSBpbiBwaXhlbHMuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIHRpbGUgZ3JpZCB3aXRoIGEgc3RhbmRhcmQgWFlaIHRpbGluZyBzY2hlbWUuXG4gKiBAcGFyYW0ge1hZWk9wdGlvbnN9IFtvcHRfb3B0aW9uc10gVGlsZSBncmlkIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IFRpbGUgZ3JpZCBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVhZWihvcHRfb3B0aW9ucykge1xuICAgIHZhciB4eXpPcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgdmFyIGV4dGVudCA9IHh5ek9wdGlvbnMuZXh0ZW50IHx8IGdldFByb2plY3Rpb24oJ0VQU0c6Mzg1NycpLmdldEV4dGVudCgpO1xuICAgIHZhciBncmlkT3B0aW9ucyA9IHtcbiAgICAgICAgZXh0ZW50OiBleHRlbnQsXG4gICAgICAgIG1pblpvb206IHh5ek9wdGlvbnMubWluWm9vbSxcbiAgICAgICAgdGlsZVNpemU6IHh5ek9wdGlvbnMudGlsZVNpemUsXG4gICAgICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCB4eXpPcHRpb25zLm1heFpvb20sIHh5ek9wdGlvbnMudGlsZVNpemUsIHh5ek9wdGlvbnMubWF4UmVzb2x1dGlvbiksXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFRpbGVHcmlkKGdyaWRPcHRpb25zKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcmVzb2x1dGlvbnMgYXJyYXkgZnJvbSBhbiBleHRlbnQuICBBIHpvb20gZmFjdG9yIG9mIDIgaXMgYXNzdW1lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF90aWxlU2l6ZV0gVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9tYXhSZXNvbHV0aW9uXSBSZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uXG4gKiBAcmV0dXJuIHshQXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9tYXhSZXNvbHV0aW9uKSB7XG4gICAgdmFyIG1heFpvb20gPSBvcHRfbWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0X21heFpvb20gOiBERUZBVUxUX01BWF9aT09NO1xuICAgIHZhciBoZWlnaHQgPSBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgICB2YXIgd2lkdGggPSBnZXRXaWR0aChleHRlbnQpO1xuICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZShvcHRfdGlsZVNpemUgIT09IHVuZGVmaW5lZCA/IG9wdF90aWxlU2l6ZSA6IERFRkFVTFRfVElMRV9TSVpFKTtcbiAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IG9wdF9tYXhSZXNvbHV0aW9uID4gMFxuICAgICAgICA/IG9wdF9tYXhSZXNvbHV0aW9uXG4gICAgICAgIDogTWF0aC5tYXgod2lkdGggLyB0aWxlU2l6ZVswXSwgaGVpZ2h0IC8gdGlsZVNpemVbMV0pO1xuICAgIHZhciBsZW5ndGggPSBtYXhab29tICsgMTtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciB6ID0gMDsgeiA8IGxlbmd0aDsgKyt6KSB7XG4gICAgICAgIHJlc29sdXRpb25zW3pdID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KDIsIHopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb2x1dGlvbnM7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9tYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQvQ29ybmVyLmpzXCIpLmRlZmF1bHR9IFtvcHRfY29ybmVyXSBFeHRlbnQgY29ybmVyIChkZWZhdWx0IGlzIGAndG9wLWxlZnQnYCkuXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IFRpbGVHcmlkIGluc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uLCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfY29ybmVyKSB7XG4gICAgdmFyIGV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIHJldHVybiBjcmVhdGVGb3JFeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfY29ybmVyKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0aWxlIGdyaWQgZXh0ZW50IGZyb20gYSBwcm9qZWN0aW9uLiAgSWYgdGhlIHByb2plY3Rpb24gaGFzIGFuXG4gKiBleHRlbnQsIGl0IGlzIHVzZWQuICBJZiBub3QsIGEgZ2xvYmFsIGV4dGVudCBpcyBhc3N1bWVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIHByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIHZhciBleHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIGlmICghZXh0ZW50KSB7XG4gICAgICAgIHZhciBoYWxmID0gKDE4MCAqIE1FVEVSU19QRVJfVU5JVFtVbml0cy5ERUdSRUVTXSkgLyBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGUoLWhhbGYsIC1oYWxmLCBoYWxmLCBoYWxmKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbGVncmlkLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgU291cmNlIGZyb20gJy4vU291cmNlLmpzJztcbmltcG9ydCBUaWxlQ2FjaGUgZnJvbSAnLi4vVGlsZUNhY2hlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGVxdWl2YWxlbnQgfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGdldEtleVpYWSwgd2l0aGluRXh0ZW50QW5kWiB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBnZXRGb3JQcm9qZWN0aW9uIGFzIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiwgd3JhcFgsIH0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuaW1wb3J0IHsgc2NhbGUgYXMgc2NhbGVTaXplLCB0b1NpemUgfSBmcm9tICcuLi9zaXplLmpzJztcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL1RpbGVFdmVudFR5cGVcIikuVGlsZVNvdXJjZUV2ZW50VHlwZXMsIFRpbGVTb3VyY2VFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgIGltcG9ydChcIi4vVGlsZUV2ZW50VHlwZVwiKS5UaWxlU291cmNlRXZlbnRUeXBlcywgUmV0dXJuPn0gVGlsZVNvdXJjZU9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gQ2FjaGVTaXplLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvXSBUaWxlUGl4ZWxSYXRpby5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlXSBTdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlR3JpZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdyYXBYLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXSBUcmFuc2l0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXldIEtleS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW3pEaXJlY3Rpb249MF0gWkRpcmVjdGlvbi5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciBzb3VyY2VzIHByb3ZpZGluZyBpbWFnZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkLlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlU291cmNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBTb3VyY2VUaWxlIHNvdXJjZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVTb3VyY2Uob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7VGlsZVNvdXJjZU9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7VGlsZVNvdXJjZU9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9wYXF1ZV8gPSBvcHRpb25zLm9wYXF1ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFxdWUgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUGl4ZWxSYXRpb18gPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVHcmlkIDogbnVsbDtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gWzI1NiwgMjU2XTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZDtcbiAgICAgICAgaWYgKHRpbGVHcmlkKSB7XG4gICAgICAgICAgICB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUodGlsZUdyaWQuZ2V0TWluWm9vbSgpKSwgdGlsZVNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDYWNoZSA9IG5ldyBUaWxlQ2FjaGUob3B0aW9ucy5jYWNoZVNpemUgfHwgMCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBTaXplID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleV8gPSBvcHRpb25zLmtleSB8fCAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuT3B0aW9uc31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVPcHRpb25zID0geyB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24gfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHpEaXJlY3Rpb24gaGludCwgcmVhZCBieSB0aGUgcmVuZGVyZXIuIEluZGljYXRlcyB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXdzIHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAgICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgICAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuekRpcmVjdGlvbiA9IG9wdGlvbnMuekRpcmVjdGlvbiA/IG9wdGlvbnMuekRpcmVjdGlvbiA6IDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHVzZWRUaWxlcykge1xuICAgICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGlsZUNhY2hlKSB7XG4gICAgICAgICAgICB0aWxlQ2FjaGUuZXhwaXJlQ2FjaGUodXNlZFRpbGVzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQpOihib29sZWFufHZvaWQpfSBjYWxsYmFjayBDYWxsZWQgd2l0aCBlYWNoXG4gICAgICogICAgIGxvYWRlZCB0aWxlLiAgSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYGZhbHNlYCwgdGhlIHRpbGUgd2lsbCBub3QgYmVcbiAgICAgKiAgICAgY29uc2lkZXJlZCBsb2FkZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgcmFuZ2UgaXMgZnVsbHkgY292ZXJlZCB3aXRoIGxvYWRlZCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5mb3JFYWNoTG9hZGVkVGlsZSA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uLCB6LCB0aWxlUmFuZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICghdGlsZUNhY2hlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvdmVyZWQgPSB0cnVlO1xuICAgICAgICB2YXIgdGlsZSwgdGlsZUNvb3JkS2V5LCBsb2FkZWQ7XG4gICAgICAgIGZvciAodmFyIHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgICAgICAgIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICAgICAgICAgICAgICBsb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZSA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRpbGVDYWNoZS5nZXQodGlsZUNvb3JkS2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZCA9IHRpbGUuZ2V0U3RhdGUoKSA9PT0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gY2FsbGJhY2sodGlsZSkgIT09IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvdmVyZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBrZXkgdG8gYmUgdXNlZCBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsdWUgdG8gYmUgdXNlZCBhcyB0aGUga2V5IGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgZm9yIHRpbGVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5zZXRLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLmtleV8gIT09IGtleSkge1xuICAgICAgICAgICAgdGhpcy5rZXlfID0ga2V5O1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBPcGFxdWUuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0T3BhcXVlID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BhcXVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZC5nZXRSZXNvbHV0aW9ucygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIGdyaWQgb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaWxlIGdyaWQuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpbGVHcmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH0gVGlsZSBjYWNoZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGFzc2VydChlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSwgNjggLy8gQSBWZWN0b3JUaWxlIHNvdXJjZSBjYW4gb25seSBiZSByZW5kZXJlZCBpZiBpdCBoYXMgYSBwcm9qZWN0aW9uIGNvbXBhdGlibGUgd2l0aCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgcGl4ZWwgcmF0aW8gZm9yIHRoaXMgc291cmNlLiBTdWJjbGFzc2VzIG1heSBvdmVycmlkZSB0aGlzXG4gICAgICogbWV0aG9kLCB3aGljaCBpcyBtZWFudCB0byByZXR1cm4gYSBzdXBwb3J0ZWQgcGl4ZWwgcmF0aW8gdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHByb3ZpZGVkIGBwaXhlbFJhdGlvYCBhcyBjbG9zZSBhcyBwb3NzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcGl4ZWwgcmF0aW8uXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZVBpeGVsUmF0aW8gPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlUGl4ZWxSYXRpb187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlUGl4ZWxTaXplID0gZnVuY3Rpb24gKHosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciB0aWxlUGl4ZWxSYXRpbyA9IHRoaXMuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplKTtcbiAgICAgICAgaWYgKHRpbGVQaXhlbFJhdGlvID09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aWxlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzY2FsZVNpemUodGlsZVNpemUsIHRpbGVQaXhlbFJhdGlvLCB0aGlzLnRtcFNpemUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdGlsZSBjb29yZGluYXRlIHdyYXBwZWQgYXJvdW5kIHRoZSB4LWF4aXMuIFdoZW4gdGhlIHRpbGUgY29vcmRpbmF0ZVxuICAgICAqIGlzIG91dHNpZGUgdGhlIHJlc29sdXRpb24gYW5kIGV4dGVudCByYW5nZSBvZiB0aGUgdGlsZSBncmlkLCBgbnVsbGAgd2lsbCBiZVxuICAgICAqIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBbb3B0X3Byb2plY3Rpb25dIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlIHRvIGJlIHBhc3NlZCB0byB0aGUgdGlsZVVybEZ1bmN0aW9uIG9yXG4gICAgICogICAgIG51bGwgaWYgbm8gdGlsZSBVUkwgc2hvdWxkIGJlIGNyZWF0ZWQgZm9yIHRoZSBwYXNzZWQgYHRpbGVDb29yZGAuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgb3B0X3Byb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aGlzLmdldFdyYXBYKCkgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgICAgICAgICB0aWxlQ29vcmQgPSB3cmFwWCh0aWxlR3JpZCwgdGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2l0aGluRXh0ZW50QW5kWih0aWxlQ29vcmQsIHRpbGVHcmlkKSA/IHRpbGVDb29yZCA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGNhY2hlZCB0aWxlcyBmcm9tIHRoZSBzb3VyY2UuIFRoZSBuZXh0IHJlbmRlciBjeWNsZSB3aWxsIGZldGNoIG5ldyB0aWxlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLmNsZWFyKCk7XG4gICAgfTtcbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVmcmVzaC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5jcmVhc2VzIHRoZSBjYWNoZSBzaXplIGlmIG5lZWRlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlQ291bnQgTWluaW11bSBudW1iZXIgb2YgdGlsZXMgbmVlZGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS51cGRhdGVDYWNoZVNpemUgPSBmdW5jdGlvbiAodGlsZUNvdW50LCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlQ291bnQgPiB0aWxlQ2FjaGUuaGlnaFdhdGVyTWFyaykge1xuICAgICAgICAgICAgdGlsZUNhY2hlLmhpZ2hXYXRlck1hcmsgPSB0aWxlQ291bnQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS51c2VUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHByb2plY3Rpb24pIHsgfTtcbiAgICByZXR1cm4gVGlsZVNvdXJjZTtcbn0oU291cmNlKSk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGV+VGlsZVNvdXJjZX0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqL1xudmFyIFRpbGVTb3VyY2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZVNvdXJjZUV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGhlIHRpbGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVNvdXJjZUV2ZW50KHR5cGUsIHRpbGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aWxlIHJlbGF0ZWQgdG8gdGhlIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlID0gdGlsZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gVGlsZVNvdXJjZUV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgVGlsZVNvdXJjZUV2ZW50IH07XG5leHBvcnQgZGVmYXVsdCBUaWxlU291cmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZXVybGZ1bmN0aW9uXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgaGFzaCBhcyB0aWxlQ29vcmRIYXNoIH0gZnJvbSAnLi90aWxlY29vcmQuanMnO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGVtcGxhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgdGlsZUdyaWQpIHtcbiAgICB2YXIgelJlZ0V4ID0gL1xce3pcXH0vZztcbiAgICB2YXIgeFJlZ0V4ID0gL1xce3hcXH0vZztcbiAgICB2YXIgeVJlZ0V4ID0gL1xce3lcXH0vZztcbiAgICB2YXIgZGFzaFlSZWdFeCA9IC9cXHsteVxcfS9nO1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHpSZWdFeCwgdGlsZUNvb3JkWzBdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoeFJlZ0V4LCB0aWxlQ29vcmRbMV0udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSh5UmVnRXgsIHRpbGVDb29yZFsyXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGRhc2hZUmVnRXgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aWxlR3JpZC5nZXRGdWxsVGlsZVJhbmdlKHopO1xuICAgICAgICAgICAgICAgIGFzc2VydChyYW5nZSwgNTUpOyAvLyBUaGUgey15fSBwbGFjZWhvbGRlciByZXF1aXJlcyBhIHRpbGUgZ3JpZCB3aXRoIGV4dGVudFxuICAgICAgICAgICAgICAgIHZhciB5ID0gcmFuZ2UuZ2V0SGVpZ2h0KCkgLSB0aWxlQ29vcmRbMl0gLSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiB5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHRlbXBsYXRlcyBUZW1wbGF0ZXMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZXModGVtcGxhdGVzLCB0aWxlR3JpZCkge1xuICAgIHZhciBsZW4gPSB0ZW1wbGF0ZXMubGVuZ3RoO1xuICAgIHZhciB0aWxlVXJsRnVuY3Rpb25zID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB0aWxlVXJsRnVuY3Rpb25zW2ldID0gY3JlYXRlRnJvbVRlbXBsYXRlKHRlbXBsYXRlc1tpXSwgdGlsZUdyaWQpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnModGlsZVVybEZ1bmN0aW9ucyk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9uPn0gdGlsZVVybEZ1bmN0aW9ucyBUaWxlIFVSTCBGdW5jdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnModGlsZVVybEZ1bmN0aW9ucykge1xuICAgIGlmICh0aWxlVXJsRnVuY3Rpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdGlsZVVybEZ1bmN0aW9uc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGggPSB0aWxlQ29vcmRIYXNoKHRpbGVDb29yZCk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBtb2R1bG8oaCwgdGlsZVVybEZ1bmN0aW9ucy5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbaW5kZXhdKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBudWxsVGlsZVVybEZ1bmN0aW9uKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMLlxuICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gQXJyYXkgb2YgdXJscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFVybCh1cmwpIHtcbiAgICB2YXIgdXJscyA9IFtdO1xuICAgIHZhciBtYXRjaCA9IC9cXHsoW2Etel0pLShbYS16XSlcXH0vLmV4ZWModXJsKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgLy8gY2hhciByYW5nZVxuICAgICAgICB2YXIgc3RhcnRDaGFyQ29kZSA9IG1hdGNoWzFdLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHZhciBzdG9wQ2hhckNvZGUgPSBtYXRjaFsyXS5jaGFyQ29kZUF0KDApO1xuICAgICAgICB2YXIgY2hhckNvZGUgPSB2b2lkIDA7XG4gICAgICAgIGZvciAoY2hhckNvZGUgPSBzdGFydENoYXJDb2RlOyBjaGFyQ29kZSA8PSBzdG9wQ2hhckNvZGU7ICsrY2hhckNvZGUpIHtcbiAgICAgICAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJscztcbiAgICB9XG4gICAgbWF0Y2ggPSAvXFx7KFxcZCspLShcXGQrKVxcfS8uZXhlYyh1cmwpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgICAvLyBudW1iZXIgcmFuZ2VcbiAgICAgICAgdmFyIHN0b3BfMSA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSBwYXJzZUludChtYXRjaFsxXSwgMTApOyBpIDw9IHN0b3BfMTsgaSsrKSB7XG4gICAgICAgICAgICB1cmxzLnB1c2godXJsLnJlcGxhY2UobWF0Y2hbMF0sIGkudG9TdHJpbmcoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmxzO1xuICAgIH1cbiAgICB1cmxzLnB1c2godXJsKTtcbiAgICByZXR1cm4gdXJscztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbGV1cmxmdW5jdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9VcmxUaWxlXG4gKi9cbmltcG9ydCBUaWxlRXZlbnRUeXBlIGZyb20gJy4vVGlsZUV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVNvdXJjZSwgeyBUaWxlU291cmNlRXZlbnQgfSBmcm9tICcuL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlRnJvbVRlbXBsYXRlcywgZXhwYW5kVXJsIH0gZnJvbSAnLi4vdGlsZXVybGZ1bmN0aW9uLmpzJztcbmltcG9ydCB7IGdldEtleVpYWSB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi91dGlsLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gQ2FjaGUgc2l6ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFN0YXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGVHcmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvbiBUaWxlTG9hZEZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb10gVGlsZVBpeGVsUmF0aW8uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIFRpbGVVcmxGdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVcmwuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBVcmxzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIFRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gS2V5LlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXSBaRGlyZWN0aW9uLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIHRpbGVzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZCBvdmVyIGh0dHAuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqL1xudmFyIFVybFRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFVybFRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIEltYWdlIHRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBVcmxUaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICAgICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgICAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICAgICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyA9XG4gICAgICAgICAgICBfdGhpcy50aWxlVXJsRnVuY3Rpb24gPT09IFVybFRpbGUucHJvdG90eXBlLnRpbGVVcmxGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUxvYWRGdW5jdGlvbiA9IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgaWYgKG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy50aWxlVXJsRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PHN0cmluZz58bnVsbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVybHMgPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy51cmxzKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRVcmxzKG9wdGlvbnMudXJscyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFVybChvcHRpb25zLnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZGluZ0tleXNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIGxvYWQgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gVGlsZUxvYWRGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlTG9hZEZ1bmN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIFVSTCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGVVcmxGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykudGlsZVVybEZ1bmN0aW9uID09PSB0aGlzLnRpbGVVcmxGdW5jdGlvblxuICAgICAgICAgICAgPyB0aGlzLnRpbGVVcmxGdW5jdGlvbi5iaW5kKHRoaXMpXG4gICAgICAgICAgICA6IHRoaXMudGlsZVVybEZ1bmN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBVUkxzIHVzZWQgZm9yIHRoaXMgc291cmNlLlxuICAgICAqIFdoZW4gYSB0aWxlVXJsRnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIHVybCBvciB1cmxzLFxuICAgICAqIG51bGwgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPnxudWxsfSBVUkxzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRVcmxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmxzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRpbGUgY2hhbmdlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aWxlKTtcbiAgICAgICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIGlmICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIHR5cGUgPSBUaWxlRXZlbnRUeXBlLlRJTEVMT0FEU1RBUlQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodWlkIGluIHRoaXMudGlsZUxvYWRpbmdLZXlzXykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdO1xuICAgICAgICAgICAgdHlwZSA9XG4gICAgICAgICAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUlxuICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFUlJPUlxuICAgICAgICAgICAgICAgICAgICA6IHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFTkRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSB0aWxlVXJsRnVuY3Rpb24gVGlsZSBVUkwgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtrZXldIE9wdGlvbmFsIG5ldyB0aWxlIGtleSBmb3IgdGhlIHNvdXJjZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVVcmxGdW5jdGlvbiwga2V5KSB7XG4gICAgICAgIHRoaXMudGlsZVVybEZ1bmN0aW9uID0gdGlsZVVybEZ1bmN0aW9uO1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5wcnVuZUV4Y2VwdE5ld2VzdFooKTtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgVVJMIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnNldFVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIHVybHMgPSBleHBhbmRVcmwodXJsKTtcbiAgICAgICAgdGhpcy51cmxzID0gdXJscztcbiAgICAgICAgdGhpcy5zZXRVcmxzKHVybHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBVUkxzIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSB1cmxzIFVSTHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnNldFVybHMgPSBmdW5jdGlvbiAodXJscykge1xuICAgICAgICB0aGlzLnVybHMgPSB1cmxzO1xuICAgICAgICB2YXIga2V5ID0gdXJscy5qb2luKCdcXG4nKTtcbiAgICAgICAgaWYgKHRoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRpbGVVcmxGdW5jdGlvbihjcmVhdGVGcm9tVGVtcGxhdGVzKHVybHMsIHRoaXMudGlsZUdyaWQpLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRLZXkoa2V5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS50aWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYXJrcyBhIHRpbGUgY29vcmQgYXMgYmVpbmcgdXNlZCwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgbG9hZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS51c2VUaWxlID0gZnVuY3Rpb24gKHosIHgsIHkpIHtcbiAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICAgICAgaWYgKHRoaXMudGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVXJsVGlsZTtcbn0oVGlsZVNvdXJjZSkpO1xuZXhwb3J0IGRlZmF1bHQgVXJsVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVybFRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBzdGFydHMgbG9hZGluZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZHN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRJTEVMT0FEU1RBUlQ6ICd0aWxlbG9hZHN0YXJ0JyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRpbGUgZmluaXNoZXMgbG9hZGluZywgZWl0aGVyIHdoZW4gaXRzIGRhdGEgaXMgbG9hZGVkLFxuICAgICAqIG9yIHdoZW4gbG9hZGluZyB3YXMgYWJvcnRlZCBiZWNhdXNlIHRoZSB0aWxlIGlzIG5vIGxvbmdlciBuZWVkZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlbmRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURFTkQ6ICd0aWxlbG9hZGVuZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGlmIHRpbGUgbG9hZGluZyByZXN1bHRzIGluIGFuIGVycm9yLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2FkZXJyb3JcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURFUlJPUjogJ3RpbGVsb2FkZXJyb3InLFxufTtcbi8qKlxuICogQHR5cGVkZWYgeyd0aWxlbG9hZHN0YXJ0J3wndGlsZWxvYWRlbmQnfCd0aWxlbG9hZGVycm9yJ30gVGlsZVNvdXJjZUV2ZW50VHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUV2ZW50VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlSW1hZ2VcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZVRpbGUgZnJvbSAnLi4vSW1hZ2VUaWxlLmpzJztcbmltcG9ydCBSZXByb2pUaWxlIGZyb20gJy4uL3JlcHJvai9UaWxlLmpzJztcbmltcG9ydCBUaWxlQ2FjaGUgZnJvbSAnLi4vVGlsZUNhY2hlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBVcmxUaWxlIGZyb20gJy4vVXJsVGlsZS5qcyc7XG5pbXBvcnQgeyBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB9IGZyb20gJy4uL3JlcHJvai9jb21tb24uanMnO1xuaW1wb3J0IHsgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIH0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IHsgZXF1aXZhbGVudCwgZ2V0IGFzIGdldFByb2plY3Rpb24gfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGdldEtleSwgZ2V0S2V5WlhZIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIH0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIEluaXRpYWwgdGlsZSBjYWNoZSBzaXplLiBXaWxsIGF1dG8tZ3JvdyB0byBob2xkIGF0IGxlYXN0IHRoZSBudW1iZXIgb2YgdGlsZXMgaW4gdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbWFnZVNtb290aGluZz10cnVlXSBFbmFibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLiBEZWZhdWx0IGlzIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFNvdXJjZSBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7dHlwZW9mIGltcG9ydChcIi4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSBbdGlsZUNsYXNzXSBDbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGltYWdlIHRpbGVzLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlVGlsZX5JbWFnZVRpbGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZVxuICogc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGdldCB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF0gVVJMIHRlbXBsYXRlLiBNdXN0IGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCwgYW5kIGB7en1gIHBsYWNlaG9sZGVycy5cbiAqIEEgYHs/LT99YCB0ZW1wbGF0ZSBwYXR0ZXJuLCBmb3IgZXhhbXBsZSBgc3ViZG9tYWlue2EtZn0uZG9tYWluLmNvbWAsIG1heSBiZVxuICogdXNlZCBpbnN0ZWFkIG9mIGRlZmluaW5nIGVhY2ggb25lIHNlcGFyYXRlbHkgaW4gdGhlIGB1cmxzYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBBbiBhcnJheSBvZiBVUkwgdGVtcGxhdGVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFhdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LiBUaGUgZGVmYXVsdCwgaXMgdG9cbiAqIHJlcXVlc3Qgb3V0LW9mLWJvdW5kcyB0aWxlcyBmcm9tIHRoZSBzZXJ2ZXIuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIG9ubHkgb25lXG4gKiB3b3JsZCB3aWxsIGJlIHJlbmRlcmVkLiBXaGVuIHNldCB0byBgdHJ1ZWAsIHRpbGVzIHdpbGwgYmUgcmVxdWVzdGVkIGZvciBvbmVcbiAqIHdvcmxkIG9ubHksIGJ1dCB0aGV5IHdpbGwgYmUgd3JhcHBlZCBob3Jpem9udGFsbHkgdG8gcmVuZGVyIG11bHRpcGxlIHdvcmxkcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBPcHRpb25hbCB0aWxlIGtleSBmb3IgcHJvcGVyIGNhY2hlIGZldGNoaW5nXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVJbWFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUltYWdlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IU9wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVJbWFnZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgdGlsZUdyaWQ6IG9wdGlvbnMudGlsZUdyaWQsXG4gICAgICAgICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb25cbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvblxuICAgICAgICAgICAgICAgIDogZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICAgICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHs/c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3Jvc3NPcmlnaW4gPVxuICAgICAgICAgICAgb3B0aW9ucy5jcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jcm9zc09yaWdpbiA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHt0eXBlb2YgSW1hZ2VUaWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNsYXNzID1cbiAgICAgICAgICAgIG9wdGlvbnMudGlsZUNsYXNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVDbGFzcyA6IEltYWdlVGlsZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBUaWxlQ2FjaGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyA9IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHRPcHRpb25zXyA9XG4gICAgICAgICAgICBvcHRpb25zLmltYWdlU21vb3RoaW5nID09PSBmYWxzZSA/IElNQUdFX1NNT09USElOR19ESVNBQkxFRCA6IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2tleV0uY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHVzZWRUaWxlcykge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmV4cGlyZUNhY2hlLmNhbGwodGhpcywgcHJvamVjdGlvbiwgdXNlZFRpbGVzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXNlZFRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuZXhwaXJlQ2FjaGUodGhpcy50aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXTtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH0gQ29udGV4dCBvcHRpb25zLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0Q29udGV4dE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHRPcHRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldEd1dHRlckZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmXG4gICAgICAgICAgICBwcm9qZWN0aW9uICYmXG4gICAgICAgICAgICAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R3V0dGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUga2V5IHRvIGJlIHVzZWQgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGtleSBmb3IgYWxsIHRpbGVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChfc3VwZXIucHJvdG90eXBlLmdldEtleS5jYWxsKHRoaXMpICtcbiAgICAgICAgICAgICh0aGlzLmNvbnRleHRPcHRpb25zXyA/ICdcXG4nICsgSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0T3B0aW9uc18pIDogJycpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBPcGFxdWUuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmXG4gICAgICAgICAgICBwcm9qZWN0aW9uICYmXG4gICAgICAgICAgICAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldE9wYXF1ZS5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbi5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aGlzUHJvaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAodGhpcy50aWxlR3JpZCAmJiAoIXRoaXNQcm9qIHx8IGVxdWl2YWxlbnQodGhpc1Byb2osIHByb2plY3Rpb24pKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0gPVxuICAgICAgICAgICAgICAgICAgICBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH0gVGlsZSBjYWNoZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW3Byb2pLZXldID0gbmV3IFRpbGVDYWNoZSh0aGlzLnRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgc2V0IG9uIHRoZSB0aWxlLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmNyZWF0ZVRpbGVfID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkID0gW3osIHgsIHldO1xuICAgICAgICB2YXIgdXJsVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVVcmwgPSB1cmxUaWxlQ29vcmRcbiAgICAgICAgICAgID8gdGhpcy50aWxlVXJsRnVuY3Rpb24odXJsVGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB0aWxlID0gbmV3IHRoaXMudGlsZUNsYXNzKHRpbGVDb29yZCwgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gVGlsZVN0YXRlLklETEUgOiBUaWxlU3RhdGUuRU1QVFksIHRpbGVVcmwgIT09IHVuZGVmaW5lZCA/IHRpbGVVcmwgOiAnJywgdGhpcy5jcm9zc09yaWdpbiwgdGhpcy50aWxlTG9hZEZ1bmN0aW9uLCB0aGlzLnRpbGVPcHRpb25zKTtcbiAgICAgICAgdGlsZS5rZXkgPSBrZXk7XG4gICAgICAgIHRpbGUuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVRpbGVDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB8fFxuICAgICAgICAgICAgIXNvdXJjZVByb2plY3Rpb24gfHxcbiAgICAgICAgICAgICFwcm9qZWN0aW9uIHx8XG4gICAgICAgICAgICBlcXVpdmFsZW50KHNvdXJjZVByb2plY3Rpb24sIHByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbiB8fCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgICAgICAgICB2YXIgdGlsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciB0aWxlQ29vcmRLZXkgPSBnZXRLZXkodGlsZUNvb3JkKTtcbiAgICAgICAgICAgIGlmIChjYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGlsZSA9IGNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAodGlsZSAmJiB0aWxlLmtleSA9PSBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHNvdXJjZVByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3VGlsZSA9IG5ldyBSZXByb2pUaWxlKHNvdXJjZVByb2plY3Rpb24sIHNvdXJjZVRpbGVHcmlkLCBwcm9qZWN0aW9uLCB0YXJnZXRUaWxlR3JpZCwgdGlsZUNvb3JkLCB3cmFwcGVkVGlsZUNvb3JkLCB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pLCB0aGlzLmdldEd1dHRlcigpLCBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXywgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18sIHRoaXMuY29udGV4dE9wdGlvbnNfKTtcbiAgICAgICAgICAgICAgICBuZXdUaWxlLmtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdUaWxlLmludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnJlcGxhY2UodGlsZUNvb3JkS2V5LCBuZXdUaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldCh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVJbnRlcm5hbCA9IGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciB0aWxlID0gbnVsbDtcbiAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgICAgIGlmICghdGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlLnNldCh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZSA9IHRoaXMudGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgICAgICAgaWYgKHRpbGUua2V5ICE9IGtleSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBzb3VyY2UncyBwYXJhbXMgY2hhbmdlZC4gSWYgdGhlIHRpbGUgaGFzIGFuIGludGVyaW0gdGlsZSBhbmQgaWYgd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gdXNlIGl0IHRoZW4gd2UgdXNlIGl0LiBPdGhlcndpc2Ugd2UgY3JlYXRlIGEgbmV3IHRpbGUuICBJbiBib3RoXG4gICAgICAgICAgICAgICAgLy8gY2FzZXMgd2UgYXR0ZW1wdCB0byBhc3NpZ24gYW4gaW50ZXJpbSB0aWxlIHRvIHRoZSBuZXcgdGlsZS5cbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgICAgICAgICAgIHRpbGUgPSB0aGlzLmNyZWF0ZVRpbGVfKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSk7XG4gICAgICAgICAgICAgICAgLy9tYWtlIHRoZSBuZXcgdGlsZSB0aGUgaGVhZCBvZiB0aGUgbGlzdCxcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJpbVRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgICAgICAvL3RoZSBvbGQgdGlsZSBoYXNuJ3QgYmVndW4gbG9hZGluZyB5ZXQsIGFuZCBpcyBub3cgb3V0ZGF0ZWQsIHNvIHdlIGNhbiBzaW1wbHkgZGlzY2FyZCBpdFxuICAgICAgICAgICAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gaW50ZXJpbVRpbGUuaW50ZXJpbVRpbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gaW50ZXJpbVRpbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRpbGUucmVmcmVzaEludGVyaW1DaGFpbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlLnJlcGxhY2UodGlsZUNvb3JkS2V5LCB0aWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgd2hldGhlciB0byByZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzIG9yIG5vdCAodXN1YWxseSBmb3IgZGVidWdnaW5nKS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlbmRlciBSZW5kZXIgdGhlIGVkZ2VzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLnNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzID0gZnVuY3Rpb24gKHJlbmRlcikge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICAgICB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyA9PSByZW5kZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyA9IHJlbmRlcjtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0aWxlIGdyaWQgdG8gdXNlIHdoZW4gcmVwcm9qZWN0aW5nIHRoZSB0aWxlcyB0byB0aGUgZ2l2ZW5cbiAgICAgKiBwcm9qZWN0aW9uIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgdGlsZSBncmlkIGZvciB0aGUgcHJvamVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHRoZSBkZWZhdWx0IHRpbGUgZ3JpZCBjYW5ub3QgYmUgY3JlYXRlZFxuICAgICAqIChlLmcuIHByb2plY3Rpb24gaGFzIG5vIGV4dGVudCBkZWZpbmVkKSBvclxuICAgICAqIGZvciBvcHRpbWl6YXRpb24gcmVhc29ucyAoY3VzdG9tIHRpbGUgc2l6ZSwgcmVzb2x1dGlvbnMsIC4uLikuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVncmlkIFRpbGUgZ3JpZCB0byB1c2UgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLnNldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uLCB0aWxlZ3JpZCkge1xuICAgICAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHZhciBwcm9qID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChwcm9qKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvaik7XG4gICAgICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0gPSB0aWxlZ3JpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaWxlSW1hZ2U7XG59KFVybFRpbGUpKTtcbi8qKlxuICogQHBhcmFtIHtJbWFnZVRpbGV9IGltYWdlVGlsZSBJbWFnZSB0aWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTb3VyY2UuXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRUaWxlTG9hZEZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gICAgLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChpbWFnZVRpbGUuZ2V0SW1hZ2UoKSkuc3JjID1cbiAgICAgICAgc3JjO1xufVxuZXhwb3J0IGRlZmF1bHQgVGlsZUltYWdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUltYWdlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvWFlaXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgVGlsZUltYWdlIGZyb20gJy4vVGlsZUltYWdlLmpzJztcbmltcG9ydCB7IGNyZWF0ZVhZWiwgZXh0ZW50RnJvbVByb2plY3Rpb24gfSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIEluaXRpYWwgdGlsZSBjYWNoZSBzaXplLiBXaWxsIGF1dG8tZ3JvdyB0byBob2xkIGF0IGxlYXN0IHRoZSBudW1iZXIgb2YgdGlsZXMgaW4gdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbWFnZVNtb290aGluZz10cnVlXSBFbmFibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209NDJdIE9wdGlvbmFsIG1heCB6b29tIGxldmVsLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE9wdGlvbmFsIG1pbiB6b29tIGxldmVsLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBPcHRpb25hbCB0aWxlIGdyaWQgcmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuXG4gKiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGUgc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZT1bMjU2LCAyNTZdXSBUaGUgdGlsZSBzaXplIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGdldFxuICogdGlsZSBVUkwgZ2l2ZW4gYSB0aWxlIGNvb3JkaW5hdGUgYW5kIHRoZSBwcm9qZWN0aW9uLlxuICogUmVxdWlyZWQgaWYgYHVybGAgb3IgYHVybHNgIGFyZSBub3QgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF0gVVJMIHRlbXBsYXRlLiBNdXN0IGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCxcbiAqIGFuZCBge3p9YCBwbGFjZWhvbGRlcnMuIEEgYHs/LT99YCB0ZW1wbGF0ZSBwYXR0ZXJuLCBmb3IgZXhhbXBsZSBgc3ViZG9tYWlue2EtZn0uZG9tYWluLmNvbWAsXG4gKiBtYXkgYmUgdXNlZCBpbnN0ZWFkIG9mIGRlZmluaW5nIGVhY2ggb25lIHNlcGFyYXRlbHkgaW4gdGhlIGB1cmxzYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBBbiBhcnJheSBvZiBVUkwgdGVtcGxhdGVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV2hldGhlciB0byB3cmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb249MjUwXSBEdXJhdGlvbiBvZiB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uIGZvciByZW5kZXJpbmcuXG4gKiBUbyBkaXNhYmxlIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24sIHBhc3MgYHRyYW5zaXRpb246IDBgLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXVxuICogQ2hvb3NlIHdoZXRoZXIgdG8gdXNlIHRpbGVzIHdpdGggYSBoaWdoZXIgb3IgbG93ZXIgem9vbSBsZXZlbCB3aGVuIGJldHdlZW4gaW50ZWdlclxuICogem9vbSBsZXZlbHMuIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3RpbGVncmlkL1RpbGVHcmlkflRpbGVHcmlkI2dldFpGb3JSZXNvbHV0aW9ufS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMYXllciBzb3VyY2UgZm9yIHRpbGUgZGF0YSB3aXRoIFVSTHMgaW4gYSBzZXQgWFlaIGZvcm1hdCB0aGF0IGFyZVxuICogZGVmaW5lZCBpbiBhIFVSTCB0ZW1wbGF0ZS4gQnkgZGVmYXVsdCwgdGhpcyBmb2xsb3dzIHRoZSB3aWRlbHktdXNlZFxuICogR29vZ2xlIGdyaWQgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgdG9wIGxlZnQuIEdyaWRzIGxpa2VcbiAqIFRNUyB3aGVyZSBgeGAgMCBhbmQgYHlgIDAgYXJlIGluIHRoZSBib3R0b20gbGVmdCBjYW4gYmUgdXNlZCBieVxuICogdXNpbmcgdGhlIGB7LXl9YCBwbGFjZWhvbGRlciBpbiB0aGUgVVJMIHRlbXBsYXRlLCBzbyBsb25nIGFzIHRoZVxuICogc291cmNlIGRvZXMgbm90IGhhdmUgYSBjdXN0b20gdGlsZSBncmlkLiBJbiB0aGlzIGNhc2VcbiAqIGEgYHRpbGVVcmxGdW5jdGlvbmAgY2FuIGJlIHVzZWQsIHN1Y2ggYXM6XG4gKiBgYGBqc1xuICogIHRpbGVVcmxGdW5jdGlvbjogZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xuICogICAgcmV0dXJuICdodHRwOi8vbWFwc2VydmVyLmNvbS8nICsgY29vcmRpbmF0ZVswXSArICcvJyArXG4gKiAgICAgIGNvb3JkaW5hdGVbMV0gKyAnLycgKyAoLWNvb3JkaW5hdGVbMl0gLSAxKSArICcucG5nJztcbiAqICB9XG4gKiBgYGBcbiAqIEBhcGlcbiAqL1xudmFyIFhZWiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoWFlaLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBYWVogb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBYWVoob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy50aWxlR3JpZFxuICAgICAgICAgICAgOiBjcmVhdGVYWVooe1xuICAgICAgICAgICAgICAgIGV4dGVudDogZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbiksXG4gICAgICAgICAgICAgICAgbWF4UmVzb2x1dGlvbjogb3B0aW9ucy5tYXhSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIG1heFpvb206IG9wdGlvbnMubWF4Wm9vbSxcbiAgICAgICAgICAgICAgICBtaW5ab29tOiBvcHRpb25zLm1pblpvb20sXG4gICAgICAgICAgICAgICAgdGlsZVNpemU6IG9wdGlvbnMudGlsZVNpemUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBvcHRpb25zLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgaW1hZ2VTbW9vdGhpbmc6IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbixcbiAgICAgICAgICAgIHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOiBvcHRpb25zLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLFxuICAgICAgICAgICAgdGlsZUdyaWQ6IHRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB0aWxlVXJsRnVuY3Rpb246IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLFxuICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgICAgIHVybHM6IG9wdGlvbnMudXJscyxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgICAgICAgekRpcmVjdGlvbjogb3B0aW9ucy56RGlyZWN0aW9uLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBYWVo7XG59KFRpbGVJbWFnZSkpO1xuZXhwb3J0IGRlZmF1bHQgWFlaO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9WFlaLmpzLm1hcCIsImltcG9ydCBYWVpTb3VyY2UgZnJvbSAnb2wvc291cmNlL1hZWi5qcyc7XHJcblxyXG4vKipcclxuICpcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmFyaWFudHMge1xyXG4gIFt2YXJpYW50OiBzdHJpbmddOiBzdHJpbmdcclxufVxyXG5cclxuLyoqXHJcbiAqIEF2YWlsYWJsZSBCYXNlbWFwIHZhcmlhbnRzXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVkFSSUFOVFM6IFZhcmlhbnRzID0ge1xyXG4gIGdlb2xhbmRiYXNlbWFwOiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2dlb2xhbmRiYXNlbWFwL25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LnBuZycsXHJcbiAgYm1hcGdyYXU6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcGdyYXUvbm9ybWFsL2dvb2dsZTM4NTcve3p9L3t5fS97eH0ucG5nJyxcclxuICBibWFwb3J0aG9mb3RvMzBjbTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb3J0aG9mb3RvMzBjbS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5qcGVnJyxcclxuICBibWFwZ2VsYWVuZGU6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcGdlbGFlbmRlL2dyYXUvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5qcGVnJyxcclxuICBibWFwb2JlcmZsYWVjaGU6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcG9iZXJmbGFlY2hlL2dyYXUvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5qcGVnJyxcclxuICBibWFwb3ZlcmxheTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb3ZlcmxheS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VtYXBTb3VyY2VPcHRpb25zIHtcclxuICB2YXJpYW50Pzogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVuaWVuY2Ugc291cmNlIGZvciBiYXNlbWFwLmF0IHJhc3RlciBtYXBzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJhc2VtYXBTb3VyY2UgZXh0ZW5kcyBYWVpTb3VyY2Uge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnNcclxuICAgKiBAcGFyYW0ge2tleW9mIHZhcmlhbnRzfSBbb3B0aW9ucy52YXJpYW50PVwiZ2VvbGFuZGJhc2VtYXBcIl0gQmFzZW1hcCB2YXJpYW50XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IEJhc2VtYXBTb3VyY2VPcHRpb25zKSB7XHJcbiAgICBjb25zdCB2YXJpYW50ID0gb3B0aW9ucz8udmFyaWFudCB8fCAnZ2VvbGFuZGJhc2VtYXAnO1xyXG4gICAgc3VwZXIoe1xyXG4gICAgICB1cmw6IFZBUklBTlRTW3ZhcmlhbnRdLFxyXG4gICAgICBhdHRyaWJ1dGlvbnM6ICdHcnVuZGthcnRlOiA8YSBocmVmPVwiaHR0cHM6Ly9iYXNlbWFwLmF0L1wiPmJhc2VtYXAuYXQ8L2E+JyxcclxuICAgICAgY3Jvc3NPcmlnaW46IFwiQW5vbnltb3VzXCJcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgVGlsZUxheWVyIGZyb20gXCJvbC9sYXllci9UaWxlXCI7XHJcbmltcG9ydCBWaWV3IGZyb20gXCJvbC9WaWV3XCI7XHJcbmltcG9ydCBNYXAgZnJvbSBcIm9sL01hcFwiO1xyXG5pbXBvcnQge1xyXG4gIEF0dHJpYnV0aW9uLFxyXG4gIEJhc2VtYXBTb3VyY2UsXHJcbiAgQm90dG9tUmlnaHQsXHJcbiAgRm9vdGVyLFxyXG4gIEdlb0xvY2F0ZSxcclxuICBMYXllcixcclxuICBNb3VzZVBvc2l0aW9uLFxyXG4gIE92ZXJ2aWV3LFxyXG4gIFByaW50LFxyXG4gIFNjYWxlTGluZSxcclxuICBTaGFyZSxcclxuICBUb29scyxcclxuICBUb3BSaWdodCxcclxuICBVaUludGVyYWN0aW9uLFxyXG4gIFZpZXdMaXN0LFxyXG4gIFpvb21cclxufSBmcm9tIFwiLi4vLi4vLi4vc3JjXCI7XHJcbmltcG9ydCAnLi4vLi4vLi4vc3JjL2luZGV4Q2xpZW50LnNjc3MnO1xyXG5pbXBvcnQge2dldENlbnRlcn0gZnJvbSBcIm9sL2V4dGVudFwiO1xyXG5pbXBvcnQge2RlZmF1bHRzIGFzIGRlZmF1bHRJbnRlcmFjdGlvbnN9IGZyb20gXCJvbC9pbnRlcmFjdGlvblwiO1xyXG5cclxubmV3IE1hcCh7XHJcbiAgdGFyZ2V0OiAnYmdpcy1tYXAnLFxyXG4gIGxheWVyczogW25ldyBUaWxlTGF5ZXIoe1xyXG4gICAgc291cmNlOiBuZXcgQmFzZW1hcFNvdXJjZSgpXHJcbiAgfSldLFxyXG4gIGNvbnRyb2xzOiBbXHJcbiAgICBuZXcgRm9vdGVyKFtcclxuICAgICAgbmV3IFNjYWxlTGluZSgpLFxyXG4gICAgICBuZXcgTW91c2VQb3NpdGlvbigpLFxyXG4gICAgICBuZXcgQXR0cmlidXRpb24oKSxcclxuICAgIF0pLFxyXG4gICAgbmV3IEJvdHRvbVJpZ2h0KHtob3Jpem9udGFsQ29udHJvbHM6XHJcbiAgICAgICAgW25ldyBMYXllcigpLFxyXG4gICAgICAgICAgbmV3IFZpZXdMaXN0KCldLFxyXG4gICAgICB2ZXJ0aWNhbENvbnRyb2xzOiBbbmV3IFByaW50KCksXHJcbiAgICAgICAgbmV3IFNoYXJlKCksIG5ldyBUb29scygpXVxyXG4gICAgfSksXHJcbiAgICBuZXcgVG9wUmlnaHQoW1xyXG4gICAgICBuZXcgR2VvTG9jYXRlKCksXHJcbiAgICAgIG5ldyBab29tKCksXHJcbiAgICBdKSxcclxuICAgIG5ldyBPdmVydmlldygpXHJcbiAgXSxcclxuICBpbnRlcmFjdGlvbnM6IGRlZmF1bHRJbnRlcmFjdGlvbnMoKS5leHRlbmQoWyBuZXcgVWlJbnRlcmFjdGlvbigpXSksXHJcbiAgdmlldzogbmV3IFZpZXcoe1xyXG4gICAgY2VudGVyOiBnZXRDZW50ZXIoWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdKSxcclxuICAgIGNvbnN0cmFpbk9ubHlDZW50ZXI6IHRydWUsXHJcbiAgICBjb25zdHJhaW5SZXNvbHV0aW9uOiBmYWxzZSwgLy8gZGlzY3JldGUgem9vb21sZXZlbHNcclxuICAgIGV4dGVudDogWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdLFxyXG4gICAgbWF4Wm9vbTogMTUsXHJcbiAgICBtaW5ab29tOiA2LFxyXG4gICAgem9vbTogNyxcclxuICB9KVxyXG59KTtcclxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0NvbnRyb2wnO1xyXG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcblxyXG4vKipcclxuICogQSBzaW1wbGUgZm9vdGVyIHtAbGlua2NvZGUgQ29udGFpbmVyfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZvb3RlciBleHRlbmRzIENvbnRhaW5lciB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgVGhlIGNoaWxkIGNvbnRyb2xzIGZvciB0aGUgZm9vdGVyIGNvbnRhaW5lclxyXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgY29udHJvbCBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSwgb3B0aW9ucz86T3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDp7fTtcclxuICAgIHN1cGVyKHsuLi5vcHRzICwgc3R5bGVDbGFzczogJ2JnaXMtZm9vdGVyJywgY2hpbGRDb250cm9sc30pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgT2xNb3VzZVBvc2l0aW9uLCBPcHRpb25zIGFzIE9sTW91c2VQb3NpdGlvbk9wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvTW91c2VQb3NpdGlvbic7XHJcbmltcG9ydCB7Q29vcmRpbmF0ZSwgZm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyB0aGUgbW91c2UgcG9zaXRpb24gaW4gdGhlIG1hcC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb3VzZVBvc2l0aW9uIGV4dGVuZHMgT2xNb3VzZVBvc2l0aW9uIHtcclxuXHJcbi8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgbW91c2UgcG9zaXRpb24gY29udHJvbCB3aXRoIHRoZSBkZmF1bHQgdmFsdWVzLi5cclxuICAgKiBgYGB0eXBlc2NyaXB0XHJcbiAgICogLy8gRXhhbXBsZTogY3JlYXRlIGEgbmV3IE1vdXNlUG9zaXRpb24gY29udHJvbCB3aXRoIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXHJcbiAgICogY29uc3QgbW91c2VQb3NpdGlvbkNvbnRyb2wgPSBuZXcgTW91c2VQb3NpdGlvbigpO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSBvcHRpb25zIEFsbCBvcHRpb25zIG9mIHRoZSBvcmlnaW5hbCBPcGVuTGF5ZXJzIE1vdXNlUG9zaXRpb24gY29udHJvbCBhcmUgYWxvd2VkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBPbE1vdXNlUG9zaXRpb25PcHRpb25zKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcblxyXG4gICAgb3B0cy5wcm9qZWN0aW9uID0gb3B0cy5wcm9qZWN0aW9uID8gb3B0cy5wcm9qZWN0aW9uIDogJ0VQU0c6NDMyNic7XHJcbiAgICBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgPSBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgPyBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgOiAoY29vcmRpbmF0ZTogQ29vcmRpbmF0ZSB8IHVuZGVmaW5lZCkgPT4gY29vcmRpbmF0ZSA/IGZvcm1hdChjb29yZGluYXRlLCAne3h9wrBOL3t5fcKwRScsIDQpIDogJyc7XHJcbiAgICBvcHRzLnVuZGVmaW5lZEhUTUwgPSBvcHRzLnVuZGVmaW5lZEhUTUwgPyBvcHRzLnVuZGVmaW5lZEhUTUwgOiAnJm5ic3A7LSZuYnNwO8KwTi8mbmJzcDstJm5ic3A7wrBFJztcclxuICAgIG9wdHMuY2xhc3NOYW1lID0gb3B0cy5jbGFzc05hbWUgPyBvcHRzLmNsYXNzTmFtZSA6ICdvbC1jb250cm9sIG9sLW1vdXNlLXBvc2l0aW9uIGJnaXMtbW91c2Vwb3NpdGlvbic7XHJcblxyXG4gICAgc3VwZXIob3B0cyk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgT2xBdHRyaWJ1dGlvbiwgT3B0aW9uc30gZnJvbSAnb2wvY29udHJvbC9BdHRyaWJ1dGlvbic7XHJcblxyXG4vKipcclxuICogQSBzaW1wbGUgd3JhcHBlciBjb250cm9sIG9mIHRoZSBPcGVuTGF5ZXIgQXR0cmlidXRpb24gY29udHJvbFxyXG4gKlxyXG4gKiBJdCBpcyBjb2xsYXBzZWQgYW5kIHdlIGFkZCBhIGJnaXMgc3R5bGUgY2xhc3MgKCpiZ2lzLWNvcHlyaWdodCopLlxyXG4gKiBTb21lIHZpc2libGUgY2hhbmdlcyBhcmUgbWFkZSB2aWEgY3NzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0aW9uIGV4dGVuZHMgT2xBdHRyaWJ1dGlvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5sYXllciBBdHRyaWJ1dGlvbiBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE9wdGlvbnMpIHtcclxuXHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7XHJcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcclxuICAgIH07XHJcbiAgICBzdXBlcihvcHRzKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lICs9ICcgYmdpcy1jb3B5cmlnaHQnO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IENvbnRyb2wgZnJvbSBcIm9sL2NvbnRyb2wvQ29udHJvbFwiO1xyXG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcbmltcG9ydCB7VG9nZ2xlQnV0dG9uLCBUb2dnbGVFdmVudH0gZnJvbSBcIi4uL2Jhc2VcIjtcclxuaW1wb3J0IEJhc2VFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcbmltcG9ydCB7T2JqZWN0T25TaWduYXR1cmV9IGZyb20gXCJvbC9PYmplY3RcIjtcclxuaW1wb3J0IHtPblJldHVybn0gZnJvbSBcIm9sL09ic2VydmFibGVcIjtcclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciB0aGUge0BsaW5rY29kZSBCb3R0b21SaWdodH0gY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9wdGlvbnMge1xyXG4gIC8qKiBBbiBhcnJheSBvZiBob3Jpem9udGFsIGNoaWxkIGNvbnRyb2xzICoqL1xyXG4gIGhvcml6b250YWxDb250cm9sczogQ29udHJvbFtdLFxyXG4gIC8qKiBBbiBhcnJheSBvZiB2ZXJ0aWNhbCBjaGlsZCBjb250cm9scyAqKi9cclxuICB2ZXJ0aWNhbENvbnRyb2xzPzogQ29udHJvbFtdXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgZXh0ZW5kZWQgc2lnbmF0dXJlIGZvciB0aGUgb24gbWV0aG9kXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5leHBvcnQgdHlwZSBCb3R0b21SaWdodE9uU2lnbmF0dXJlPFJldHVybj4gPSAoKHR5cGU6IFwidG9nZ2xlXCIgfCBcInRvZ2dsZVwiW10sIGxpc3RlbmVyOiAoZXZlbnQ6IFRvZ2dsZUV2ZW50KSA9PiBhbnkpID0+IFJldHVybikgJiBPYmplY3RPblNpZ25hdHVyZTxSZXR1cm4+O1xyXG5cclxuLyoqXHJcbiAqIEEge0BsaW5rY29kZSBDb250YWluZXJ9IGZvciBkaXBsYXkgb24gdGhlIGJvdHRvbSByaWdodCBjb3JuZXIuXHJcbiAqIFdlIGhhdmUgaG9yaXpvbmF0bCBjb250cm9scyBhbmQgdmVydGljYWwgY29udHJvbHMuIFRoZSB2aXNpYmlsaXR5IG9mIHZlcnRpY2FsXHJcbiAqIGNvbnRyb2xzIGlzIGNvbnRyb2xsZWQgYnkgYSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCb3R0b21SaWdodCBleHRlbmRzIENvbnRhaW5lciB7XHJcblxyXG4gIC8qKiBUaGUge0BsaW5rY29kZSBUb2dnbGVCdXR0b259IHdoaWNoIHRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHZlcnRpY2FsIGNvbnRyb2xzICoqL1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgdG9nZ2xlQnV0dG9uOiBUb2dnbGVCdXR0b24gfCBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cclxuICBwdWJsaWMgb24hOiBCb3R0b21SaWdodE9uU2lnbmF0dXJlPE9uUmV0dXJuPjtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9uc1xyXG4gICAqIEBldmVudCBUb2dnbGVFdmVudCBUaGUgZXZlbnQgZmlyZWQgd2hlbiB0aGUge0BsaW5rY29kZSBUb2dnbGVCdXR0b259IGlzIGNsaWNrZWRcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBPcHRpb25zKSB7XHJcblxyXG4gICAgbGV0IHRvZ2dsZUJ1dHRvbiA9IG51bGw7XHJcbiAgICBpZihvcHRpb25zLnZlcnRpY2FsQ29udHJvbHMgJiYgb3B0aW9ucy52ZXJ0aWNhbENvbnRyb2xzLmxlbmd0aD4wKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRhaW5lclRvVG9nZ2xlID0gbmV3IENvbnRhaW5lcih7IHN0eWxlQ2xhc3M6ICdiZ2lzLWJvdHRvbS1yaWdodC12ZXJ0aWNhbCcsIGNoaWxkQ29udHJvbHM6IG9wdGlvbnMudmVydGljYWxDb250cm9sc30pO1xyXG4gICAgICB0b2dnbGVCdXR0b24gPSBuZXcgVG9nZ2xlQnV0dG9uKHsgY29udGFpbmVyVG9Ub2dnbGUsIGNvbnRhaW5lckNsYXNzTmFtZTogJ29sLWNvbnRyb2wgYmdpcy1jb250cm9sIGJnaXMtYm90dG9tLXJpZ2h0LW92ZXJsYXknLCB1bmljb2RlOiAweGU5MDcsIHVuaWNvZGVUb2dnbGVkOiAweGU5MjQsIHRvb2x0aXA6ICdtZWhyLi4uJyB9KTtcclxuICAgICAgb3B0aW9ucy5ob3Jpem9udGFsQ29udHJvbHMucHVzaCh0b2dnbGVCdXR0b24pO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDp7fTtcclxuICAgIHN1cGVyKHsuLi5vcHRzICwgc3R5bGVDbGFzczogJ2JnaXMtYm90dG9tLXJpZ2h0LWhvcml6b250YWwnLCBjaGlsZENvbnRyb2xzOiBvcHRpb25zLmhvcml6b250YWxDb250cm9scyB9KTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IHRvZ2dsZUJ1dHRvbjtcclxuICAgIGlmKHRoaXMudG9nZ2xlQnV0dG9uIT1udWxsKSB7XHJcbiAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b2dnbGVcIiwgKGV2ZW50KTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50IGFzIEJhc2VFdmVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZ2V0dGVyIGZvciB0aGUge0BsaW5rY29kZSBUb2dnbGVCdXR0b259XHJcbiAgICovXHJcbiAgcHVibGljIGdldFRvZ2dsZUJ1dHRvbigpOiBUb2dnbGVCdXR0b24gfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLnRvZ2dsZUJ1dHRvbjtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7QnV0dG9ufSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCB7QnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vYmFzZS9CdXR0b25cIjtcclxuXHJcbi8qKlxyXG4gKiBBIGRlZmF1bHQgYnV0dG9uIHdpdGggTGF5ZXJzIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBMYXllciBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBCdXR0b25PcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBzdXBlcih7IHVuaWNvZGU6MHhlOTM4LCB0b29sdGlwOiAnQmVnbGVpdGthcnRlbiB2ZXJ3YWx0ZW4nLCAuLi5vcHRzIH0pO1xyXG5cclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7QnV0dG9ufSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCB7QnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vYmFzZS9CdXR0b25cIjtcclxuXHJcblxyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJ2aWV3IGxpc3RcIiBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmlld0xpc3QgZXh0ZW5kcyBCdXR0b24ge1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBidXR0b24gb3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zPzogQnV0dG9uT3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgc3VwZXIoeyB1bmljb2RlOjB4ZTkzNywgdG9vbHRpcDogJ0xpc3RlIGFuemVpZ2VuJywgLi4ub3B0cyB9KTtcclxuXHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge0J1dHRvbn0gZnJvbSBcIi4vYmFzZVwiO1xyXG5pbXBvcnQge0J1dHRvbk9wdGlvbnN9IGZyb20gXCIuL2Jhc2UvQnV0dG9uXCI7XHJcblxyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJwcmludFwiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcmludCBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBCdXR0b25PcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBzdXBlcih7dW5pY29kZTogMHhlOTEyLCB0b29sdGlwOiAnQW5zaWNodCBkcnVja2VuJywgdG9vbHRpcEFzVGV4dEVsZW1lbnQ6IHRydWUsIC4uLm9wdHN9KTtcclxuXHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge0J1dHRvbn0gZnJvbSBcIi4vYmFzZVwiO1xyXG5pbXBvcnQge0J1dHRvbk9wdGlvbnN9IGZyb20gXCIuL2Jhc2UvQnV0dG9uXCI7XHJcblxyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJ0b29sc1wiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb29scyBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBCdXR0b25PcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBzdXBlcih7IHVuaWNvZGU6IDB4ZTkzYiwgdG9vbHRpcDogJ1Rvb2xib3ggZWluYmxlbmRlbicsIHRvb2x0aXBBc1RleHRFbGVtZW50OiB0cnVlLCAuLi5vcHRzIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0NvbnRyb2wnO1xyXG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcblxyXG4vKipcclxuICogQSBzaW1wbGUge0BsaW5rY29kZSBDb250YWluZXJ9IGZvciBjb250cm9scyBvbiB0aGUgdXBwZXIgcmlnaHQgY29ybmVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9wUmlnaHQgZXh0ZW5kcyBDb250YWluZXIge1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIFRoZSBjaGlsZCBjb250cm9sIG9yIGFuIGFycmF5IG9mIGNoaWxkIGNvbnRyb2xzXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5MYXllciBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSwgb3B0aW9ucz86T3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDp7fTtcclxuICAgIHN1cGVyKHsuLi5vcHRzICwgc3R5bGVDbGFzczogJ2JnaXMtdG9wLXJpZ2h0JywgY2hpbGRDb250cm9sc30pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgT2xab29tLCBPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL1pvb20nO1xyXG5cclxuLyoqXHJcbiAqIFpvb20gYnV0dG9ucyBjb250cm9sXHJcbiAqIFRoZSBPcGVuTGF5ZXJzIFpvb20gY29udHJvbCBpcyB0aGUgYmFzZSBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFpvb20gZXh0ZW5kcyBPbFpvb20ge1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBPcGVuTGF5ZXJzIFpvb20gY29udHJvbCBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE9wdGlvbnMpIHtcclxuXHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuXHJcbiAgICBzdXBlcih7Li4ub3B0cyxcclxuICAgICAgem9vbUluTGFiZWw6ICBTdHJpbmcuZnJvbUNvZGVQb2ludCgweGU5MzQpLFxyXG4gICAgICB6b29tT3V0TGFiZWw6IFN0cmluZy5mcm9tQ29kZVBvaW50KDB4ZTkzNSkgfSk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9ICdvbC1jb250cm9sIGJnaXMtY29udHJvbCB6b29tLWNvbnRhaW5lcic7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7TWFwfSBmcm9tICdvbCc7XHJcbmltcG9ydCBJbnRlcmFjdGlvbiwge0ludGVyYWN0aW9uT3B0aW9uc30gZnJvbSAnb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24nO1xyXG5pbXBvcnQge3RvZ2dsZUNsYXNzT25DbGlja30gZnJvbSAnLi4vLi4vdXRpbC9kb20nO1xyXG5pbXBvcnQge3Jlc2l6YWJsZSwgcmVzaXplRGV0YWlsc30gZnJvbSAnLi4vLi4vdXRpbC9zcGxpdHRlcic7XHJcblxyXG4vKipcclxuICogQW4gb3BlbmxheWVyIGludGVyYWN0aW9uIGltcGxlbWVudGF0aW9uIHRvIGF1dG9tYXRpY2FsbHkgc2V0IHNvbWVcclxuICogY2xhc3MgdG9nZ2xlcnMgYW5kIG90aGVyIGV2ZW50IGhhbmRsZXJzLlxyXG4gKiBXZSB1c2UgdGhpcyBmb3Igb3VyIGZ1bGwgZmVhdHVyZSBkZW1vIHRvIHNpbXVsYXRlIGV4dGVybmFsIGZyYW1ld29ya3MgaGFuZGxpbmdcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVaUludGVyYWN0aW9uIGV4dGVuZHMgSW50ZXJhY3Rpb24ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIGRlZmF1bHQgT3BlbkxheWVycyBpbnRlcmFjdGlvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBJbnRlcmFjdGlvbk9wdGlvbnMpIHtcclxuICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIG92ZXJyaWRlbiBzZXRNYXAgbWV0aG9kXHJcbiAgICogQHBhcmFtIG1hcCBhIG1hcCBpbnN0YW5jZVxyXG4gICAqL1xyXG4gIHNldE1hcChtYXA6IE1hcCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChtYXApIHtcclxuICAgICAgICAgICAgLy9zaG93IGFwcCBtZW51XHJcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzT25DbGljayhcIi5iZ2lzIC5iZ2lzLXNlYXJjaCAuYmdpcy1tZW51XCIsIFwiLmJnaXNcIiwgXCJzaG93YXBwbWVudVwiKTtcclxuXHJcbiAgICAgICAgICAgIC8vc2hvdyBzZWFyY2ggZmlsdGVyXHJcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzT25DbGljayhcIi5iZ2lzIC5iZ2lzLXNlYXJjaCAuYmdpcy1zZWFyY2gtc2hvd2ZpbHRlclwiLCBcIi5iZ2lzIC5iZ2lzLXNlYXJjaFwiLCBcIm9wZW5cIik7XHJcblxyXG4gICAgICAgICAgICAvLyBsZWdlbmRcclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NPbkNsaWNrKFtcIi5iZ2lzIC5iZ2lzLWxlZ2VuZCAuYmdpcy1zaG93bGVnZW5kXCIsIFwiLmJnaXMgLmJnaXMtbGVnZW5kIC5iZ2lzLWhpZGVsZWdlbmRcIl0sIFwiLmJnaXMgLmJnaXMtbGVnZW5kXCIsIFwib3BlblwiKTtcclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NPbkNsaWNrKFwiLmJnaXMgLmJnaXMtbGVnZW5kIC5iZ2lzLWxheWVycy10YWJcIiwgXCIuYmdpcyAuYmdpcy1sZWdlbmRcIiwgXCJzaG93aW5mb3NcIik7XHJcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzT25DbGljayhcIi5iZ2lzIC5iZ2lzLWxlZ2VuZCAuYmdpcy1pbmZvcy10YWJcIiwgXCIuYmdpcyAuYmdpcy1sZWdlbmRcIiwgXCJzaG93aW5mb3NcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBzY2hsaWVzc3QgZGllIExpc3RlbmRhcnN0ZWxsdW5nXHJcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzT25DbGljaygnLmJnaXMgLmJnaXMtbGlzdHZpZXcgI2JnaXMtbGlzdHZpZXctY2xvc2UnLCAnLmJnaXMnLCAnc2hvdy1saXN0dmlldycpO1xyXG5cclxuICAgICAgICAgICAgLy8gbWF4aW1pemUgbWFwIGRldGFpbCB2aWV3XHJcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzT25DbGljayhcIi5iZ2lzIC5iZ2lzLW1heC1tYXBcIiwgXCIuYmdpcy1tYXAtYXJlYVwiLCAnbWF4aW1pemVtYXAnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNob3cgYW5kIGhpZGUgdGhlIGhlYWRlclxyXG4gICAgICAgICAgICB0b2dnbGVDbGFzc09uQ2xpY2soW1wiLmJnaXMgLmJnaXMtaGlkZS1oZWFkZXJcIiwgXCIuYmdpcyAuYmdpcy1zaG93LWhlYWRlclwiXSwgXCIuYmdpcy1oZWFkZXJcIiwgJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNob3cgYW5kIGhpZGUgdGhlIHNpZGViYXJcclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NPbkNsaWNrKFtcIi5iZ2lzIC5iZ2lzLWhpZGUtc2lkZWJhclwiLCBcIi5iZ2lzIC5iZ2lzLXNob3ctc2lkZWJhclwiXSwgXCIuYmdpcy1zaWRlYmFyXCIsIFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NPbkNsaWNrKFtcIi5iZ2lzIC5iZ2lzLWhpZGUtc2lkZWJhclwiLCBcIi5iZ2lzIC5iZ2lzLXNob3ctc2lkZWJhclwiXSwgXCIuYmdpcy1zaWRlYmFyXCIsIFwic2hvdy1kZXRhaWxcIik7XHJcblxyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHZpZXdwb3J0IHJlcmVuZGVyaW5nIG9uIHRvZ2dsZSBoZWFkZXJcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iZ2lzLWhpZGUtaGVhZGVyXCIpPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge3dpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpfSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmdpcy1zaG93LWhlYWRlclwiKT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3Jlc2l6ZScpKX0pO1xyXG5cclxuICAgICAgICAgICAgLy8gc2hvdyBhbmQgaGlkZSB0aGUgcXVpY2tsaW5rc1xyXG4gICAgICAgICAgICB0b2dnbGVDbGFzc09uQ2xpY2soXCIuYmdpcyAuYmdpcy1xdWlja2xpbmsgLmJnaXMtcXVpY2tsaW5rLWNsb3NlXCIsIFwiLmJnaXMtcXVpY2tsaW5rXCIsIFwiaGlkZVwiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlc2l6ZXJcclxuICAgICAgICAgICAgY29uc3QgbGlzdFZpZXdTcGxpdHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmdpcy1saXN0dmlldy1zcGxpdHRlclwiKTtcclxuICAgICAgICAgICAgaWYgKGxpc3RWaWV3U3BsaXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJlc2l6YWJsZShsaXN0Vmlld1NwbGl0dGVyLCAnaG9yaXpvbnRhbCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbFNwbGl0dGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iZ2lzLWRldGFpbC1zcGxpdHRlclwiKTtcclxuICAgICAgICAgICAgaWYgKGRldGFpbFNwbGl0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXNpemVEZXRhaWxzKGRldGFpbFNwbGl0dGVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUT0RPIHVucmVnaXN0ZXJcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VwZXIuc2V0TWFwKG1hcCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn1cclxuXHJcbiIsIi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcmVzaXplclxyXG4gKiBAcGFyYW0gZGlyZWN0aW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzaXphYmxlIChyZXNpemVyOiBFbGVtZW50LCBkaXJlY3Rpb246IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgbmV4dFNpYmxpbmcgPSByZXNpemVyLm5leHRFbGVtZW50U2libGluZztcclxuXHJcbiAgICBpZiAobmV4dFNpYmxpbmcgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiByZXNpemVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgLy8gVGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgbW91c2VcclxuICAgICAgICBsZXQgeCA9IDA7XHJcbiAgICAgICAgbGV0IHkgPSAwO1xyXG5cclxuICAgICAgICBsZXQgbmV4dFNpYmxpbmdIZWlnaHQgPSAwO1xyXG4gICAgICAgIGxldCBuZXh0U2libGluZ1dpZHRoID0gMDtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIHRoZSBtb3VzZWRvd24gZXZlbnRcclxuICAgICAgICAvLyB0aGF0J3MgdHJpZ2dlcmVkIHdoZW4gdXNlciBkcmFncyB0aGUgcmVzaXplclxyXG4gICAgICAgIGNvbnN0IG1vdXNlRG93bkhhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgbW91c2UgcG9zaXRpb25cclxuICAgICAgICAgICAgeCA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgeSA9IGUuY2xpZW50WTtcclxuICAgICAgICAgICAgY29uc3QgcmVjdE5leHQgPSBuZXh0U2libGluZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgbmV4dFNpYmxpbmdIZWlnaHQgPSByZWN0TmV4dC5oZWlnaHQ7XHJcbiAgICAgICAgICAgIG5leHRTaWJsaW5nV2lkdGggPSByZWN0TmV4dC53aWR0aDtcclxuXHJcbiAgICAgICAgICAgIC8qIFNldCB0aGUgd2lkdGggb2YgdGhlIG5leHRTaWJsaW5nIHRvIGl0cyBhY3R1YWwgc2l6ZSAqL1xyXG4gICAgICAgICAgICBuZXh0U2libGluZy5zdHlsZS5mbGV4ID0gYDAgMSBhdXRvYDtcclxuICAgICAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcclxuICAgICAgICAgICAgICAgICAgICBuZXh0U2libGluZy5zdHlsZS5oZWlnaHQgPSBgJHtuZXh0U2libGluZ0hlaWdodH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdob3Jpem9udGFsJzpcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFNpYmxpbmcuc3R5bGUud2lkdGggPSBgJHtuZXh0U2libGluZ1dpZHRofXB4YDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBdHRhY2ggdGhlIGxpc3RlbmVycyB0byBgZG9jdW1lbnRgXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlTW92ZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgbW91c2VVcEhhbmRsZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1vdXNlTW92ZUhhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBIb3cgZmFyIHRoZSBtb3VzZSBoYXMgYmVlbiBtb3ZlZFxyXG4gICAgICAgICAgICBjb25zdCBkeCA9IGUuY2xpZW50WCAtIHg7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gZS5jbGllbnRZIC0geTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd2ZXJ0aWNhbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFNpYmxpbmcuc3R5bGUuaGVpZ2h0ID0gYCR7bmV4dFNpYmxpbmdIZWlnaHQgLSBkeX1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdob3Jpem9udGFsJzpcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFNpYmxpbmcuc3R5bGUud2lkdGggPSBgJHtuZXh0U2libGluZ1dpZHRoIC0gZHh9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1vdXNlVXBIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXBIYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBBdHRhY2ggdGhlIGhhbmRsZXJcclxuICAgICAgICByZXNpemVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlRG93bkhhbmRsZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInVuYWJsZSB0byBhZGQgcmVzaXplclwiKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSByZXNpemVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzaXplRGV0YWlscyAocmVzaXplcjogRWxlbWVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgcGFyZW50ID0gcmVzaXplci5wYXJlbnRFbGVtZW50O1xyXG4gICAgY29uc3Qgc2lkZWJhciA9IHBhcmVudD8ucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgcmVzaXplciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcblxyXG4gICAgICAgIC8vIFRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIG1vdXNlXHJcbiAgICAgICAgbGV0IHkgPSAwO1xyXG5cclxuICAgICAgICBsZXQgcGFyZW50SGVpZ2h0ID0gMDtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIHRoZSBtb3VzZWRvd24gZXZlbnRcclxuICAgICAgICAvLyB0aGF0J3MgdHJpZ2dlcmVkIHdoZW4gdXNlciBkcmFncyB0aGUgcmVzaXplclxyXG4gICAgICAgIGNvbnN0IG1vdXNlRG93bkhhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgbW91c2UgcG9zaXRpb25cclxuICAgICAgICAgICAgeSA9IGUuY2xpZW50WTtcclxuICAgICAgICAgICAgY29uc3QgcmVjdE5leHQgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHBhcmVudEhlaWdodCA9IHJlY3ROZXh0LmhlaWdodDtcclxuICAgICAgICAgICAgLyogU2V0IHRoZSB3aWR0aCBvZiB0aGUgbmV4dFNpYmxpbmcgdG8gaXN0IGFjdHVhbHMgc2l6ZSAqL1xyXG4gICAgICAgICAgICBwYXJlbnQuc3R5bGUuZmxleCA9IGAwIDEgYXV0b2A7XHJcbiAgICAgICAgICAgIHBhcmVudC5zdHlsZS5oZWlnaHQgPSBgJHtwYXJlbnRIZWlnaHR9cHhgO1xyXG5cclxuICAgICAgICAgICAgLy8gQXR0YWNoIHRoZSBsaXN0ZW5lcnMgdG8gYGRvY3VtZW50YFxyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXBIYW5kbGVyKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIG1vdXNlVXBIYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBtb3VzZU1vdmVIYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgLy8gSG93IGZhciB0aGUgbW91c2UgaGFzIGJlZW4gbW92ZWRcclxuICAgICAgICAgICAgY29uc3QgZHkgPSBlLmNsaWVudFkgLSB5O1xyXG4gICAgICAgICAgICBwYXJlbnQuc3R5bGUuaGVpZ2h0ID0gYCR7cGFyZW50SGVpZ2h0IC0gZHl9cHhgO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNpZGViYXIpIHtcclxuICAgICAgICAgICAgICAgIGlmKHBhcmVudEhlaWdodCAtIGR5ID4gcGFyZW50Lm9mZnNldEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LmFkZCgnbWF4Jyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZSgnbWF4Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1vdXNlVXBIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXBIYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBBdHRhY2ggdGhlIGhhbmRsZXJcclxuICAgICAgICByZXNpemVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlRG93bkhhbmRsZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInVuYWJsZSB0byBhZGQgcmVzaXplRGV0YWlsc1wiKTtcclxuICAgIH1cclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==